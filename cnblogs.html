<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:slash="http://purl.org/rss/1.0/modules/slash/"><channel><title>博客园-涵曦的技术博客 - 博客园</title><link>http://www.cnblogs.com/hanxi/</link><description>专注技术 - 技术乐园</description><language>zh-cn</language><lastBuildDate>Thu, 25 Feb 2021 10:00:25 GMT</lastBuildDate><pubDate>Thu, 25 Feb 2021 10:00:25 GMT</pubDate><ttl>60</ttl><item><title>使用cocos2d-x v3.1开发小游戏（基本框架）</title><link>http://www.cnblogs.com/hanxi/archive/2014/07/16/3848029.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 16 Jul 2014 02:07:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2014/07/16/3848029.html</guid><description><![CDATA[<h2>小游戏的组成</h2>
<ul>
<li>
<h3>欢迎界面</h3>
</li>
</ul>
<blockquote>
<p>在游戏资源未全部加载完之前就需要载入，避免进入游戏会有一段黑屏时间。</p>
<p>可以用来展示游戏名称或者开发者logo。</p>
</blockquote>
<ul>
<li>
<h3>开始菜单界面</h3>
</li>
</ul>
<blockquote>
<p>一般用于显示游戏名称和关卡选择（或者称游戏难度选择）。</p>
<p>可以外加一些设置性功能，如声音开关，帮助入口等等。</p>
<p>如果游戏设置内容较多可以把设置作为一个单独界面，在开始菜单上提供入口即可。</p>
<p>有的小游戏是以弹窗方式的菜单</p>
</blockquote>
<ul>
<li>
<h3>主游戏界面</h3>
</li>
</ul>
<blockquote>
<p>游戏的中心部分，比如2048游戏的格子滑动界面，扫雷游戏的扫雷界面，贪吃蛇游戏的蛇移动的界面，等等。</p>
<p>小游戏拥有这一个界面也能算一个小游戏，但是没有其他界面会使游戏缺少更多选择。</p>
<p>游戏的主要逻辑都是在完成这个界面。</p>
</blockquote>
<ul>
<li>
<h3>游戏结束界面</h3>
</li>
</ul>
<blockquote>
<p>游戏结束一般都会有个分数，用于展示本次游戏得分和历史最高得分对比。</p>
<p>在这个界面上可以添加再玩一次的按钮，让玩家重新玩一次。</p>
<p>大多数小游戏都是以弹窗的方式展示游戏结果。</p>
</blockquote>
<ul>
<li>
<h3>排行榜界面 （可选）</h3>
</li>
</ul>
<blockquote>
<p>游戏中有分数这个概念就会有排名。</p>
<p>可以是单机的排行榜，也可以是联机的排行榜（需要服务器保存数据）。</p>
<p>排行榜可以促进玩家拿到更高的分数（也是有缺点的，看到其他玩家玩的分数太高了而放弃了）。</p>
</blockquote>
<h2>cocos2d-x v3.1 lua 框架的使用</h2>
<ul>
<li>
<h3>lua代码结构</h3>
</li>
</ul>
<div class="cnblogs_code">
<pre><span style="color: #000000;">src
├── conf.lua                  # 配置文件，一些不变的配置保存在这里
├── GameOverScene.lua         # 游戏结束的界面
├── GameScene.lua             # 游戏主逻辑界面
├── HelloScene.lua            # 欢迎界面，在这里做资源更新检测
├── main.lua                  # 游戏lua脚本的入口
├── MainMenuScene.lua         # 游戏主菜单界面
├── RankScene.lua             # 排行榜界面
└── util.lua                  # 通用功能函数实现</span></pre>
</div>
<p>&nbsp;</p>
<pre class="prettyprint prettyprinted"><span style="font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5;">每个XXOOScene.lua 文件的样子如下：</span></pre>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">local</span> XXOOScene =<span style="color: #000000;"> {}

XXOOScene.newScene </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;"> ()
    </span><span style="color: #0000ff;">local</span> scene =<span style="color: #000000;"> cc.Scene:create()
    </span><span style="color: #008000;">--</span><span style="color: #008000;"> do other XXOO things</span>
    <span style="color: #0000ff;">return</span><span style="color: #000000;"> scene
</span><span style="color: #0000ff;">end</span>

<span style="color: #0000ff;">return</span> XXOOScene</pre>
</div>
<p>&nbsp;</p>
<pre class="prettyprint lang-lua prettyprinted"><span style="font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5;">关于Scene界面跳转，在util中封装一个通用函数用于界面跳转。</span></pre>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">function</span><span style="color: #000000;"> util.toScene(scene)
    </span><span style="color: #008000;">--</span><span style="color: #008000;"> 增加一个统一的界面跳转动画</span>
    scene = cc.TransitionSlideInR:create(<span style="color: #800080;">0.5</span><span style="color: #000000;">, scene)
    </span><span style="color: #0000ff;">if</span> cc.Director:getInstance():getRunningScene() <span style="color: #0000ff;">then</span><span style="color: #000000;">
        cc.Director:getInstance():replaceScene(scene)
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        cc.Director:getInstance():runWithScene(scene)
    </span><span style="color: #0000ff;">end</span>
<span style="color: #0000ff;">end</span></pre>
</div>
<p>&nbsp;</p>
<pre class="prettyprint lang-lua prettyprinted"><span style="font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5;">main.lua用户进入HelloScene界面</span></pre>
<ul>
<li>
<div class="cnblogs_code">
<pre>HelloScene = <span style="color: #ff00ff;">require</span>(<span style="color: #800000;">"</span><span style="color: #800000;">src/HelloScene</span><span style="color: #800000;">"</span><span style="color: #000000;">)
 
</span><span style="color: #0000ff;">local</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> main()
    cc.FileUtils:getInstance():addSearchResolutionsOrder(</span><span style="color: #800000;">"</span><span style="color: #800000;">src</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    cc.FileUtils:getInstance():addSearchResolutionsOrder(</span><span style="color: #800000;">"</span><span style="color: #800000;">res</span><span style="color: #800000;">"</span><span style="color: #000000;">)
 
    HelloScene.newScene()
</span><span style="color: #0000ff;">end</span>
 
 
<span style="color: #0000ff;">local</span> status, msg = <span style="color: #ff00ff;">xpcall</span><span style="color: #000000;">(main, __G__TRACKBACK__)
</span><span style="color: #0000ff;">if</span> <span style="color: #0000ff;">not</span> status <span style="color: #0000ff;">then</span>
    <span style="color: #ff00ff;">error</span><span style="color: #000000;">(msg)
</span><span style="color: #0000ff;">end</span></pre>
</div>
<p>&nbsp;</p>
<h3>游戏启动logo的Scene特殊处理</h3>
</li>
</ul>
<blockquote>
<p>因为加载lua资源需要时间，待所有资源都加载完再创建游戏启动界面会出现启动的时候黑屏。我在1G的安卓机上测试需要5秒才能进入到lua创建的Scene。</p>
<p>解决方案：在 C++ 中创建启动画面,HelloScene.lua中不做创建Scene的操作，直接getRunningScene。</p>
</blockquote>
<ul>
<li>
<div class="cnblogs_code">
<pre><span style="color: #000000;">AppDelegate::applicationDidFinishLaunching () {

    </span><span style="color: #008000;">//</span><span style="color: #008000;"> ... other xxoo things</span>
<span style="color: #000000;">
    auto scene </span>=<span style="color: #000000;"> Scene::create();
    auto s </span>= Director::getInstance()-&gt;<span style="color: #000000;">getWinSize();
    auto layer </span>= LayerColor::create(Color4B(<span style="color: #800080;">255</span>, <span style="color: #800080;">255</span>, <span style="color: #800080;">255</span>, <span style="color: #800080;">255</span><span style="color: #000000;">), s.width, s.height);
    auto logo </span>= Sprite::create(<span style="color: #800000;">"</span><span style="color: #800000;">res/logo.png</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    layer</span>-&gt;<span style="color: #000000;">addChild(logo);
    logo</span>-&gt;setPosition(Vec2(s.width*<span style="color: #800080;">0.5</span>,s.height*<span style="color: #800080;">0.7</span><span style="color: #000000;">));
    scene</span>-&gt;addChild(layer,<span style="color: #800080;">0</span><span style="color: #000000;">);
    director</span>-&gt;<span style="color: #000000;">runWithScene(scene);
 
    </span><span style="color: #008000;">//</span><span style="color: #008000;"> 特殊处理，延迟加载lua（创建好logoScene再加载）</span>
    auto action =<span style="color: #000000;"> CallFunc::create(startLua);
    layer</span>-&gt;<span style="color: #000000;">runAction(action);

    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
}</span></pre>
</div>
<p>&nbsp;</p>
<h3>cocos2d-x v3.1 引擎的精简</h3>
</li>
</ul>
<blockquote>
<p>起因： 引擎编译完之后发现lib文件相比2.x版本的大了不少。由于是做小游戏，一般都会有用不到的引擎部分，比我我就没用到ui编辑器，所以就想办法不编译ui编辑器部分。</p>
<p>步骤：</p>
<ul>
<li>
<p>找到mk文件: $ find . -name "Android.mk"</p>
</li>
<li>
<p>修改mk文件，把与ui编辑器相关的语句注释掉。</p>
</li>
<li>
<p>编译，在编译错误提示中找出还有什么需要注释的代码。我遇到的问题主要是CCB那些。需要在lua_cocos2dx_extension_manual.cpp中把CCB的代码注释。</p>
</li>
<li>
<p>CCLuaStack.cpp中也需要注释几个注册函数。</p>
</li>
</ul>
<p>我还精简了物理引擎，刚开始是用到了的，但后面看小游戏用不上就把它也干掉了（大概省下1M）。</p>
</blockquote>
<ul>
<li>
<h3>cocos/scripting/lua-bindings/auto/ 下的文件生成</h3>
</li>
</ul>
<blockquote>
<p>看README后执行生成命令，遇到了一些问题：</p>
<ul>
<li>
<h4>问题1：官方只提供ubuntu 64位的libclang.so文件，在32位机子上跑会报下面这个错误</h4>
</li>
</ul>
<blockquote>
<ul>
<li>
<p>LibclangError: libclang.so: wrong ELF class: ELFCLASS64. To provide a path to libclang use Config.set_library_path() or Config.set_library_file().</p>
</li>
<li>
<p>解决方法：在llvm官网下载4.3版本的llvm和clang。编译生成libclang.so.3.4。拷贝到bindings-generator/libclang/下覆盖libclang.so文件。怎么编译的那个博客现在找不到了，步骤大概是：</p>
</li>
<li>
<p>clang-3.4.src.tar.gz 和 llvm-3.4.src.tar.gz 。解压，然后把clang目录拷贝到llvm-3.4/tools/下。编译，在llvm-3.4同一个目录下建一个build文件夹，进入到build，执行cmake ../llvm-3.4/CMakeLists.txt</p>
</li>
</ul>
</blockquote>
<p>文字描述可能不清晰，目录结构如下：</p>
<p>&nbsp;</p>
<pre class="prettyprint prettyprinted"><span class="pun">.<span class="pln"> <span class="pun">-&gt;<span class="pln"> build
<span class="pun">|<span class="pln"> <span class="pun">-&gt;<span class="pln">llvm<span class="pun">-<span class="lit">3.4<span class="pln">  <span class="pun">-&gt;<span class="pln"> tools <span class="pun">-&gt;<span class="pln"> clang <span class="pun">-&gt;<span class="pln"> <span class="typ">CMakeLists<span class="pun">.<span class="pln">txt
             <span class="pun">|-&gt;<span class="pln"> <span class="typ">CMakeLists<span class="pun">.<span class="pln">txt</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
<p>&nbsp;</p>
<ul>
<li>
<h4>问题2： 找不到头文件，报错出现unkown type name ，原因是官方配置的android_headers路径和我电脑上的不一样，主要是gcc的版本，我的是4.8的，官方配置是4.7。如下：</h4>
</li>
</ul>
<blockquote>
<ul>
<li>
<p>details = "unknown type name '__locale_t'"</p>
</li>
<li>
<p>解决方法：修改cocos2dx.ini中的android_headers 的值把/cxx-stl/gnu-libstdc++/4.7/ 改成/cxx-stl/gnu-libstdc++/4.8/ 。有两个地方要修改。这个问题要看自己的安卓ndk的配置情况，也许你的还是4.6呢，自己可以去ndk对应的路径下找找看自己的ndk版本。</p>
</li>
</ul>
</blockquote>
</blockquote>
<h2>全民顶爆菊花</h2>
<blockquote>
<p>应用宝：<a href="http://android.myapp.com/myapp/detail.htm?apkName=com.hanxi.runtodie" target="_blank">http://android.myapp.com/myapp/detail.htm?apkName=com.hanxi.runtodie</a></p>
<p>百度手机助手：<a href="http://as.baidu.com/a/item?docid=6678809" target="_blank">http://as.baidu.com/a/item?docid=6678809</a></p>
<p>豌豆荚：<a href="http://www.wandoujia.com/apps/com.hanxi.runtodie" target="_blank">http://www.wandoujia.com/apps/com.hanxi.runtodie</a></p>
<p>代码地址：<a href="https://github.com/hanxi/cocos2d-x-v3.1" target="_blank">https://github.com/hanxi/cocos2d-x-v3.1</a></p>
<p>【加几张游戏效果图】</p>
<p><img src="http://images.cnitblog.com/i/198486/201407/161427179907034.jpg" alt="" /><img src="http://images.cnitblog.com/i/198486/201407/161427297714268.jpg" alt="" /></p>
<p><img src="http://images.cnitblog.com/i/198486/201407/161427399747017.jpg" alt="" /><img src="http://images.cnitblog.com/i/198486/201407/161427481469354.jpg" alt="" /></p>
</blockquote>]]></description></item><item><title>常用工具</title><link>http://www.cnblogs.com/hanxi/archive/2014/06/14/3788437.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 14 Jun 2014 09:17:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2014/06/14/3788437.html</guid><description><![CDATA[<p>常用工具</p>
<script type="text/javascript" src="http://files.cnblogs.com/hanxi/unixtime.js"></script>
<script type="text/javascript" src="http://files.cnblogs.com/hanxi/caculate.js"></script>
<div class="wrap">
<div class="main">
<div class="box">
<div id="b_1">
<h2>Unix时间戳(Unix timestamp)转换工具</h2>
<div class="box1" style="text-align: left; padding-left: 75px; padding-top: 30px; /* height: 692px;">
<div style="color: #006aad; font-size: 14px;">现在的Unix时间戳(Unix timestamp)是&nbsp;&nbsp;&nbsp; <span id="currentunixtime" class="utspan"> 1394428771 </span> &nbsp; <a onclick="startTimer();" href="#"> <img src="http://files.cnblogs.com/hanxi/kaishi.gif" alt="开始" width="16" height="16" /> </a> &nbsp; <a onclick="stopTimer();" href="#"> <img src="http://files.cnblogs.com/hanxi/tingzhi.gif" alt="停止" width="16" height="16" /> </a> &nbsp; <a onclick="currentTime();" href="#"> <img src="http://files.cnblogs.com/hanxi/shuaxin.gif" alt="刷新" width="16" height="16" /> </a> &nbsp;</div>
<div class="info1">
<div class="utdiv">Unix时间戳(Unix timestamp) &rarr; 北京时间</div>
<form action="" name="unix2beijing"><span style="color: black;"> Unix时间戳(Unix timestamp) </span> <input id="firstTimestamp" class="input" type="text" name="timestamp" size="30" /> <input class="but2" onclick="unix2human();" type="button" value="转换" /> <span style="color: black;"> 北京时间 </span> <input class="input" type="text" name="result" readonly="readonly" size="30" /></form>
<div class="utdiv">北京时间 &rarr; Unix时间戳(Unix timestamp)</div>
<form action="" name="beijing2unix"><span style="color: black;">北京时间</span> <input class="input" type="text" name="year" size="2" maxlength="4" /> 年 <input class="input" type="text" name="month" size="1" maxlength="2" /> 月 <input class="input" type="text" name="day" size="1" maxlength="2" /> 日 <input class="input" type="text" name="hour" size="1" maxlength="2" /> 时 <input class="input" type="text" name="minute" size="1" maxlength="2" /> 分 <input class="input" type="text" name="second" size="1" maxlength="2" /> 秒 <input class="but2" onclick="human2unix();" type="button" value="转换" /> <span style="color: black;">Unix时间戳</span> <input class="input" type="text" name="result" readonly="readonly" size="25" /></form></div>
</div>
</div>
<div class="box1" style="text-align: left; padding-left: 75px; padding-top: 30px; padding-bottom: 30px;">
<div class="utdiv">表达式计算器</div>
<span style="color: black;">表达式</span> <input id="txtExpression" class="input" type="text" name="timestamp" size="60" /> <input id="btnSubit" class="but2" onclick="calc()" type="button" value="计算" /> <span style="color: black;">计算结果</span> <input id="txtResult" class="input" type="text" readonly="readonly" size="28" /></div>
</div>
</div>
<div><img id="gotop" style="right: 293px; display: none;" onclick="javascript:scroll(0,0);" src="http://files.cnblogs.com/hanxi/gotop.gif" alt="" /></div>
</div>
<script type="text/javascript">// <![CDATA[
        currentTime();
        var timeNow = new Date();
        document.getElementById("firstTimestamp").value = Math.round(timeNow.getTime() / 1000);
    
// ]]&gt;</script>]]></description></item><item><title>遇到一次安卓编译错误问题</title><link>http://www.cnblogs.com/hanxi/archive/2013/12/26/3492637.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 26 Dec 2013 08:24:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2013/12/26/3492637.html</guid><description><![CDATA[<p>error: No resource identifier found for attribute 'hardwareAccelerated' in package 'android'</p>
<p>&nbsp;</p>
<p>解决方案：AndroidManifest.xml中把hardwareAccelerated有关的那个标记删除掉。我的是android:hardwareAccelerated='true'</p>]]></description></item><item><title>lua中常量的实现及表的深拷贝实现</title><link>http://www.cnblogs.com/hanxi/archive/2013/09/28/3344906.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 28 Sep 2013 15:18:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2013/09/28/3344906.html</guid><description><![CDATA[<p><em>废话：好久没在这里写博客了。。。主要原因是我买了个域名<a href="http://www.hanxi.info" target="_blank">hanxi.info</a>并在github上搭建了个人博客。。。</em></p>
<p>&nbsp;</p>
<p>　　lua中默认是没有c中的const常量的，在csdn上找到了一个使用<span style="font: 15px/18px Consolas, 'Courier New', Courier, mono, serif; text-align: left; color: #000000; text-transform: none; text-indent: 0px; letter-spacing: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; orphans: 2; widows: 2; font-size-adjust: none; font-stretch: normal; background-color: #ffffff; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">setmetatable。参考</span><a href="http://blog.csdn.net/xiaodan007/article/details/6668015">http://blog.csdn.net/xiaodan007/article/details/6668015</a>。主要原理就是重载__index方法（相当于get方法）和__newindex方法（相当于set方法）。但是他实现的是不支持表中有表的情况的。</p>
<p>下面是我修改后的代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">function</span> newConst( const_table )    <span style="color: #008000;">--</span><span style="color: #008000;">生成常量表功能</span>
<span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">function</span><span style="color: #000000;"> Const( const_table )
</span><span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">local</span> mt =
<span style="color: #008080;"> 4</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 5</span>             __index = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (t,k)
</span><span style="color: #008080;"> 6              </span>   <span style="color: #0000ff;">if</span> <span style="color: #ff00ff;">type</span>(const_table[k])==<span style="color: #800000;">"</span><span style="color: #800000;">table</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 7                    </span> const_table[k] =<span style="color: #000000;"> newConst(const_table[k])
</span><span style="color: #008080;"> 8</span>                 <span style="color: #0000ff;">end</span>
<span style="color: #008080;"> 9</span>                 <span style="color: #0000ff;">return</span><span style="color: #000000;"> const_table[k]
</span><span style="color: #008080;">10</span>             <span style="color: #0000ff;">end</span><span style="color: #000000;">,
</span><span style="color: #008080;">11</span>             __newindex = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (t,k,v)
</span><span style="color: #008080;">12</span>                 <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">*can't update </span><span style="color: #800000;">"</span> .. <span style="color: #ff00ff;">tostring</span>(const_table) ..<span style="color: #800000;">"</span><span style="color: #800000;">[</span><span style="color: #800000;">"</span> .. <span style="color: #ff00ff;">tostring</span>(k) ..<span style="color: #800000;">"</span><span style="color: #800000;">] = </span><span style="color: #800000;">"</span> .. <span style="color: #ff00ff;">tostring</span><span style="color: #000000;">(v))
</span><span style="color: #008080;">13</span>             <span style="color: #0000ff;">end</span>
<span style="color: #008080;">14</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> mt
</span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">end</span>
<span style="color: #008080;">17</span> 
<span style="color: #008080;">18</span>     <span style="color: #0000ff;">local</span> t =<span style="color: #000000;"> {}
</span><span style="color: #008080;">19</span>     <span style="color: #ff00ff;">setmetatable</span><span style="color: #000000;">(t, Const(const_table))
</span><span style="color: #008080;">20</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> t
</span><span style="color: #008080;">21</span> <span style="color: #0000ff;">end</span>
<span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span> quan = {a = {[<span style="color: #800080;">1</span>]={<span style="color: #800080;">2</span><span style="color: #000000;">}}}
</span><span style="color: #008080;">24</span> quan.b =<span style="color: #000000;"> quan
</span><span style="color: #008080;">25</span> t =<span style="color: #000000;"> newConst(quan)
</span><span style="color: #008080;">26</span> <span style="color: #008000;">--</span><span style="color: #008000;">t.b = 4</span>
<span style="color: #008080;">27</span> <span style="color: #ff00ff;">print</span>(<span style="color: #ff00ff;">type</span><span style="color: #000000;">(t))
</span><span style="color: #008080;">28</span> <span style="color: #ff00ff;">print</span><span style="color: #000000;">(quan.b)
</span><span style="color: #008080;">29</span> 
<span style="color: #008080;">30</span> 
<span style="color: #008080;">31</span> <span style="color: #0000ff;">for</span> k,v <span style="color: #0000ff;">in</span> <span style="color: #ff00ff;">pairs</span>(quan) <span style="color: #0000ff;">do</span>
<span style="color: #008080;">32</span> <span style="color: #ff00ff;">print</span><span style="color: #000000;">(k,v)
</span><span style="color: #008080;">33</span> <span style="color: #0000ff;">end</span></pre>
</div>
<p>　　我也就是添加了6,7,8三行代码（刚开始想了半天以为递归了，结果思索了下，不是递归，只是函数的实现形式，调用newConst的次数就是读取表的深度，有环的表也不会出现问题的）。__index函数（看参数可以知道取元素t[k]）拿到表的元素,如果元素是表则先将表常量化。__newindex函数（看参数可以知道写元素t[k]=v）是给元素赋值，这里不让它实现赋值操作，直接打印错误提示。</p>
<p>　　为什么要实现这个常量功能，因为现在的手游项目中使用了lua表存放数值策划表，往往程序写代码时会直接去读取静态数据表，万一不小心把表元素赋值了，那就是把静态数据改了，会导致游戏数据错误的。实现了这个lua常量就不会出现静态数据表被修改了。</p>
<p>　　但是如果需要复制一份静态数据，然后作为临时数据在游戏逻辑中处理（一个同事就这么用过。。。），把静态数据经过了常量处理就再也不能被修改了，不常量化也不行，中途被修改了就再也还原不了静态数据了。因此就需要实现lua表的深拷贝功能了（默然的表与表之间赋值只是简单的别名而已）。先说下思路吧，实现的效果是：</p>
<p>local B = deepcopy(A,n)</p>
<p>　　把A拷贝给B，n为拷贝深度。如果n为nil时那就是说要拷贝到底了，这又出现了中有环的问题了，不考虑环的问题可以很简单的递归实现，递归结束标识就是判断n的值。代码就先不写了，晚了洗洗睡吧。下次有时间会贴代码的。。。</p>
<p>　　网上关于深拷贝表的资料很少。总共在下面几个网站上找到了答案。</p>
<p>http://blog.sina.com.cn/s/blog_49bdd36d0100fdc1.html（集合了带环的table和不带环的table的解决方案）</p>
<p>http://www.coronafaqs.com/how-do-i-copy-a-complex-table-in-lua/（就是上面那个带坏的table的解决方案）</p>
<p>http://lua-users.org/wiki/CopyTable（不带环的table的解决方案，还有一个浅拷贝实现）</p>
<p>https://gist.github.com/Deco/3985043 （牛逼的解决方案，非递归实现，能够处理带环的table）</p>
<p>　　先给上递归式的代码吧。</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> table.deepcopy(object)
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">local</span> lookup_table =<span style="color: #000000;"> {}
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">local</span> <span style="color: #0000ff;">function</span> <span style="color: #008080;">_copy</span><span style="color: #000000;">(object)
</span><span style="color: #008080;"> 4</span>         <span style="color: #0000ff;">if</span> <span style="color: #ff00ff;">type</span>(object) ~= <span style="color: #800000;">"</span><span style="color: #800000;">table</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 5</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> object
</span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">elseif</span> lookup_table[object] <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 7</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> lookup_table[object]
</span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">end</span>
<span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">local</span> new_table =<span style="color: #000000;"> {}
</span><span style="color: #008080;">10</span>         lookup_table[object] =<span style="color: #000000;"> new_table
</span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">for</span> index, value <span style="color: #0000ff;">in</span> <span style="color: #ff00ff;">pairs</span>(object) <span style="color: #0000ff;">do</span>
<span style="color: #008080;">12</span>             new_table[<span style="color: #008080;">_copy</span>(index)] = <span style="color: #008080;">_copy</span><span style="color: #000000;">(value)
</span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">end</span>
<span style="color: #008080;">14</span>         <span style="color: #0000ff;">return</span> <span style="color: #ff00ff;">setmetatable</span>(new_table, <span style="color: #ff00ff;">getmetatable</span><span style="color: #000000;">(object))
</span><span style="color: #008080;">15</span>     <span style="color: #0000ff;">end</span>
<span style="color: #008080;">16</span>     <span style="color: #0000ff;">return</span> <span style="color: #008080;">_copy</span><span style="color: #000000;">(object)
</span><span style="color: #008080;">17</span> <span style="color: #0000ff;">end</span></pre>
</div>
<p>为啥带环的table用这个函数不会无限递归呢？关键之处在于lookup_table，它记录了所有遍历过的table的副本（新的深拷贝的table），如果出现遍历过的直接返回那个副本。第12行为何有两个_copy，这里用的很巧妙，举个例子吧。</p>
<p class="p1">t = {</p>
<p class="p1">&nbsp; &nbsp; a = <span class="s1">1</span>,</p>
<p class="p1">&nbsp; &nbsp; b = <span class="s1">2</span>,</p>
<p class="p1">&nbsp; &nbsp; c = {</p>
<p class="p1">&nbsp; &nbsp; &nbsp; &nbsp; x = <span class="s1">1</span>,</p>
<p class="p1">&nbsp; &nbsp; &nbsp; &nbsp; y = <span class="s1">2</span>,</p>
<p class="p1">&nbsp; &nbsp; &nbsp; &nbsp; z = <span class="s1">3</span>,</p>
<p class="p1">&nbsp; &nbsp; }</p>
<p class="p1">}</p>
<p class="p1"><span style="line-height: 1.5;">t[t.c] = t</span></p>
<p class="p1">t2 = <span class="s1">table</span>.deepcopy(t)</p>
<p class="p1">print(t2[t2.c])</p>
<p class="p1">如果index没有经过_copy处理，则打印出来的则是nil。为何经过_copy处理一定会是t2.c==t2呢？这也就是第6行判断的效果了，它返回的index就是t2.c(因为t2.c要么就是从第7行返回的，要没是新生成的副本，下次拷贝时还是取得同一个副本)。</p>
<p class="p1"><span style="line-height: 1.5;">接下来看第14行，这行不是我想要的，我的目的是拷贝出一份临时表，这分临时表要去除常量的特性，所以我修改如下</span></p>
<pre><span>return</span> <span>setmetatable</span>(new_table<span>)</span></pre>
<p class="p1">这样也就不保留常量特性了。</p>
<p class="p1">lua中使用局部函数的好处是很多的。look_up就用到了这个好处，如果lua不支持局部函数，那就只能将look_up表当做参数传递进去了。我之前实现了不支持环的版本，如下：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> table.deepcopy(t, n)
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">local</span> newT =<span style="color: #000000;"> {}
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">if</span> n == <span style="color: #0000ff;">nil</span> <span style="color: #0000ff;">then</span>    <span style="color: #008000;">--</span><span style="color: #008000;"> 默认为浅拷贝。。。</span>
<span style="color: #008080;"> 4</span>         n = <span style="color: #800080;">1</span>
<span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">end</span>
<span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">for</span> i,v <span style="color: #0000ff;">in</span> <span style="color: #ff00ff;">pairs</span>(t) <span style="color: #0000ff;">do</span>
<span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">if</span> n&gt;<span style="color: #800080;">0</span> <span style="color: #0000ff;">and</span> <span style="color: #ff00ff;">type</span>(v) == <span style="color: #800000;">"</span><span style="color: #800000;">table</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 8</span>             <span style="color: #0000ff;">local</span> T = table.deepcopy(v, n-<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 9</span>             newT[i] =<span style="color: #000000;"> T
</span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">11</span>             <span style="color: #0000ff;">local</span> x =<span style="color: #000000;"> v
</span><span style="color: #008080;">12</span>             newT[i] =<span style="color: #000000;"> x
</span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">end</span>
<span style="color: #008080;">14</span>     <span style="color: #0000ff;">end</span>
<span style="color: #008080;">15</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> newT
</span><span style="color: #008080;">16</span> <span style="color: #0000ff;">end</span></pre>
</div>
<p>非递归版本太牛逼了，不做介绍了自己想看源码的去看吧</p>]]></description></item><item><title>实习总结</title><link>http://www.cnblogs.com/hanxi/archive/2013/03/25/2979881.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 25 Mar 2013 05:50:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2013/03/25/2979881.html</guid><description><![CDATA[<p>实习结束了，在这里总结下实习的相关事宜。</p>
<p>我去年十一月份入职的，刚入公司技术部人很少，我选择的是服务端开发，服务端就三四个人，客户端倒是有五六个人。第一天上班就是打开电脑，安装一些需要的工具。公司的做的产品是手游，主要使用的是脚本语言lua（不出名？魔兽就是用lua写的）。对于lua语言，我是很陌生的，所以安装完必备的工具后就开始学习lua了。我选择的教程是<a href="http://book.luaer.cn/">http://book.luaer.cn/</a>（现在查api使用的是<a href="http://www.codingnow.com/2000/download/lua_manual.html">http://www.codingnow.com/2000/download/lua_manual.html</a>）。大概花了1天时间把lua的语法了解了下。然后老大就安排了一个小东西给我实现，控制台版的小游戏（仅仅是模拟而已），实现主城，商店，战斗（很简易的，后面会给出源代码，不要喷哈）。</p>
<p>这款游戏是重0开始的，没有现成的engine。都是从底层架构开始的，使用c实现网络模块和内存数据库模块。前期我负责写网络协议的压包和解包，遇到的最大的困难是c和lua的数据交互，经过老大的指导和自己的钻研，把交互栈搞明白了（写过如何交互的技术博文，需要的给我发邮件）。加包就是序列化，解包就是反序列化，将序列化的数据用于网络传输，网络收发模块是一个同事写的（这两个模块最后都没有采纳，老大自己重写了，看了他写的代码后确实佩服，清晰易懂）。</p>
<p>在这每天晚上9点是有个例会的（21点？是的，游戏公司都会加班）。例会上主要是总结下今天做了什么，遇到了什么问题，完成了什么任务，什么任务没有完成，后续的计划等等。而且每个月经理都会和我们谈一次话，聊聊这个月做的事情啊，生活上的和工作上的都会聊聊。这方式不错，经理能够及时掌握员工的工作状态是很好的。</p>
<p>底层模块基本实现之后，接下来的就是实现一些逻辑模块，分给我的是背包系统，包括道具，装备和铁匠铺。由于我大学期间不玩网游，对游戏的不认识太多了，公司都会叫我们玩玩网游，了解下模块和功能，然后就试着去实现。我个人感觉游戏都不好玩，但是为了了解是怎么实现的，我还是会玩玩的，游戏的剧情我就不看了，专门挑系统的功能。</p>
<p>公司规定每天加班，单休。加班确实累了点，但是学到的东西还是挺多的，关于游戏逻辑，我实现了背包，铁匠铺，道具，装备，聊天系统，我是从一开始就跟着底层模块开始建立的，对底层模块还是比较了解的，所以实现逻辑模块比较简单。到现在快有4个月了，公司也给我提前转正了，在服务端我也算元老级人物了，陆陆续续换了好多人了。希望游戏能够取得成功。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('647456ba-51e0-44e8-941b-9769baa528f6')"><img id="code_img_closed_647456ba-51e0-44e8-941b-9769baa528f6" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_647456ba-51e0-44e8-941b-9769baa528f6" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('647456ba-51e0-44e8-941b-9769baa528f6',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">HelloLua</span>
<div id="cnblogs_code_open_647456ba-51e0-44e8-941b-9769baa528f6" class="cnblogs_code_hide">
<pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> clear()
</span><span style="color: #008080;">  2</span> <span style="color: #008000;">--</span><span style="color: #008000;">linux下为</span>
<span style="color: #008080;">  3</span> <span style="color: #008000;">--</span><span style="color: #008000;">    os.execute("clear")</span>
<span style="color: #008080;">  4</span> <span style="color: #008000;">--</span><span style="color: #008000;">windows下为</span>
<span style="color: #008080;">  5</span>     <span style="color: #ff00ff;">os.execute</span>(<span style="color: #800000;">"</span><span style="color: #800000;">cls</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">  6</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">  7</span> 
<span style="color: #008080;">  8</span> <span style="color: #008000;">--</span><span style="color: #008000;">输入选项</span>
<span style="color: #008080;">  9</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> inputSelect(s,n)
</span><span style="color: #008080;"> 10</span>     <span style="color: #ff00ff;">io.write</span><span style="color: #000000;">(s)
</span><span style="color: #008080;"> 11</span>     <span style="color: #0000ff;">if</span> n == <span style="color: #0000ff;">nil</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 12</span>         n = <span style="color: #800080;">1</span>
<span style="color: #008080;"> 13</span>     <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 14</span>     <span style="color: #0000ff;">return</span> <span style="color: #ff00ff;">io.read</span><span style="color: #000000;">(n)
</span><span style="color: #008080;"> 15</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 16</span> 
<span style="color: #008080;"> 17</span> <span style="color: #008000;">--</span><span style="color: #008000;">buy somthing</span>
<span style="color: #008080;"> 18</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> buySomething(p,s,n)
</span><span style="color: #008080;"> 19</span>     <span style="color: #0000ff;">if</span> p.wallet &gt; n <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 20</span>         <span style="color: #0000ff;">if</span> s == <span style="color: #800000;">"</span><span style="color: #800000;">ATK</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 21</span>             p.ATK = p.ATK +<span style="color: #000000;"> n
</span><span style="color: #008080;"> 22</span>         <span style="color: #0000ff;">elseif</span> s == <span style="color: #800000;">"</span><span style="color: #800000;">DEF</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 23</span>             p.DEF = p.DEF +<span style="color: #000000;"> n
</span><span style="color: #008080;"> 24</span>         <span style="color: #0000ff;">elseif</span> s == <span style="color: #800000;">"</span><span style="color: #800000;">HP</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 25</span>             p.HP = p.HP +<span style="color: #000000;"> n
</span><span style="color: #008080;"> 26</span>         <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 27</span>         p.wallet = p.wallet -<span style="color: #000000;"> n
</span><span style="color: #008080;"> 28</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;"> 29</span>         <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">your haven't more money to buy it</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 30</span>     <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 31</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 32</span> 
<span style="color: #008080;"> 33</span> <span style="color: #008000;">--</span><span style="color: #008000;">show stat</span>
<span style="color: #008080;"> 34</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> show_stat(p)
</span><span style="color: #008080;"> 35</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">ATK:\t</span><span style="color: #800000;">"</span>..p.ATK..<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 36</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">DEF:\t</span><span style="color: #800000;">"</span>..p.DEF..<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 37</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">HP:\t</span><span style="color: #800000;">"</span>..p.HP..<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 38</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">wallet:\t</span><span style="color: #800000;">"</span>..p.wallet..<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 39</span>     sleep(<span style="color: #800080;">3</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 40</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 41</span> 
<span style="color: #008080;"> 42</span> <span style="color: #008000;">--</span><span style="color: #008000;">进入商店</span>
<span style="color: #008080;"> 43</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> goto_shop()
</span><span style="color: #008080;"> 44</span> <span style="color: #000000;">    clear()
</span><span style="color: #008080;"> 45</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you are in shop now.</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 46</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">1. buy ATK</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 47</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">2. buy DEF</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 48</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">3. buy HP</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 49</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">0. back</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 50</span>     input = inputSelect(<span style="color: #800000;">"</span><span style="color: #800000;">please input number:</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 51</span>     <span style="color: #0000ff;">if</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 52</span>         buySomething(P,<span style="color: #800000;">"</span><span style="color: #800000;">ATK</span><span style="color: #800000;">"</span>,<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 53</span>         <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you buy ATK OK!</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 54</span> <span style="color: #000000;">        show_stat(P)
</span><span style="color: #008080;"> 55</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 56</span>         buySomething(P,<span style="color: #800000;">"</span><span style="color: #800000;">DEF</span><span style="color: #800000;">"</span>,<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 57</span>         <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you buy ATK OK!</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">        show_stat(P)
</span><span style="color: #008080;"> 59</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">3</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 60</span>         buySomething(P,<span style="color: #800000;">"</span><span style="color: #800000;">HP</span><span style="color: #800000;">"</span>,<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 61</span>         <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you buy ATK OK!</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 62</span> <span style="color: #000000;">        show_stat(P)
</span><span style="color: #008080;"> 63</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">0</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;"> 64</span> <span style="color: #000000;">        show_welcome()
</span><span style="color: #008080;"> 65</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;"> 66</span> <span style="color: #000000;">        goto_shop()
</span><span style="color: #008080;"> 67</span>     <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">    goto_shop()
</span><span style="color: #008080;"> 69</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 70</span> 
<span style="color: #008080;"> 71</span> <span style="color: #008000;">--</span><span style="color: #008000;">显示战场</span>
<span style="color: #008080;"> 72</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> show_battlefield()
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">    clear()
</span><span style="color: #008080;"> 74</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">PKing</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 75</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">Person:\tyou\tmonster\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 76</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 77</span> 
<span style="color: #008080;"> 78</span> <span style="color: #008000;">--</span><span style="color: #008000;">A hit B</span>
<span style="color: #008080;"> 79</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> AhitB(A, B)
</span><span style="color: #008080;"> 80</span>     B.HP = B.HP -  A.ATK /<span style="color: #000000;"> B.DEF
</span><span style="color: #008080;"> 81</span> <span style="color: #008000;">--</span><span style="color: #008000;">    B.HP = B.HP - 30</span>
<span style="color: #008080;"> 82</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 83</span> 
<span style="color: #008080;"> 84</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> show_result(p,e)
</span><span style="color: #008080;"> 85</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">ATK:\t</span><span style="color: #800000;">"</span>..p.ATK..<span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span>..e.ATK..<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 86</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">DEF:\t</span><span style="color: #800000;">"</span>..p.DEF..<span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span>..e.DEF..<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 87</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">HP:\t</span><span style="color: #800000;">"</span>..p.HP..<span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span>..e.HP..<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 88</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 89</span> 
<span style="color: #008080;"> 90</span> <span style="color: #008000;">--</span><span style="color: #008000;">时间暂停n秒</span>
<span style="color: #008080;"> 91</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> sleep(n)
</span><span style="color: #008080;"> 92</span>     t = <span style="color: #ff00ff;">os.time</span><span style="color: #000000;">()
</span><span style="color: #008080;"> 93</span>     <span style="color: #0000ff;">while</span> <span style="color: #ff00ff;">os.time</span>() - t &lt; n <span style="color: #0000ff;">do</span>
<span style="color: #008080;"> 94</span>     <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 95</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 96</span> 
<span style="color: #008080;"> 97</span> <span style="color: #008000;">--</span><span style="color: #008000;">战场，返回false则战败，返回true则胜利</span>
<span style="color: #008080;"> 98</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> battlefield(p,e)
</span><span style="color: #008080;"> 99</span>     <span style="color: #0000ff;">while</span> <span style="color: #0000ff;">true</span> <span style="color: #0000ff;">do</span>
<span style="color: #008080;">100</span>         <span style="color: #008000;">--</span><span style="color: #008000;">p hit e</span>
<span style="color: #008080;">101</span>         <span style="color: #0000ff;">if</span> p.HP &lt;= <span style="color: #800080;">0</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">102</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span>
<span style="color: #008080;">103</span>         <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">104</span> <span style="color: #000000;">        AhitB(p,e)
</span><span style="color: #008080;">105</span> <span style="color: #000000;">        show_battlefield()
</span><span style="color: #008080;">106</span>         <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">\tyou hit moster\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">107</span> <span style="color: #000000;">        show_result(p,e)
</span><span style="color: #008080;">108</span>         sleep(<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">109</span> 
<span style="color: #008080;">110</span>         <span style="color: #008000;">--</span><span style="color: #008000;">e hit p</span>
<span style="color: #008080;">111</span>         <span style="color: #0000ff;">if</span> e.HP &lt;= <span style="color: #800080;">0</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">112</span>             <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span>
<span style="color: #008080;">113</span>         <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">114</span> <span style="color: #000000;">        AhitB(e,p)
</span><span style="color: #008080;">115</span> <span style="color: #000000;">        show_battlefield()
</span><span style="color: #008080;">116</span>         <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">\tmoster hit you\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">117</span> <span style="color: #000000;">        show_result(p,e)
</span><span style="color: #008080;">118</span>         sleep(<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">119</span>     <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">120</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">121</span> 
<span style="color: #008080;">122</span> 
<span style="color: #008080;">123</span> <span style="color: #008000;">--</span><span style="color: #008000;">进入战场选择菜单</span>
<span style="color: #008080;">124</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> goto_battlefield()
</span><span style="color: #008080;">125</span> <span style="color: #000000;">    clear()
</span><span style="color: #008080;">126</span> 
<span style="color: #008080;">127</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you are in battlefield now.</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">128</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">1. low level battlefield</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">129</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">2. intermediate battlefield</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">130</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">3. advanced battlefield</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">131</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">0. back</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">132</span>     input = inputSelect(<span style="color: #800000;">"</span><span style="color: #800000;">please choose battlefield:</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">133</span>     <span style="color: #0000ff;">if</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">134</span>         <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">in here</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">135</span>         E =<span style="color: #000000;"> {
</span><span style="color: #008080;">136</span>             ATK    =<span style="color: #000000;"> E1.ATK,
</span><span style="color: #008080;">137</span>             DEF    =<span style="color: #000000;"> E1.DEF,
</span><span style="color: #008080;">138</span>             HP     =<span style="color: #000000;"> E1.HP}
</span><span style="color: #008080;">139</span>         <span style="color: #0000ff;">if</span> battlefield(P,E) <span style="color: #0000ff;">then</span>
<span style="color: #008080;">140</span> <span style="color: #000000;">            goto_battlefield()
</span><span style="color: #008080;">141</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you win</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">142</span>             P.HP = P.HP + <span style="color: #800080;">10</span>
<span style="color: #008080;">143</span>             sleep(<span style="color: #800080;">2</span><span style="color: #000000;">)
</span><span style="color: #008080;">144</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">145</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you die</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">146</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">GAME OVER</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">147</span>         <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">148</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">149</span>         E =<span style="color: #000000;"> {
</span><span style="color: #008080;">150</span>             ATK    =<span style="color: #000000;"> E2.ATK,
</span><span style="color: #008080;">151</span>             DEF    =<span style="color: #000000;"> E2.DEF,
</span><span style="color: #008080;">152</span>             HP     =<span style="color: #000000;"> E2.HP}
</span><span style="color: #008080;">153</span>         <span style="color: #0000ff;">if</span> battlefield(P,E) <span style="color: #0000ff;">then</span>
<span style="color: #008080;">154</span> <span style="color: #000000;">            goto_battlefield()
</span><span style="color: #008080;">155</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you win</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">156</span>             P.HP = P.HP + <span style="color: #800080;">10</span>
<span style="color: #008080;">157</span>             P.wallet = P.wallet + <span style="color: #800080;">10</span>
<span style="color: #008080;">158</span>             sleep(<span style="color: #800080;">2</span><span style="color: #000000;">)
</span><span style="color: #008080;">159</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">160</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you die</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">161</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">GAME OVER</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">162</span>         <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">163</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">3</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">164</span>             E =<span style="color: #000000;"> {
</span><span style="color: #008080;">165</span>             ATK    =<span style="color: #000000;"> E3.ATK,
</span><span style="color: #008080;">166</span>             DEF    =<span style="color: #000000;"> E3.DEF,
</span><span style="color: #008080;">167</span>             HP     =<span style="color: #000000;"> E3.HP}
</span><span style="color: #008080;">168</span>         <span style="color: #0000ff;">if</span> battlefield(P,E) <span style="color: #0000ff;">then</span>
<span style="color: #008080;">169</span> <span style="color: #000000;">            goto_battlefield()
</span><span style="color: #008080;">170</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you win</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">171</span>             P.HP = P.HP + <span style="color: #800080;">20</span>
<span style="color: #008080;">172</span>             P.wallet = P.wallet + <span style="color: #800080;">10</span>
<span style="color: #008080;">173</span>             P.ATK = P.ATK + <span style="color: #800080;">5</span>
<span style="color: #008080;">174</span>             P.DEF = P.DEF + <span style="color: #800080;">5</span>
<span style="color: #008080;">175</span>             sleep(<span style="color: #800080;">2</span><span style="color: #000000;">)
</span><span style="color: #008080;">176</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">177</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">you die</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">178</span>             <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">GAME OVER</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">179</span>         <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">180</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">0</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">181</span> <span style="color: #000000;">        show_welcome()
</span><span style="color: #008080;">182</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">183</span> <span style="color: #000000;">        goto_battlefield()
</span><span style="color: #008080;">184</span>     <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">185</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">186</span> 
<span style="color: #008080;">187</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> show_welcome()
</span><span style="color: #008080;">188</span> <span style="color: #000000;">    clear()
</span><span style="color: #008080;">189</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">======welcome to battle game======</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">190</span>     <span style="color: #ff00ff;">io.write</span>(<span style="color: #800000;">"</span><span style="color: #800000;">\tplease choose entrance\n</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">191</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">1. shop</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">192</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">2. battlefield entrance</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">193</span>     <span style="color: #ff00ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">0. exit</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">194</span>     input = inputSelect(<span style="color: #800000;">"</span><span style="color: #800000;">please input number of the entrance:</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">195</span>     <span style="color: #0000ff;">if</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">196</span> <span style="color: #000000;">        goto_shop()
</span><span style="color: #008080;">197</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">198</span> <span style="color: #000000;">        goto_battlefield()
</span><span style="color: #008080;">199</span>     <span style="color: #0000ff;">elseif</span> input == <span style="color: #800000;">"</span><span style="color: #800000;">0</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">200</span>         <span style="color: #ff00ff;">os.exit</span><span style="color: #000000;">()
</span><span style="color: #008080;">201</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">202</span> <span style="color: #000000;">        show_welcome()
</span><span style="color: #008080;">203</span>     <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">204</span> <span style="color: #0000ff;">end</span><span style="color: #000000;">;
</span><span style="color: #008080;">205</span> 
<span style="color: #008080;">206</span> P =<span style="color: #000000;"> {
</span><span style="color: #008080;">207</span>     wallet = <span style="color: #800080;">100</span><span style="color: #000000;">,
</span><span style="color: #008080;">208</span>     ATK    = <span style="color: #800080;">100</span><span style="color: #000000;">,
</span><span style="color: #008080;">209</span>     DEF    = <span style="color: #800080;">100</span><span style="color: #000000;">,
</span><span style="color: #008080;">210</span>     HP     = <span style="color: #800080;">100</span><span style="color: #000000;">}
</span><span style="color: #008080;">211</span> E1 =<span style="color: #000000;"> {
</span><span style="color: #008080;">212</span>     ATK    = <span style="color: #800080;">10</span><span style="color: #000000;">,
</span><span style="color: #008080;">213</span>     DEF    = <span style="color: #800080;">10</span><span style="color: #000000;">,
</span><span style="color: #008080;">214</span>     HP     = <span style="color: #800080;">100</span><span style="color: #000000;">}
</span><span style="color: #008080;">215</span> 
<span style="color: #008080;">216</span> E2 =<span style="color: #000000;"> {
</span><span style="color: #008080;">217</span>     ATK    = <span style="color: #800080;">20</span><span style="color: #000000;">,
</span><span style="color: #008080;">218</span>     DEF    = <span style="color: #800080;">20</span><span style="color: #000000;">,
</span><span style="color: #008080;">219</span>     HP     = <span style="color: #800080;">100</span><span style="color: #000000;">}
</span><span style="color: #008080;">220</span> E3 =<span style="color: #000000;"> {
</span><span style="color: #008080;">221</span>     ATK    = <span style="color: #800080;">30</span><span style="color: #000000;">,
</span><span style="color: #008080;">222</span>     DEF    = <span style="color: #800080;">30</span><span style="color: #000000;">,
</span><span style="color: #008080;">223</span>     HP     = <span style="color: #800080;">100</span><span style="color: #000000;">}
</span><span style="color: #008080;">224</span> 
<span style="color: #008080;">225</span> <span style="color: #000000;">show_welcome()
</span><span style="color: #008080;">226</span> 
<span style="color: #008080;">227</span> 
<span style="color: #008080;">228</span> 
<span style="color: #008080;">229</span> <span style="color: #008000;">--</span><span style="color: #008000;">字符串相似度算法 lua 实现</span>
<span style="color: #008080;">230</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> EditDistance( s, t, lim )  
</span><span style="color: #008080;">231</span>     <span style="color: #0000ff;">local</span> s_len, t_len = #s, #t <span style="color: #008000;">--</span><span style="color: #008000;"> Calculate the sizes of the strings or arrays  </span>
<span style="color: #008080;">232</span>     <span style="color: #0000ff;">if</span> lim <span style="color: #0000ff;">and</span> <span style="color: #ff00ff;">math.abs</span>( s_len - t_len ) &gt;= lim <span style="color: #0000ff;">then</span> <span style="color: #008000;">--</span><span style="color: #008000;"> If sizes differ by lim, we can stop here  </span>
<span style="color: #008080;">233</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> lim  
</span><span style="color: #008080;">234</span>     <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">235</span>       
<span style="color: #008080;">236</span>     <span style="color: #008000;">--</span><span style="color: #008000;"> Convert string arguments to arrays of ints (ASCII values)  </span>
<span style="color: #008080;">237</span>     <span style="color: #0000ff;">if</span> <span style="color: #ff00ff;">type</span>( s ) == <span style="color: #800000;">"</span><span style="color: #800000;">string</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>  
<span style="color: #008080;">238</span>         s = { <span style="color: #ff00ff;">string.byte</span>( s, <span style="color: #800080;">1</span><span style="color: #000000;">, s_len ) }  
</span><span style="color: #008080;">239</span>     <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">240</span>       
<span style="color: #008080;">241</span>     <span style="color: #0000ff;">if</span> <span style="color: #ff00ff;">type</span>( t ) == <span style="color: #800000;">"</span><span style="color: #800000;">string</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">then</span>  
<span style="color: #008080;">242</span>         t = { <span style="color: #ff00ff;">string.byte</span>( t, <span style="color: #800080;">1</span><span style="color: #000000;">, t_len ) }  
</span><span style="color: #008080;">243</span>     <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">244</span>       
<span style="color: #008080;">245</span>     <span style="color: #0000ff;">local</span> min = <span style="color: #ff00ff;">math.min</span> <span style="color: #008000;">--</span><span style="color: #008000;"> Localize for performance  </span>
<span style="color: #008080;">246</span>     <span style="color: #0000ff;">local</span> num_columns = t_len + <span style="color: #800080;">1</span> <span style="color: #008000;">--</span><span style="color: #008000;"> We use this a lot  </span>
<span style="color: #008080;">247</span>       
<span style="color: #008080;">248</span>     <span style="color: #0000ff;">local</span> d = {} <span style="color: #008000;">--</span><span style="color: #008000;"> (s_len+1) * (t_len+1) is going to be the size of this array  </span>
<span style="color: #008080;">249</span>     <span style="color: #008000;">--</span><span style="color: #008000;"> This is technically a 2D array, but we're treating it as 1D. Remember that 2D access in the  </span>
<span style="color: #008080;">250</span>     <span style="color: #008000;">--</span><span style="color: #008000;"> form my_2d_array[ i, j ] can be converted to my_1d_array[ i * num_columns + j ], where  </span>
<span style="color: #008080;">251</span>     <span style="color: #008000;">--</span><span style="color: #008000;"> num_columns is the number of columns you had in the 2D array assuming row-major order and  </span>
<span style="color: #008080;">252</span>     <span style="color: #008000;">--</span><span style="color: #008000;"> that row and column indices start at 0 (we're starting at 0).  </span>
<span style="color: #008080;">253</span>       
<span style="color: #008080;">254</span>     <span style="color: #0000ff;">for</span> i=<span style="color: #800080;">0</span>, s_len <span style="color: #0000ff;">do</span>  
<span style="color: #008080;">255</span>         d[ i * num_columns ] = i <span style="color: #008000;">--</span><span style="color: #008000;"> Initialize cost of deletion  </span>
<span style="color: #008080;">256</span>     <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">257</span>     <span style="color: #0000ff;">for</span> j=<span style="color: #800080;">0</span>, t_len <span style="color: #0000ff;">do</span>  
<span style="color: #008080;">258</span>         d[ j ] = j <span style="color: #008000;">--</span><span style="color: #008000;"> Initialize cost of insertion  </span>
<span style="color: #008080;">259</span>     <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">260</span>       
<span style="color: #008080;">261</span>     <span style="color: #0000ff;">for</span> i=<span style="color: #800080;">1</span>, s_len <span style="color: #0000ff;">do</span>  
<span style="color: #008080;">262</span>         <span style="color: #0000ff;">local</span> i_pos = i *<span style="color: #000000;"> num_columns  
</span><span style="color: #008080;">263</span>         <span style="color: #0000ff;">local</span> best = lim <span style="color: #008000;">--</span><span style="color: #008000;"> Check to make sure something in this row will be below the limit  </span>
<span style="color: #008080;">264</span>         <span style="color: #0000ff;">for</span> j=<span style="color: #800080;">1</span>, t_len <span style="color: #0000ff;">do</span>  
<span style="color: #008080;">265</span>             <span style="color: #0000ff;">local</span> add_cost = (s[ i ] ~= t[ j ] <span style="color: #0000ff;">and</span> <span style="color: #800080;">1</span> <span style="color: #0000ff;">or</span> <span style="color: #800080;">0</span><span style="color: #000000;">)  
</span><span style="color: #008080;">266</span>             <span style="color: #0000ff;">local</span> val =<span style="color: #000000;"> min(  
</span><span style="color: #008080;">267</span>                 d[ i_pos - num_columns + j ] + <span style="color: #800080;">1</span>,                               <span style="color: #008000;">--</span><span style="color: #008000;"> Cost of deletion  </span>
<span style="color: #008080;">268</span>                 d[ i_pos + j - <span style="color: #800080;">1</span> ] + <span style="color: #800080;">1</span>,                                         <span style="color: #008000;">--</span><span style="color: #008000;"> Cost of insertion  </span>
<span style="color: #008080;">269</span>                 d[ i_pos - num_columns + j - <span style="color: #800080;">1</span> ] + add_cost                     <span style="color: #008000;">--</span><span style="color: #008000;"> Cost of substitution, it might not cost anything if it's the same  </span>
<span style="color: #008080;">270</span> <span style="color: #000000;">            )  
</span><span style="color: #008080;">271</span>             d[ i_pos + j ] =<span style="color: #000000;"> val  
</span><span style="color: #008080;">272</span>               
<span style="color: #008080;">273</span>             <span style="color: #008000;">--</span><span style="color: #008000;"> Is this eligible for tranposition?  </span>
<span style="color: #008080;">274</span>             <span style="color: #0000ff;">if</span> i &gt; <span style="color: #800080;">1</span> <span style="color: #0000ff;">and</span> j &gt; <span style="color: #800080;">1</span> <span style="color: #0000ff;">and</span> s[ i ] == t[ j - <span style="color: #800080;">1</span> ] <span style="color: #0000ff;">and</span> s[ i - <span style="color: #800080;">1</span> ] == t[ j ] <span style="color: #0000ff;">then</span>  
<span style="color: #008080;">275</span>                 d[ i_pos + j ] =<span style="color: #000000;"> min(  
</span><span style="color: #008080;">276</span>                     val,                                                        <span style="color: #008000;">--</span><span style="color: #008000;"> Current cost  </span>
<span style="color: #008080;">277</span>                     d[ i_pos - num_columns - num_columns + j - <span style="color: #800080;">2</span> ] + add_cost   <span style="color: #008000;">--</span><span style="color: #008000;"> Cost of transposition  </span>
<span style="color: #008080;">278</span> <span style="color: #000000;">                )  
</span><span style="color: #008080;">279</span>             <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">280</span>               
<span style="color: #008080;">281</span>             <span style="color: #0000ff;">if</span> lim <span style="color: #0000ff;">and</span> val &lt; best <span style="color: #0000ff;">then</span>  
<span style="color: #008080;">282</span>                 best =<span style="color: #000000;"> val  
</span><span style="color: #008080;">283</span>             <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">284</span>         <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">285</span>           
<span style="color: #008080;">286</span>         <span style="color: #0000ff;">if</span> lim <span style="color: #0000ff;">and</span> best &gt;= lim <span style="color: #0000ff;">then</span>  
<span style="color: #008080;">287</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;"> lim  
</span><span style="color: #008080;">288</span>         <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">289</span>     <span style="color: #0000ff;">end</span>  
<span style="color: #008080;">290</span>       
<span style="color: #008080;">291</span>     <span style="color: #0000ff;">return</span> d[ #<span style="color: #000000;">d ]  
</span><span style="color: #008080;">292</span> <span style="color: #0000ff;">end</span>
<span style="color: #008080;">293</span> <span style="color: #008000;">--</span><span style="color: #008000;"> 判断字符串是否相似</span>
<span style="color: #008080;">294</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> isStringLike(str1, str2)
</span><span style="color: #008080;">295</span>     <span style="color: #0000ff;">local</span> similarity =  EditDistance(str1,str2,<span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">296</span>     <span style="color: #008000;">--</span><span style="color: #008000;"> 相似：相似度大于字符串长度的一半</span>
<span style="color: #008080;">297</span>     <span style="color: #0000ff;">if</span> similarity &gt; #str1/<span style="color: #800080;">2</span> <span style="color: #0000ff;">and</span> similarity &gt; #str2/<span style="color: #800080;">2</span> <span style="color: #0000ff;">then</span>
<span style="color: #008080;">298</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span>
<span style="color: #008080;">299</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">300</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span>
<span style="color: #008080;">301</span>     <span style="color: #0000ff;">end</span>
<span style="color: #008080;">302</span> <span style="color: #0000ff;">end</span></pre>
</div>
</div>
<p>&nbsp;</p>]]></description></item><item><title>工具类Log和Trace</title><link>http://www.cnblogs.com/hanxi/archive/2013/03/08/2950093.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 08 Mar 2013 07:46:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2013/03/08/2950093.html</guid><description><![CDATA[<p>代码地址：<a title="https://github.com/hanxi/Log" href="https://github.com/hanxi/Log">https://github.com/hanxi/Log</a></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">/*</span><span style="color: #008000;">=============================================================================
#     FileName: log.h
#         Desc: 日志记录，只支持单线程，支持网页格式
#       Author: hanxi
#        Email: hanxi.com@gmail.com
#     HomePage: </span><span style="color: #008000; text-decoration: underline;">http://hanxi.cnblogs.com</span><span style="color: #008000;">
#      Version: 0.0.1
#   LastChange: 2013-03-07 18:24:21
#      History:
=============================================================================</span><span style="color: #008000;">*/</span><span style="color: #000000;">

#ifndef __LOG_H_
</span><span style="color: #0000ff;">#define</span> __LOG_H_

<span style="color: #008000;">//</span><span style="color: #008000;">STD</span>
#include &lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;fstream&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;">
#include </span>&lt;ctime&gt;<span style="color: #000000;">
#include </span>&lt;cstdlib&gt;

<span style="color: #0000ff;">#define</span> HTML_LOG   1     <span style="color: #008000;">//</span><span style="color: #008000;">输出为html格式</span>
<span style="color: #0000ff;">#define</span> TXT_LOG    2     <span style="color: #008000;">//</span><span style="color: #008000;">输出为txt格式</span>

<span style="color: #0000ff;">class</span><span style="color: #000000;"> Log
{
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">static</span> std::ofstream     ms_file;          <span style="color: #008000;">//</span><span style="color: #008000;">log文件流</span>
    <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>       *ms_path;          <span style="color: #008000;">//</span><span style="color: #008000;">log文件路径</span>
    <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span>               ms_logLevel;      <span style="color: #008000;">//</span><span style="color: #008000;">小于logLevel的log将被打印出来</span>
    <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span>               ms_logFileType;   <span style="color: #008000;">//</span><span style="color: #008000;">log文件类型</span>

    <span style="color: #0000ff;">int</span><span style="color: #000000;">                      m_nowLevel;
    std::</span><span style="color: #0000ff;">string</span>             *m_theFunctionName;<span style="color: #008000;">//</span><span style="color: #008000;">进入的函数名</span>

<span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> s_init(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *i_path, <span style="color: #0000ff;">int</span> i_logLevel, <span style="color: #0000ff;">int</span><span style="color: #000000;"> i_fileType);
    </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> s_stop();
    </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *<span style="color: #000000;">endl;

    Log(</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *funcName, <span style="color: #0000ff;">int</span><span style="color: #000000;"> logLevel);
    </span>~<span style="color: #000000;">Log();

    template</span>&lt;typename Type&gt;
    <span style="color: #0000ff;">void</span><span style="color: #000000;"> debug(Type msg);
    template</span>&lt;typename Type&gt;<span style="color: #000000;">
    Log</span>&amp; <span style="color: #0000ff;">operator</span>&lt;&lt;<span style="color: #000000;">(Type msg);
};
</span><span style="color: #008000;">//</span><span style="color: #008000;"> 初始化静态成员变量</span>
<span style="color: #000000;">std::ofstream     Log::ms_file;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>       *Log::ms_path = NULL;       <span style="color: #008000;">//</span><span style="color: #008000;">log文件路径</span>
<span style="color: #0000ff;">int</span>               Log::ms_logLevel = <span style="color: #800080;">0</span>;      <span style="color: #008000;">//</span><span style="color: #008000;">小于logLevel的log将被打印出来</span>
<span style="color: #0000ff;">int</span>               Log::ms_logFileType = <span style="color: #800080;">0</span>;   <span style="color: #008000;">//</span><span style="color: #008000;">log文件类型</span>
<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>       *Log::endl = <span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span>;</pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #008000;">/*</span><span style="color: #008000;">=============================================================================
#     FileName: trace.h
#         Desc: 调试类
#       Author: hanxi
#        Email: hanxi.com@gmail.com
#     HomePage: </span><span style="color: #008000; text-decoration: underline;">http://hanxi.cnblogs.com</span><span style="color: #008000;">
#      Version: 0.0.1
#   LastChange: 2013-03-08 13:05:03
#      History:
=============================================================================</span><span style="color: #008000;">*/</span><span style="color: #000000;">
#ifndef __TRACE_H_ 
</span><span style="color: #0000ff;">#define</span> __TRACE_H_ <span style="color: #000000;">

#include </span>&lt;iostream&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Trace {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    Trace (</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *<span style="color: #000000;">name);
    </span>~<span style="color: #000000;">Trace ();
    </span><span style="color: #0000ff;">void</span> debug (<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">string</span> &amp;<span style="color: #000000;">msg);

    </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">bool</span><span style="color: #000000;"> traceIsActive;

</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">string</span> *<span style="color: #000000;">theFunctionName;
};
</span><span style="color: #0000ff;">bool</span> Trace::traceIsActive = <span style="color: #0000ff;">false</span>;</pre>
</div>
<p>&nbsp;</p>]]></description></item><item><title>分享我的手机rom及常用软件介绍</title><link>http://www.cnblogs.com/hanxi/archive/2013/02/22/2922864.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 22 Feb 2013 12:19:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2013/02/22/2922864.html</guid><description><![CDATA[<p><span style="font-size: 18pt; font-family: 幼圆;">我自己认为美化的不错的，但是rom不是我做的，先看看图再说。</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22201226-9824b979772047549749d7a355f08773.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201247-6a10af56f3894cd29d94e15ef67d30ff.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201254-0134aa40021b4938a538bbab6152ebc1.png" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">为了使我这篇章上博客园主页，我就加些文字来说明我安装的软件吧，介绍下用途。</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><a title="智器阅读官网" href="http://read.smartdevices.com.cn/">智器阅读</a>：阅读pdf电子书，自己亲测支持300+M的电子书</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22203703-102564ebde0e484893e3c2761cd84a77.png" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><a title="代码阅读工具" href="http://baike.baidu.com/view/8605590.htm">DoridEdit</a>：代码阅读工具，支持多种语言高亮显示</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22203934-825c1d791d8d47309683173ded5add3c.png" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><a title="rss新闻阅读工具" href="http://www.myzaker.com/">ZAKER</a>：rss新闻阅读工具</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22204119-7496bb8033724071bba7728ff341759c.png" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><a title="联网防火墙" href="http://as.baidu.com/a/item?docid=3675236752">DroidWall</a>：联网防火墙，防止后台程序联网的工具，占内存少。虽然360等安全工具都具备，但是那些都是吃内存的工具</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22204448-74f8424ef2064e81acc5150c094849e6.jpg" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><a title="来电短信防火墙" href="http://as.baidu.com/a/item?docid=1837942626&amp;pre=web_am_se">防火墙</a>：来电短信防火墙，很好用的，站内也很少，但是有通知栏广告，我用上面的联网防火墙把它禁止联网就没广告了，我不知其他方法。</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22204810-d305ccd3d4314884a22872061897664b.jpg" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">接下来再展示我的手机吧，还有些软件就不介绍了（作用不是很大，各自爱好不同），希望这文章能上主页让更多的人看到，也可以分享更多实用的软件（我个人感觉有好多优秀的安卓软件缺乏宣传力度，所以就导致很难被用户找到）。</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22201302-59c0db61490041c2a71d6577b0a8caa1.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201312-e9a56fa01d134836ae6f86da0d01cd09.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201325-572546f1f27e419d931a70b618a02548.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201345-b2c722acf51241cbbf43d4538c08138f.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201355-2050bfeeb9c743fb844c17bd52301095.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201402-ac851d55af324291aa1a7a47517fb3a1.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201411-24b50ad70afe44818b69b00b2f78a85f.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201419-a3e27c985c894ceb9d1f00da2ceef3cc.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201427-6ed2cee9fc2f4884a870b327d228c79b.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201435-8cebfaa55c0d4e9da059b7c3a362a811.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201443-cbd6c788dc0d453e954332f978b8cc56.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201451-77ca5c1a27a6494d85c654685feace43.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201502-527c4c7da2fb4fe5bfd090a43a2d61d8.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201510-5974480a69674fea967db052d35adce9.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201518-4b09a13a0bd04fdd84f7bde32a9ef10b.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201525-3d346d62ac1a4875aa83f1d2317f32ae.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201533-636034d4eea349628e652ca8b0402356.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201545-adc1a7c7e0e8473286ed450ed07f0147.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201555-2df0022ce65c4f7ab23ed4ee883f96c1.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201602-ab66cc4331fc406298dca34231965c54.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201609-60307ecfc46b47409a00efb77c052de0.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201618-ad5cb5ddf6134b539b86a9900a1e76fb.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201628-3139b675fc2242aebcbb85142bee1ce8.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201638-f799b716e58d475ba906fc3c0aee97ec.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201646-a4a4524feef44a96b33911c7914c169d.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201656-a272c2dc543e43bbba9a480f780a1ed9.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201704-ef5e09cf18e74fbbac4d0ac3aed790cc.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201718-3245ae60015043b5ba907a1f4d652b1c.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201725-cd23914abfb7444081951aac45f56b07.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201734-f23d36a91a5e4078918be4a3c2653fd9.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201742-bbded2cb8c4c45d890f66c8ed82be852.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201753-e4c89ab0c46e47599f98d6d2e01a7572.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201800-ccba167407944adf93f661f4c317d400.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201806-a7d92bec7589479a9e52447691e45c41.png" alt="" /><img src="http://images.cnitblog.com/blog/198486/201302/22201811-e716410691c7401eb71cba7c583c273d.png" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">发到这了，你获取想知道我手机是啥型号的，下面看看吧！没错，是华为的C8650（号称刷机中的神机）！</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;"><img src="http://images.cnitblog.com/blog/198486/201302/22201823-2f08f8bafc934c3ab3a3180acd27b213.png" alt="" /></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">joyos已经停止更新，这是网上下的终结版，我把rom分享下。我的软件都是我自己精心挑选的实用软件，但是没有集成在rom中，如果有中意的我又没给出链接的就自己搜吧。</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">百度网盘：<a title="百度云网盘文件分享" href="http://pan.baidu.com/share/link?shareid=426838&amp;uk=4178931549">百度云网盘文件分享</a></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">115网盘：<a title="115网盘的文件传送礼包" href="http://115.com/lb/5lbvru0">115网盘的文件传送礼包</a></span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">可能115下载需要注册吧，建议大家在百度网盘里面下载咯！</span></p>
<p><span style="font-size: 18pt; font-family: 幼圆;">如果有啥好用的软件就跟我分享下吧！</span></p>]]></description></item><item><title>我的博客目录</title><link>http://www.cnblogs.com/hanxi/archive/2013/02/20/2919298.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 20 Feb 2013 11:22:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2013/02/20/2919298.html</guid><description><![CDATA[<p>制作过程见：</p>
<p><a title="http://www.cnblogs.com/hlxs/archive/2013/02/20/2918760.html" href="http://www.cnblogs.com/hlxs/archive/2013/02/20/2918760.html">http://www.cnblogs.com/hlxs/archive/2013/02/20/2918760.html</a></p>
<p>&nbsp;</p>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">c/c++(70)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="随机序列" href="http://www.cnblogs.com/hanxi/archive/2013/01/24/2874537.html" target="_blank">随机序列</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="找工作？该复习了！" href="http://www.cnblogs.com/hanxi/archive/2012/11/04/2753993.html" target="_blank">找工作？该复习了！</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="全排列的实现" href="http://www.cnblogs.com/hanxi/archive/2012/10/30/2502606.html" target="_blank">全排列的实现</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="读《C和C++代码精粹》&mdash;&mdash;Chunk Allison著，董慧颖译" href="http://www.cnblogs.com/hanxi/archive/2012/10/18/2728923.html" target="_blank">读《C和C++代码精粹》&mdash;&mdash;Chunk Allison著，董慧颖译</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="字符串相似度的计算（百度笔试题回忆）" href="http://www.cnblogs.com/hanxi/archive/2012/10/16/2726135.html" target="_blank">字符串相似度的计算（百度笔试题回忆）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="reverse()的实现字符串反转和模板reverse的实现" href="http://www.cnblogs.com/hanxi/archive/2012/10/16/2725358.html" target="_blank">reverse()的实现字符串反转和模板reverse的实现</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="洗牌程序的两种实现方法比较" href="http://www.cnblogs.com/hanxi/archive/2012/10/15/2725047.html" target="_blank">洗牌程序的两种实现方法比较</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="堆排序，C++模板编程" href="http://www.cnblogs.com/hanxi/archive/2012/10/12/2721540.html" target="_blank">堆排序，C++模板编程</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="字符串拷贝函数 char *strcpy（char *dest, const char *src）" href="http://www.cnblogs.com/hanxi/archive/2012/10/12/2721234.html" target="_blank">字符串拷贝函数 char *strcpy（char *dest, const char *src）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="最简单的单例模式" href="http://www.cnblogs.com/hanxi/archive/2012/10/11/2720451.html" target="_blank">最简单的单例模式</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【算法题目集锦】为找工作做准备的" href="http://www.cnblogs.com/hanxi/archive/2012/10/10/2719075.html" target="_blank">【算法题目集锦】为找工作做准备的</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="按要求获得序列" href="http://www.cnblogs.com/hanxi/archive/2012/10/10/2719019.html" target="_blank">按要求获得序列</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="两个栈实现一个队列" href="http://www.cnblogs.com/hanxi/archive/2012/10/10/2718602.html" target="_blank">两个栈实现一个队列</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="循环链表解决约瑟夫环问题" href="http://www.cnblogs.com/hanxi/archive/2012/10/10/2718413.html" target="_blank">循环链表解决约瑟夫环问题</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="进制转换问题求解" href="http://www.cnblogs.com/hanxi/archive/2012/10/07/2713636.html" target="_blank">进制转换问题求解</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="判断一个数是否是2^N次方" href="http://www.cnblogs.com/hanxi/archive/2012/10/03/2711008.html" target="_blank">判断一个数是否是2^N次方</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="回调函数的实现（指向类成员函数的指针）" href="http://www.cnblogs.com/hanxi/archive/2012/09/12/2682051.html" target="_blank">回调函数的实现（指向类成员函数的指针）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="学习FLTK图形库，拿扫雷游戏做例子" href="http://www.cnblogs.com/hanxi/archive/2012/09/02/2667991.html" target="_blank">学习FLTK图形库，拿扫雷游戏做例子</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【转载】C++ 定义与声明，extern，const使用" href="http://www.cnblogs.com/hanxi/archive/2012/08/28/2659411.html" target="_blank">【转载】C++ 定义与声明，extern，const使用</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【c++模板实现】二叉查找树" href="http://www.cnblogs.com/hanxi/archive/2012/08/18/2645929.html" target="_blank">【c++模板实现】二叉查找树</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="回顾内存区：C语言C++的内存区是一样的。" href="http://www.cnblogs.com/hanxi/archive/2012/08/03/2622253.html" target="_blank">回顾内存区：C语言C++的内存区是一样的。</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="汉诺塔问题的求解" href="http://www.cnblogs.com/hanxi/archive/2012/08/03/2622166.html" target="_blank">汉诺塔问题的求解</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="FLTK在linux下的编译安装过程，让大家少走弯路" href="http://www.cnblogs.com/hanxi/archive/2012/07/30/2616069.html" target="_blank">FLTK在linux下的编译安装过程，让大家少走弯路</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="while循环和for循环的区别酿成的Bug" href="http://www.cnblogs.com/hanxi/archive/2012/07/29/2614257.html" target="_blank">while循环和for循环的区别酿成的Bug</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="C++文件的批处理" href="http://www.cnblogs.com/hanxi/archive/2012/07/22/2603584.html" target="_blank">C++文件的批处理</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="软件开发笔记" href="http://www.cnblogs.com/hanxi/archive/2012/06/30/2570475.html" target="_blank">软件开发笔记</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="利用基姆拉尔森公式根据日期计算星期" href="http://www.cnblogs.com/hanxi/archive/2012/06/12/2545808.html" target="_blank">利用基姆拉尔森公式根据日期计算星期</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="今天使用VS2012遇到一个问题：&quot;链接器工具错误 LNK2026  XXX模块对于 SAFESEH 映像是不安全的&quot;" href="http://www.cnblogs.com/hanxi/archive/2012/06/10/2544230.html" target="_blank">今天使用VS2012遇到一个问题："链接器工具错误 LNK2026 XXX模块对于 SAFESEH 映像是不安全的"</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="鱼群生长曲线分析" href="http://www.cnblogs.com/hanxi/archive/2012/05/01/2478146.html" target="_blank">鱼群生长曲线分析</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="编译boost命令" href="http://www.cnblogs.com/hanxi/archive/2012/05/01/2477926.html" target="_blank">编译boost命令</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="a的b次方模n算法" href="http://www.cnblogs.com/hanxi/archive/2012/04/26/2471278.html" target="_blank">a的b次方模n算法</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="简单的二次B样条曲线" href="http://www.cnblogs.com/hanxi/archive/2012/04/14/2446722.html" target="_blank">简单的二次B样条曲线</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="高斯法解方程组" href="http://www.cnblogs.com/hanxi/archive/2012/04/10/2440506.html" target="_blank">高斯法解方程组</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="追赶法解方程" href="http://www.cnblogs.com/hanxi/archive/2012/04/09/2439623.html" target="_blank">追赶法解方程</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="还在为cximage编译问题而发愁吗？" href="http://www.cnblogs.com/hanxi/archive/2012/03/11/2390180.html" target="_blank">还在为cximage编译问题而发愁吗？</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="常微分方程初值问题数值解法" href="http://www.cnblogs.com/hanxi/archive/2011/12/02/2272597.html" target="_blank">常微分方程初值问题数值解法</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="KMP字符匹配算法+Romberg数值求积分+Simpson求积分" href="http://www.cnblogs.com/hanxi/archive/2011/10/18/2215999.html" target="_blank">KMP字符匹配算法+Romberg数值求积分+Simpson求积分</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="打印菱形的笨方法" href="http://www.cnblogs.com/hanxi/archive/2011/09/07/2170244.html" target="_blank">打印菱形的笨方法</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="求n个数的最大公约数" href="http://www.cnblogs.com/hanxi/archive/2011/07/09/2101537.html" target="_blank">求n个数的最大公约数</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="c语言小程序集锦" href="http://www.cnblogs.com/hanxi/archive/2011/07/02/2096171.html" target="_blank">c语言小程序集锦</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="标准C++输入输出和字符串类学习小程序集锦" href="http://www.cnblogs.com/hanxi/archive/2011/06/12/2078649.html" target="_blank">标准C++输入输出和字符串类学习小程序集锦</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="一步一步实现扫雷游戏（C语言实现）(四)" href="http://www.cnblogs.com/hanxi/archive/2011/04/28/demining.html" target="_blank">一步一步实现扫雷游戏（C语言实现）(四)</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="C++ 基础语法学习（一）" href="http://www.cnblogs.com/hanxi/archive/2011/04/21/Cplusprimer.html" target="_blank">C++ 基础语法学习（一）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="模拟公交报站" href="http://www.cnblogs.com/hanxi/archive/2011/04/17/2019170.html" target="_blank">模拟公交报站</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="根据公式计算e" href="http://www.cnblogs.com/hanxi/archive/2011/04/04/2005376.html" target="_blank">根据公式计算e</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="求三角形外接圆周长" href="http://www.cnblogs.com/hanxi/archive/2011/04/04/2005361.html" target="_blank">求三角形外接圆周长</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="完数" href="http://www.cnblogs.com/hanxi/archive/2011/04/03/2004881.html" target="_blank">完数</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="ZOJ1383_二进制数(Binary Numbers)_Central Europe 2001,Practice" href="http://www.cnblogs.com/hanxi/archive/2011/03/31/2001596.html" target="_blank">ZOJ1383_二进制数(Binary Numbers)_Central Europe 2001,Practice</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="API(乱七八糟)" href="http://www.cnblogs.com/hanxi/archive/2011/03/31/2000978.html" target="_blank">API(乱七八糟)</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="一步一步实现扫雷游戏（C语言实现）(三)" href="http://www.cnblogs.com/hanxi/archive/2011/03/31/2000616.html" target="_blank">一步一步实现扫雷游戏（C语言实现）(三)</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="一步一步实现扫雷游戏（C语言实现）(二)" href="http://www.cnblogs.com/hanxi/archive/2011/03/28/1997660.html" target="_blank">一步一步实现扫雷游戏（C语言实现）(二)</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="一步一步实现扫雷游戏（C语言实现）(一)" href="http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html" target="_blank">一步一步实现扫雷游戏（C语言实现）(一)</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="特殊的四位数" href="http://www.cnblogs.com/hanxi/archive/2011/03/26/1996513.html" target="_blank">特殊的四位数</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="假票问题(Fake Ticket)" href="http://www.cnblogs.com/hanxi/archive/2011/03/26/1996490.html" target="_blank">假票问题(Fake Ticket)</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="API" href="http://www.cnblogs.com/hanxi/archive/2011/03/26/1996367.html" target="_blank">API</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="汉诺塔问题的C语言实现" href="http://www.cnblogs.com/hanxi/archive/2011/03/24/1994288.html" target="_blank">汉诺塔问题的C语言实现</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="产生随机的排列" href="http://www.cnblogs.com/hanxi/archive/2011/03/24/1994267.html" target="_blank">产生随机的排列</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="使用递归方法求阶乘" href="http://www.cnblogs.com/hanxi/archive/2011/03/24/1993752.html" target="_blank">使用递归方法求阶乘</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="数字阶梯（Number Steps）" href="http://www.cnblogs.com/hanxi/archive/2011/03/23/1992996.html" target="_blank">数字阶梯（Number Steps）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="ACM/ICPC题目输入情形及其处理方法" href="http://www.cnblogs.com/hanxi/archive/2011/03/23/1992958.html" target="_blank">ACM/ICPC题目输入情形及其处理方法</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="Google放出C++代码风格规范" href="http://www.cnblogs.com/hanxi/archive/2011/03/21/1990174.html" target="_blank">Google放出C++代码风格规范</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="C++ string详解" href="http://www.cnblogs.com/hanxi/archive/2011/03/18/1988376.html" target="_blank">C++ string详解</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="关系代数运算基本实现" href="http://www.cnblogs.com/hanxi/archive/2011/03/10/1979792.html" target="_blank">关系代数运算基本实现</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="分数四则运算器" href="http://www.cnblogs.com/hanxi/archive/2011/03/08/1977610.html" target="_blank">分数四则运算器</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="我的c++命名规范" href="http://www.cnblogs.com/hanxi/archive/2011/03/08/1977101.html" target="_blank">我的c++命名规范</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="没有找到MSVCR80D.dll的解决方案【转载】" href="http://www.cnblogs.com/hanxi/archive/2011/02/27/1966461.html" target="_blank">没有找到MSVCR80D.dll的解决方案【转载】</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="这是我参加c语言比赛的机考试题，与大家分享下" href="http://www.cnblogs.com/hanxi/archive/2010/12/22/1913330.html" target="_blank">这是我参加c语言比赛的机考试题，与大家分享下</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="指针函数" href="http://www.cnblogs.com/hanxi/archive/2010/12/08/1900748.html" target="_blank">指针函数</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="c库函数之   bcmp" href="http://www.cnblogs.com/hanxi/archive/2010/11/30/1892008.html" target="_blank">c库函数之 bcmp</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="C语言之最名不符实的关键字----static" href="http://www.cnblogs.com/hanxi/archive/2010/11/19/1882117.html" target="_blank">C语言之最名不符实的关键字----static</a></li>
</ul>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">java(8)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="推导基姆拉尔森公式根据日期计算星期" href="http://www.cnblogs.com/hanxi/archive/2012/06/12/2545828.html" target="_blank">推导基姆拉尔森公式根据日期计算星期</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="java版贪吃蛇游戏" href="http://www.cnblogs.com/hanxi/archive/2012/05/19/2509174.html" target="_blank">java版贪吃蛇游戏</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="java实现简单的记事本" href="http://www.cnblogs.com/hanxi/archive/2012/04/24/2469002.html" target="_blank">java实现简单的记事本</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="java实现局域网聊天工具" href="http://www.cnblogs.com/hanxi/archive/2012/04/24/2468990.html" target="_blank">java实现局域网聊天工具</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="java小计算器" href="http://www.cnblogs.com/hanxi/archive/2012/04/07/2435884.html" target="_blank">java小计算器</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="java获取显示器屏幕大小" href="http://www.cnblogs.com/hanxi/archive/2012/04/03/2430894.html" target="_blank">java获取显示器屏幕大小</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="win7使用jar打包代码，并实现双击打开jar文件" href="http://www.cnblogs.com/hanxi/archive/2012/04/03/2430881.html" target="_blank">win7使用jar打包代码，并实现双击打开jar文件</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="JLabel显示图片，及其它使用方法。。。实现九九乘法表" href="http://www.cnblogs.com/hanxi/archive/2012/04/03/2430844.html" target="_blank">JLabel显示图片，及其它使用方法。。。实现九九乘法表</a></li>
</ul>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">linux(28)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="【学习笔记】《Linux命令行和shell脚本编程宝典》&mdash;&mdash;Richard Blum" href="http://www.cnblogs.com/hanxi/archive/2012/09/17/2688567.html" target="_blank">【学习笔记】《Linux命令行和shell脚本编程宝典》&mdash;&mdash;Richard Blum</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【转载】解决git Push时请求username和password，而不是ssh-key验证" href="http://www.cnblogs.com/hanxi/archive/2012/07/31/2616628.html" target="_blank">【转载】解决git Push时请求username和password，而不是ssh-key验证</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【转载】git/github初级运用自如" href="http://www.cnblogs.com/hanxi/archive/2012/07/31/2616435.html" target="_blank">【转载】git/github初级运用自如</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="FLTK在linux下的编译安装过程，让大家少走弯路" href="http://www.cnblogs.com/hanxi/archive/2012/07/30/2616069.html" target="_blank">FLTK在linux下的编译安装过程，让大家少走弯路</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="gdb常用命令的用法" href="http://www.cnblogs.com/hanxi/archive/2012/06/14/2549268.html" target="_blank">gdb常用命令的用法</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="套接字的域和地址族" href="http://www.cnblogs.com/hanxi/archive/2012/06/07/2540125.html" target="_blank">套接字的域和地址族</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="套接口和I/O通信" href="http://www.cnblogs.com/hanxi/archive/2012/06/04/2533868.html" target="_blank">套接口和I/O通信</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="linux的套接口和管道" href="http://www.cnblogs.com/hanxi/archive/2012/06/04/2533861.html" target="_blank">linux的套接口和管道</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="makefile文件的两种常用书写格式（搜索路径式+递归式）" href="http://www.cnblogs.com/hanxi/archive/2012/06/03/2533025.html" target="_blank">makefile文件的两种常用书写格式（搜索路径式+递归式）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="Debian on VirtualBox下共享win7文件夹设置" href="http://www.cnblogs.com/hanxi/archive/2012/05/26/2519514.html" target="_blank">Debian on VirtualBox下共享win7文件夹设置</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="vim配置文件管理WM和taglist" href="http://www.cnblogs.com/hanxi/archive/2012/05/26/2519248.html" target="_blank">vim配置文件管理WM和taglist</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="vimrc" href="http://www.cnblogs.com/hanxi/archive/2012/05/23/2515071.html" target="_blank">vimrc</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[转]Linux启动界面切换:图形界面-字符界面" href="http://www.cnblogs.com/hanxi/archive/2012/05/23/2514648.html" target="_blank">[转]Linux启动界面切换:图形界面-字符界面</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="KMP字符匹配算法+Romberg数值求积分+Simpson求积分" href="http://www.cnblogs.com/hanxi/archive/2011/10/18/2215999.html" target="_blank">KMP字符匹配算法+Romberg数值求积分+Simpson求积分</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="Oracle Enterprise Linux 6.0配置本地yum" href="http://www.cnblogs.com/hanxi/archive/2011/06/01/2065694.html" target="_blank">Oracle Enterprise Linux 6.0配置本地yum</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux网络编程学习笔记]套接字地址结构" href="http://www.cnblogs.com/hanxi/archive/2011/05/26/2059307.html" target="_blank">[Linux网络编程学习笔记]套接字地址结构</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux网络编程笔记]传输协议TCP和UDP简介" href="http://www.cnblogs.com/hanxi/archive/2011/05/26/2058121.html" target="_blank">[Linux网络编程笔记]传输协议TCP和UDP简介</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux网络编程学习笔记]FIFO的创建和使用" href="http://www.cnblogs.com/hanxi/archive/2011/05/10/2041768.html" target="_blank">[Linux网络编程学习笔记]FIFO的创建和使用</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux网络编程学习笔记]管道的创建和使用" href="http://www.cnblogs.com/hanxi/archive/2011/05/06/2039440.html" target="_blank">[Linux网络编程学习笔记]管道的创建和使用</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux网络编程学习笔记]索引" href="http://www.cnblogs.com/hanxi/archive/2011/05/04/2036107.html" target="_blank">[Linux网络编程学习笔记]索引</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux学习笔记]信号处理" href="http://www.cnblogs.com/hanxi/archive/2011/05/04/2036076.html" target="_blank">[Linux学习笔记]信号处理</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux学习笔记]进程概念及控制" href="http://www.cnblogs.com/hanxi/archive/2011/05/03/2035386.html" target="_blank">[Linux学习笔记]进程概念及控制</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[Linux学习笔记]标准输入输出" href="http://www.cnblogs.com/hanxi/archive/2011/05/02/2034343.html" target="_blank">[Linux学习笔记]标准输入输出</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【学习笔记】Linux平台的文件，目录及操作" href="http://www.cnblogs.com/hanxi/archive/2011/05/01/2033784.html" target="_blank">【学习笔记】Linux平台的文件，目录及操作</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【学习笔记】Linux平台的文件I/O操作" href="http://www.cnblogs.com/hanxi/archive/2011/05/01/2033744.html" target="_blank">【学习笔记】Linux平台的文件I/O操作</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[最新]制作u盘引导安装ubuntu11.04" href="http://www.cnblogs.com/hanxi/archive/2011/04/04/2005177.html" target="_blank">[最新]制作u盘引导安装ubuntu11.04</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="在终端模式下可以使用curses函数库。 在图形界面下Gnome系统可以使用Gtk,   KDE系统可是使用Qt.  最保险的是用Java,   跨平台" href="http://www.cnblogs.com/hanxi/archive/2011/03/06/1972437.html" target="_blank">在终端模式下可以使用curses函数库。 在图形界面下Gnome系统可以使用Gtk, KDE系统可是使用Qt. 最保险的是用Java, 跨平台</a></li>
</ul>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">sql(6)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="mysql数据库备份与还原" href="http://www.cnblogs.com/hanxi/archive/2012/09/06/2674128.html" target="_blank">mysql数据库备份与还原</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="网站用户注册实现（VB.NET）" href="http://www.cnblogs.com/hanxi/archive/2012/08/25/2656976.html" target="_blank">网站用户注册实现（VB.NET）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="VB连数据库conn.open的参数" href="http://www.cnblogs.com/hanxi/archive/2011/06/30/2094983.html" target="_blank">VB连数据库conn.open的参数</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="VB使用ADO对象链接数据库" href="http://www.cnblogs.com/hanxi/archive/2011/06/30/2094256.html" target="_blank">VB使用ADO对象链接数据库</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[转载]linux 出现： Starting MySQL.Manager of pid-file quit without updating file.[FAILED] 已解决" href="http://www.cnblogs.com/hanxi/archive/2011/06/16/2082276.html" target="_blank">[转载]linux 出现： Starting MySQL.Manager of pid-file quit without updating file.[FAILED] 已解决</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[转载]解决mysql&ldquo;Access denied for user 'root'@'localhost'&rdquo;" href="http://www.cnblogs.com/hanxi/archive/2011/06/16/2082275.html" target="_blank">[转载]解决mysql&ldquo;Access denied for user 'root'@'localhost'&rdquo;</a></li>
</ul>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">Web(3)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="【PHP+MySQL】投票系统的设计和实现" href="http://www.cnblogs.com/hanxi/archive/2012/09/21/2697512.html" target="_blank">【PHP+MySQL】投票系统的设计和实现</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="网站用户注册实现（VB.NET）" href="http://www.cnblogs.com/hanxi/archive/2012/08/25/2656976.html" target="_blank">网站用户注册实现（VB.NET）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="看了李笑来老师的《把时间当做朋友》后，我做了一个{时间-事件记录系统}" href="http://www.cnblogs.com/hanxi/archive/2012/08/20/2648322.html" target="_blank">看了李笑来老师的《把时间当做朋友》后，我做了一个{时间-事件记录系统}</a></li>
</ul>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">安装笔记(5)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="FLTK在linux下的编译安装过程，让大家少走弯路" href="http://www.cnblogs.com/hanxi/archive/2012/07/30/2616069.html" target="_blank">FLTK在linux下的编译安装过程，让大家少走弯路</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="编译boost命令" href="http://www.cnblogs.com/hanxi/archive/2012/05/01/2477926.html" target="_blank">编译boost命令</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="还在为cximage编译问题而发愁吗？" href="http://www.cnblogs.com/hanxi/archive/2012/03/11/2390180.html" target="_blank">还在为cximage编译问题而发愁吗？</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="在windows 7下为VS安装和配置Gtkmm" href="http://www.cnblogs.com/hanxi/archive/2011/05/03/2035587.html" target="_blank">在windows 7下为VS安装和配置Gtkmm</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[最新]制作u盘引导安装ubuntu11.04" href="http://www.cnblogs.com/hanxi/archive/2011/04/04/2005177.html" target="_blank">[最新]制作u盘引导安装ubuntu11.04</a></li>
</ul>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">其他(9)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="我的简历" href="http://www.cnblogs.com/hanxi/archive/2012/10/20/2731926.html" target="_blank">我的简历</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="windows下获取文件夹下所有文件名，并保存到文件中" href="http://www.cnblogs.com/hanxi/archive/2012/08/28/2660866.html" target="_blank">windows下获取文件夹下所有文件名，并保存到文件中</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="《计算机网络》谢希仁第五版考试重点整理" href="http://www.cnblogs.com/hanxi/archive/2011/12/24/2300739.html" target="_blank">《计算机网络》谢希仁第五版考试重点整理</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="win2003下安装Matlab2010a破解版详细步骤" href="http://www.cnblogs.com/hanxi/archive/2011/10/20/2219351.html" target="_blank">win2003下安装Matlab2010a破解版详细步骤</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="dos命令集--江南技术联盟" href="http://www.cnblogs.com/hanxi/archive/2011/08/19/2145264.html" target="_blank">dos命令集--江南技术联盟</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="win7系统在联网是时候matlab2010a启动不了的解决办法" href="http://www.cnblogs.com/hanxi/archive/2011/08/18/2144304.html" target="_blank">win7系统在联网是时候matlab2010a启动不了的解决办法</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="vmware卸载不干净 重装装不上？方法在这里" href="http://www.cnblogs.com/hanxi/archive/2011/05/22/2053827.html" target="_blank">vmware卸载不干净 重装装不上？方法在这里</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【网摘】GTK中文显示解决方案" href="http://www.cnblogs.com/hanxi/archive/2011/05/19/2051518.html" target="_blank">【网摘】GTK中文显示解决方案</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="vb中界面设计之Frame控件和TextBox的部分使用方法" href="http://www.cnblogs.com/hanxi/archive/2010/11/16/vb_FrameAndTextBox.html" target="_blank">vb中界面设计之Frame控件和TextBox的部分使用方法</a></li>
</ul>
<div style="width: 100%; float: left; margin-top: 20px; background-color: #999999; font-size: 20px; color: white; padding-left: 5px;">随感(8)</div>
<ul style="padding-top: 10px; clear: both; list-style: none;">
<li style="width: 49%; float: left; line-height: 30px;"><a title="入职一个多月了，谈谈感想" href="http://www.cnblogs.com/hanxi/archive/2012/12/13/2814256.html" target="_blank">入职一个多月了，谈谈感想</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【2012】笔试面试总结（二）" href="http://www.cnblogs.com/hanxi/archive/2012/11/03/2752612.html" target="_blank">【2012】笔试面试总结（二）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="【2012】笔试面试总结（一）" href="http://www.cnblogs.com/hanxi/archive/2012/10/31/2746633.html" target="_blank">【2012】笔试面试总结（一）</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="百度深圳笔试总结" href="http://www.cnblogs.com/hanxi/archive/2012/10/13/2722789.html" target="_blank">百度深圳笔试总结</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="关于实训的那点事儿" href="http://www.cnblogs.com/hanxi/archive/2012/08/01/2617648.html" target="_blank">关于实训的那点事儿</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="BOIDS规则的个人见解" href="http://www.cnblogs.com/hanxi/archive/2012/03/16/2400878.html" target="_blank">BOIDS规则的个人见解</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="[好软件和好网站推荐]" href="http://www.cnblogs.com/hanxi/archive/2011/05/02/2034558.html" target="_blank">[好软件和好网站推荐]</a></li>
<li style="width: 49%; float: left; line-height: 30px;"><a title="关于需要学习什么编程语言和要学多少种编程语言的一点点看法" href="http://www.cnblogs.com/hanxi/archive/2010/11/15/hanxi_firstnote.html" target="_blank">关于需要学习什么编程语言和要学多少种编程语言的一点点看法</a></li>
</ul>
<div style="clear: both;">&nbsp;</div>]]></description></item><item><title>随机序列</title><link>http://www.cnblogs.com/hanxi/archive/2013/01/24/2874537.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 24 Jan 2013 03:11:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2013/01/24/2874537.html</guid><description><![CDATA[<p>《算法导论》上看到的伪代码</p>
<p>好久没写c代码来，我写的c代码</p>
<div class="cnblogs_code">
<pre>#include &lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;ctime&gt;<span style="color: #000000;">
#include </span>&lt;cstdlib&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">int</span>* randomize(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n);

</span><span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span>**<span style="color: #000000;"> argv)
{
    srand((unsigned)time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));
    </span><span style="color: #0000ff;">int</span>* s = randomize(<span style="color: #800080;">100</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;<span style="color: #800080;">100</span>; i++<span style="color: #000000;">)
    {
        cout </span>&lt;&lt; s[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    }
    cout </span>&lt;&lt;<span style="color: #000000;"> endl;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}

</span><span style="color: #0000ff;">void</span> swap(<span style="color: #0000ff;">int</span>* s, <span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">int</span> t =<span style="color: #000000;"> s[b];
    s[b] </span>=<span style="color: #000000;"> s[a];
    s[a] </span>=<span style="color: #000000;"> t;
}

</span><span style="color: #0000ff;">int</span>* randomize(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span> *s = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">(n);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        s[i]</span>=<span style="color: #000000;">i;
        cout </span>&lt;&lt; s[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    }
    cout </span>&lt;&lt;<span style="color: #000000;"> endl;

    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> k = random()%(n-i) + i; <span style="color: #008000;">//</span><span style="color: #008000;">k=[i+1,n-i]</span>
        cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">k=</span><span style="color: #800000;">"</span> &lt;&lt; k &lt;&lt;<span style="color: #000000;"> endl;
        swap(s[i],s[k]);
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> s;
}</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>]]></description></item><item><title>入职一个多月了，谈谈感想</title><link>http://www.cnblogs.com/hanxi/archive/2012/12/13/2814256.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 13 Dec 2012 02:39:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/12/13/2814256.html</guid><description><![CDATA[<p>好久没写博客了，入职已经有一个多月了，今天我谈谈我工作的感想吧。</p>
<p>昨天一个同事离职了，跟我一样是出来实习的，工作经验比我多，思维很活跃，离职原因很简单：想从事底层开发。人各有志吧，跟我相同的是大学都不玩网游，却都进入了网游公司。希望他选择是对的，向梦想奔进。</p>
<p>步入游戏行业以来，感觉自己挺适合的，特别是我选择了游戏服务的开发。在学校的时候做的最多的方面就是游戏了，但都是局限于单机游戏，而且做的东西都跟界面关系很大，因此面试的时候觉得我适合做客户端，但我坚决的选择了服务端，一个重要的原因就是我想开发没有界面的东西（在linux下）。</p>
<p>进入公司就学习Lua脚本，挺简单的，基本的东西一天就学会了，现在对Lua慢慢比较熟悉了。大学时候就自己捣鼓着学习linux下的网络编程，总想有一天可以运用到实际场合，如今正好用上了。这个月做的主要内容就是协议的处理，最初使用的方法是序列化数据和反序列化数据，边做边改，最后以时间空间消耗太大而告终，然后又使用了老大给的新方案，采用内存映射的方法（省去了序列化和反序列化的操作，直接从内存中读取数据）。不过最后我写出来的不够稳定，老大自己决定重写，我感觉不错，因为又可以看老大写的代码了（老大写的代码不错，清晰易懂）。这就是一步一步学习的过程，假如给你一份你没写过相关东西的代码看，你看起来会吃力且学到的东西不会很多的，当你自己实现过相关功能后再去看别人实现的代码就是一个学习的历程。</p>
<p>在学校的时候就关注了<a href="http://blog.codingnow.com/">云风的博客</a>，就想着一步一步的提升自己的技术，现在啥事都离不开网络了，所以我觉得我从网游开始是可以学到很多东西的，进公司的第一天老大就给我们将游戏的框架，听得迷迷糊糊的，不过后面修改了游戏的框架，听着就不怎么迷糊了，所以感觉融入了网游这个环境吧。</p>
<p>写了这么多技术无关的话语，最后来段有用的东西吧。</p>
<p>获取本地ip地址</p>
<div class="cnblogs_code">
<pre>    <span style="color: #008000;">//</span><span style="color: #008000;">&lt;start&gt;获得本机地址，</span>
    <span style="color: #0000ff;">struct</span> ifaddrs* ia =<span style="color: #000000;"> NULL;
    getifaddrs(</span>&amp;<span style="color: #000000;">ia);
    </span><span style="color: #0000ff;">struct</span> ifaddrs* iia =<span style="color: #000000;"> ia;
    </span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>* filterstr = <span style="color: #800000;">"</span><span style="color: #800000;">192.168</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">while</span>( iia!=<span style="color: #000000;">NULL ){
        </span><span style="color: #0000ff;">struct</span> sockaddr_in* lookup_ip = (<span style="color: #0000ff;">struct</span> sockaddr_in*)iia-&gt;<span style="color: #000000;">ifa_addr;
        </span><span style="color: #0000ff;">if</span>(strcmp(iia-&gt;ifa_name,<span style="color: #800000;">"</span><span style="color: #800000;">en0</span><span style="color: #800000;">"</span>)==<span style="color: #800080;">0</span><span style="color: #000000;">){
            </span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>* ipstr = inet_ntoa(lookup_ip-&gt;<span style="color: #000000;">sin_addr);
            </span><span style="color: #0000ff;">char</span> ipstrcmp[<span style="color: #800080;">8</span><span style="color: #000000;">];
            ipstrcmp[</span><span style="color: #800080;">7</span>]=<span style="color: #800080;">0</span><span style="color: #000000;">;
            memcpy(ipstrcmp,ipstr,</span><span style="color: #800080;">7</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">if</span>(strcmp(ipstrcmp,filterstr)==<span style="color: #800080;">0</span><span style="color: #000000;">){
                printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">service start %s: %s:%d\n</span><span style="color: #800000;">"</span>,iia-&gt;<span style="color: #000000;">ifa_name,ipstr,listenport);
            }
        }
        iia </span>= iia-&gt;<span style="color: #000000;">ifa_next;
    }
    freeifaddrs(ia);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">&lt;end&gt;代码是老大写的，感觉不错，就分享下吧，网上实现也挺多的</span></pre>
</div>
<p>&nbsp;</p>]]></description></item><item><title>找工作？该复习了！</title><link>http://www.cnblogs.com/hanxi/archive/2012/11/04/2753993.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 04 Nov 2012 09:33:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/11/04/2753993.html</guid><description><![CDATA[<p>我把我找工作中遇到的知识点统计了下，并归类了下，希望可以帮到正在找工作的童鞋们！</p>
<p>如果觉得有需要增加的可以添加到评论中，方便其他园友复习。</p>
<h2>一、C</h2>
<p>①基本函数实现<br />swap()<br />reverse()<br />strcpy()<br />②五个存储区<br />③内存对齐<br />④数组名问题<br />int a[10];<br />int *p=a;<br />p++;p+1;a+1;<br />a++;//错误，数组名是常量</p>
<h2>二、C++</h2>
<p>①static的作用<br />②const的作用<br />③四个类型转换<br />static_cast&lt;&gt;;<br />dynamic_cast&lt;&gt;;<br />const_cast&lt;&gt;;<br />reinterpret_cast&lt;&gt;;<br />④placement new<br />规定对象的存储位置<br /><a href="http://blog.csdn.net/xiaobo68688/article/details/5650516">placement new机制初探</a><br />⑤浅拷贝和深拷贝<br />析构函数，operator=()，拷贝构造函数，三者一般同时自定义（自定义了一个则需定义其它两个）<br />⑥在C++中引用C的函数和变量<br />在前面加extern "C"<br />⑦虚析构函数的作用<br />防止内存泄露</p>
<h2>三、数据结构</h2>
<p>①链表<br />创建、添加、删除<br />②查找时间对比<br />栈、队列、二叉排序树、hash表<br />③Btree，Hash</p>
<h2>四、算法</h2>
<p>①排序<br />插入：直接插入、希尔<br />交换：冒泡、快速<br />选择：直接选择、堆排序<br />归并排序<br />基数排序<br />②最短路径<br />计算一个节点到其他所有节点的最短路径：Dijkstra算法<br />算法是解决任意两点间的最短路径的一种算法：Floyd-Warshall算法<br />③贪心法<br /><a href="http://blog.sina.com.cn/s/blog_5cf6cbf80100fnrv.html">贪心算法解决部分背包问题</a><br />④动态规划<br /><a href="http://blog.163.com/guixl_001/blog/static/41764104200863015855721/">动态规划法之背包问题</a></p>
<h2>五、数据库</h2>
<p>①基本语句<br /><a href="http://wenku.baidu.com/view/f66f573067ec102de2bd893d.html">数据库基本语句</a><br />②常用聚合函数<br />MIN(),MAX(),COUNT(),AVG(),SUM()<br />③查询语句<br /><a href="http://wenku.baidu.com/view/ae344d2a915f804d2b16c1fd.html">数据库查询语句</a></p>
<p>六、操作系统<br />①线程和进程的区别<br />1、 线程是进程的一部分，所以线程有的时候被称为是轻权进程或者轻量级进程。<br />2、 一个没有线程的进程是可以被看作单线程的，如果一个进程内拥有多个进程，进程的执行过程不是一条线（线程）的，而是多条线（线程）共同完成的。<br />3、 系统在运行的时候会为每个进程分配不同的内存区域，但是不会为线程分配内存（线程所使用的资源是它所属的进程的资源），线程组只能共享资源。那就是说，出了CPU之外（线程在运行的时候要占用CPU资源），计算机内部的软硬件资源的分配与线程无关，线程只能共享它所属进程的资源。<br />4、 与进程的控制表PCB相似，线程也有自己的控制表TCB，但是TCB中所保存的线程状态比PCB表中少多了。<br />5、 进程是系统所有资源分配时候的一个基本单位，拥有一个完整的虚拟空间地址，并不依赖线程而独立存在。</p>
<p>②进程同步的方式<br />管道/FIFO/共享内存/消息队列/信号 </p>
<p>③线程同步的方式<br />临界区:通过对多线程的串行化来访问公共资源或一段代码，速度快，适合控制数据访问<br />互斥量:为协调共同对一个共享资源的单独访问而设计的<br />信号量:为控制一个具有有限数量用户资源而设计<br />事件:用来通知线程有一些事件已发生，从而启动后继任务的开始</p>
<p>④进程间通讯的方式<br />管道：速度慢，容量有限<br />消息队列：容量受到系统限制，且要注意第一次读的时候，要考虑上一次没有读完数据的问题。<br />信号量：不能传递复杂消息，只能用来同步<br />共享内存区：能够很容易控制容量，速度快，但要保持同步，比如一个进程在写的时候，另一个进程要注意读写的问题，相当于线程中的线程安全，当然，共享内存区同样可以用作线程间通讯，不过没这个必要，线程间本来就已经共享了一块内存的。</p>
<p>⑤死锁的四个必要条件<br />互斥条件（Mutual exclusion）：资源不能被共享，只能由一个进程使用。<br />请求与保持条件（Hold and wait）：已经得到资源的进程可以再次申请新的资源。<br />非剥夺条件（No pre-emption）：已经分配的资源不能从相应的进程中被强制地剥夺。<br />循环等待条件（Circular wait）：系统中若干进程组成环路，改环路中每个进程都在等待相邻进程正占用的资源。</p>
<p>⑥处理死锁的策略<br />忽略该问题。例如鸵鸟算法，该算法可以应用在极少发生死锁的的情况下。为什么叫鸵鸟算法呢，因为传说中鸵鸟看到危险就把头埋在地底下，可能鸵鸟觉得看不到危险也就没危险了吧。跟掩耳盗铃有点像；<br />检测死锁并且恢复；<br />仔细地对资源进行动态分配，以避免死锁；<br />通过破除死锁四个必要条件之一，来防止死锁产生；</p>
<h2>七、计算机网络</h2>
<p>①TCP和UDP<br />1。基于连接与无连接 <br />2。对系统资源的要求（TCP较多，UDP少） <br />3。UDP程序结构较简单 <br />4。流模式与数据报模式 <br />5。TCP保证数据正确性，UDP可能丢包，TCP保证数据顺序，UDP不保证</p>
<p>②TCP/IP四层协议<br />网络接口层、网间网层、传输层、应用层</p>
<p>③OSI七层网络协议<br />OSI的7层从上到下分别是 <br />7 应用层 <br />6 表示层 <br />5 会话层 <br />4 传输层 <br />3 网络层 <br />2 数据链路层 <br />1 物理层</p>
<p>④五种网络I/O<br /><a href="http://www.linuxidc.com/Linux/2012-08/66976.htm">Unix网络编程中的的五种I/O模型</a></p>]]></description></item><item><title>【2012】笔试面试总结（二）</title><link>http://www.cnblogs.com/hanxi/archive/2012/11/03/2752612.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 03 Nov 2012 13:00:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/11/03/2752612.html</guid><description><![CDATA[<p>接上篇：<a id="homepage1_HomePageDays_DaysList_DayItem_0_DayList_0_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2012/10/31/2746633.html">【2012】笔试面试总结（一）</a></p>
<p>经过几次的寻找，现在终于找到落脚的地方了，星期一就要上班了，今天有点时间我就把一路走来的经历给大家分享下。</p>
<p>上篇写到的最后一家面试结束后就接到了一家游戏公司（我现在的东家，姑且称呼他为A公司）的面试通知（时间2012.10.31），同时也接到了另一家公司（姑且称呼他为B公司）的面试通知（时间2012.11.1）。后面也没别的公司来通知了，就面试了AB公司。</p>
<h2>A公司</h2>
<p>我非常喜欢这个公司，都是年轻人，面试的时候一点都不紧张。首先是一份笔试题，笔试题有简单的也有难的。</p>
<p>大致分为基础题（C语言的代码相关的知识点，包括for循环和++运算符的操作问题）；</p>
<p>概念题（线程和进程；5种网络I/O模式《Unix网络编程：卷1》中有答案，我忘记的差不多了，<a href="http://blog.renren.com/share/225618091/5950086712" target="_blank">别人总结的</a>）；</p>
<p>重点题（数据结构的查找时间（hash表最快）；设计模式；软件测试：黑盒白盒，测试用例和测试方案）。</p>
<p>说实话，虽然我看过《Unix网络编程：卷1》，但我对5种网络I/O模式的映像不大，可能是看书的时候注重看tcp和udp那一块去了吧。四人帮的那本《设计模式》真难看懂啊，我在图书馆借了两次，第一次看了一点点，第二次还没翻，现在还在学校寝室垫笔记本呢。不过只要写3中熟悉的设计模式，第一个就想到了单例模式和工厂模式（在我的项目中用过），其实还想到了桥接模式（有点复杂。记得不是很清了就没写）。然后就是软件测试那一块了，《软件工程：实践者的研究方法》那本书很好，在学校上课也听到有点模糊（没有过真正项目经验的就更模糊了），而且测试这一块没学到什么，所以就是写了下我的想法吧，因为按照书上的规则去写测试案例我真的忘记了。</p>
<p>笔试完后进入面试，这是一次与之前的不同，考官有两个，其中一个是主程。都很年轻，对话的过程中就像在跟学长交流一样，这让我对公司有了更加强烈的向往了。年轻的公司好啊！问到了一个&ldquo;<a href="http://zh.wikipedia.org/wiki/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84" target="_blank">最短路径</a>&rdquo;的问题。我在大学有好几门课程都提到这个知识的《数据结构》《运筹学》《数学模型》等等还有。但是我只是用matlab写过<a class="mw-redirect" title="Dijkstra算法" href="http://zh.wikipedia.org/wiki/Dijkstra%E7%AE%97%E6%B3%95">Dijkstra算法</a>和<a class="mw-redirect" title="Floyd-Warshall算法" href="http://zh.wikipedia.org/wiki/Floyd-Warshall%E7%AE%97%E6%B3%95">Floyd-Warshall算法</a>，贪心算法的思想。我回答的时候是说我之前都学过，现在有点模糊了。我还记得我在参加数学建模竞赛的时候用到过最小生成树算法。所以我总结下，<a href="http://zh.wikipedia.org/wiki/Prim" target="_blank">prim</a>和<a href="http://zh.wikipedia.org/wiki/%E8%BF%AA%E7%A7%91%E6%96%AF%E5%BD%BB%E7%AE%97%E6%B3%95" target="_blank">Dijkstra</a>是两种经典的最小生成树算法。<a title="深度优先搜索" href="http://zh.wikipedia.org/wiki/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2">深度优先搜索</a>和<a title="广度优先搜索" href="http://zh.wikipedia.org/wiki/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2">广度优先搜索</a>是两种经典的搜索算法（还有启发式和遗传算法，我都记得不清晰了，都是数学建模中用到的很重的算法啊），还有很重要的<a href="http://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92" target="_blank">动态规划</a>(我觉得它是一种思想，贪心法也是。)了，<a class="mw-redirect" title="Floyd-Warshall算法" href="http://zh.wikipedia.org/wiki/Floyd-Warshall%E7%AE%97%E6%B3%95">Floyd-Warshall算法</a>运用的就是动态规划的思想。最后问了下其他的东西，比如说：&ldquo;我说我喜欢linux，然后就问了windows和linux的区别&rdquo;，&ldquo;你为啥应聘这职位啊&rdquo;等等，反正这次面试感觉很成功，和面试官聊天没代沟，很亲切的感觉。</p>
<p>完后就收到了二面的通知，二面是HR面，也是年轻，就像一位学姐。不过聊了什么不重要，HR问什么和网上的差不多吧，不介绍了，不涉及技术问题我不知道怎么说。最后就成功成为公司的一员了。</p>
<h2>B公司</h2>
<p>不是游戏公司，有点像外包公司（不像那种普通的外包公司吧，有自己的产品的），为企业解决方案的那种，走的是智能化路线（人工智能的知识，看了公司的网页，好多产品都是为企业解决大量数据处理的），所以我就投了简历，然后收到面试通知，进去就是笔试，一眼看到卷子，觉得卷子有点难度，我就说下考了哪方面的知识吧。</p>
<p>数据结构：hash算法，B-tree。需要写出代码，我觉得挺有难度的，之前博客中写过<a id="CategoryEntryList1_EntryStoryList_Entries_TitleUrl_17" class="entrylistItemTitle" href="http://www.cnblogs.com/hanxi/archive/2012/08/18/2645929.html">【c++模板实现】二叉查找树</a>。</p>
<p>英语题：我误解题意了，题目中出现3个total，我忽略它了，结果代码也就写错了。其实就是<a href="http://zh.wikipedia.org/wiki/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98" target="_blank">背包问题</a>.</p>
<p>数据库+语言：写一个缓存数据库中的类的实现（类似于数据持久化吧，感觉之前在《代码精粹》中见过，但是没找到），减少对数据库读写的次数；写权限模型的代码，这两篇文章写的挺好的<a href="http://www.cnblogs.com/ego/articles/1536436.html" target="_blank">权限模型的设计</a>和<a href="http://www.blogjava.net/bluedavy/archive/2005/11/08/18714.html" target="_blank">权限模型</a>，如果深入的话可以关注<span><a href="http://www.cnblogs.com/jirigala" target="_blank">吉日嘎拉</a>的博客。</span></p>
<p>最后两题：<a href="http://www.cnblogs.com/peng14/archive/2012/09/05/2671900.html" target="_blank">js实现面向对象</a>（我不会，博客园中好多园友实现了，只是挑了一个感觉还好的链接给大家瞧瞧），单例模式的实现。</p>
<p>面试大概5分钟把我KO了。问到hash表中重复位置的概率和什么有关（我不知道，你知道吗？）然后问到Btree的搜素时间我说nlogn,连续问几次我还是说nlogn，又问最坏的情况呢？我说n^2。结束后在返程的公交上我才反应过来，我一紧张把那个和排序时间搞在一起了（悲催吧，千万要记住，前面有题不会答后面也不能慌）。</p>
<p>回来后，我做了一番深思，我觉得好多以前学过的都忘记了，该把以前会的东西总结下，心情不怎么爽。结果我就找了位学长（不是一个专业，但都是IT行业）聊天，蛮感谢这学长的，仅见过一面（他的毕业答辩）。聊了些专业的东西，聊到我还有好多不足之处需要努力跟上这个IT时代，介绍了下现在IT行业的情况，最后还帮我改简历，很感谢他。</p>
<p>接着又一个好朋友（网名：鸟人，江南技术联盟的负责人）来找我聊天，又聊到了我找工作的事，接着也帮我改简历，提出来的建议都很好，还帮我写自我评价，他文采很好的，给大家分享下吧！</p>
<blockquote>
<div><span>&nbsp; &nbsp;<em>首先，我觉得我自己学习习惯比较好：我有自己的博客，大学期间我坚持记录自己学习的内容；其次我觉得我自学能力比较强，我还比较善于利用搜索引擎进行学习，比如百度谷歌，并在解决问题之后总结记录；第三，我适应能力比较强，比较善于适应新的环境，善于与周围的人沟通和交流；第四，我有较强的团队意识，敢于表达自己的意见与建议，我曾经加入过多个网络联盟，并且任职其核心人员，我曾经在网络的平台以YY等沟通交流工具为200人讲过进1个月的C/C++等技术；最后，我觉得我做事比较认真、积极，我有良好的抗压能力，比如在江南技术联盟（网络工会）任职讲师期间，我为该团队搜集PHP等教程并制作PHP教学文档，受到了大家的好评。</em></span></div>
</blockquote>
<div>然后鸟人又打电话过来教我自我介绍，谢谢鸟人，他做过DBA，教的很好，我忘记录音的，幸好用笔记下了关键点，类似于上面自我评价的格式，大家可以自己发挥。最后我打算把江南技术联盟继续做起来（技术需要拿出来分享，慢慢来），但是同样也要全力对待即将上岗的工作（实习6个月，表现好就录用），在学习知识的时候同样也为公司的利益而奋斗（年轻人就该奋斗）。谢谢大家把这长文看完。</div>
<div><audio width="300" height="32" src="http://m.xbdj.cn/43f2fd8fb93ca0a113b2a7504935aae315/www.xbdj.cn.mp3" preload="metadata"></audio></div>]]></description></item><item><title>【2012】笔试面试总结（一）</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/31/2746633.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 30 Oct 2012 18:14:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/31/2746633.html</guid><description><![CDATA[<h1>1.校招</h1>
<h2>第1家</h2>
<p>没去参加它的宣讲会，但是在现场招聘时获得了笔试的机会（现场问了下基本情况，然后叫我写个函数从1加到10。(*^__^*) 嘻嘻&hellip;&hellip;很简单吧）</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ec62d6cb-b356-412a-9d28-04900e834dfc')"><img id="code_img_closed_ec62d6cb-b356-412a-9d28-04900e834dfc" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_ec62d6cb-b356-412a-9d28-04900e834dfc" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ec62d6cb-b356-412a-9d28-04900e834dfc',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">超简单的，不知道考我什么？</span>
<div id="cnblogs_code_open_ec62d6cb-b356-412a-9d28-04900e834dfc" class="cnblogs_code_hide">
<pre><span style="color: #0000ff;">int</span><span style="color: #000000;"> sum()
{
    </span><span style="color: #0000ff;">int</span> s = <span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;=<span style="color: #800080;">10</span>; i++<span style="color: #000000;">)
    {
        s </span>+=<span style="color: #000000;"> i;
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> s;
}</span></pre>
</div>
</div>
<p>&nbsp;</p>
<p>&nbsp;然后就立即去参加笔试，拿到笔试的卷子，我懵了！第一份全是电路的（我报的是软件开发啊，咋有电路），第二份都是嵌入式的，题目不记得了，稍微做了下就交掉了。记得最后一道题是&ldquo;将某一块内存的内容拷贝到另一块内存&rdquo;（我乱写的，不贴出来了），然后没有后话了。</p>
<h2>第2家</h2>
<p>现场面试，叫我写个冒泡排序，当时有点紧张，乱写的，幸好没写错，差点和选择排序搞在一起了。中午回寝室测试了一番的。我写的代码如下：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('aff872a0-4a73-4d81-be4d-15a8509454d0')"><img id="code_img_closed_aff872a0-4a73-4d81-be4d-15a8509454d0" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_aff872a0-4a73-4d81-be4d-15a8509454d0" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('aff872a0-4a73-4d81-be4d-15a8509454d0',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">bubble_sort</span>
<div id="cnblogs_code_open_aff872a0-4a73-4d81-be4d-15a8509454d0" class="cnblogs_code_hide">
<pre><span style="color: #0000ff;">void</span> bubble_sort(<span style="color: #0000ff;">int</span> s[], <span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n-<span style="color: #800080;">1</span>; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j=i+<span style="color: #800080;">1</span>; j&lt;n; j++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">if</span> (s[i]&lt;<span style="color: #000000;">s[j])
            {
                s[i] </span>= s[i]^<span style="color: #000000;">s[j];
                s[j] </span>= s[i]^<span style="color: #000000;">s[j];
                s[i] </span>= s[i]^<span style="color: #000000;">s[j];
            }
        }
    }
}</span></pre>
</div>
</div>
<p>&nbsp;</p>
<p>然后下午收到短信进入二面了，谈了自己的个人情况（相当于自我介绍吧），还问了下优缺点什么的。回到寝室不久又接到通知，进行三面，叫我把以前做过的项目带给他看看。最后谈了薪资待遇什么的，我要求说的有点高（主要是自己有点不想去吧，人家生产LED的，我在那的发展空间不大）。还说带我去公司参观下，由于时间的冲突，我推脱了，他们也委婉的说会另安排时间，叫我等通知，最后就没后话了。</p>
<h2>第3家</h2>
<p>现场一句话把我拒绝了，&ldquo;你英语四级没过啊，我司规定英语过四级的，你可以走了&rdquo;。我就走了。</p>
<p><em>由于我的专业在学校属于冷门专业吧，来招我们专业的公司很少，有一大部分钢铁采矿采矿公司招计算机的（应该是招维护计算机的），所以没去（不能编程，去那干吗？）。不过今年还好，来了3家硬件相关的（跟我没关，我学的是数学类的，跟软件关系很大）。</em></p>
<h1>2.网申</h1>
<p>之前获得了百度的笔试机会，腾讯的笔试是霸王考的。最后都被刷了（没进入面试，可怜的孩子( ⊙ o ⊙ )啊！），没啥经验，收获就是：</p>
<p>大公司的笔试很注重算法的，所以笔试前一定要复习<strong>算法和数据结构。</strong></p>
<h2>第1家</h2>
<p>笔试时间是两个小时，题目量好大，主要题型分布是：</p>
<p>选择题包括逻辑题，算法（基本概念和时间问题），数据结构，数据库（基本概念），C语言，计算机网络（基本概念）；</p>
<p>填空题包括链表的插入，哈夫曼树，折半查找，数据库，完全二叉树（腾讯也考了，一样的数字），阶乘尾部0的个数的计算方法（谁有好方法就贴出来吧，以前在《编程之美》中见过），树的遍历；</p>
<p>问答题占了一半的分数，题目是：</p>
<p>a）线程和进程的概念及区别（《面试宝典》中有答案，记得不是很全，只是稍微答了几点），</p>
<p>b）给定环状链表的一个节点的指针，求它的最远节点（我用的是遍历链表的方法，不知道还有什么好方法没有？），</p>
<p>c）对数字的全排列问题（之前我写过的<a href="http://www.cnblogs.com/hanxi/archive/2012/10/30/2502606.html" target="_blank">全排列的实现</a>，但是忘记怎么做了，没做出来），</p>
<p>d）完成SQL操作，和在学校的期末考试的题目差不多（但是几乎忘记了，没动笔），</p>
<p>e）实现工厂模式和迭代器模式（工厂模式我会写，但是迭代器模式不知对不对，我直接写C++中迭代器的实现的方式的），</p>
<p>f）给出一条路径图，求最短路径（这题目见过多次，数据结构，数学模型，Matlab，运筹学，离散数学中都有这题目的影子，但是我忘记怎么做了，解法很多：<a href="http://baike.baidu.com/view/349189.htm" target="_blank">最短路径</a>，<a href="http://baike.baidu.com/view/7839.htm" target="_blank">Dijkstra算法</a>），</p>
<p>最后一道附加题，关系到大型游戏服务器的数据保护，异常处理，数据的保存时机，Mysql访问性能等等。</p>
<p><em>总体上看，这卷子我做的不咋地，但是晚上收到面试通知了，可是我人已经在火车上了，问了下是否可以调整面试地点，结果也没后话了。</em></p>
<h2>第2家</h2>
<p>没能参加上一家面试的主要原因是我来这家参加面试，是一个星期前安排好的面试。坐了一晚上火车，早上到了公司，网游公司，进去就是填一份简历和做一份卷子，先说下卷子大概的题目吧。</p>
<p>a）<a href="http://www.cnblogs.com/hanxi/archive/2012/10/16/2725358.html" target="_blank">反转字符串函数的实现</a>，我之前笔试中做过，</p>
<p>b）判断素数（道理很简单的，就是判断1到sqrt(N)中是否存在整除的数，学C语言的时候一般都写过的），</p>
<p>c）排序（没说用什么方法实现，我用的是选择法），</p>
<p>d）实现游戏中的背包，包括更新、删除、插入（我直接封装C++的list实现的），</p>
<p>e）一个链表中存在一个环，怎么判断？（我使用的方法是从头开始遍历每一个节点，判断下一个节点是否在头节点到该节点中的节点，不知道网友们是否有更好的方法）</p>
<p>f）连连看游戏的实现（我写了宽度优先搜索的思想），</p>
<p>做完卷子就进入了一面，一面有点紧张，没让我自介绍（我都准备好了的( ⊙ o ⊙ )啊！），考官让我说说我平时使用了些什么编程工具，然后问了C++中的析构函数为什么一般设为虚函数（我答的是在Base* b= new Driver(); delete b;时能够正确的调用到派生类的析构函数），还问了TCP和UDP的区别（我不仅仅答了面向有链接和无连接，还拿登陆QQ时验证是用的TCP和聊天时发送消息使用的是UDP，一个是可靠的数据传输一个不可靠的）。</p>
<p>一面很成功，但是面试的职位不是C++的，面试Erlang程序员，我没学过这玩意，考官给我3天时间学习（发了本电子书给我），最后我咬牙学Erlang。今天进行的二面失败了，同一个考官，给我份Erlang的卷子，我书没看完，我说只看到TCP和UDP那一章，他就挑了些题目给我做啊，做的很烂很烂，没学好Erlang啊！最后就结束了。不过话说回来，还是蛮感谢这位考官的，让我见识了<a href="http://subject.csdn.net/erlang.htm" target="_blank">Erlang的强大</a>。</p>
<h2>第3家</h2>
<p>这家公司应该是比较大的，但是是去一个项目组面试，进去看到一堆程序猿在编程（第一感觉以为是网吧！），同样进去就是填写简历，后来走进一个面试官，给了我两道智力题，分享一下吧。</p>
<p>a）两根不均匀的绳子，烧完一个需要1小时，怎么实现烧完两根绳子恰好45分钟（我答的是同时在1/4处点燃，网友们有好答案不？）。</p>
<p>b）请工人为你工作7天，你又一根金条，已经平均分成相连的7段，每天下班你必须给工人一段金条，你只有两次折断金条的机会，你怎么给你的工人发工资（我当时想了很久没想出来，今天我同学告诉了我答案：第一天折断1节给工人；第二天折断2节给工人，让工人还给你昨天给的那1节；第3天给工人剩下的3节，工人换你昨天给的2节；第4天一次下去。我咋没想到这桩买卖呢？？？智力有问题( ⊙ o ⊙ )啊！）。</p>
<p>最后也说了薪资的问题，说我开价开高了，我说我没毕业不清楚行情。然后说公司是使用Erlang语言开发服务器的。说有培训的。然后叫我回去等通知，就没有后话了。</p>
<p><em>我总结了个经验，网页游戏招后台服务器开发的明写着招C++的其实是让你使用Erlang开发的，因为Erlang在这方面的优势现在强于C++（写并行程序比C++简单多了，快速，高效）。现在市面上会Erlang的很少。</em></p>
<h2>第4家</h2>
<p>在我租的房子附近（我租了一个月的房子，一定要找到工作啊！），之前的都需要做公交，这个公司不用了，就在马路对面。下雨天，没伞，工作地点像个普通的工厂（楼下就是工厂），进去之后看到里面的环境还行（也有点像网吧，比上一家好一点，每个人的桌子要大一些），然后在休息室坐一下，没叫我填基本信息，给了一张试卷：</p>
<p>很简单的C语言的题目，最后一个大题是冒泡排序；前面几道是问某某情况下使用函数库的某某函数（有一个我不知道使用函数的名称，判断一个字符串是否是另一个字符串的字串strstr()，嘿嘿！刚百度了好久）；32位机右移33位的问题，我做错了，<a href="http://blog.sina.com.cn/s/blog_7cb1c50e0100rgqj.html" target="_blank">网上是说移动的位数是33%32</a>。<a href="http://baike.baidu.com/view/656648.htm" target="_blank">feof()</a>和<a href="http://baike.baidu.com/view/656651.htm" target="_blank">fgetc()</a>函数的作用。</p>
<p>然后开始了面试，第一个自我介绍，然后介绍下我做过的东西。还问我学习一个新的开发平台需要多长时间？修改代码的能力怎么样（比如说存在C++版本改成Java版本）？然后说一个星期内给<span style="color: #ff6600;">应聘通知（就一面的？）</span>，结束后我就想了想，这不就是招码农吗？笔试面试要求的东西很低（只要你会写代码），不然怎么会考一些可以查函数文档的知识呢？（测试你写代码的熟练程度）问我修改代码的能力不就是说<span style="color: #ff6600;">微创新</span>么？【网友！你怎么看？】</p>
<p>给我点更新博客的动力吧！！！因为找工作的原因好像许久没更新了，没带笔记本在身边（笔记本上有几篇草稿没完成，回校后写完给大家分享下），更新博客不方便，这些事这几天记在小本子上的，今天就做个这样的小结：<span style="color: #ff6600;">笔试考的是基础</span>(数据结构和算法很重要)，<span style="color: #ff6600;">面试问的会很细</span>(这个要看你懂哪方面就会问哪方面的，不要在简历上写什么都精通，要不然面试的时候随便问一个详细点的东西你会懵了的)。明天下午有个笔试（又是网游服务端开发的，maybe use Erlang too!）</p>
<p><em>总结时间：2012.10.30</em></p>]]></description></item><item><title>全排列的实现</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/30/2502606.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 30 Oct 2012 09:45:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/30/2502606.html</guid><description><![CDATA[<p>&nbsp;</p>
<p>编程思路如下（截取自《Erlang程序设计》3.8）：</p>
<p><img style="vertical-align: baseline;" src="http://pic002.cnblogs.com/images/2012/198486/2012103017395890.png" alt="" width="720" /></p>
<p>调试的代码：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('c2e6ff85-347c-4169-bf77-d2d10d031fdf')"><img id="code_img_closed_c2e6ff85-347c-4169-bf77-d2d10d031fdf" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_c2e6ff85-347c-4169-bf77-d2d10d031fdf" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c2e6ff85-347c-4169-bf77-d2d10d031fdf',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_c2e6ff85-347c-4169-bf77-d2d10d031fdf" class="cnblogs_code_hide">
<pre>#include &lt;cstdlib&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;vector&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">void</span> insert(<span style="color: #0000ff;">string</span> &amp;str,<span style="color: #0000ff;">char</span> ch, vector&lt;<span style="color: #0000ff;">string</span>&gt;&amp;<span style="color: #000000;"> aa)
{
    </span><span style="color: #0000ff;">int</span> n=<span style="color: #000000;">str.length();
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;=n; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">string</span> t_str =<span style="color: #000000;"> str;
        t_str.insert(i,</span><span style="color: #800080;">1</span><span style="color: #000000;">,ch);
        aa.push_back(t_str);
    }
}
</span><span style="color: #0000ff;">void</span> fun(<span style="color: #0000ff;">string</span> array, vector&lt;<span style="color: #0000ff;">string</span>&gt;&amp;<span style="color: #000000;"> a)
{
    </span><span style="color: #0000ff;">int</span> n =<span style="color: #000000;"> array.length();
    </span><span style="color: #0000ff;">if</span> (n==<span style="color: #800080;">2</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">string</span> str1 =<span style="color: #000000;"> array;
        </span><span style="color: #0000ff;">string</span> str2 = array.substr(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>)+array.substr(<span style="color: #800080;">0</span>,<span style="color: #800080;">1</span><span style="color: #000000;">);
        a.push_back(str1);
        a.push_back(str2);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">string</span> array2 = array.substr(<span style="color: #800080;">1</span>,n-<span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">    cout &lt;&lt; "array2=" &lt;&lt; array2&lt;&lt;endl;</span>
    vector&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;"> aa;
    </span><span style="color: #0000ff;">char</span> ch = array[<span style="color: #800080;">0</span><span style="color: #000000;">];
    fun(array2,a);
</span><span style="color: #008000;">//</span><span style="color: #008000;">    cout &lt;&lt; "a.size()=" &lt;&lt; a.size() &lt;&lt; endl;</span>
    n =<span style="color: #000000;"> a.size();
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
</span><span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; "a[" &lt;&lt;i&lt;&lt;"]="&lt;&lt; a[i] &lt;&lt; endl;</span>
<span style="color: #000000;">        insert(a[i],ch,aa);
</span><span style="color: #008000;">/*</span><span style="color: #008000;">        for (int i=0; i&lt;aa.size();i++)
        {
            cout &lt;&lt;"aa["&lt;&lt;i&lt;&lt;"]="&lt;&lt; aa[i]&lt;&lt; endl;
        }
</span><span style="color: #008000;">*/</span><span style="color: #000000;">
    }
    a.resize(aa.size());
    copy(aa.begin(),aa.end(),a.begin());
}

</span><span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> *<span style="color: #000000;">argv[])
{
    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> str;
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">----全排列-----</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
    cout </span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">退出请输入:exit</span><span style="color: #800000;">"</span>&lt;&lt;<span style="color: #000000;">endl; 
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">请输入待排列的序列（如：abc）：</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    cin</span>&gt;&gt;<span style="color: #000000;">str;
    </span><span style="color: #0000ff;">while</span> (str!=<span style="color: #800000;">"</span><span style="color: #800000;">exit</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    {
        vector</span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;"> v_str;
        fun(str,v_str);
        </span><span style="color: #0000ff;">int</span> size =<span style="color: #000000;"> v_str.size();
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;size; i++<span style="color: #000000;">)
        {
            cout </span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">v_str[</span><span style="color: #800000;">"</span>&lt;&lt;i&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">]=</span><span style="color: #800000;">"</span>&lt;&lt; v_str[i]&lt;&lt;<span style="color: #000000;"> endl;
        }
        cout </span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">退出请输入:exit</span><span style="color: #800000;">"</span>&lt;&lt;<span style="color: #000000;">endl; 
        cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">请输入待排列的序列（如：abc）：</span><span style="color: #800000;">"</span><span style="color: #000000;">;
        cin</span>&gt;&gt;<span style="color: #000000;">str;
    }
    system(</span><span style="color: #800000;">"</span><span style="color: #800000;">PAUSE</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> EXIT_SUCCESS;
}</span></pre>
</div>
</div>
<p>正式代码：</p>
<div class="cnblogs_code">
<pre>#include &lt;cstdlib&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;vector&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">void</span> insert(<span style="color: #0000ff;">string</span> &amp;str,<span style="color: #0000ff;">char</span> ch, vector&lt;<span style="color: #0000ff;">string</span>&gt;&amp;<span style="color: #000000;"> aa)
{
    </span><span style="color: #0000ff;">int</span> n=<span style="color: #000000;">str.length();
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;=n; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">string</span> t_str =<span style="color: #000000;"> str;
        t_str.insert(i,</span><span style="color: #800080;">1</span><span style="color: #000000;">,ch);
        aa.push_back(t_str);
    }
}
</span><span style="color: #0000ff;">void</span> fun(<span style="color: #0000ff;">string</span> array, vector&lt;<span style="color: #0000ff;">string</span>&gt;&amp;<span style="color: #000000;"> a)
{
    </span><span style="color: #0000ff;">int</span> n =<span style="color: #000000;"> array.length();
    </span><span style="color: #0000ff;">if</span> (n==<span style="color: #800080;">2</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">string</span> str1 =<span style="color: #000000;"> array;
        </span><span style="color: #0000ff;">string</span> str2 = array.substr(<span style="color: #800080;">1</span>,<span style="color: #800080;">1</span>)+array.substr(<span style="color: #800080;">0</span>,<span style="color: #800080;">1</span><span style="color: #000000;">);
        a.push_back(str1);
        a.push_back(str2);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">string</span> array2 = array.substr(<span style="color: #800080;">1</span>,n-<span style="color: #800080;">1</span><span style="color: #000000;">);
    vector</span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;"> aa;
    </span><span style="color: #0000ff;">char</span> ch = array[<span style="color: #800080;">0</span><span style="color: #000000;">];
    fun(array2,a);
    n </span>=<span style="color: #000000;"> a.size();
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        insert(a[i],ch,aa);
    }
    a.resize(aa.size());
    copy(aa.begin(),aa.end(),a.begin());
}

</span><span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> *<span style="color: #000000;">argv[])
{
    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> str;
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">----全排列-----</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
    cout </span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">退出请输入:exit</span><span style="color: #800000;">"</span>&lt;&lt;<span style="color: #000000;">endl; 
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">请输入待排列的序列（如：abc）：</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    cin</span>&gt;&gt;<span style="color: #000000;">str;
    </span><span style="color: #0000ff;">while</span> (str!=<span style="color: #800000;">"</span><span style="color: #800000;">exit</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    {
        vector</span>&lt;<span style="color: #0000ff;">string</span>&gt;<span style="color: #000000;"> v_str;
        fun(str,v_str);
        </span><span style="color: #0000ff;">int</span> size =<span style="color: #000000;"> v_str.size();
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;size; i++<span style="color: #000000;">)
        {
            cout </span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">v_str[</span><span style="color: #800000;">"</span>&lt;&lt;i&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">]=</span><span style="color: #800000;">"</span>&lt;&lt; v_str[i]&lt;&lt;<span style="color: #000000;"> endl;
        }
        cout </span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">退出请输入:exit</span><span style="color: #800000;">"</span>&lt;&lt;<span style="color: #000000;">endl; 
        cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">请输入待排列的序列（如：abc）：</span><span style="color: #800000;">"</span><span style="color: #000000;">;
        cin</span>&gt;&gt;<span style="color: #000000;">str;
    }
    system(</span><span style="color: #800000;">"</span><span style="color: #800000;">PAUSE</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> EXIT_SUCCESS;
}</span></pre>
</div>]]></description></item><item><title>我的简历</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/20/2731926.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 20 Oct 2012 02:23:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/20/2731926.html</guid><description><![CDATA[<p align="left">&nbsp;</p>
<p align="left"><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210201022299422.jpg"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="蓝色主题简历-1" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210201022297437.jpg" alt="蓝色主题简历-1" width="595" height="842" border="0" /></a></p>
<p align="left"><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210201022291864.jpg"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="蓝色主题简历-2" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210201022299879.jpg" alt="蓝色主题简历-2" width="595" height="842" border="0" /></a></p>]]></description></item><item><title>读《C和C++代码精粹》——Chunk Allison著，董慧颖译</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/18/2728923.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 18 Oct 2012 01:50:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/18/2728923.html</guid><description><![CDATA[<h2>第1章 更好的C</h2>  <ul>   <li>C++是类型安全语言 </li>    <li>所有函数在第一次使用之前必须声明或定义 </li>    <li>引用参数直接支持引用调用语义 </li>    <li>模板允许创建通用函数 </li>    <li>内联函数将类似于函数的宏的高效与实际函数的安全性相结合 </li>    <li>声明可以出现在函数可以出现的任意位置 </li> </ul>  <h2>第2章 指针</h2>  <ul>   <li>C和C++仅仅与那些使用它们的人一样危险 </li>    <li>指针是地址 </li>    <li>可以将任何一个指针赋值成void* </li>    <li>注意区分一个const指针和一个指向const的指针 </li>    <li>p+n == (char*)p+n*sizeof(*p) </li>    <li>*(a+i) == a[i] </li>    <li>除非在sizeof和&amp;的上下文中，否则一个数组名即是指向它第一个元素的指针 </li>    <li>没有多维数组，只有数组的数组 </li>    <li>仅是指针的存在并不要求它所引用的类型的实现的有效性（这是一个不完全类型） </li> </ul>  <p><em><font face="华文仿宋">如果理解了这些概念，你就正在逐渐成为一名可信赖的C++程序员。</font></em></p>  <h2>第3章 预处理器</h2>  <ul>   <li>预处理器不能理解语言 </li>    <li>头不一定是文件？（不理解） </li>    <li>彻底的记住带括号的宏 </li>    <li>宁可用内联函数而不用类函数的宏（除了字符串化和标记粘贴） </li>    <li>宁可用常值而不要用类对象的宏 </li>    <li>用assert宏来捕捉不应该发生的概念错误 </li>    <li>有条件地用特殊的宏来编译头文件（来避免循环包含） </li>    <li>C和C++支持三字符组合以适应国际键盘，C++支持更多可读双字符和其他保留字 </li> </ul>  <h2>第4章 Ｃ标准库之一：面向合格的程序员</h2>  <ul>   <li>&lt;ctype.h&gt;字符处理，isupper(c),tolower(),… </li>    <li>&lt;stdio.h&gt;输入输出，包括格式化函数、字符I/O函数和文件函数 </li>    <li>&lt;stdlib.h&gt;复杂的工具，含有div函数返回的结构div_t{quot商,rem余数}，长整数是ldiv_t </li>    <li>&lt;string.h&gt;文本处理，复制、连结、比较和查找 </li> </ul>  <h2>第5章 C标准库之二：面向熟练的程序员</h2>  <ul>   <li>&lt;assert.h&gt;支持有保护的程序的断言 </li>    <li>&lt;limits.h&gt;整数运算的系统参数 </li>    <li>&lt;stddef.h&gt;通用类型和常量 ，包含宽字符类型wchar_t </li>    <li>&lt;time.h&gt;时间处理 </li> </ul>  <h2>第6章 C标准库之二：面向优秀的程序员</h2>  <ul>   <li>&lt;errno.h&gt;错误检测 </li>    <li>&lt;float.h&gt;实数运算的系统参数 </li>    <li>&lt;locale.h&gt;文化自适应 </li>    <li>&lt;math.h&gt;数学函数 </li>    <li>&lt;setjmp.h&gt;非局部分支 </li>    <li>&lt;signal.h&gt;中断处理 </li>    <li>&lt;stdarg.h&gt;可变长度参数表 </li> </ul>  <h2>第7章 抽象</h2>  <ul>   <li>复杂性是生活中不可避免的事实 </li>    <li>抽象是处理复杂性的工具 </li>    <li>定义明确的抽象数据类型可把接口从实现中分离出来 </li>    <li>C++类支持数据抽象 </li>    <li>成员访问控制限定词（private和protected）支持封装 </li>    <li>具体的类型应该有定义明确的构造函数、拷贝构造函数、赋值运算符合一个析构函数 </li>    <li>运算符重载可以使具体的类型的行为类似于内置类型 </li>    <li>模板支持类型抽象 </li>    <li>虚函数支持函数抽象 </li> </ul>  <p>Date类</p>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008000">//</span><span style="color: #008000">date.h</span>
<span style="color: #000000">#ifndef DATE_H
</span><span style="color: #0000ff">#define</span> DATE_H<span style="color: #000000">

#include </span>&lt;iostream&gt;
<span style="color: #0000ff">using</span><span style="color: #000000"> std::ostream;

</span><span style="color: #0000ff">struct</span><span style="color: #000000"> DateRep;

</span><span style="color: #0000ff">class</span><span style="color: #000000"> Date
{
</span><span style="color: #0000ff">public</span><span style="color: #000000">:
    Date(</span><span style="color: #0000ff">int</span>, <span style="color: #0000ff">int</span>, <span style="color: #0000ff">int</span><span style="color: #000000">);
    </span>~<span style="color: #000000">Date();
    </span><span style="color: #0000ff">char</span>* format(<span style="color: #0000ff">char</span>*) <span style="color: #0000ff">const</span><span style="color: #000000">;
    </span><span style="color: #0000ff">int</span> compare(<span style="color: #0000ff">const</span> Date&amp;) <span style="color: #0000ff">const</span><span style="color: #000000">;
    friend ostream</span>&amp; <span style="color: #0000ff">operator</span>&lt;&lt;(ostream&amp;, <span style="color: #0000ff">const</span> Date&amp;<span style="color: #000000">);

</span><span style="color: #0000ff">private</span><span style="color: #000000">:
    </span><span style="color: #0000ff">struct</span> DateRep*<span style="color: #000000"> drep;
    </span><span style="color: #0000ff">static</span> <span style="color: #0000ff">const</span> <span style="color: #0000ff">char</span>* month_text[<span style="color: #800080">13</span><span style="color: #000000">];
};

</span><span style="color: #0000ff">#endif</span></pre>
</div>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">date.cpp</span>
#include &lt;stdio.h&gt;<span style="color: #000000">
#include </span><span style="color: #800000">&quot;</span><span style="color: #800000">date.h</span><span style="color: #800000">&quot;</span>

<span style="color: #0000ff">struct</span><span style="color: #000000"> DateRep
{
    DateRep(</span><span style="color: #0000ff">int</span>, <span style="color: #0000ff">int</span>, <span style="color: #0000ff">int</span><span style="color: #000000">);
</span><span style="color: #0000ff">private</span><span style="color: #000000">:
    friend </span><span style="color: #0000ff">struct</span><span style="color: #000000"> Date;
    friend ostream</span>&amp; <span style="color: #0000ff">operator</span>&lt;&lt;(ostream&amp;, <span style="color: #0000ff">const</span> Date&amp;<span style="color: #000000">);

    </span><span style="color: #0000ff">int</span><span style="color: #000000"> month;
    </span><span style="color: #0000ff">int</span><span style="color: #000000"> day;
    </span><span style="color: #0000ff">int</span><span style="color: #000000"> year;
};

</span><span style="color: #0000ff">const</span> <span style="color: #0000ff">char</span>* Date::month_text[<span style="color: #800080">13</span>] =<span style="color: #000000"> 
    {</span><span style="color: #800000">&quot;</span><span style="color: #800000">Bad month</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">January</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">February</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">March</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">April</span><span style="color: #800000">&quot;</span><span style="color: #000000">,
     </span><span style="color: #800000">&quot;</span><span style="color: #800000">May</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">June</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">July</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">August</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">September</span><span style="color: #800000">&quot;</span><span style="color: #000000">,
     </span><span style="color: #800000">&quot;</span><span style="color: #800000">October</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">November</span><span style="color: #800000">&quot;</span>, <span style="color: #800000">&quot;</span><span style="color: #800000">December</span><span style="color: #800000">&quot;</span><span style="color: #000000">};
     
DateRep::DateRep(</span><span style="color: #0000ff">int</span> m, <span style="color: #0000ff">int</span> d, <span style="color: #0000ff">int</span><span style="color: #000000"> y)
:month(m),day(d),year(y)
{}

Date::Date(</span><span style="color: #0000ff">int</span> m, <span style="color: #0000ff">int</span> d, <span style="color: #0000ff">int</span><span style="color: #000000"> y)
{
    drep </span>= <span style="color: #0000ff">new</span><span style="color: #000000"> DateRep(m,d,y);
}
Date::</span>~<span style="color: #000000">Date()
{
    delete drep;
}

</span><span style="color: #0000ff">char</span>* Date::format(<span style="color: #0000ff">char</span>* buf) <span style="color: #0000ff">const</span><span style="color: #000000">
{
    sprintf(buf, </span><span style="color: #800000">&quot;</span><span style="color: #800000">%s %d, %d</span><span style="color: #800000">&quot;</span><span style="color: #000000">,
        month_text[drep</span>-&gt;<span style="color: #000000">month],
        drep</span>-&gt;day,drep-&gt;<span style="color: #000000">year);
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> buf;
}

</span><span style="color: #0000ff">int</span> Date::compare(<span style="color: #0000ff">const</span> Date&amp; dp2) <span style="color: #0000ff">const</span><span style="color: #000000">
{
    </span><span style="color: #0000ff">int</span> result = drep-&gt;year - dp2.drep-&gt;<span style="color: #000000">year;
    </span><span style="color: #0000ff">if</span> (result == <span style="color: #800080">0</span><span style="color: #000000">)
        result </span>= drep-&gt;month - dp2.drep-&gt;<span style="color: #000000">month;
    </span><span style="color: #0000ff">if</span> (result == <span style="color: #800080">0</span><span style="color: #000000">)
        result </span>= drep-&gt;day - dp2.drep-&gt;<span style="color: #000000">day;
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> result;
}

ostream</span>&amp; <span style="color: #0000ff">operator</span>&lt;&lt;(ostream&amp; os, <span style="color: #0000ff">const</span> Date&amp;<span style="color: #000000"> d)
{
    os </span>&lt;&lt; Date::month_text[d.drep-&gt;<span style="color: #000000">month]
       </span>&lt;&lt; <span style="color: #800000">'</span> <span style="color: #800000">'</span> &lt;&lt; d.drep-&gt;<span style="color: #000000">day
       </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">, </span><span style="color: #800000">&quot;</span> &lt;&lt; d.drep-&gt;<span style="color: #000000">year;
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> os;
}</span></pre>
</div>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">tdate.cpp</span>
#include &lt;iostream&gt;<span style="color: #000000">
#include </span><span style="color: #800000">&quot;</span><span style="color: #800000">date.h</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    Date d1(</span><span style="color: #800080">10</span>,<span style="color: #800080">1</span>,<span style="color: #800080">1951</span>),d2(<span style="color: #800080">3</span>,<span style="color: #800080">7</span>,<span style="color: #800080">1995</span><span style="color: #000000">);
    
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">d1=</span><span style="color: #800000">&quot;</span> &lt;&lt; d1 &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">d2=</span><span style="color: #800000">&quot;</span> &lt;&lt; d2 &lt;&lt;<span style="color: #000000"> endl;
    
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210180950014099.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210180950019082.png" width="240" height="47" /></a></p>

<h2>第9章 位操作</h2>

<ul>
  <li>位操作支持系统编程而且能降低内存需要 </li>

  <li>按位运算符允许访问整数位的子集（但是要注意运算符的优先权） </li>

  <li>bitset类模板支持有效的固定大小的位设置操作 </li>

  <li>vector&lt;bool&gt;模板规范支持动态大小的位字符串 </li>
</ul>

<h2>第10章 类型转换盒强制类型转换</h2>

<ul>
  <li>C和C++提供隐式类型转换以简化混合模式运算 </li>

  <li>在运算中整数类型可以根据需要而升级 </li>

  <li>浮点运算由标准的类型转换来“平衡” </li>

  <li>函数原型帮助编译器提供隐式类型转换 </li>

  <li>有时候不希望用户定义类型的隐式类型转换 </li>

  <li>当想屏蔽隐式类型转换时，可以显示地声明带有单个参数的构造函数 </li>

  <li>强制类型转换使得类型转换变得清楚 </li>

  <li>尽量使用函数风格的强制类型转换，而不是C风格的强制类型转换 </li>

  <li>当适用时使用新风格的强制类型转换（即除了使用构造函数调用时，总是使用） </li>

  <li>当适用时尽量使用const </li>

  <li>首选语义常量而不是位逻辑常量 </li>

  <li>可变的存储类使得在大多数情况下去掉const变得没有必要 </li>

  <li>RTTI允许安全的向下强制类型转换 </li>
</ul>

<h2>第11章 可见性</h2>

<ul>
  <li>在C++文件里：extern “C” f();告诉编译器根据C的规则生成连接名 </li>

  <li>标识符可以有外部连接（在多重翻译单元内可见）、内部连接（只在单独的翻译单元中可见）和没有连接 </li>

  <li>有外部连接的对象必须在一个被命名的名字空间中定义（包括被秘密命名的全局名字空间） </li>
</ul>

<h2>第12章 控制结构</h2>

<ul>
  <li>用断言或注释显示不变的条件 </li>

  <li>break退出密封关闭的循环或分支 </li>

  <li>continue跳到最近关闭的循环的下一个迭代 </li>

  <li>用setjmp/longjmp机制在异常条件下交替地返回 </li>

  <li>用信号处理程序捕获同步信号和异步信号 </li>
</ul>

<h2>第13章 异常</h2>

<ul>
  <li>错误处理方法 
    <ol>
      <li>忽略错误 </li>

      <li>检查返回代码 </li>

      <li>用非局部跳转来使执行过程改变方向 </li>

      <li>使用异常 </li>
    </ol>
  </li>

  <li>异常处理是一个运行期机制 </li>

  <li>C++异常处理是围绕中断模式设计的 </li>

  <li>标准异常 
    <ul>
      <li>exception 
        <ul>
          <li>logic_error 
            <ul>
              <li>domain_error </li>

              <li>invalid_argument </li>

              <li>length_error </li>

              <li>out_of_range </li>
            </ul>
          </li>

          <li>runtime_error 
            <ul>
              <li>range_error </li>

              <li>overflow_error </li>

              <li>underflow_error </li>
            </ul>
          </li>

          <li>bad_alloc </li>

          <li>bad_cast </li>

          <li>bad_exception </li>

          <li>bad_typeid </li>
        </ul>
      </li>
    </ul>
  </li>

  <li>”资源分配是初始化“原则 </li>

  <li>向语言中加入异常的目的之一是为了弥补构造函数无返回值这一不足之处 </li>

  <li>为不能就地处理的错误抛出异常，包括无效的参数 </li>

  <li>不要在有构造函数和析构函数的对象前使用setjmp和longjmp。而是要用异常。当一次被抛出时，堆栈中所有的自动对象将被自动销毁 </li>

  <li>异常允许独立的程序组件关于错误条件进行通信 </li>

  <li>通过与抛出的对象的类型相匹配来选择处理程序 </li>

  <li>根据被处理的类型从最特殊到最普通的顺序排列相邻的处理程序 </li>

  <li>如果用标准库，准备好在标准继承结构里捕获异常（至少是exception） </li>

  <li>在自动对象中封装资源分配以确保在需要的时候调用析构函数 </li>

  <li>在auto_ptr中封装new表达式的结果以确保析构函数可以被合适地调用 </li>

  <li>可以对文档使用异常规范并加强函数所抛出的异常类型 </li>

  <li>断言只用来防止你（快速的开发者）的错误 </li>

  <li>为每一个组件定义一个从exception类（或runtime_error或logic_error，如果是和的话）派生出来的异常类 </li>
</ul>

<h2>第14章 面向对象编程</h2>

<ul>
  <li>三要素：封装，继承，多态 </li>

  <li>共有继承表示基类和派生类的“is-a”关系 </li>

  <li>指向基类的指针还可以指向派生类对象，派生类对象总是可以代替基类对象 </li>

  <li>多态是指有关联的实现共用一个单独的接口，实现可以根据需要随着所包含的对象类型变化而自动化。C++通过虚函数支持多态 </li>

  <li>虚函数通过函数指针表来模拟动态绑定 </li>
</ul>

<h2>第15章 算法</h2>

<ul>
  <li>算法种类：通用序列算法，有关排序的算法，数值算法。其中前两个算法包含在&lt;algorithm&gt;中，数值算法包含在&lt;numeric&gt;中 </li>

  <li>算法是计算机科学的“要素” </li>

  <li>C++标准库中的算法是函数模板，他们中的大多数都是处理由[begin,end)所限定范围的一系列对象 </li>

  <li>函数对象是一个定义运算符的类的实例 </li>

  <li>可改写的函数对象含有对它的参数和返回值类型的定义 </li>

  <li>判断是一个返回bool类型的函数或者函数对象 </li>

  <li>函数对象适配器是一个函数模板，它把一个或者多个函数对象以及其他可选的数值作为参数，并且返回一个新的函数对象 </li>

  <li>通过把函数对象和函数对象适配器配合，可以自定义算法断言，通常没必要自己编写函数 </li>
</ul>

<h2>第16章 容器和迭代器</h2>

<ul>
  <li>标准容器可以支持任何具体类型的对象，包括其他的容器。具体的类型是有值语义的类型，意味着它们可以被复制、赋值和比较相等或者不相等</li>

  <li>标准容器包括：基本序列容器、容器适配器和关联容器</li>

  <li>基本序列容器包括：向量、双端对列和表，它们之间的不同主要在于在哪允许元素的有效插入和删除，以及它们支持何种迭代器</li>

  <li>迭代器是指针的一般化，迭代器是用通用方式连接算法和容器的粘结剂</li>

  <li>迭代器分五种：输入迭代器，输出迭代器，前向迭代器，双向迭代器和随机访问迭代器</li>

  <li>不支持算法的迭代器的容器经常要求定义它们自己的板式（如，list&lt;T&gt;sort()）</li>

  <li>容器适配器包括：栈，队列和优先权队列。容器适配器用更严格的接口来包装基本序列以实现更高级的数据抽象</li>

  <li>关联容器是包括：集合，多重集合，图和多重图。关联容器集合和图仅存储唯一的关键词</li>

  <li>特殊用途的容器bitset和valarray不支持其他标准容器所支持的容器——迭代器——算法主题</li>
</ul>

<h2>第17&amp;&amp;18章 文本处理</h2>

<ul>
  <li>在交互式应用程序中每次读入一行，然后在必要的时候解析每一行这是一个很好的习惯</li>

  <li>标准C++字符串类最重要的特征就是内存管理</li>

  <li>标准C++库通过模板basic_string支持任何“类字符型”的字符串</li>

  <li>如果标准库不能满足文件处理的需要，试着用POSIX文件操作。如果还不行，把依赖平台的代码分隔在独立的模块中以利于端口进程</li>

  <li>总是考虑用C++来封装低级别的概念和操作</li>
</ul>

<h2>第19章 时间和日期处理</h2>

<ul>
  <li>利用&lt;time.h&gt;中的函数，如localtime、strftime和difftime，进行简单的时间和日期操作</li>

  <li>确信知道环境的参考日期</li>
</ul>

<h2>第20章 动态内存管理</h2>

<ul>
  <li>区分浅拷贝和深拷贝</li>

  <li>重载new和delete：</li>

  <ul>
    <li>标准C++库定义了12个用于分配和释放内存的函数。当使用new运算符是，它会计算出所需要的字节数然后按顺序调用这些函数中的一个来分配这些字节。这12个函数是：</li>

    <ul>
      <li>void *operator new(size_t);//标量形式</li>

      <li>void *operator new(size_t,const nothrow_t);</li>

      <li>void *operator delete(void*);</li>

      <li>void *operator delete(void*,const nothrow_t);</li>

      <li>void *operator new[](size_t);//数组形式</li>

      <li>void *operator new[](size_t,const nothrow_t);</li>

      <li>void *operator delete[](void*);</li>

      <li>void *operator delete[](void*,const nothrow_t);</li>

      <li>void *operator new(size_t,void *);//配置new</li>

      <li>void *operator new[](size_t,void *);</li>

      <li>void *operator delete(void*, void*);</li>

      <li>void *operator delete[](void*,void*);</li>
    </ul>
  </ul>

  <li>配置new</li>

  <li>当预先不知道需要多少内存来存储一个对象，或者不知道需要多少个对象是，可以使用动态内存</li>

  <li>new运算符调用operator new 来为一个动态对象分配内存，然后再调用适当的构造函数。delete运算符通过调用对象的析构函数来销毁这个对象，然后调用operator delete</li>

  <li>对于数组一定要使用delete[]</li>

  <li>无论什么时候，当一个类是指针成员时，都要检查是否需要深拷贝</li>

  <li>记住对内存操作的失败将引发bad_alloc异常</li>

  <li>在给定的地址上使用配置new来构建一个对象</li>

  <li>为了使用内存碎片的数量尽可能少，可以考虑将动态对象的同类集合分配到一个专用的内存池中，如容器。</li>

  <li>无论什么时候，只要有可能就让标准库来为你管理内存</li>
</ul>

<p>&#160;</p>

<p>上述知识点都是摘抄自《C和C++代码精粹》中文版。</p>

<ul>
  <ol>
    <ol><!--EndFragment--></ol>

    <ul>
      <ol><!--EndFragment--></ol>
    </ul>
  </ol>
</ul>]]></description></item><item><title>字符串相似度的计算（百度笔试题回忆）</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/16/2726135.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 16 Oct 2012 07:31:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/16/2726135.html</guid><description><![CDATA[<h2>题目</h2>  <p>这道题应该说很出名了，原题见<a href="http://wenku.baidu.com/view/854b10df5022aaea998f0ffb.html" target="_blank">字符串相似度的计算</a>，但是考试的时候真的想不出怎么实现。看了解答方法后，我现在就把实现方法说一下：</p>  <p>如果仅仅只计算字符串的距离，则只需以下3个步骤</p>  <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531162608.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531173447.png" width="433" height="121" /></a></p>  <p>如果需要把字符串转变的过程记录下来，则需要6个步骤</p>  <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531173970.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/2012101615311733.png" width="457" height="360" /></a></p>  <h2>粗略解法</h2>  <p>下面我就先实现只计算字符串距离的代码，使用了模板。这种方法虽然可以计算出结果来，但是重复计算非常多，后面会有个对比的。</p>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008000">//</span><span style="color: #008000">字符串相似度的计算,模板实现，可用于其他容器</span>
#include &lt;<span style="color: #0000ff">string</span>&gt;<span style="color: #000000">
#include </span>&lt;iostream&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

template</span>&lt;typename Iterator&gt;
<span style="color: #0000ff">int</span><span style="color: #000000"> caculateDistance(Iterator pAbegin, Iterator pAend, Iterator pBbegin, Iterator pBend)
{
    </span><span style="color: #0000ff">if</span> (pAbegin&gt;<span style="color: #000000">pAend)
    {
        </span><span style="color: #0000ff">if</span> (pBbegin&gt;<span style="color: #000000">pBend)
            </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
        </span><span style="color: #0000ff">else</span>
            <span style="color: #0000ff">return</span> pBend-pBbegin+<span style="color: #800080">1</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">if</span> (pBbegin&gt;<span style="color: #000000">pBend)
    {
        </span><span style="color: #0000ff">if</span> (pAbegin&gt;<span style="color: #000000">pAend)
            </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
        </span><span style="color: #0000ff">else</span>
            <span style="color: #0000ff">return</span> pAend-pAbegin+<span style="color: #800080">1</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">if</span> (*pAbegin == *<span style="color: #000000">pBbegin)
    {
        </span><span style="color: #0000ff">return</span> caculateDistance(pAbegin+<span style="color: #800080">1</span>,pAend,pBbegin+<span style="color: #800080">1</span><span style="color: #000000">,pBend);
    }
    </span><span style="color: #0000ff">else</span><span style="color: #000000">
    {
        </span><span style="color: #0000ff">int</span> t1 = caculateDistance(pAbegin+<span style="color: #800080">1</span>,pAend,pBbegin+<span style="color: #800080">2</span><span style="color: #000000">,pBend);
        </span><span style="color: #0000ff">int</span> t2 = caculateDistance(pAbegin+<span style="color: #800080">2</span>,pAend,pBbegin+<span style="color: #800080">1</span><span style="color: #000000">,pBend);
        </span><span style="color: #0000ff">int</span> t3 = caculateDistance(pAbegin+<span style="color: #800080">2</span>,pAend,pBbegin+<span style="color: #800080">2</span><span style="color: #000000">,pBend);
        </span><span style="color: #0000ff">int</span> minValue = t1&gt;t2?<span style="color: #000000">t2:t1;
        minValue </span>= minValue&gt;t3?<span style="color: #000000">t3:minValue;
        </span><span style="color: #0000ff">return</span> minValue+<span style="color: #800080">1</span><span style="color: #000000">;
    }
}

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">string</span> A = <span style="color: #800000">&quot;</span><span style="color: #800000">abcdefghijklmn</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    </span><span style="color: #0000ff">string</span> B = <span style="color: #800000">&quot;</span><span style="color: #800000">cdefghijklmn</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    cout </span>&lt;&lt; caculateDistance(A.begin(),A.end(),B.begin(),B.end()) &lt;&lt;<span style="color: #000000"> endl;
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>

<h2>解法改进</h2>

<p>考虑到有些数据被重复计算的情况（<a href="http://wenku.baidu.com/view/854b10df5022aaea998f0ffb.html" target="_blank">字符串相似度的计算</a>中实现了存在数据重复计算的情况的代码），就把子问题的结果保存起来以备后查。</p>

<h3>历史记录结构体</h3>

<p>结构体定义如下：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">存储历史记录的结构体</span>
template&lt;typename Iterator&gt;
<span style="color: #0000ff">struct</span><span style="color: #000000"> DataForHistory
{
    DataForHistory(Iterator iAbegin, Iterator iAend, Iterator iBbegin, Iterator iBend)
    :pAbegin(iAbegin), pAend(iAend), pBbegin(iBbegin), pBend(iBend), result(</span><span style="color: #800080">0</span><span style="color: #000000">)
    {
    }
    </span><span style="color: #0000ff">bool</span> <span style="color: #0000ff">operator</span>==(<span style="color: #0000ff">const</span> DataForHistory&amp;<span style="color: #000000"> rh)
    {
        </span><span style="color: #0000ff">if</span> (pAbegin ==<span style="color: #000000"> rh.pAbegin
        </span>&amp;&amp; pAend ==<span style="color: #000000"> rh.pAend
        </span>&amp;&amp; pBbegin ==<span style="color: #000000"> rh.pBbegin
        </span>&amp;&amp; pBend ==<span style="color: #000000"> rh.pBend)
            </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span><span style="color: #000000">;
        </span><span style="color: #0000ff">else</span>
            <span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">void</span> <span style="color: #0000ff">set</span><span style="color: #000000">(Iterator iAbegin, Iterator iAend, Iterator iBbegin, Iterator iBend)
    {
        pAbegin </span>=<span style="color: #000000"> iAbegin;
        pAend </span>=<span style="color: #000000"> iAend;
        pBbegin </span>=<span style="color: #000000"> iBbegin;
        pBend </span>=<span style="color: #000000"> iBend;
    }
    Iterator pAbegin;
    Iterator pAend;
    Iterator pBbegin;
    Iterator pBend;
    </span><span style="color: #0000ff">int</span> result;<span style="color: #008000">//</span><span style="color: #008000">存储计算的结果</span>
};</pre>
</div>

<h3>自定义查找历史记录函数</h3>

<p>上面是一个保存历史记录的结构体，包含四个迭代器和一个与根据四个迭代器计算出来的字符串距离result。下面我自己定义了一个find()函数用于查找即将需要的记录是否在历史记录中：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">查找历史记录中是否存在data</span>
template&lt;typename Iterator&gt;
<span style="color: #0000ff">int</span> find(vector&lt;DataForHistory&lt;Iterator&gt; &gt;&amp; history, DataForHistory&lt;Iterator&gt;&amp;<span style="color: #000000"> data)
{
    </span><span style="color: #0000ff">int</span> k=-<span style="color: #800080">1</span><span style="color: #000000">;
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;history.size(); i++<span style="color: #000000">)
    {
        </span><span style="color: #0000ff">if</span> (data ==<span style="color: #000000"> history[i])
        {
            k </span>=<span style="color: #000000"> i;
            </span><span style="color: #0000ff">break</span><span style="color: #000000">;
        }
    }
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> k;
}</span></pre>
</div>

<h3>递归决策函数</h3>

<p>从而就可以定义一个函数来“决策是否需要递归计算，如果data已经存在就不再递归计算而直接返回历史记录中保存的数据；如果历史记录中找不到，则递归计算出数据，然后push到历史记录中”，实现代码如下：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>template&lt;typename Iterator&gt;
<span style="color: #0000ff">int</span> findOrCaculate(vector&lt;DataForHistory&lt;Iterator&gt; &gt;&amp;<span style="color: #000000"> history, Iterator pAbegin, Iterator pAend, Iterator pBbegin, Iterator pBend)
{
    DataForHistory</span>&lt;Iterator&gt;<span style="color: #000000"> data(pAbegin,pAend,pBbegin,pBend);
    </span><span style="color: #0000ff">int</span> i =<span style="color: #000000"> find(history,data);
    </span><span style="color: #0000ff">if</span> (i != -<span style="color: #800080">1</span><span style="color: #000000">)
</span><span style="color: #008000">//</span><span style="color: #008000">    if (false)    </span><span style="color: #008000">//</span><span style="color: #008000">不查找历史记录，对每一次需求都重新递归计算</span>
<span style="color: #000000">    {
        </span><span style="color: #0000ff">return</span><span style="color: #000000"> history[i].result;
    }
    </span><span style="color: #0000ff">else</span><span style="color: #000000">
    {
        data.result </span>=<span style="color: #000000"> caculateDistance(pAbegin,pAend,pBbegin,pBend);
        history.push_back(data);
        </span><span style="color: #008000">//</span><span style="color: #008000">cout &lt;&lt; data.pAbegin &lt;&lt; &quot;, &quot; &lt;&lt; data.pAend &lt;&lt; &quot;, &quot;
        </span><span style="color: #008000">//</span><span style="color: #008000">     &lt;&lt; data.pBbegin &lt;&lt; &quot;, &quot; &lt;&lt; data.pBend &lt;&lt; &quot;. &quot;
        </span><span style="color: #008000">//</span><span style="color: #008000">cout &lt;&lt; data.result &lt;&lt; endl;</span>
        <span style="color: #0000ff">return</span><span style="color: #000000"> data.result;
    }
}</span></pre>
</div>

<p>上面代码中有一个注释了的if(false)是用来测试不使用查找历史记录而是每出现一次需要计算的时候直接递归计算时所需的递归次数，我测试的结果如下：</p>

<p>使用查找历史数据：<a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531179477.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/20121016153117872.png" width="240" height="15" /></a></p>

<p>不是用查找历史数据：<a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531187492.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531185299.png" width="240" height="13" /></a></p>

<p>这样一看相差忒大了，所以使用查找数据是很明智的选择（即使查找需要话费时间，但相对于重复进行相同的递归计算还是很不错的）。</p>

<h3>PS</h3>

<p>上文我使用了自定义的find函数，是由于中途写代码时使用&lt;algorithm&gt;中的find()函数是出现了一大堆的错误，结果没找到错误的原因，模板嘛，一出现错误总是一大堆的。其实到我就找到错误的根源了，错误代码：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>template&lt;typename Iterator&gt;
<span style="color: #0000ff">int</span> findOrCaculate(vector&lt;DataForHistory&lt;Iterator&gt; &gt;&amp;<span style="color: #000000"> history, Iterator pAbegin, Iterator pAend, Iterator pBbegin, Iterator pBend)
{
    DataForHistory</span>&lt;Iterator&gt;<span style="color: #000000"> data(pAbegin,pAend,pBbegin,pBend);
    vector</span>&lt;DataForHistory&lt;Iterator&gt; &gt;::iterator it =<span style="color: #000000"> find(history.begin(),history.end(),data);
    </span><span style="color: #0000ff">if</span><span style="color: #000000"> (it)
    {
        </span><span style="color: #0000ff">return</span> it-&gt;<span style="color: #000000">result;
    }
    </span><span style="color: #0000ff">else</span><span style="color: #000000">
    {
        data.result </span>=<span style="color: #000000"> caculateDistance(pAbegin,pAend,pBbegin,pBend);
        history.push_back(data);
        </span><span style="color: #0000ff">return</span><span style="color: #000000"> data.result;
    }
}</span></pre>
</div>

<p>错误提示：</p>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531189411.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531188298.png" width="240" height="90" /></a></p>

<p>like.cpp:69:2: error: need 'typename' before 'std::vector&lt;DataForHistory&lt;Iterator&gt; &gt;::iterator' beca 
  <br />use 'std::vector&lt;DataForHistory&lt;Iterator&gt; &gt;' is a dependent scope</p>

<p>所以我就在'std::vector&lt;DataForHistory&lt;Iterator&gt; &gt;::iterator'之前加了typename。（这里不清楚为什么？）</p>

<p>然后继续编译，还有错：</p>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531188821.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210161531187393.png" width="240" height="65" /></a></p>

<p>like.cpp:70:2: error: could not convert 'it' from 'std::vector&lt;DataForHistory&lt;__gnu_cxx::__normal_it 
  <br />erator&lt;char*, std::basic_string&lt;char&gt; &gt; &gt;, std::allocator&lt;DataForHistory&lt;__gnu_cxx::__normal_iterato 

  <br />r&lt;char*, std::basic_string&lt;char&gt; &gt; &gt; &gt; &gt;::iterator {aka __gnu_cxx::__normal_iterator&lt;DataForHistory&lt; 

  <br />__gnu_cxx::__normal_iterator&lt;char*, std::basic_string&lt;char&gt; &gt; &gt;*, std::vector&lt;DataForHistory&lt;__gnu_c 

  <br />xx::__normal_iterator&lt;char*, std::basic_string&lt;char&gt; &gt; &gt;, std::allocator&lt;DataForHistory&lt;__gnu_cxx::_ 

  <br />_normal_iterator&lt;char*, std::basic_string&lt;char&gt; &gt; &gt; &gt; &gt; &gt;}' to 'bool' 

  <br /></p>

<p>看到上面的from ‘xxx’ to ‘bool’了，这下知道了it不是bool型的，怎么判断，需要改为</p>

<p>if (it != history.end())</p>

<p>即找到最后了还是没找到。这样就解决了find函数的问题，就可以不用自己定义专门的find函数了，正确代码如下：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">决策是否递归计算，如果data已经存在就不再递归计算而直接返回历史记录中保存的数据
</span><span style="color: #008000">//</span><span style="color: #008000">如果历史记录中找不到，则递归计算出数据，然后push到历史记录中</span>
template&lt;typename Iterator&gt;
<span style="color: #0000ff">int</span> findOrCaculate(vector&lt;DataForHistory&lt;Iterator&gt; &gt;&amp;<span style="color: #000000"> history, Iterator pAbegin, Iterator pAend, Iterator pBbegin, Iterator pBend)
{
    DataForHistory</span>&lt;Iterator&gt;<span style="color: #000000"> data(pAbegin,pAend,pBbegin,pBend);
    typename vector</span>&lt;DataForHistory&lt;Iterator&gt; &gt;::iterator it =<span style="color: #000000"> find(history.begin(),history.end(),data);
    </span><span style="color: #0000ff">if</span> (it !=<span style="color: #000000"> history.end())
    {
        </span><span style="color: #0000ff">return</span> it-&gt;<span style="color: #000000">result;
    }
    </span><span style="color: #0000ff">else</span><span style="color: #000000">
    {
        data.result </span>=<span style="color: #000000"> caculateDistance(pAbegin,pAend,pBbegin,pBend);
        history.push_back(data);
        </span><span style="color: #0000ff">return</span><span style="color: #000000"> data.result;
    }
}</span></pre>
</div>

<h3>递归函数</h3>

<p>接下来就是怎么写递归函数了，形式上和前面的递归函数差不多，只是把需要继续使用递归函数的时候不是直接调用递归函数，而采用简洁调用。改为调用findOrCaulate()。</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>template&lt;typename Iterator&gt;
<span style="color: #0000ff">int</span><span style="color: #000000"> caculateDistance(Iterator pAbegin, Iterator pAend, Iterator pBbegin, Iterator pBend)
{
    </span><span style="color: #0000ff">static</span> vector&lt;DataForHistory&lt;Iterator&gt; &gt;<span style="color: #000000"> history;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">call caculateDistance() times:</span><span style="color: #800000">&quot;</span>&lt;&lt; history.size() &lt;&lt;<span style="color: #000000"> endl;
    </span><span style="color: #0000ff">if</span> (pAbegin&gt;<span style="color: #000000">pAend)
    {
        </span><span style="color: #0000ff">if</span> (pBbegin&gt;<span style="color: #000000">pBend)
            </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
        </span><span style="color: #0000ff">else</span>
            <span style="color: #0000ff">return</span> pBend-pBbegin+<span style="color: #800080">1</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">if</span> (pBbegin&gt;<span style="color: #000000">pBend)
    {
        </span><span style="color: #0000ff">if</span> (pAbegin&gt;<span style="color: #000000">pAend)
            </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
        </span><span style="color: #0000ff">else</span>
            <span style="color: #0000ff">return</span> pAend-pAbegin+<span style="color: #800080">1</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">if</span> (*pAbegin == *<span style="color: #000000">pBbegin)
    {
        findOrCaculate(history,pAbegin</span>+<span style="color: #800080">1</span>,pAend,pBbegin+<span style="color: #800080">1</span><span style="color: #000000">,pBend);
    }
    </span><span style="color: #0000ff">else</span><span style="color: #000000">
    {
        </span><span style="color: #0000ff">int</span><span style="color: #000000"> t1,t2,t3;
        t1 </span>= findOrCaculate(history,pAbegin+<span style="color: #800080">1</span>,pAend,pBbegin+<span style="color: #800080">2</span><span style="color: #000000">,pBend);
        t2 </span>= findOrCaculate(history,pAbegin+<span style="color: #800080">2</span>,pAend,pBbegin+<span style="color: #800080">1</span><span style="color: #000000">,pBend);
        t3 </span>= findOrCaculate(history,pAbegin+<span style="color: #800080">2</span>,pAend,pBbegin+<span style="color: #800080">2</span><span style="color: #000000">,pBend);
        </span><span style="color: #0000ff">int</span> minValue = t1&gt;t2?<span style="color: #000000">t2:t1;
        minValue </span>= minValue&gt;t3?<span style="color: #000000">t3:minValue;
        </span><span style="color: #0000ff">return</span> minValue+<span style="color: #800080">1</span><span style="color: #000000">;
    }
}</span></pre>
</div>

<h2>更好的解法</h2>

<p>中文译文：<a href="http://www.cnblogs.com/ymind/archive/2012/03/27/fast-memory-efficient-Levenshtein-algorithm.html">一个快速、高效的Levenshtein算法实现</a></p>

<p>英文原文：<a title="http://www.codeproject.com/Articles/13525/Fast-memory-efficient-Levenshtein-algorithm" href="http://www.codeproject.com/Articles/13525/Fast-memory-efficient-Levenshtein-algorithm">http://www.codeproject.com/Articles/13525/Fast-memory-efficient-Levenshtein-algorithm</a></p>

<p>C++代码实现：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">Levenshtein算法计算两字符串的编辑距离</span>
<span style="color: #000000">
#include </span>&lt;algorithm&gt;<span style="color: #000000">
#include </span>&lt;<span style="color: #0000ff">string</span>&gt;<span style="color: #000000">
#include </span>&lt;iostream&gt;<span style="color: #000000">
#include </span>&lt;fstream&gt;<span style="color: #000000">
#include </span>&lt;vector&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

</span><span style="color: #0000ff">int</span> Levenshtein(<span style="color: #0000ff">string</span>&amp; s, <span style="color: #0000ff">string</span>&amp;<span style="color: #000000"> t)
{
    </span><span style="color: #008000">//</span><span style="color: #008000">第一步</span>
    <span style="color: #0000ff">int</span> n =<span style="color: #000000"> s.size();
    </span><span style="color: #0000ff">int</span> m =<span style="color: #000000"> t.size();
    </span><span style="color: #0000ff">if</span> (<span style="color: #800080">0</span> == n) <span style="color: #0000ff">return</span><span style="color: #000000"> m;
    </span><span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span> (<span style="color: #800080">0</span> == m) <span style="color: #0000ff">return</span><span style="color: #000000"> n;
    
    vector</span>&lt;<span style="color: #0000ff">int</span>&gt; v0(m+<span style="color: #800080">1</span><span style="color: #000000">);
    vector</span>&lt;<span style="color: #0000ff">int</span>&gt; v1(m+<span style="color: #800080">1</span><span style="color: #000000">);
    
    </span><span style="color: #008000">//</span><span style="color: #008000">第二步</span>
    <span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;=m; i++<span style="color: #000000">)
        v0[i] </span>=<span style="color: #000000"> i;

    </span><span style="color: #008000">//</span><span style="color: #008000">第三四步</span>
    <span style="color: #0000ff">int</span> cost=<span style="color: #800080">0</span>;<span style="color: #008000">//</span><span style="color: #008000">编辑代价</span>
    <span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">1</span>; i&lt;=n; i++<span style="color: #000000">)
    {
        v1[</span><span style="color: #800080">0</span>] =<span style="color: #000000"> i;
        </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> j=<span style="color: #800080">1</span>; j&lt;=m; j++<span style="color: #000000">)
        {
            </span><span style="color: #008000">//</span><span style="color: #008000">第五步</span>
            <span style="color: #0000ff">if</span> (s[i-<span style="color: #800080">1</span>] == t[j-<span style="color: #800080">1</span><span style="color: #000000">])
            {
                cost</span>=<span style="color: #800080">0</span><span style="color: #000000">;
            }
            </span><span style="color: #0000ff">else</span><span style="color: #000000">
            {
                cost</span>=<span style="color: #800080">1</span><span style="color: #000000">;
            }

            </span><span style="color: #008000">//</span><span style="color: #008000">第六步</span>
            <span style="color: #0000ff">int</span> min = v0[j] + <span style="color: #800080">1</span><span style="color: #000000">;
            </span><span style="color: #0000ff">int</span> b = v1[j-<span style="color: #800080">1</span>] + <span style="color: #800080">1</span><span style="color: #000000">;
            </span><span style="color: #0000ff">int</span> c = v0[j-<span style="color: #800080">1</span>] +<span style="color: #000000"> cost;
            min </span>= min&gt;b?<span style="color: #000000">b:min;
            min </span>= min&gt;c?<span style="color: #000000">c:min;
            v1[j] </span>=<span style="color: #000000"> min;
        }
        copy(v1.begin(),v1.end(),v0.begin());
    }
    </span><span style="color: #008000">//</span><span style="color: #008000">第七步</span>
    <span style="color: #0000ff">return</span><span style="color: #000000"> v0[m];
}

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">string</span><span style="color: #000000"> s;
    </span><span style="color: #0000ff">string</span><span style="color: #000000"> t;
    </span><span style="color: #0000ff">string</span><span style="color: #000000"> str;
    fstream f(</span><span style="color: #800000">&quot;</span><span style="color: #800000">t.c</span><span style="color: #800000">&quot;</span><span style="color: #000000">);
    getline(f,s,</span><span style="color: #800000">'</span><span style="color: #800000">\1</span><span style="color: #800000">'</span><span style="color: #000000">);
    f.close();
    f.open(</span><span style="color: #800000">&quot;</span><span style="color: #800000">tt.c</span><span style="color: #800000">&quot;</span><span style="color: #000000">);
    getline(f,t,</span><span style="color: #800000">'</span><span style="color: #800000">\1</span><span style="color: #800000">'</span><span style="color: #000000">);
    f.close();
    cout </span>&lt;&lt; s &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; t &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; Levenshtein(t,s) &lt;&lt;<span style="color: #000000"> endl;
}</span></pre>
</div>
<a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210162041463732.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/20121016204147668.png" width="240" height="176" /></a>]]></description></item><item><title>reverse()的实现字符串反转和模板reverse的实现</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/16/2725358.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 16 Oct 2012 00:26:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/16/2725358.html</guid><description><![CDATA[<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008000">//</span><span style="color: #008000">reverse()的实现</span>
<span style="color: #000000">
#include </span>&lt;stdio.h&gt;<span style="color: #000000">
#include </span>&lt;<span style="color: #0000ff">string</span>.h&gt;

<span style="color: #0000ff">char</span>* reverse(<span style="color: #0000ff">char</span>*<span style="color: #000000"> s)
{
    </span><span style="color: #0000ff">int</span><span style="color: #000000"> i,j;
    </span><span style="color: #0000ff">for</span> (i=<span style="color: #800080">0</span>,j=strlen(s)-<span style="color: #800080">1</span><span style="color: #000000">;
        i</span>&lt;j; ++i,--<span style="color: #000000">j)
    {
        s[i] </span>= s[i]^<span style="color: #000000">s[j];
        s[j] </span>= s[i]^<span style="color: #000000">s[j];
        s[i] </span>= s[i]^<span style="color: #000000">s[j];
    }
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> s;
}

</span><span style="color: #0000ff">char</span>* reverse2(<span style="color: #0000ff">char</span>*<span style="color: #000000"> s)
{
    </span><span style="color: #0000ff">char</span>* start =<span style="color: #000000"> s;
    </span><span style="color: #0000ff">char</span>* end = s+strlen(s)-<span style="color: #800080">1</span><span style="color: #000000">;
    </span><span style="color: #0000ff">while</span> (start&lt;<span style="color: #000000">end)
    {
        </span>*start = *start^*<span style="color: #000000">end;
        </span>*end = *start^*<span style="color: #000000">end;
        </span>*start = *start^*<span style="color: #000000">end;
        start</span>++<span style="color: #000000">;
        end</span>--<span style="color: #000000">;
    }
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> s;
}

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">char</span> str[]=<span style="color: #800000">&quot;</span><span style="color: #800000">abcdefghijklmnopqrstuvwxyz</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    printf(</span><span style="color: #800000">&quot;</span><span style="color: #800000">%s\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">, str);
    printf(</span><span style="color: #800000">&quot;</span><span style="color: #800000">%s\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">, reverse(str));
    printf(</span><span style="color: #800000">&quot;</span><span style="color: #800000">%s\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">, reverse2(str));
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">reverse()函数模板的实现</span>
<span style="color: #000000">
#include </span>&lt;iostream&gt;<span style="color: #000000">
#include </span>&lt;cstring&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

template </span>&lt;<span style="color: #0000ff">class</span> BidirectionalIterator&gt;
<span style="color: #0000ff">void</span><span style="color: #000000"> reverse ( BidirectionalIterator first, BidirectionalIterator last)
{
    </span><span style="color: #0000ff">while</span> ((first!=last)&amp;&amp;(first!=--<span style="color: #000000">last))
    {
        </span>*first = *first^*<span style="color: #000000">last;
        </span>*last = *first^*<span style="color: #000000">last;
        </span>*first = *first^*<span style="color: #000000">last;
        </span>++<span style="color: #000000">first;
    }
}

template </span>&lt;<span style="color: #0000ff">class</span> BidirectionalIterator&gt;<span style="color: #000000">
BidirectionalIterator reverse2(BidirectionalIterator first, BidirectionalIterator last)
{
    BidirectionalIterator begin </span>=<span style="color: #000000"> first;
    </span><span style="color: #0000ff">while</span> ((first!=last)&amp;&amp;(first!=--<span style="color: #000000">last))
    {
        </span>*first = *first^*<span style="color: #000000">last;
        </span>*last = *first^*<span style="color: #000000">last;
        </span>*first = *first^*<span style="color: #000000">last;
        </span>++<span style="color: #000000">first;
    }
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> begin;
}

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">char</span> str[]=<span style="color: #800000">&quot;</span><span style="color: #800000">abcdefghijklmnopqrstuvwxyz</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    cout </span>&lt;&lt; str &lt;&lt;<span style="color: #000000"> endl;
    reverse(str,str</span>+<span style="color: #000000">strlen(str));
    cout </span>&lt;&lt; str &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; reverse2(str,str+strlen(str)) &lt;&lt;<span style="color: #000000"> endl;
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210160825527075.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210160825532059.png" width="240" height="85" /></a></p>]]></description></item><item><title>洗牌程序的两种实现方法比较</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/15/2725047.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 15 Oct 2012 13:28:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/15/2725047.html</guid><description><![CDATA[<h2>方法一：随机生成法</h2>
<p>首先，我介绍一种很常见的方法：随机生成法（我自己命名的），这方法我在扫雷游戏中随机分布雷的位置时用过（思想是一样的），该方法要点就是从头开始逐个随机生成规定区域的数字，如果新生成随机数之前已经生成过就不保存该数；如果新生成的随机数之前没有生成过就保存该数；直到生成的数字的数量达到所需的数量。</p>
<p>实现代码如下：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>size_t shuffle(<span style="color: #0000ff;">char</span> s[], <span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    size_t t</span>=<span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">计算循环次数</span>
    <span style="color: #0000ff;">int</span> c=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">while</span>(c&lt;<span style="color: #000000;">n)
    {
        t</span>++<span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> num = rand()%<span style="color: #000000;">n;
        </span><span style="color: #0000ff;">if</span> (memchr(s,num,c) ==<span style="color: #000000;"> NULL)
        {
            s[c</span>++] = static_cast&lt;<span style="color: #0000ff;">char</span>&gt;<span style="color: #000000;">(num);
        }
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> t;
}


</span><span style="color: #0000ff;">void</span> printCards(<span style="color: #0000ff;">char</span> s[], <span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        cout </span>&lt;&lt; static_cast&lt;<span style="color: #0000ff;">int</span>&gt;(s[i]) &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #000000;">;
    }
    cout </span>&lt;&lt;<span style="color: #000000;"> endl;
}</span></pre>
</div>
<p>代码中使用了memchr函数（时间复杂度可能是O(n)，没找到依据），即使是O(1)，它的循环生成随机数的次数是不固定的（大于等于需要生成的个数）。</p>
<h2>方法二：交换位置法</h2>
<p>这种方法是我昨天在参加腾讯笔试考试时候想到的，今天回到学校后在寝室测试了一番，基本思路是：先初始化一串分布的数字，然后为每个位置依次生成一个与之交换的随机位置，如果生成的随机位置不是它本身就执行交换操作。</p>
<p>实现代码：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> swap(<span style="color: #0000ff;">int</span>&amp; a, <span style="color: #0000ff;">int</span>&amp;<span style="color: #000000;"> b)
{
    a </span>= a^<span style="color: #000000;">b;
    b </span>= a^<span style="color: #000000;">b;
    a </span>= a^<span style="color: #000000;">b;
}

size_t shuffle2(</span><span style="color: #0000ff;">int</span> s[], <span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    size_t t</span>=<span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">计算循环次数</span>
    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        t</span>++<span style="color: #000000;">;
        s[i] </span>=<span style="color: #000000;"> i;
    }
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        t</span>++<span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> num = rand()%<span style="color: #000000;">n;
        </span><span style="color: #0000ff;">if</span> (num !=<span style="color: #000000;"> i)
        {
            swap(s[num],s[i]);
        }
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> t;
}

</span><span style="color: #0000ff;">void</span> printCards2(<span style="color: #0000ff;">int</span> s[], <span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        cout </span>&lt;&lt; s[i] &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #000000;">;
    }
    cout </span>&lt;&lt;<span style="color: #000000;"> endl;
}</span></pre>
</div>
<p>比较：在时间上方法二比方法一快好多，因为交换位置的次数的最大值是限定了的（生成随机数的次数是固定的），而且省去了查找新生成数是否在已生成数中的时间。方法一中，当新生成的数在已生成的数中就需要从新生成一个随机数，从而随机生成数的次数是不固定的（有最小值）。</p>
<p>测试代码：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre></pre>
<pre></pre>
<div class="cnblogs_code">
<pre>#include &lt;cstdlib&gt;<span style="color: #000000;">
#include </span>&lt;ctime&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> CARDS_COUNT=<span style="color: #800080;">54</span>;</pre>
</div>
<pre></pre>
<pre><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    srand((unsigned </span><span style="color: #0000ff;">int</span><span style="color: #000000;">)time(NULL));
    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> s[CARDS_COUNT];
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> s2[CARDS_COUNT];
    size_t t1,t2;
    
    </span><span style="color: #0000ff;">int</span> n=<span style="color: #800080;">2000</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">while</span> (--n&gt;<span style="color: #800080;">0</span><span style="color: #000000;">)
    {
        t2 </span>=<span style="color: #000000;"> shuffle2(s2,CARDS_COUNT);
        printCards2(s2,CARDS_COUNT);
</span><span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; "方法二循环次数:" &lt;&lt; t2 &lt;&lt; endl;</span>
<span style="color: #000000;">
        t1 </span>=<span style="color: #000000;"> shuffle(s,CARDS_COUNT);
        printCards(s,CARDS_COUNT);
</span><span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; "方法一循环次数:" &lt;&lt; t1 &lt;&lt; endl;</span>
        <span style="color: #0000ff;">if</span> (t1&gt;<span style="color: #000000;">t2)
        {
            cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">方法二快</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">方法一快</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
        }
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p>结果：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/20121015212749398.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210152127492558.png" alt="image" width="240" height="170" border="0" /></a></p>
<p>我还是不能确定第二种方法是不是更好的，因为是自己想到的，我的验证也不是很完善，也许有什么其他的缺点（比如说随机性太弱），也没在其他书上看到过，如果网友们在哪看到过就告诉下我吧，方法一是在《c和c++代码精粹》中文版P97中找到的。</p>
<p>&nbsp;</p>
<p>后续补充：</p>
<p>谢谢<a href="http://home.cnblogs.com/u/377370/" target="_blank">chncwang</a>的回复，方法二不是完全随机的，完全随机的修改如下：</p>
<div class="cnblogs_code">
<pre>size_t shuffle22(<span style="color: #0000ff;">int</span> s[], <span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    size_t t</span>=<span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">计算循环次数</span>
    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n; i++<span style="color: #000000;">)
    {
        t</span>++<span style="color: #000000;">;
        s[i] </span>=<span style="color: #000000;"> i;
    }
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=n-<span style="color: #800080;">1</span>; i&gt;<span style="color: #800080;">0</span>; --<span style="color: #000000;">i)
    {
        t</span>++<span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> num = rand()%(i+<span style="color: #800080;">1</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">if</span> (num !=<span style="color: #000000;"> i)
        {
            swap(s[num],s[i]);
        }
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> t;
}</span></pre>
</div>
<p>因为"<span>第1次移动后，第1个数还在第1个位置的概率是1/n，后续移动只会减少这个概率。所以这个算法不是完全随机的</span>"。修改后的算法其实就是<span>使用C++的STL&lt;algorithm&gt;库中的random_shuffle()函数的实现方法。取随机数的时候的范围每次都随着i的改变而变动，这样就不会减少之前的位置的数还是原来的数的概率了（即后续交换操作不会影响到已经交换过的位置）。</span></p>
<p><span>使用标准库&lt;algorithm&gt;中的random_shuffle()函数实现很简单，代码如下：</span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    vector</span>&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> s_stl;
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;CARDS_COUNT; ++<span style="color: #000000;">i) s_stl.push_back(i);
    random_shuffle(s_stl.begin(),s_stl.end());
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">使用C++算法库：</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span> (vector&lt;<span style="color: #0000ff;">int</span>&gt;::iterator it=s_stl.begin(); it!=s_stl.end(); ++<span style="color: #000000;">it)
        cout </span>&lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; *<span style="color: #000000;">it;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012101523284938.png" alt="" /></p>
<p><span>&nbsp;</span></p>]]></description></item><item><title>百度深圳笔试总结</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/13/2722789.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 13 Oct 2012 11:45:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/13/2722789.html</guid><description><![CDATA[<p>我报的是研发工程师，先凭印象把题目写出来给大家分享吧，应该不属于泄密吧。</p>
<p>第一题：简答题</p>
<p>1. 用简短的语言说说操作数据库的步骤。</p>
<p>百度文库的答案：</p>
<p style="margin-left: 30px;"><em>1、建立数据库连接</em><br /><em>2、打开数据库连接</em><br /><em>3、建立数据库命令</em><br /><em>4、运行数据库命令</em><br /><em>5、保存数据库命令</em><br /><em>5、关闭数据库连接</em></p>
<p><em>&nbsp;</em>我只写了三步：打开，执行，关闭</p>
<p>2. TCP/IP四层协议。</p>
<p>网上的答案：应用层、传输层、网络互连层和主机到网络层</p>
<p>我写的是：数据链路层，传输层，网络层，应用层</p>
<p>3. 描述MVC结构</p>
<p>网上的答案：MVC是一个设计模式，它强制性的使应用程序的输入、处理和输出分开。使用MVC应用程序被分成三个核心部件：模型、视图、控制器。它们各自处理自己的任务。</p>
<p>我乱答的。</p>
<p>第二题：算法和程序设计</p>
<p>1. 关于全排列的。使用a~z和0~9实现3个字符的全排列。</p>
<p>2. 反转字符串</p>
<p>3. 关于字符串匹配的，给出三个已知的操作：</p>
<p>插入字符，在任意位置插入字符；</p>
<p>删除字符，删除任意位置的字符；</p>
<p>替换字符，替换任意位置的字符。</p>
<p>比如：A=abond;B=abdon;求从A变到B使用最少的次数。这里，两步，将o替换成d，删除最后的d。说是用递归实现的。</p>
<p>注：3我没做出来，太悲哀了，考试之前看到《程序员面试宝典》中有道这样的类似的题目，看到代码有点长，当时没仔细看，结果今天就悲剧的没做出来。</p>
<p>第三题：设计题</p>
<p>RSA&nbsp;secretID的实现，一个随机产生密码的东西，每个60s产生一个新密码，大家用过中国银行的U盾的话就知道了。题目的意思就是说说怎么设计这个系统。设计要求关系到密码的随机性和系统的千万级用户量的问题，最后一问是关系到算法更新的问题（升级算法时如何使服务器和设备的修改降低到最少，它用了&ldquo;平滑&rdquo;一词）。</p>
<p>&nbsp;</p>
<p>就说到这吧，大家看到的可以讨论下。</p>]]></description></item><item><title>堆排序，C++模板编程</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/12/2721540.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 12 Oct 2012 08:26:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/12/2721540.html</guid><description><![CDATA[<p><em>明天就要去参加百度的笔试了，现在来抱抱佛教。</em></p>  <p>&#160;</p>  <p>理论来自：<a href="http://www.nowamagic.net/algorithm/algorithm_HeapSortStudy.php" target="_blank">简明现代魔法</a></p>  <p>在程序设计相关领域，堆(Heap)的概念主要涉及到两个方面：</p>  <ul>   <li>一种数据结构，逻辑上是一颗完全二叉树，存储上是一个数组对象（二叉堆）。 </li>    <li>垃圾收集存储区，是软件系统可以编程的内存区域。</li> </ul>  <p>本文所说的堆，指的是前者。</p>  <p>堆排序的时间复杂度是O(nlgN)，与快速排序达到相同的时间复杂度。但是在实际应用中，我们往往采用快速排序而不是堆排序。这是因为快速排序的一个好的实现，往往比堆排序具有更好的表现。堆排序的主要用途，是在形成和处理优先级队列方面。另外，如果计算要求是类优先级队列（比如，只要返回最大或者最小元素，只有有限的插入要求等），堆同样是很适合的数据结构。</p>  <h6>基础知识</h6>  <p>堆一般用数组表示，比如数组A数组的长度Length(A)，堆在数组中的元素个数HeapSize(A)。一般说来，HeapSize(A) &lt;= Length(A)，因为数组A当中可能有一些元素不在堆中。</p>  <p>假设节点I是数组A中下标为i的节点。</p>  <ul>   <li>Parent(i) : return Floor(i/2); //I的父节点下标，Floor(i)表示比i小的最大整数。 </li>    <li>Left(i) : return 2*i; //I的左子节点 </li>    <li>Right(i) : return 2*i+1; //I的右子节点</li> </ul>  <p>含有n个元素的堆A的高度是: Floor(lgn)。</p>  <h6>堆的基本操作</h6>  <ul>   <li>MaxHeapify( A, i ):      <p>保持堆的性质。假设数组A和下标i，假定以Left(i)和Right(i)为根结点的左右两棵子树都已经是最大堆，节点i的值可能小于其子节点。调整节点i的位置。</p>   </li>    <li>BuildMaxHeap( A ):      <p>从一个给定的数组建立最大堆。子数组A[ floor(n/2)+1 .... ... n]中的元素都是树的叶节点(完全二叉树的基本性质)。从索引 ceiling(n/2)开始一直到1，对每一个元素都执行MaxHeapify，最终得到一个最大堆。</p>   </li>    <li>堆排序 HeapSort( A ):      <p>堆排序算法的基本思想是，将数组A创建为一个最大堆，然后交换堆的根(最大元素)和最后一个叶节点x，将x从堆中去掉形成新的堆A1，然后重复以上动作，直到堆中只有一个节点。</p>   </li>    <li>优先级队列算法-增加某元素的值(优先级) : HeapIncreaseKey( A, i, key )      <p>增加某一个元素的优先级后（元素的值），该元素应该向上移动，才能保持堆的性质。</p>   </li>    <li>优先级队列算法-插入一个元素: Insert( S, x ) 将x元素插入到优先级队列S中。      <p>主要思路是，将堆的最后一个叶节点之后，扩展一个为无穷小的新叶节点，然后增大它的值为x的值。</p>   </li> </ul>  <p>&#160;</p>  <p>本来我只打算随便写个小程序的，但是发现，可以写个更通用的程序。以最小堆为例，说下建堆和排序的过程。</p>  <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121626125297.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="heapSort_1" border="0" alt="heapSort_1" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121626132657.jpg" width="240" height="182" /></a></p>  <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121626142624.jpg"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="heapSort_2" border="0" alt="heapSort_2" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121626149526.jpg" width="240" height="179" /></a></p>  <p>经过上面两个步骤，就成功的建立了一个最小堆。排序的过程就是取出堆顶元素push到临时数组，然后将堆顶元素和最后一个元素交换，再pop掉最后一个元素，直到堆中没有元素。这样就获得了一个有序的数组，然后在复制到堆中。</p>  <p>完整程序如下：</p>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008000">//</span><span style="color: #008000">最小堆排序和最大堆排序</span>
<span style="color: #000000">
#include </span>&lt;algorithm&gt;<span style="color: #000000">
#include </span>&lt;functional&gt;<span style="color: #000000">
#include </span>&lt;vector&gt;<span style="color: #000000">
#include </span>&lt;iostream&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

template</span>&lt;typename Type&gt;
<span style="color: #0000ff">class</span><span style="color: #000000"> Heap
{
</span><span style="color: #0000ff">public</span><span style="color: #000000">:
    Heap(</span><span style="color: #0000ff">const</span> vector&lt;Type&gt;&amp;<span style="color: #000000"> a_array)
    {
        m_array.assign(a_array.begin(),a_array.end());
    }

    template</span>&lt;typename Compare&gt;
    <span style="color: #0000ff">void</span><span style="color: #000000"> sort(Compare comp);

    </span><span style="color: #0000ff">void</span> printArray(<span style="color: #0000ff">const</span> vector&lt;Type&gt;&amp;<span style="color: #000000"> a_array);

</span><span style="color: #0000ff">private</span><span style="color: #000000">:
    vector</span>&lt;Type&gt;<span style="color: #000000"> m_array;

    </span><span style="color: #008000">//</span><span style="color: #008000">comp 为less&lt;Type&gt; 则大数下沉，创建最小堆，从小到大排序
    </span><span style="color: #008000">//</span><span style="color: #008000">comp 为greater&lt;Type&gt; 则小数下沉，创建最大堆，从大到小排序</span>
    template&lt;typename Compare&gt;
    <span style="color: #0000ff">void</span> creatHeap(Compare comp);                <span style="color: #008000">//</span><span style="color: #008000">创建堆</span>
<span style="color: #000000">
    template</span>&lt;typename Compare&gt;
    <span style="color: #0000ff">void</span> downElement(<span style="color: #0000ff">int</span> a_elem, Compare comp);    <span style="color: #008000">//</span><span style="color: #008000">下沉元素</span>
<span style="color: #000000">};

template</span>&lt;typename Type&gt;<span style="color: #000000">
template</span>&lt;typename Compare&gt;
<span style="color: #0000ff">void</span> Heap&lt;Type&gt;<span style="color: #000000">::sort(Compare comp)
{
    printArray(m_array);
    creatHeap(comp);                    </span><span style="color: #008000">//</span><span style="color: #008000">建堆</span>
    vector&lt;Type&gt;<span style="color: #000000"> array;
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i = m_array.size() - <span style="color: #800080">1</span>; i &gt;= <span style="color: #800080">0</span>; i--<span style="color: #000000">)
    {
        array.push_back(m_array[</span><span style="color: #800080">0</span>]);    <span style="color: #008000">//</span><span style="color: #008000">保留堆顶</span>
        swap(m_array[<span style="color: #800080">0</span>], m_array[i]);    <span style="color: #008000">//</span><span style="color: #008000">交换</span>
        m_array.pop_back();                <span style="color: #008000">//</span><span style="color: #008000">去掉最后一个元素</span>
        downElement(<span style="color: #800080">0</span>,comp);            <span style="color: #008000">//</span><span style="color: #008000">将新的首元素下沉</span>
<span style="color: #000000">    }
    printArray(array);
    m_array.assign(array.begin(),array.end());
}

template</span>&lt;typename Type&gt;<span style="color: #000000">
template</span>&lt;typename Compare&gt;
<span style="color: #0000ff">void</span> Heap&lt;Type&gt;<span style="color: #000000">::creatHeap(Compare comp)
{
    </span><span style="color: #008000">//</span><span style="color: #008000">从最后一个非叶子节点开始，将每个父节点都调整为最小堆</span>
    <span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=m_array.size()/<span style="color: #800080">2</span>-<span style="color: #800080">1</span>; i&gt;=<span style="color: #800080">0</span>; i--<span style="color: #000000">)
    {
        downElement(i, comp);
    }
}

template</span>&lt;typename Type&gt;<span style="color: #000000">
template</span>&lt;typename Compare&gt;
<span style="color: #0000ff">void</span> Heap&lt;Type&gt;::downElement(<span style="color: #0000ff">int</span> a_elem, Compare comp)    <span style="color: #008000">//</span><span style="color: #008000">下沉元素</span>
<span style="color: #000000">{
    </span><span style="color: #0000ff">int</span> min;            <span style="color: #008000">//</span><span style="color: #008000">设置最小元素下标</span>
    <span style="color: #0000ff">int</span> index = a_elem;    <span style="color: #008000">//</span><span style="color: #008000">当前下沉的元素下标</span>
    <span style="color: #0000ff">while</span> (index*<span style="color: #800080">2</span>+<span style="color: #800080">1</span> &lt; m_array.size())<span style="color: #008000">//</span><span style="color: #008000">存在左节点</span>
<span style="color: #000000">    {
        min </span>= index*<span style="color: #800080">2</span>+<span style="color: #800080">1</span><span style="color: #000000">;
        </span><span style="color: #0000ff">if</span> (index*<span style="color: #800080">2</span>+<span style="color: #800080">2</span> &lt; m_array.size())<span style="color: #008000">//</span><span style="color: #008000">存在右节点</span>
<span style="color: #000000">        {
            </span><span style="color: #008000">//</span><span style="color: #008000">左右节点比较，选出最小的</span>
            <span style="color: #0000ff">if</span> (comp(m_array[index*<span style="color: #800080">2</span>+<span style="color: #800080">2</span><span style="color: #000000">],m_array[min]))
            {
                min </span>= index*<span style="color: #800080">2</span>+<span style="color: #800080">2</span><span style="color: #000000">;
            }
        }
        </span><span style="color: #008000">//</span><span style="color: #008000">同子节点比较，若父节点最小则结束</span>
        <span style="color: #0000ff">if</span><span style="color: #000000"> (comp(m_array[index],m_array[min]))
        {
            </span><span style="color: #0000ff">break</span><span style="color: #000000">;
        }
        </span><span style="color: #0000ff">else</span><span style="color: #008000">//</span><span style="color: #008000">选最小元素到父节点</span>
<span style="color: #000000">        {
            swap(m_array[min],m_array[index]);
            index </span>=<span style="color: #000000"> min;
        }
    }
}

template</span>&lt;typename Type&gt;
<span style="color: #0000ff">void</span> Heap&lt;Type&gt;::printArray(<span style="color: #0000ff">const</span> vector&lt;Type&gt;&amp;<span style="color: #000000"> a_array)
{
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;a_array.size(); i++<span style="color: #000000">)
    {
        cout </span>&lt;&lt; a_array[i] &lt;&lt; <span style="color: #800000">&quot;</span> <span style="color: #800000">&quot;</span><span style="color: #000000">;
    }
    cout </span>&lt;&lt;<span style="color: #000000"> endl;
}


</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    vector</span>&lt;<span style="color: #0000ff">int</span>&gt;<span style="color: #000000"> array;
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">10</span>; i&lt;<span style="color: #800080">20</span>; i++<span style="color: #000000">)
    {
        array.push_back(i);
    }
    random_shuffle(array.begin(), array.end());</span><span style="color: #008000">//</span><span style="color: #008000">打乱顺序</span>
    Heap&lt;<span style="color: #0000ff">int</span>&gt;<span style="color: #000000"> heap(array);
    heap.sort(less</span>&lt;<span style="color: #0000ff">int</span>&gt;<span style="color: #000000">());
    heap.sort(greater</span>&lt;<span style="color: #0000ff">int</span>&gt;<span style="color: #000000">());
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>







<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121626142873.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121626173689.png" width="240" height="85" /></a></p>]]></description></item><item><title>字符串拷贝函数 char *strcpy（char *dest, const char *src）</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/12/2721234.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 12 Oct 2012 05:49:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/12/2721234.html</guid><description><![CDATA[<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008000">//</span><span style="color: #008000">字符串拷贝函数 char *strcpy（char *dest, const char *src）</span>
<span style="color: #000000">
#include </span>&lt;stdio.h&gt;

<span style="color: #0000ff">char</span> *strcpy(<span style="color: #0000ff">char</span> *dest, <span style="color: #0000ff">const</span> <span style="color: #0000ff">char</span> *<span style="color: #000000">src)
{
    </span><span style="color: #0000ff">char</span> *p =<span style="color: #000000"> dest;
    </span><span style="color: #0000ff">while</span> ((*dest++=*src++)!=<span style="color: #800000">'</span><span style="color: #800000">\0</span><span style="color: #800000">'</span><span style="color: #000000">);
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> p;
}

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">char</span> *str1 = <span style="color: #800000">&quot;</span><span style="color: #800000">adbcdd</span><span style="color: #800000">&quot;</span><span style="color: #000000">; 
    </span><span style="color: #0000ff">char</span> str2[<span style="color: #800080">15</span><span style="color: #000000">];
    strcpy(str2,str1);
    printf(</span><span style="color: #800000">&quot;</span><span style="color: #800000">%s</span><span style="color: #800000">&quot;</span><span style="color: #000000">,str2);
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121348398968.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210121348403395.png" width="207" height="67" /></a></p>]]></description></item><item><title>最简单的单例模式</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/11/2720451.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 11 Oct 2012 12:28:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/11/2720451.html</guid><description><![CDATA[<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008000">//</span><span style="color: #008000">单例模式</span>
#include &lt;iostream&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

</span><span style="color: #0000ff">class</span><span style="color: #000000"> Singleton
{
</span><span style="color: #0000ff">public</span><span style="color: #000000">:
    </span><span style="color: #0000ff">static</span> Singleton*<span style="color: #000000"> Instance();
    
</span><span style="color: #0000ff">protected</span><span style="color: #000000">:
    Singleton() {}
    
</span><span style="color: #0000ff">private</span><span style="color: #000000">:
    </span><span style="color: #0000ff">static</span> Singleton*<span style="color: #000000"> _instance;
};
Singleton</span>* Singleton::_instance = <span style="color: #800080">0</span><span style="color: #000000">;

Singleton</span>*<span style="color: #000000"> Singleton::Instance()
{
    </span><span style="color: #0000ff">if</span> (_instance == <span style="color: #800080">0</span><span style="color: #000000">)
    {
        _instance </span>= <span style="color: #0000ff">new</span><span style="color: #000000"> Singleton();
        cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">Singleton new</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    }
    </span><span style="color: #0000ff">return</span><span style="color: #000000"> _instance;
}

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;<span style="color: #800080">10</span>; i++<span style="color: #000000">)
    {
        Singleton</span>* obj =<span style="color: #000000"> Singleton::Instance();
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>


<a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210112027491594.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210112027494941.png" width="240" height="68" /></a>]]></description></item><item><title>【算法题目集锦】为找工作做准备的</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/10/2719075.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 10 Oct 2012 13:55:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/10/2719075.html</guid><description><![CDATA[<h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/16/2726135.html">字符串相似度的计算（百度笔试题回忆）</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/16/2725358.html">reverse()的实现字符串反转和模板reverse的实现</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/15/2725047.html">洗牌程序的两种实现方法比较</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/12/2721540.html">堆排序，C++模板编程</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/12/2721234.html">字符串拷贝函数 char *strcpy（char *dest, const char *src）</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/11/2720451.html">最简单的单例模式</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/10/2719019.html">按要求获得序列</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/10/2718602.html">两个栈实现一个队列</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/10/2718413.html">循环链表解决约瑟夫环问题</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/07/2713636.html">进制转换问题求解</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/10/03/2711008.html">判断一个数是否是2^N次方</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/08/18/2645929.html">【c++模板实现】二叉查找树</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/08/03/2622253.html">回顾内存区：C语言C++的内存区是一样的。</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/08/03/2622166.html">汉诺塔问题的求解</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/07/22/2603584.html">C++文件的批处理</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/06/12/2545808.html">利用基姆拉尔森公式根据日期计算星期</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2012/04/26/2471278.html">a的b次方模n算法</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2011/10/18/2215999.html">KMP字符匹配算法+Romberg数值求积分+Simpson求积分</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2011/07/09/2101537.html">求n个数的最大公约数</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2011/07/02/2096171.html">c语言小程序集锦</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2011/03/26/1996513.html">特殊的四位数</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2011/03/24/1994267.html">产生随机的排列</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2011/03/24/1993752.html">使用递归方法求阶乘</a></h3>  <h3><a href="http://www.cnblogs.com/hanxi/archive/2011/03/23/1992996.html">数字阶梯（Number Steps）</a></h3>]]></description></item><item><title>按要求获得序列</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/10/2719019.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 10 Oct 2012 13:25:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/10/2719019.html</guid><description><![CDATA[<p>题目：</p>  <p>给定一个数组input[] ，如果数组长度n为奇数，则将数组中最大的元素放到 output[] 数组最中间的位置，如果数组长度n为偶数，则将数组中最大的元素放到 output[] 数组中间两个位置偏右的那个位置上，然后再按从大到小的顺序，依次在第一个位置的两边，按照一左一右的顺序，依次存放剩下的数。</p>  <p>例如：input[] = {3, 6, 1, 9, 7}&#160;&#160; output[] = {3, 7, 9, 6, 1};&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </p>  <p>input[] = {3, 6, 1, 9, 7, 8}&#160;&#160;&#160; output[] = {1, 6, 8, 9, 7, 3}</p>  <p>函数接口&#160;&#160; void sort(int input[], int n, int output[])</p>  <p>&#160;</p>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre>#include &lt;iostream&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

</span><span style="color: #0000ff">void</span> sort(<span style="color: #0000ff">int</span> input[], <span style="color: #0000ff">int</span> n, <span style="color: #0000ff">int</span><span style="color: #000000"> output[]);
</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">int</span> input[] = {<span style="color: #800080">3</span>, <span style="color: #800080">6</span>, <span style="color: #800080">1</span>, <span style="color: #800080">9</span>, <span style="color: #800080">7</span><span style="color: #000000">};
    </span><span style="color: #0000ff">int</span> output[<span style="color: #800080">5</span><span style="color: #000000">];
    sort(input, </span><span style="color: #800080">5</span><span style="color: #000000">, output);
    </span><span style="color: #0000ff">int</span> input2[] = {<span style="color: #800080">3</span>, <span style="color: #800080">6</span>, <span style="color: #800080">1</span>, <span style="color: #800080">9</span>, <span style="color: #800080">7</span>, <span style="color: #800080">8</span><span style="color: #000000">};
    </span><span style="color: #0000ff">int</span> output2[<span style="color: #800080">6</span><span style="color: #000000">];
    sort(input2, </span><span style="color: #800080">6</span><span style="color: #000000">, output2);
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}
 
</span><span style="color: #0000ff">void</span> sort(<span style="color: #0000ff">int</span> input[], <span style="color: #0000ff">int</span> n, <span style="color: #0000ff">int</span><span style="color: #000000"> output[])
{
    </span><span style="color: #008000">//</span><span style="color: #008000">选择法排序（从大到小）</span>
    <span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;n; i++<span style="color: #000000">)
    {
        </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> j=i+<span style="color: #800080">1</span>; j&lt;n; j++<span style="color: #000000">)
        {
            </span><span style="color: #0000ff">if</span> (input[i] &lt;<span style="color: #000000"> input[j])
            {
                </span><span style="color: #0000ff">int</span> tmp =<span style="color: #000000"> input[i];
                input[i] </span>=<span style="color: #000000"> input[j];
                input[j] </span>=<span style="color: #000000"> tmp;
            }
        }
    }
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;n; i++<span style="color: #000000">)
    {
        cout </span>&lt;&lt; input[i] &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">,</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    }
    cout </span>&lt;&lt;<span style="color: #000000"> endl;

    </span><span style="color: #0000ff">int</span> mid;<span style="color: #008000">//</span><span style="color: #008000">存放最大数的位置</span>
    <span style="color: #0000ff">if</span> (n%<span style="color: #800080">2</span> != <span style="color: #800080">0</span>)<span style="color: #008000">//</span><span style="color: #008000">奇数</span>
<span style="color: #000000">    {
        mid </span>= (n-<span style="color: #800080">1</span>)/<span style="color: #800080">2</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">else</span><span style="color: #008000">//</span><span style="color: #008000">偶数</span>
<span style="color: #000000">    {
        mid </span>= n/<span style="color: #800080">2</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">int</span> k=<span style="color: #800080">1</span><span style="color: #000000">;
    output[mid] </span>= input[<span style="color: #800080">0</span><span style="color: #000000">];
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">1</span>; i&lt;n; i++<span style="color: #000000">)
    {
        k </span>= (i+<span style="color: #800080">1</span>)/<span style="color: #800080">2</span><span style="color: #000000">;
        </span><span style="color: #0000ff">if</span> (i%<span style="color: #800080">2</span> != <span style="color: #800080">0</span><span style="color: #000000">)
        {
            output[mid</span>-k] =<span style="color: #000000"> input[i];
        }
        </span><span style="color: #0000ff">else</span><span style="color: #000000">
        {
            output[mid</span>+k] =<span style="color: #000000"> input[i];
        }
    }
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;n; i++<span style="color: #000000">)
    {
        cout </span>&lt;&lt; output[i] &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">,</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    }
    cout </span>&lt;&lt;<span style="color: #000000"> endl;
}</span></pre>
</div>]]></description></item><item><title>两个栈实现一个队列</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/10/2718602.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 10 Oct 2012 09:13:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/10/2718602.html</guid><description><![CDATA[<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008000">/*</span><span style="color: #008000">*
 * 两个栈实现一个队列
 * 栈IN用做入列，栈OUT用做出列
 * push:
 *    栈IN执行push操作
 * pop:
 *    如果栈OUT不为空，执行pop操作
 *    如果栈OUT为空，将栈IN所有元素依次pop并push到栈OUT。
 </span><span style="color: #008000">*/</span><span style="color: #000000">
 
#include </span>&lt;stack&gt;<span style="color: #000000">
#include </span>&lt;iostream&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

template</span>&lt;typename TYPE&gt;
<span style="color: #0000ff">class</span><span style="color: #000000"> Queue
{
</span><span style="color: #0000ff">public</span><span style="color: #000000">:
    </span><span style="color: #0000ff">void</span> push(<span style="color: #0000ff">const</span> TYPE&amp;<span style="color: #000000"> a_data)
    {
        IN.push(a_data);
    }
    
    TYPE front()
    {
        </span><span style="color: #0000ff">if</span> (!<span style="color: #000000">OUT.empty())
        {
            </span><span style="color: #0000ff">return</span><span style="color: #000000"> OUT.top();
        }
        </span><span style="color: #0000ff">else</span><span style="color: #000000">
        {
            </span><span style="color: #0000ff">while</span> (!<span style="color: #000000">IN.empty())
            {
                OUT.push(IN.top());
                IN.pop();
            }
            </span><span style="color: #0000ff">return</span><span style="color: #000000"> OUT.top();
        }
    }
    
    </span><span style="color: #0000ff">void</span><span style="color: #000000"> pop()
    {
        </span><span style="color: #0000ff">if</span> (!<span style="color: #000000">OUT.empty())
        {
            OUT.pop();
        }
        </span><span style="color: #0000ff">else</span><span style="color: #000000">
        {
            </span><span style="color: #0000ff">while</span> (!<span style="color: #000000">IN.empty())
            {
                OUT.push(IN.top());
                IN.pop();
            }
            OUT.pop();
        }
    }

</span><span style="color: #0000ff">private</span><span style="color: #000000">:
    stack</span>&lt;TYPE&gt;<span style="color: #000000"> IN;
    stack</span>&lt;TYPE&gt;<span style="color: #000000"> OUT;
};

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    Queue</span>&lt;<span style="color: #0000ff">int</span>&gt;<span style="color: #000000"> myQueue;
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;<span style="color: #800080">10</span>; i++<span style="color: #000000">)
    {
        myQueue.push(i);
    }
    </span><span style="color: #0000ff">for</span> (<span style="color: #0000ff">int</span> i=<span style="color: #800080">0</span>; i&lt;<span style="color: #800080">10</span>; i++<span style="color: #000000">)
    {
        cout </span>&lt;&lt; myQueue.front() &lt;&lt;<span style="color: #000000"> endl;
        myQueue.pop();
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210101712305745.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201210/201210101712302681.png" width="240" height="86" /></a></p>]]></description></item><item><title>循环链表解决约瑟夫环问题</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/10/2718413.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 10 Oct 2012 07:48:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/10/2718413.html</guid><description><![CDATA[<p>　　约瑟夫环问题可以简单的使用数组的方式实现，但是现在我使用循环链表的方法来实现，因为上午看到一道面试题规定使用循环链表解决约瑟夫环问题。</p>
<p>　　什么是约瑟夫环？</p>
<p>　　&ldquo;约瑟夫环是一个数学的应用问题：已知n个人（以编号1，2，3...n分别表示）围坐在一张圆桌周围。从编号为k的人开始报数，数到m的那个人出列；他的下一个人又从1开始报数，数到m的那个人又出列；依此规律重复下去，直到圆桌周围的人全部出列。&rdquo;（<a href="http://baike.baidu.com/view/717633.htm#3">百度百科</a>中的解决办法列出了很多，可以看到循环链表并不是最简单的方法）</p>
<p>　　这道面试题考察了循环链表的&ldquo;创建&rdquo;，&ldquo;遍历&rdquo;和&ldquo;删除&rdquo;。</p>
<p>创建的循环链表的结构图：</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012101015571941.jpg" alt="" /></p>
<p>解决约瑟夫环问题的过程</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012101016082279.jpg" alt="" /></p>
<p>C++实现代码如下：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('cc42fa3a-673e-4828-b3fc-3154c0818089')"><img id="code_img_closed_cc42fa3a-673e-4828-b3fc-3154c0818089" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_cc42fa3a-673e-4828-b3fc-3154c0818089" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('cc42fa3a-673e-4828-b3fc-3154c0818089',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">循环链表解决约瑟夫问题</span>
<div id="cnblogs_code_open_cc42fa3a-673e-4828-b3fc-3154c0818089" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #008000;">/*</span><span style="color: #008000;">*循环链表解决约瑟夫环问题
</span><span style="color: #008080;"> 2</span> <span style="color: #008000;"> * 问题：约瑟夫环
</span><span style="color: #008080;"> 3</span> <span style="color: #008000;"> * 有编号从1到N的N个人坐成一圈报数，从第K个人开始报数，报到M的人出局，
</span><span style="color: #008080;"> 4</span> <span style="color: #008000;"> * 下一位再从1开始报数，如此持续，直止剩下一位为止，报告此人的编号X。
</span><span style="color: #008080;"> 5</span> <span style="color: #008000;"> * 输入N,K,M，求出X。
</span><span style="color: #008080;"> 6</span>  <span style="color: #008000;">*/</span>
<span style="color: #008080;"> 7</span> 
<span style="color: #008080;"> 8</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 9</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #0000ff;">struct</span><span style="color: #000000;"> MyNode
</span><span style="color: #008080;">12</span> <span style="color: #000000;">{
</span><span style="color: #008080;">13</span>     MyNode(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a_data):m_data(a_data),m_pNext(NULL) {}
</span><span style="color: #008080;">14</span>     
<span style="color: #008080;">15</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;">    m_data;
</span><span style="color: #008080;">16</span>     MyNode *<span style="color: #000000;">m_pNext;
</span><span style="color: #008080;">17</span> <span style="color: #000000;">};
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Josephus
</span><span style="color: #008080;">20</span> <span style="color: #000000;">{
</span><span style="color: #008080;">21</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;">22</span>     Josephus(<span style="color: #0000ff;">int</span> a_N, <span style="color: #0000ff;">int</span> a_K, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_M):m_N(a_N),m_K(a_K),m_M(a_M)
</span><span style="color: #008080;">23</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">24</span> <span style="color: #000000;">        createList();
</span><span style="color: #008080;">25</span> <span style="color: #000000;">        outputList();
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">27</span>     
<span style="color: #008080;">28</span> <span style="color: #0000ff;">protected</span><span style="color: #000000;">:
</span><span style="color: #008080;">29</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> createList();
</span><span style="color: #008080;">30</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> outputList();
</span><span style="color: #008080;">31</span>     
<span style="color: #008080;">32</span> <span style="color: #0000ff;">private</span><span style="color: #000000;">:
</span><span style="color: #008080;">33</span>     MyNode *m_pHead;<span style="color: #008000;">//</span><span style="color: #008000;">循环链表的头节点</span>
<span style="color: #008080;">34</span>     <span style="color: #0000ff;">int</span>    m_N;     <span style="color: #008000;">//</span><span style="color: #008000;">链表节点个数</span>
<span style="color: #008080;">35</span>     <span style="color: #0000ff;">int</span>    m_K;     <span style="color: #008000;">//</span><span style="color: #008000;">第一个报数人的序号</span>
<span style="color: #008080;">36</span>     <span style="color: #0000ff;">int</span>    m_M;     <span style="color: #008000;">//</span><span style="color: #008000;">报数出局的数</span>
<span style="color: #008080;">37</span> <span style="color: #000000;">};
</span><span style="color: #008080;">38</span> 
<span style="color: #008080;">39</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> Josephus::createList()
</span><span style="color: #008080;">40</span> <span style="color: #000000;">{
</span><span style="color: #008080;">41</span>     MyNode *pre =<span style="color: #000000;"> NULL;
</span><span style="color: #008080;">42</span>     MyNode *cur =<span style="color: #000000;"> NULL;
</span><span style="color: #008080;">43</span>     MyNode *p = <span style="color: #0000ff;">new</span> MyNode(<span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;">44</span>     m_pHead =<span style="color: #000000;"> p;
</span><span style="color: #008080;">45</span>     cur =<span style="color: #000000;"> p;
</span><span style="color: #008080;">46</span>     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">2</span>; i&lt;=m_N; i++<span style="color: #000000;">)
</span><span style="color: #008080;">47</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">48</span>         p = <span style="color: #0000ff;">new</span><span style="color: #000000;"> MyNode(i);
</span><span style="color: #008080;">49</span>         pre =<span style="color: #000000;"> cur;
</span><span style="color: #008080;">50</span>         cur =<span style="color: #000000;"> p;
</span><span style="color: #008080;">51</span>         pre-&gt;m_pNext =<span style="color: #000000;"> cur;
</span><span style="color: #008080;">52</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">53</span>     cur-&gt;m_pNext =<span style="color: #000000;"> m_pHead;
</span><span style="color: #008080;">54</span>     
<span style="color: #008080;">55</span>     <span style="color: #0000ff;">int</span> n=<span style="color: #000000;">m_N;
</span><span style="color: #008080;">56</span>     p =<span style="color: #000000;"> m_pHead;
</span><span style="color: #008080;">57</span>     <span style="color: #0000ff;">while</span> (n--<span style="color: #000000;">)
</span><span style="color: #008080;">58</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">59</span>         cout &lt;&lt; p-&gt;m_data &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">60</span>         p = p-&gt;<span style="color: #000000;">m_pNext;
</span><span style="color: #008080;">61</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">62</span>     cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">63</span> <span style="color: #000000;">}
</span><span style="color: #008080;">64</span> 
<span style="color: #008080;">65</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> Josephus::outputList()
</span><span style="color: #008080;">66</span> <span style="color: #000000;">{
</span><span style="color: #008080;">67</span>     MyNode *pre =<span style="color: #000000;"> NULL;
</span><span style="color: #008080;">68</span>     MyNode *cur =<span style="color: #000000;"> m_pHead;
</span><span style="color: #008080;">69</span>     m_K--<span style="color: #000000;">;
</span><span style="color: #008080;">70</span>     <span style="color: #0000ff;">while</span> (m_K--)            <span style="color: #008000;">//</span><span style="color: #008000;">寻找第K个人（开始报数的人）</span>
<span style="color: #008080;">71</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">72</span>         pre =<span style="color: #000000;"> cur;
</span><span style="color: #008080;">73</span>         cur = cur-&gt;<span style="color: #000000;">m_pNext;
</span><span style="color: #008080;">74</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">75</span>     <span style="color: #0000ff;">while</span> (m_N--)            <span style="color: #008000;">//</span><span style="color: #008000;">输出链表中所有的节点值</span>
<span style="color: #008080;">76</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">77</span>         <span style="color: #0000ff;">int</span> s = m_M-<span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">78</span>         <span style="color: #0000ff;">while</span> (s--)            <span style="color: #008000;">//</span><span style="color: #008000;">寻找间隔M的人</span>
<span style="color: #008080;">79</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">80</span>             pre =<span style="color: #000000;"> cur;
</span><span style="color: #008080;">81</span>             cur = cur-&gt;<span style="color: #000000;">m_pNext;
</span><span style="color: #008080;">82</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">83</span>         MyNode *p =<span style="color: #000000;"> cur;
</span><span style="color: #008080;">84</span>         cout &lt;&lt; p-&gt;m_data &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">85</span>         cur = cur-&gt;m_pNext;    <span style="color: #008000;">//</span><span style="color: #008000;">删除节点的过程</span>
<span style="color: #008080;">86</span>         pre-&gt;m_pNext =<span style="color: #000000;"> cur;
</span><span style="color: #008080;">87</span> <span style="color: #000000;">        delete p;
</span><span style="color: #008080;">88</span>         p=<span style="color: #000000;">NULL;
</span><span style="color: #008080;">89</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">90</span> <span style="color: #000000;">}
</span><span style="color: #008080;">91</span> 
<span style="color: #008080;">92</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">93</span> <span style="color: #000000;">{
</span><span style="color: #008080;">94</span>     Josephus josephus(<span style="color: #800080;">100</span>,<span style="color: #800080;">5</span>,<span style="color: #800080;">5</span><span style="color: #000000;">);
</span><span style="color: #008080;">95</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">96</span> }</pre>
</div>
</div>
<p>&nbsp;</p>
<p>测试结果：</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012101015463765.jpg" alt="" /></p>]]></description></item><item><title>进制转换问题求解</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/07/2713636.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 07 Oct 2012 03:18:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/07/2713636.html</guid><description><![CDATA[<p>&#160;</p>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre>#include &lt;stdio.h&gt;<span style="color: #000000">
#include </span>&lt;stdlib.h&gt;<span style="color: #000000">
#include </span>&lt;<span style="color: #0000ff">string</span>.h&gt;

<span style="color: #008000">/*</span><span style="color: #008000">*
 * 总体思想：采用一个数组存放基数&quot;0123456789ABCDEF&quot;
 * 即数字的每一位由上述数组的元素组成
 * 如一个数表示为&quot;15F&quot;，则该数字实际为：1 5 15 
 * 这样的话处理进制转换问题就和大整数运算问题一样了。
 </span><span style="color: #008000">*/</span>
<span style="color: #008000">//</span><span style="color: #008000">将数字转换为字符串形式</span>
<span style="color: #0000ff">int</span> N2Str(<span style="color: #0000ff">int</span> value,<span style="color: #0000ff">int</span> N,<span style="color: #0000ff">char</span> *<span style="color: #000000">str)
{
    </span><span style="color: #0000ff">char</span> temp[<span style="color: #800080">10</span>],*Bits=<span style="color: #800000">&quot;</span><span style="color: #800000">0123456789ABCDEF</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    </span><span style="color: #0000ff">int</span><span style="color: #000000"> Len;
    </span><span style="color: #0000ff">if</span>(value&lt;<span style="color: #800080">0</span>||N&lt;<span style="color: #800080">2</span>||N&gt;<span style="color: #800080">16</span>||str==NULL) <span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
    </span><span style="color: #0000ff">if</span>(value&gt;=<span style="color: #000000">N)
    {</span><span style="color: #008000">//</span><span style="color: #008000">递归按位转换</span>
        <span style="color: #0000ff">if</span>(!N2Str(value/N,N,str)) <span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
    }

    Len</span>=<span style="color: #000000">strlen(str);
    str[Len]</span>=Bits[value%<span style="color: #000000">N];
    str[Len</span>+<span style="color: #800080">1</span>]=<span style="color: #800000">'</span><span style="color: #800000">\0</span><span style="color: #800000">'</span><span style="color: #000000">;
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">1</span><span style="color: #000000">;
}

</span><span style="color: #008000">//</span><span style="color: #008000">M进制转换为N进制</span>
<span style="color: #0000ff">int</span> M2N(<span style="color: #0000ff">int</span> M,<span style="color: #0000ff">char</span> *MStr,<span style="color: #0000ff">int</span> N,<span style="color: #0000ff">char</span> *<span style="color: #000000">NStr)
{
    </span><span style="color: #0000ff">int</span> value=<span style="color: #800080">0</span><span style="color: #000000">,bit;
    </span><span style="color: #0000ff">if</span>(M&lt;<span style="color: #800080">2</span>||M&gt;<span style="color: #800080">16</span>||MStr==NULL||N&lt;<span style="color: #800080">2</span>||N&gt;<span style="color: #800080">16</span>||NStr==NULL) <span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
    </span><span style="color: #0000ff">while</span>(*<span style="color: #000000">MStr)
    {</span><span style="color: #008000">//</span><span style="color: #008000">该过程类似于大整数运算的运算进位减位问题</span>
        value*=<span style="color: #000000">M;
        </span><span style="color: #0000ff">if</span>(*MStr&gt;=<span style="color: #800000">'</span><span style="color: #800000">0</span><span style="color: #800000">'</span>&amp;&amp;*MStr&lt;=<span style="color: #800000">'</span><span style="color: #800000">9</span><span style="color: #800000">'</span>) bit=*MStr-<span style="color: #800000">'</span><span style="color: #800000">0</span><span style="color: #800000">'</span><span style="color: #000000">;
        </span><span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span>(*MStr&gt;=<span style="color: #800000">'</span><span style="color: #800000">a</span><span style="color: #800000">'</span>&amp;&amp;*MStr&lt;=<span style="color: #800000">'</span><span style="color: #800000">f</span><span style="color: #800000">'</span>) bit=*MStr-<span style="color: #800000">'</span><span style="color: #800000">a</span><span style="color: #800000">'</span>+<span style="color: #800080">10</span><span style="color: #000000">;
        </span><span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span>(*MStr&gt;=<span style="color: #800000">'</span><span style="color: #800000">A</span><span style="color: #800000">'</span>&amp;&amp;*MStr&lt;=<span style="color: #800000">'</span><span style="color: #800000">F</span><span style="color: #800000">'</span>) bit=*MStr-<span style="color: #800000">'</span><span style="color: #800000">A</span><span style="color: #800000">'</span>+<span style="color: #800080">10</span><span style="color: #000000">;
        </span><span style="color: #0000ff">if</span>(bit&gt;=M) <span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
        value</span>+=<span style="color: #000000">bit;
        MStr</span>++<span style="color: #000000">;
    }

    </span>*NStr=<span style="color: #800000">'</span><span style="color: #800000">\0</span><span style="color: #800000">'</span><span style="color: #000000">;
    N2Str(value,N,NStr);
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">1</span><span style="color: #000000">;
}

</span><span style="color: #0000ff">int</span> main(<span style="color: #0000ff">void</span><span style="color: #000000">)
{
    </span><span style="color: #0000ff">char</span> *<span style="color: #0000ff">in</span>=<span style="color: #800000">&quot;</span><span style="color: #800000">123456</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    </span><span style="color: #0000ff">char</span> <span style="color: #0000ff">out</span>[<span style="color: #800080">50</span><span style="color: #000000">];

    </span><span style="color: #0000ff">if</span>(M2N(<span style="color: #800080">8</span>,<span style="color: #0000ff">in</span>,<span style="color: #800080">16</span>,<span style="color: #0000ff">out</span><span style="color: #000000">))
        printf(</span><span style="color: #800000">&quot;</span><span style="color: #800000">%s-&gt;%s\n</span><span style="color: #800000">&quot;</span>,<span style="color: #0000ff">in</span>,<span style="color: #0000ff">out</span><span style="color: #000000">);
    </span><span style="color: #0000ff">else</span><span style="color: #000000">
        printf(</span><span style="color: #800000">&quot;</span><span style="color: #800000">illegal input data\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">);

    system(</span><span style="color: #800000">&quot;</span><span style="color: #800000">pause</span><span style="color: #800000">&quot;</span><span style="color: #000000">);
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}</span></pre>
</div>]]></description></item><item><title>判断一个数是否是2^N次方</title><link>http://www.cnblogs.com/hanxi/archive/2012/10/03/2711008.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 03 Oct 2012 11:38:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/10/03/2711008.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">判断一个数是否是2^N次方</span>
<span style="color: #0000ff;">bool</span> is2N(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a)
{
</span><span style="color: #008000;">//</span><span style="color: #008000;">    2         4         8         16
</span><span style="color: #008000;">//</span><span style="color: #008000;">    10        100        1000    10000
</span><span style="color: #008000;">//</span><span style="color: #008000;">================================
</span><span style="color: #008000;">//</span><span style="color: #008000;">   100   a    
</span><span style="color: #008000;">//</span><span style="color: #008000;"> &amp; 011  a-1
</span><span style="color: #008000;">//</span><span style="color: #008000;">-------
</span><span style="color: #008000;">//</span><span style="color: #008000;">   000</span>
    <span style="color: #0000ff;">return</span> !(a&amp;(a-<span style="color: #800080;">1</span><span style="color: #000000;">));
}</span></pre>
</div>]]></description></item><item><title>【PHP+MySQL】投票系统的设计和实现</title><link>http://www.cnblogs.com/hanxi/archive/2012/09/21/2697512.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 21 Sep 2012 13:30:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/09/21/2697512.html</guid><description><![CDATA[<blockquote>   <p>系统不大，完成这个系统的过程我分了三个步骤</p>    <ul>     <li>数据库设计 </li>      <li>系统框架设计 </li>      <li>前端美化 </li>   </ul> </blockquote>  <h2>数据库的设计</h2>  <p>设计三张表：投票结果统计表（count_voting），投票人记录表（ip_votes），用户表（user）</p>  <p>投票结果统计表用于统计最后的投票记录，我给它弄了4个字段：被投票项的名称（SelectName），被投票项标签名（LabelName）（起到分类的作用），票数（CountVotes）。</p>  <p>投票人记录表用于登记投票人的ip（IP），地理位置（Location），投票时间（VoteTime），被投票项名称（SelectName）。然后我还给它加一个ID。</p>  <p>用户表主要用于给管理员用的，包含用户名（name）和密码（passwd）。</p>  <p>生成表的sql脚本如下：</p>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #008080">--
--</span><span style="color: #008080"> 表的结构 `count_voting`</span><span style="color: #008080">
--
</span>
<span style="color: #0000ff">DROP</span> <span style="color: #0000ff">TABLE</span> <span style="color: #0000ff">IF</span> <span style="color: #808080">EXISTS</span><span style="color: #000000"> `count_voting`;
</span><span style="color: #0000ff">CREATE</span> <span style="color: #0000ff">TABLE</span> <span style="color: #0000ff">IF</span> <span style="color: #808080">NOT</span> <span style="color: #808080">EXISTS</span><span style="color: #000000"> `count_voting` (
  `SelectName` </span><span style="color: #0000ff">varchar</span>(<span style="color: #800000; font-weight: bold">40</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span><span style="color: #000000">,
  `LabelName` </span><span style="color: #0000ff">varchar</span>(<span style="color: #800000; font-weight: bold">40</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span><span style="color: #000000">,
  `CountVotes` </span><span style="color: #0000ff">bigint</span>(<span style="color: #800000; font-weight: bold">20</span>) unsigned <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span><span style="color: #000000">,
  </span><span style="color: #0000ff">UNIQUE</span> <span style="color: #0000ff">KEY</span><span style="color: #000000"> `SelectName` (`SelectName`),
  </span><span style="color: #0000ff">KEY</span><span style="color: #000000"> `CountVotes` (`CountVotes`),
  </span><span style="color: #0000ff">KEY</span><span style="color: #000000"> `CountVotes_2` (`CountVotes`),
  </span><span style="color: #0000ff">KEY</span><span style="color: #000000"> `CountVotes_3` (`CountVotes`)
) ENGINE</span><span style="color: #808080">=</span>InnoDB <span style="color: #0000ff">DEFAULT</span> CHARSET<span style="color: #808080">=</span>utf8 COMMENT<span style="color: #808080">=</span><span style="color: #ff0000">'</span><span style="color: #ff0000">投票统计表</span><span style="color: #ff0000">'</span><span style="color: #000000">;

</span><span style="color: #008080">--</span><span style="color: #008080"> --------------------------------------------------------</span>

<span style="color: #008080">--
--</span><span style="color: #008080"> 表的结构 `ip_votes`</span><span style="color: #008080">
--
</span>
<span style="color: #0000ff">DROP</span> <span style="color: #0000ff">TABLE</span> <span style="color: #0000ff">IF</span> <span style="color: #808080">EXISTS</span><span style="color: #000000"> `ip_votes`;
</span><span style="color: #0000ff">CREATE</span> <span style="color: #0000ff">TABLE</span> <span style="color: #0000ff">IF</span> <span style="color: #808080">NOT</span> <span style="color: #808080">EXISTS</span><span style="color: #000000"> `ip_votes` (
  `ID` </span><span style="color: #0000ff">bigint</span>(<span style="color: #800000; font-weight: bold">20</span>) unsigned <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> auto_increment COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">投票人序号：自增</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `IP` </span><span style="color: #0000ff">varchar</span>(<span style="color: #800000; font-weight: bold">15</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">投票人IP</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `Location` </span><span style="color: #0000ff">varchar</span>(<span style="color: #800000; font-weight: bold">40</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">投票人位置</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `VoteTime` </span><span style="color: #0000ff">datetime</span> <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span><span style="color: #000000">,
  `SelectName` </span><span style="color: #0000ff">varchar</span>(<span style="color: #800000; font-weight: bold">40</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span><span style="color: #000000">,
  </span><span style="color: #0000ff">PRIMARY</span> <span style="color: #0000ff">KEY</span><span style="color: #000000">  (`ID`),
  </span><span style="color: #0000ff">KEY</span><span style="color: #000000"> `ID` (`ID`),
  </span><span style="color: #0000ff">KEY</span><span style="color: #000000"> `SelectName` (`SelectName`)
) ENGINE</span><span style="color: #808080">=</span>InnoDB  <span style="color: #0000ff">DEFAULT</span> CHARSET<span style="color: #808080">=</span>utf8 AUTO_INCREMENT<span style="color: #808080">=</span><span style="color: #800000; font-weight: bold">4</span><span style="color: #000000"> ;

</span><span style="color: #008080">--
--</span><span style="color: #008080"> 触发器 `ip_votes`</span><span style="color: #008080">
--
</span><span style="color: #0000ff">DROP</span> <span style="color: #0000ff">TRIGGER</span> <span style="color: #0000ff">IF</span> <span style="color: #808080">EXISTS</span><span style="color: #000000"> `vote_count_after_insert_tr`;
DELIMITER </span><span style="color: #808080">//</span>
<span style="color: #0000ff">CREATE</span> <span style="color: #0000ff">TRIGGER</span> `vote_count_after_insert_tr` AFTER <span style="color: #0000ff">INSERT</span> <span style="color: #0000ff">ON</span><span style="color: #000000"> `ip_votes`
 </span><span style="color: #0000ff">FOR</span> EACH ROW <span style="color: #0000ff">UPDATE</span> count_voting <span style="color: #0000ff">SET</span> CountVotes <span style="color: #808080">=</span> CountVotes <span style="color: #808080">+</span> <span style="color: #800000; font-weight: bold">1</span> <span style="color: #0000ff">WHERE</span> SelectName <span style="color: #808080">=</span><span style="color: #000000"> NEW.SelectName
</span><span style="color: #808080">//</span><span style="color: #000000">
DELIMITER ;

</span><span style="color: #008080">--</span><span style="color: #008080"> --------------------------------------------------------</span>

<span style="color: #008080">--
--</span><span style="color: #008080"> 表的结构 `user`</span><span style="color: #008080">
--
</span>
<span style="color: #0000ff">DROP</span> <span style="color: #0000ff">TABLE</span> <span style="color: #0000ff">IF</span> <span style="color: #808080">EXISTS</span> `<span style="color: #ff00ff">user</span><span style="color: #000000">`;
</span><span style="color: #0000ff">CREATE</span> <span style="color: #0000ff">TABLE</span> <span style="color: #0000ff">IF</span> <span style="color: #808080">NOT</span> <span style="color: #808080">EXISTS</span> `<span style="color: #ff00ff">user</span><span style="color: #000000">` (
  `name` </span><span style="color: #0000ff">varchar</span>(<span style="color: #800000; font-weight: bold">10</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">管理员用户名</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `passwd` </span><span style="color: #0000ff">char</span>(<span style="color: #800000; font-weight: bold">32</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">登录密码MD5值</span><span style="color: #ff0000">'</span><span style="color: #000000">
) ENGINE</span><span style="color: #808080">=</span>InnoDB <span style="color: #0000ff">DEFAULT</span> CHARSET<span style="color: #808080">=</span>utf8 COMMENT<span style="color: #808080">=</span><span style="color: #ff0000">'</span><span style="color: #ff0000">用户表</span><span style="color: #ff0000">'</span><span style="color: #000000">;

</span><span style="color: #008080">--
--</span><span style="color: #008080"> 转存表中的数据 `user`</span><span style="color: #008080">
--
</span>
<span style="color: #0000ff">INSERT</span> <span style="color: #0000ff">INTO</span> `<span style="color: #ff00ff">user</span>` (`name`, `passwd`) <span style="color: #0000ff">VALUES</span><span style="color: #000000">
(</span><span style="color: #ff0000">'</span><span style="color: #ff0000">ttxi</span><span style="color: #ff0000">'</span>, <span style="color: #ff0000">'</span><span style="color: #ff0000">700469ca1555900b18c641bf7b0a1fa1</span><span style="color: #ff0000">'</span><span style="color: #000000">),
(</span><span style="color: #ff0000">'</span><span style="color: #ff0000">jitttanwa</span><span style="color: #ff0000">'</span>, <span style="color: #ff0000">'</span><span style="color: #ff0000">adac5659956d68bcbc6f40aa5cd00d5c</span><span style="color: #ff0000">'</span><span style="color: #000000">);

</span><span style="color: #008080">--
--</span><span style="color: #008080"> 限制导出的表</span><span style="color: #008080">
--
</span>
<span style="color: #008080">--
--</span><span style="color: #008080"> 限制表 `ip_votes`</span><span style="color: #008080">
--
</span><span style="color: #0000ff">ALTER</span> <span style="color: #0000ff">TABLE</span><span style="color: #000000"> `ip_votes`
  </span><span style="color: #0000ff">ADD</span> <span style="color: #0000ff">CONSTRAINT</span> `ip_votes_ibfk_1` <span style="color: #0000ff">FOREIGN</span> <span style="color: #0000ff">KEY</span> (`SelectName`) <span style="color: #0000ff">REFERENCES</span> `count_voting` (`SelectName`) <span style="color: #0000ff">ON</span> <span style="color: #0000ff">DELETE</span> <span style="color: #0000ff">CASCADE</span> <span style="color: #0000ff">ON</span> <span style="color: #0000ff">UPDATE</span> <span style="color: #0000ff">CASCADE</span>;</pre>
</div>

<p>从脚本中可以看出，我创建了一个触发器，当往ip_votes表中插入数据的时候就给count_voting表中的CountVotes字段加1。还能后出最后一句是设置外部关联字。</p>

<h2>框架设计</h2>

<p>OperatorDB类用于操作数据库，OperatorVotingDB类用于该系统特定的操作集合。
  <br />使用PDO操作数据库，我它简单的封装一下：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">/*</span><span style="color: #008000">*
 * 操作数据库
 * 封装PDO，使其方便自己的操作
 </span><span style="color: #008000">*/</span>
<span style="color: #0000ff">class</span><span style="color: #000000"> OperatorDB
{
    </span><span style="color: #008000">//</span><span style="color: #008000">连接数据库的基本信息</span>
    <span style="color: #0000ff">private</span> $dbms=<span style="color: #800000">'</span><span style="color: #800000">mysql</span><span style="color: #800000">'</span>;       <span style="color: #008000">//</span><span style="color: #008000">数据库类型,对于开发者来说，使用不同的数据库，只要改这个.</span>
    <span style="color: #0000ff">private</span> $host=<span style="color: #800000">'</span><span style="color: #800000">localhost</span><span style="color: #800000">'</span>;       <span style="color: #008000">//</span><span style="color: #008000">数据库主机名</span>
    <span style="color: #0000ff">private</span> $dbName=<span style="color: #800000">'</span><span style="color: #800000">voting</span><span style="color: #800000">'</span>;     <span style="color: #008000">//</span><span style="color: #008000">使用的数据库</span>
    <span style="color: #0000ff">private</span> $user=<span style="color: #800000">'</span><span style="color: #800000">voting</span><span style="color: #800000">'</span>;       <span style="color: #008000">//</span><span style="color: #008000">数据库连接用户名</span>
    <span style="color: #0000ff">private</span> $passwd=<span style="color: #800000">'</span><span style="color: #800000">voting</span><span style="color: #800000">'</span>;     <span style="color: #008000">//</span><span style="color: #008000">对应的密码</span>
    <span style="color: #0000ff">private</span> $pdo=<span style="color: #0000ff">null</span><span style="color: #000000">;

    </span><span style="color: #0000ff">public</span><span style="color: #000000"> function  __construct()
    {
        </span><span style="color: #008000">//</span><span style="color: #008000">dl(&quot;php_pdo.dll&quot;);
        </span><span style="color: #008000">//</span><span style="color: #008000">dl(&quot;php_pdo_mysql.dll&quot;);</span>
        $<span style="color: #0000ff">this</span>-&gt;dsn=<span style="color: #800000">&quot;</span><span style="color: #800000">$this-&gt;dbms:host=$this-&gt;host;dbname=$this-&gt;dbName</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
        </span><span style="color: #0000ff">try</span><span style="color: #000000">
        {
            $</span><span style="color: #0000ff">this</span>-&gt;conn=<span style="color: #0000ff">new</span> PDO($<span style="color: #0000ff">this</span>-&gt;dsn,$<span style="color: #0000ff">this</span>-&gt;user,$<span style="color: #0000ff">this</span>-&gt;passwd);<span style="color: #008000">//</span><span style="color: #008000">初始化一个PDO对象，就是创建了数据库连接对象$db</span>
<span style="color: #000000">        }
        </span><span style="color: #0000ff">catch</span><span style="color: #000000">(PDOException $e)
        {
            die(</span><span style="color: #800000">&quot;</span><span style="color: #800000">&lt;br/&gt;数据库连接失败(creater PDO Error！): </span><span style="color: #800000">&quot;</span>.$e-&gt;getMessage().<span style="color: #800000">&quot;</span><span style="color: #800000">&lt;br/&gt;</span><span style="color: #800000">&quot;</span><span style="color: #000000">);
        }
    }
    </span><span style="color: #0000ff">public</span><span style="color: #000000"> function __destruct()
    {
        $</span><span style="color: #0000ff">this</span>-&gt;pdo = <span style="color: #0000ff">null</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">public</span><span style="color: #000000"> function exec($sql)
    {
    }
    </span><span style="color: #0000ff">public</span><span style="color: #000000"> function query($sql)
    {
    }
}</span></pre>
</div>

<p>把连接数据库的信息封装进去方便后续的操作。</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>&lt;?<span style="color: #000000">php
</span><span style="color: #0000ff">require_once</span> 'OperatorDB.php'<span style="color: #000000">;
</span><span style="color: #0000ff">class</span><span style="color: #000000"> OperatorVotingDB
{
    </span><span style="color: #0000ff">private</span> <span style="color: #800080">$odb</span><span style="color: #000000">;

    </span><span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span><span style="color: #000000">  __construct()
    {
        </span><span style="color: #800080">$this</span>-&gt;odb = <span style="color: #0000ff">new</span><span style="color: #000000"> OperatorDB();
    }
    </span><span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span><span style="color: #000000"> __destruct()
    {
        </span><span style="color: #800080">$this</span>-&gt;odb = <span style="color: #0000ff">null</span><span style="color: #000000">;
    }

    </span><span style="color: #008000">/*</span><span style="color: #008000">*
     * 清空Voting数据中的所有表
     *
     * 调用数据库操作类，执行clear数据库的操作
     </span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span><span style="color: #000000"> clearTables()
    {
        </span><span style="color: #800080">$sqls</span> = <span style="color: #0000ff">array</span>(&quot;TRUNCATE ip_votes;&quot;,&quot;TRUNCATE count_voting;&quot;<span style="color: #000000">);
        </span><span style="color: #800080">$this</span>-&gt;odb-&gt;<span style="color: #008080">exec</span>(<span style="color: #800080">$sqls</span>[0<span style="color: #000000">]);
        </span><span style="color: #800080">$this</span>-&gt;odb-&gt;<span style="color: #008080">exec</span>(<span style="color: #800080">$sqls</span>[1<span style="color: #000000">]);
    }

    </span><span style="color: #008000">/*</span><span style="color: #008000">*
     * 重置count_voting表中的CountValues字段为0
     *
     </span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span><span style="color: #000000"> resetCountValues()
    {
        </span><span style="color: #800080">$sql</span> = &quot;UPDATE count_voting SET CountVotes = 0;&quot;<span style="color: #000000">;
        </span><span style="color: #800080">$this</span>-&gt;odb-&gt;<span style="color: #008080">exec</span>(<span style="color: #800080">$sql</span><span style="color: #000000">);
    }

    </span><span style="color: #008000">/*</span><span style="color: #008000">*
     * 投票
     * 将信息写入ip_votes表
     * @param type $ip
     * @param type $loc
     * @param type $time
     * @param type $name
     </span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span> vote(<span style="color: #800080">$ip</span>,<span style="color: #800080">$loc</span>,<span style="color: #800080">$name</span><span style="color: #000000">)
    {
        </span><span style="color: #800080">$sql</span> = &quot;INSERT INTO ip_votes VALUES (NULL, '<span style="color: #800080">$ip</span>', '<span style="color: #800080">$loc</span>', NOW(), '<span style="color: #800080">$name</span>')&quot;<span style="color: #000000">;
        </span><span style="color: #800080">$subsql</span> = &quot;SELECT MAX(to_days(VoteTime)) FROM ip_votes WHERE IP='<span style="color: #800080">$ip</span>'&quot;<span style="color: #000000">;
        </span><span style="color: #800080">$stm</span> = <span style="color: #800080">$this</span>-&gt;odb-&gt;query(<span style="color: #800080">$subsql</span><span style="color: #000000">);
        </span><span style="color: #0000ff">if</span> (<span style="color: #008080">count</span>(<span style="color: #800080">$row</span>=<span style="color: #800080">$stm</span>-&gt;fetchAll())==1<span style="color: #000000">)
        {
            </span><span style="color: #800080">$now</span> = <span style="color: #008080">date</span>(&quot;Y-m-d H:i:s&quot;<span style="color: #000000">);
            </span><span style="color: #800080">$subsql</span> = &quot;SELECT to_days('<span style="color: #800080">$now</span>');&quot;<span style="color: #000000">;
            </span><span style="color: #800080">$stm</span> = <span style="color: #800080">$this</span>-&gt;odb-&gt;query(<span style="color: #800080">$subsql</span>)-&gt;<span style="color: #000000">fetch();
            </span><span style="color: #800080">$time</span> = <span style="color: #800080">$stm</span>[0];<span style="color: #008000">//</span><span style="color: #008000">使用mysql计算出的today时间
//            echo $time.&quot;&lt;br&gt;&quot;;
//            echo $row[0][0];</span>
            <span style="color: #0000ff">if</span> (<span style="color: #800080">$time</span>-<span style="color: #800080">$row</span>[0][0]&lt;1)<span style="color: #008000">//</span><span style="color: #008000">表中最大的时间和现在的时间$time比较</span>
<span style="color: #000000">            {
                </span><span style="color: #0000ff">echo</span> &quot;投票失败，相同ip需要隔一天才能投票&quot;<span style="color: #000000">;
                </span><span style="color: #0000ff">return</span><span style="color: #000000">;
            }
        }
</span><span style="color: #008000">//</span><span style="color: #008000">        echo $sql;</span>
        <span style="color: #0000ff">echo</span> &quot;投票成功!&quot;<span style="color: #000000">;
        </span><span style="color: #800080">$this</span>-&gt;odb-&gt;<span style="color: #008080">exec</span>(<span style="color: #800080">$sql</span><span style="color: #000000">);
    }

    </span><span style="color: #008000">/*</span><span style="color: #008000">*
     * 添加SelectName字段的行
     *
     * @param string $name
     * @param string $label
     * @param int $count
     </span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span> addSelectName(<span style="color: #800080">$name</span>, <span style="color: #800080">$label</span>, <span style="color: #800080">$count</span>=0<span style="color: #000000">)
    {
        </span><span style="color: #800080">$sql</span> = &quot;INSERT INTO count_voting VALUES ('<span style="color: #800080">$name</span>', '<span style="color: #800080">$label</span>', <span style="color: #800080">$count</span>);&quot;<span style="color: #000000">;
        </span><span style="color: #800080">$this</span>-&gt;odb-&gt;<span style="color: #008080">exec</span>(<span style="color: #800080">$sql</span><span style="color: #000000">);
    }

    </span><span style="color: #008000">/*</span><span style="color: #008000">*
     * 获取总投票情况,按票数排序的结果
     *
     * 按CountVotes字段排序，返回count_voting表
     *
     * @param int $n
     *
     </span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span> getVotesSortByCount(<span style="color: #800080">$n</span>=-1<span style="color: #000000">)
    {
        </span><span style="color: #800080">$sql</span> = &quot;SELECT * FROM count_voting ORDER BY CountVotes DESC LIMIT 0 , <span style="color: #800080">$n</span>;&quot;<span style="color: #000000">;
        </span><span style="color: #0000ff">if</span> (-1 == <span style="color: #800080">$n</span><span style="color: #000000">)
        {
            </span><span style="color: #800080">$sql</span> = &quot;SELECT * FROM count_voting ORDER BY CountVotes DESC;&quot;<span style="color: #000000">;
        }
</span><span style="color: #008000">//</span><span style="color: #008000">        echo $sql;</span>
        <span style="color: #0000ff">return</span> <span style="color: #800080">$this</span>-&gt;odb-&gt;query(<span style="color: #800080">$sql</span><span style="color: #000000">);
    }

    </span><span style="color: #008000">/*</span><span style="color: #008000">*
     * 获取投票情况,按票数排序并按标签分组的结果
     *
     * 按CountVotes字段排序并按LabelName字段分组，返回count_voting表
     </span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">public</span> <span style="color: #0000ff">function</span><span style="color: #000000"> getVotesGroupByLabel()
    {
        </span><span style="color: #800080">$sql</span> = &quot;SELECT * FROM count_voting ORDER BY LabelName DESC;&quot;<span style="color: #000000">;
</span><span style="color: #008000">//</span><span style="color: #008000">        echo $sql;</span>
        <span style="color: #0000ff">return</span> <span style="color: #800080">$this</span>-&gt;odb-&gt;query(<span style="color: #800080">$sql</span><span style="color: #000000">);
    }
}
</span>?&gt;</pre>
</div>



<p>下面还有需要的函数</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>&lt;?<span style="color: #000000">php
</span><span style="color: #008000">/*</span><span style="color: #008000">*
 * 页面跳转函数
 * 使用js实现
 * @param string $url
 </span><span style="color: #008000">*/</span>
<span style="color: #0000ff">function</span> goToPgae(<span style="color: #800080">$url</span><span style="color: #000000">)
{
    </span><span style="color: #0000ff">echo</span> &quot;&lt;script language='javascript' type='text/javascript'&gt;&quot;<span style="color: #000000">;
    </span><span style="color: #0000ff">echo</span> &quot;window.location.href='<span style="color: #800080">$url</span>'&quot;<span style="color: #000000">;
    </span><span style="color: #0000ff">echo</span> &quot;&lt;/script&gt;&quot;<span style="color: #000000">;
}
</span><span style="color: #0000ff">function</span> jsFunc(<span style="color: #800080">$fun</span>, <span style="color: #800080">$arg</span>=<span style="color: #0000ff">null</span><span style="color: #000000">)
{
    </span><span style="color: #0000ff">echo</span> &quot;&lt;script language='javascript' type='text/javascript'&gt;&quot;<span style="color: #000000">;
    </span><span style="color: #0000ff">echo</span> <span style="color: #800080">$fun</span>.&quot;('<span style="color: #800080">$arg</span>');&quot;<span style="color: #000000">;
    </span><span style="color: #0000ff">echo</span> &quot;&lt;/script&gt;&quot;<span style="color: #000000">;
}
</span><span style="color: #0000ff">function</span> jsFunc3(<span style="color: #800080">$fun</span>, <span style="color: #800080">$arg1</span>=<span style="color: #0000ff">null</span>,<span style="color: #800080">$arg2</span>=<span style="color: #0000ff">null</span>,<span style="color: #800080">$arg3</span>=<span style="color: #0000ff">null</span><span style="color: #000000">)
{
    </span><span style="color: #0000ff">echo</span> &quot;&lt;script language='javascript' type='text/javascript'&gt;&quot;<span style="color: #000000">;
    </span><span style="color: #0000ff">echo</span> <span style="color: #800080">$fun</span>.&quot;('<span style="color: #800080">$arg1</span>','<span style="color: #800080">$arg2</span>','<span style="color: #800080">$arg3</span>');&quot;<span style="color: #000000">;
    </span><span style="color: #0000ff">echo</span> &quot;&lt;/script&gt;&quot;<span style="color: #000000">;
    </span><span style="color: #008000">//</span><span style="color: #008000">echo $fun.&quot;('$arg1','$arg2','$arg3');&quot;;</span>
<span style="color: #000000">}

</span><span style="color: #0000ff">function</span><span style="color: #000000"> isLoginNow()
{
    </span><span style="color: #0000ff">if</span> (<span style="color: #800080">$_COOKIE</span>[&quot;user&quot;]==''<span style="color: #000000">)
    {
        </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span><span style="color: #000000">;
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span><span style="color: #000000">;
}

</span><span style="color: #0000ff">function</span><span style="color: #000000"> getClientIP()
{
    </span><span style="color: #0000ff">if</span> (<span style="color: #800080">$_SERVER</span>[&quot;HTTP_X_FORWARDED_FOR&quot;<span style="color: #000000">])
    {
        </span><span style="color: #0000ff">if</span> (<span style="color: #800080">$_SERVER</span>[&quot;HTTP_CLIENT_IP&quot;<span style="color: #000000">])
        {
                </span><span style="color: #800080">$proxy</span> = <span style="color: #800080">$_SERVER</span>[&quot;HTTP_CLIENT_IP&quot;<span style="color: #000000">];
        }
        </span><span style="color: #0000ff">else</span><span style="color: #000000">
        {
            </span><span style="color: #800080">$proxy</span> = <span style="color: #800080">$_SERVER</span>[&quot;REMOTE_ADDR&quot;<span style="color: #000000">];
        }
        </span><span style="color: #800080">$ip</span> = <span style="color: #800080">$_SERVER</span>[&quot;HTTP_X_FORWARDED_FOR&quot;<span style="color: #000000">];
    }
    </span><span style="color: #0000ff">else</span><span style="color: #000000">
    {
        </span><span style="color: #0000ff">if</span> (<span style="color: #800080">$_SERVER</span>[&quot;HTTP_CLIENT_IP&quot;<span style="color: #000000">])
        {
                </span><span style="color: #800080">$ip</span> = <span style="color: #800080">$_SERVER</span>[&quot;HTTP_CLIENT_IP&quot;<span style="color: #000000">];
        }
        </span><span style="color: #0000ff">else</span><span style="color: #000000">
        {
            </span><span style="color: #800080">$ip</span> = <span style="color: #800080">$_SERVER</span>[&quot;REMOTE_ADDR&quot;<span style="color: #000000">];
        }
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">$ip</span><span style="color: #000000">;
}

</span><span style="color: #008000">//</span><span style="color: #008000">从123查获取ip</span>
<span style="color: #0000ff">function</span> getIpfrom123cha(<span style="color: #800080">$ip</span><span style="color: #000000">) {
    </span><span style="color: #800080">$url</span> = 'http://www.123cha.com/ip/?q='.<span style="color: #800080">$ip</span><span style="color: #000000">;
        </span><span style="color: #800080">$content</span> = <span style="color: #008080">file_get_contents</span>(<span style="color: #800080">$url</span><span style="color: #000000">);
        </span><span style="color: #800080">$preg</span> = '/(?&lt;=本站主数据:&lt;\/li&gt;&lt;li style=\&quot;width:450px;\&quot;&gt;)(.*)(?=&lt;\/li&gt;)/isU'<span style="color: #000000">;
        </span><span style="color: #008080">preg_match_all</span>(<span style="color: #800080">$preg</span>, <span style="color: #800080">$content</span>, <span style="color: #800080">$mb</span><span style="color: #000000">);
        </span><span style="color: #800080">$str</span> = <span style="color: #008080">strip_tags</span>(<span style="color: #800080">$mb</span>[0][0<span style="color: #000000">]);
        </span><span style="color: #008000">//</span><span style="color: #008000">$str = str_replace(' ', '', $str);</span>
        <span style="color: #800080">$address</span> = <span style="color: #800080">$str</span><span style="color: #000000">;
        </span><span style="color: #0000ff">if</span>(<span style="color: #800080">$address</span> == ''<span style="color: #000000">) {
            </span><span style="color: #800080">$address</span> = '未明'<span style="color: #000000">;
        }
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">$address</span><span style="color: #000000">;
}

</span><span style="color: #008000">//</span><span style="color: #008000">从百度获取ip所在地</span>
<span style="color: #0000ff">function</span> getIpfromBaidu(<span style="color: #800080">$ip</span><span style="color: #000000">) {
    </span><span style="color: #800080">$url</span> = 'http://www.baidu.com/s?wd='.<span style="color: #800080">$ip</span><span style="color: #000000">;
    </span><span style="color: #800080">$content</span> = <span style="color: #008080">file_get_contents</span>(<span style="color: #800080">$url</span><span style="color: #000000">);
    </span><span style="color: #800080">$preg</span> = '/(?&lt;=&lt;p class=\&quot;op_ip_detail\&quot;&gt;)(.*)(?=&lt;\/p&gt;)/isU'<span style="color: #000000">;
    </span><span style="color: #008080">preg_match_all</span>(<span style="color: #800080">$preg</span>, <span style="color: #800080">$content</span>, <span style="color: #800080">$mb</span><span style="color: #000000">);
    </span><span style="color: #800080">$str</span> = <span style="color: #008080">strip_tags</span>(<span style="color: #800080">$mb</span>[0][1<span style="color: #000000">]);
    </span><span style="color: #800080">$str</span> = <span style="color: #008080">str_replace</span>(' ', '', <span style="color: #800080">$str</span><span style="color: #000000">);
    </span><span style="color: #800080">$address</span> = <span style="color: #008080">substr</span>(<span style="color: #800080">$str</span>, 7<span style="color: #000000">);
    </span><span style="color: #0000ff">if</span>(<span style="color: #800080">$address</span> == ''<span style="color: #000000">) {
        </span><span style="color: #800080">$address</span> = '未明'<span style="color: #000000">;
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">$address</span><span style="color: #000000">;
}
</span>?&gt;</pre>
</div>

<p>然后就是后台管理员的操作怎么弄了，主要是添加投票项的功能，操作数据库上面已经实现。后面的基本上是页面怎么设置，关系到js。添加投票项的页面是动态的，如下：</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #0000ff">function</span><span style="color: #000000"> addVote()
{
    right.innerHTML</span>=&quot;&lt;h2&gt;添加投票项&lt;/h2&gt;&quot;<span style="color: #000000">;
    right.innerHTML</span>+=&quot;&lt;label&gt;投票项标签&lt;label&gt;&quot;<span style="color: #000000">;
    addInput(</span>&quot;right&quot;,&quot;cLabelName&quot;,&quot;地区名&quot;<span style="color: #000000">);
    right.innerHTML</span>+=&quot;&lt;br&gt;&lt;label&gt;投票项名称&lt;label&gt;&quot;<span style="color: #000000">;
    addInput(</span>&quot;right&quot;,&quot;cSelectName&quot;,&quot;学校名&quot;<span style="color: #000000">);
    right.innerHTML</span>+=&quot;&lt;br&gt;&quot;<span style="color: #000000">;
    </span><span style="color: #0000ff">var</span> args = '\'./add.php\',\'cSelectName\',\'cLabelName\''<span style="color: #000000">;
    </span><span style="color: #0000ff">var</span> str = '&lt;input type=button value=&quot;\u6dfb加&quot; onclick=&quot;goToPage('+args+');&quot;/&gt;'<span style="color: #000000">;
    right.innerHTML</span>+=<span style="color: #000000">str;
}

</span><span style="color: #008000">//</span><span style="color: #008000">添加文本框</span>
<span style="color: #0000ff">function</span><span style="color: #000000"> addInput(parent,id,pla)
{
    </span><span style="color: #008000">//</span><span style="color: #008000">创建input</span>
    <span style="color: #0000ff">var</span> input = document.createElement(&quot;input&quot;<span style="color: #000000">);
    input.type </span>= &quot;text&quot;<span style="color: #000000">;
    input.id </span>=<span style="color: #000000"> id;
    input.placeholder </span>=<span style="color: #000000"> pla;
    document.getElementById(parent).appendChild(input);
}</span></pre>
</div>



<p>效果：</p>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209212130103711.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209212130102108.png" width="240" height="172" /></a></p>

<p>清空投票项也差不多，下过如下：</p>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209212130105173.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209212130104650.png" width="228" height="240" /></a></p>



<p>添加投票项是通过url传递变量到add.php页面的。</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>&lt;?<span style="color: #000000">php
    </span><span style="color: #0000ff">require_once</span> '../api/func.php'<span style="color: #000000">;

    </span><span style="color: #0000ff">if</span> (!<span style="color: #000000">isLoginNow())
    {
        goToPgae(</span>&quot;./index.php&quot;<span style="color: #000000">);
    }

    </span><span style="color: #800080">$name</span> = <span style="color: #800080">$_GET</span>[&quot;cSelectName&quot;<span style="color: #000000">];
    </span><span style="color: #800080">$label</span> = <span style="color: #800080">$_GET</span>[&quot;cLabelName&quot;<span style="color: #000000">];
    </span><span style="color: #008000">//</span><span style="color: #008000">echo $name.&quot;&lt;br&gt;&quot;.$label;</span>
    <span style="color: #0000ff">require_once</span> '../api/OperatorVotingDB.php'<span style="color: #000000">;
    </span><span style="color: #800080">$ovdb</span>=<span style="color: #0000ff">new</span><span style="color: #000000"> OperatorVotingDB();
    </span><span style="color: #800080">$ovdb</span>-&gt;addSelectName(<span style="color: #800080">$name</span>,<span style="color: #800080">$label</span><span style="color: #000000">);
    </span><span style="color: #0000ff">require</span> './header.htm'<span style="color: #000000">;
    goToPgae(</span>&quot;./admin.php?page=add&amp;auto=&quot;.&quot;<span style="color: #800080">$label</span>&quot;.&quot;&amp;id=cLabelName&amp;foc=cSelectName&amp;msg=添加成功&quot;<span style="color: #000000">);
</span>?&gt;</pre>
</div>

<p>下面是两个跳转页面的函数，js的（上面func.php中的跳转页面函数也是通过js实现的）。</p>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre><span style="color: #008000">//</span><span style="color: #008000">js</span>
<span style="color: #0000ff">function</span> goToPage(url,arg1,<span style="color: #000000">arg2)
{
    </span><span style="color: #0000ff">var</span> a = document.getElementById(arg1).<span style="color: #000000">value;
    </span><span style="color: #0000ff">var</span> b = document.getElementById(arg2).<span style="color: #000000">value;
    url </span>+= '?'+arg1+'='+<span style="color: #000000">a;
    url </span>+= '&amp;'+arg2+'='+<span style="color: #000000">b;
    window</span>.location.href=<span style="color: #000000">url;
}

</span><span style="color: #0000ff">function</span><span style="color: #000000"> goToPage1(url)
{
    window</span>.location.href=<span style="color: #000000">url;
}</span></pre>
</div>

<p>还有修改删除功能没有实现。我应该不会去实现那个了吧，js的话和添加功能差不多。</p>

<p>登录模块的话网上很多，模仿的。就是提交表单，查找数据库，返回结果。成功则设置cookie，后台的每个页面都添加了检测cookie的功能的。</p>

<h2>前端美化</h2>

<p>index.php页面首先操作数据库获取投票项和票数，然后显示出来（通过css+div美化一下框架界面什么的），最后点击投票按钮就提交表单，跳转到vote.php页面。</p>

<p>css的话我都是抄网上的。我弄的效果如下：</p>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209212130111859.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209212130113287.png" width="240" height="160" /></a></p>

<p>这个东西算是个很小的信息管理系统吧，我已经把这个东西的源代码放到github（<a title="https://github.com/hanxi/voting" href="https://github.com/hanxi/voting">https://github.com/hanxi/voting</a>）上去了，可以随意下载修改。如果有想看看效果的话可以移步到<a title="http://www.jianhuanwang.com/huodong/Voting/" href="http://www.jianhuanwang.com/huodong/Voting/">http://www.jianhuanwang.com/huodong/Voting/</a></p>

<p>欢迎读者回复交流，这方面不是我的强项，有很多不足之处还望指教。</p>]]></description></item><item><title>【学习笔记】《Linux命令行和shell脚本编程宝典》——Richard Blum</title><link>http://www.cnblogs.com/hanxi/archive/2012/09/17/2688567.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 17 Sep 2012 05:16:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/09/17/2688567.html</guid><description><![CDATA[<h2>第一个脚本文件</h2>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre>#!/bin/<span style="color: #000000">bash
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">This is my first bash code!</span><span style="color: #800000">&quot;</span><span style="color: #000000">
exit </span><span style="color: #800080">0</span></pre>
</div>

<h2>重定向符号和数学计算</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#!/bin/<span style="color: #000000">bash
</span><span style="color: #0000ff">echo</span> -n <span style="color: #800000">&quot;</span><span style="color: #800000">The time and date are: </span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">date</span><span style="color: #000000">

value1</span>=<span style="color: #800080">100</span><span style="color: #000000">  #等号前后不允许出现空格
value2</span>=<span style="color: #000000">$value1
</span><span style="color: #0000ff">echo</span> -n <span style="color: #800000">&quot;</span><span style="color: #800000">value1=</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">echo</span><span style="color: #000000"> $value1
</span><span style="color: #0000ff">echo</span> -n <span style="color: #800000">&quot;</span><span style="color: #800000">value2=</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">echo</span><span style="color: #000000"> $value2

</span><span style="color: #0000ff">ls</span> -l | <span style="color: #0000ff">sort</span> &gt; out.txt   #管道符号(|)和重定向输出符号&gt;
<span style="color: #0000ff">ls</span> -l &gt;&gt; out.txt   #重定向追加输出符号&gt;&gt;

<span style="color: #0000ff">echo</span> -n  <span style="color: #800000">&quot;</span><span style="color: #800000">wc&lt;out.txt:</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">wc</span> &lt; out.txt  #重定向输入符号&lt;

<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">sort&lt;&lt;EOF ... EOF</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">sort</span> &lt;&lt; EOF  #内置输入重定向&lt;&lt;<span style="color: #000000">
`</span><span style="color: #0000ff">date</span><span style="color: #000000">`
EOF

#数学计算
</span><span style="color: #0000ff">echo</span> -n <span style="color: #800000">&quot;</span><span style="color: #800000">expr进行计算：1+5=</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">expr</span> <span style="color: #800080">1</span>+<span style="color: #800080">5</span>

<span style="color: #0000ff">echo</span> -n <span style="color: #800000">&quot;</span><span style="color: #800000">使用方括号进行计算：1+5=</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">echo</span> $[<span style="color: #800080">1</span>+<span style="color: #800080">5</span><span style="color: #000000">]

</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">使用bc计算器进行浮点运算</span><span style="color: #800000">&quot;</span><span style="color: #000000">
var1</span>=<span style="color: #800080">100</span><span style="color: #000000">
var2</span>=<span style="color: #800080">200</span><span style="color: #000000">
var3</span>=`<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">scale=4;$var1/$var2</span><span style="color: #800000">&quot;</span> |<span style="color: #000000"> bc`
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">$var1 / $var2 = $var3</span><span style="color: #800000">&quot;</span><span style="color: #000000">

var4</span>=<span style="color: #800080">71</span><span style="color: #000000">
var5</span>=`bc&lt;&lt;<span style="color: #000000">EOF
scale</span>=<span style="color: #800080">4</span><span style="color: #000000">
a1</span>=($var1*<span style="color: #000000">$var2)
b1</span>=($var3*<span style="color: #000000">$var4)
a1</span>+<span style="color: #000000">b1
EOF`
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">var5=$var5</span><span style="color: #800000">&quot;</span><span style="color: #000000">



exit </span><span style="color: #800080">0</span></pre>
</div>

<h2>使用test命令</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#!/bin/<span style="color: #000000">bash
#使用test命令
var1</span>=<span style="color: #800080">10</span><span style="color: #000000">
var2</span>=<span style="color: #800080">100</span>
<span style="color: #0000ff">if</span> [ $var1 -<span style="color: #000000">gt $var2 ]
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">var1 grate var2</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">else</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">var2 grate var1</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span><span style="color: #000000">
#只能比较整数

test_user</span>=<span style="color: #000000">hanxi
</span><span style="color: #0000ff">if</span> [ $USER =<span style="color: #000000"> $test_user ]
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Welcome $test_user</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span><span style="color: #000000">

str1</span>=<span style="color: #000000">Hanxi
str2</span>=<span style="color: #000000">hanxi
</span><span style="color: #0000ff">if</span> [ $str1 \&gt;<span style="color: #000000"> $str2 ]
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">$str1 &gt; $str2</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">else</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">$str1 &lt; $str2</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span>

<span style="color: #0000ff">if</span> [ -<span style="color: #000000">n $str1 ]
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">The string '$str1' is not empty</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">else</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">the string '$str1' is empty</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span><span style="color: #000000">

#检查文件目录
</span><span style="color: #0000ff">if</span> [ -<span style="color: #000000">d $HOME ]
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">your Home dir exists</span><span style="color: #800000">&quot;</span><span style="color: #000000">
    cd $HOME
    </span><span style="color: #0000ff">ls</span> -<span style="color: #000000">a
</span><span style="color: #0000ff">else</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">there's a problem with your HOME dir</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span><span style="color: #000000">

pwfile</span>=/etc/<span style="color: #000000">shadow
</span><span style="color: #0000ff">if</span> [ -<span style="color: #000000">f $pwfile ]
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">if</span> [ -<span style="color: #000000">r $pwfile ]
    </span><span style="color: #0000ff">then</span>
        <span style="color: #0000ff">tail</span><span style="color: #000000"> $pwfile
    </span><span style="color: #0000ff">else</span>
        <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Sorry, I'm unable to reas the $pwfile file </span><span style="color: #800000">&quot;</span>
    <span style="color: #0000ff">fi</span>
<span style="color: #0000ff">else</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Sorry, the file $pwfile doesn't exist</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span>

<span style="color: #0000ff">if</span> [[ $USER == h*<span style="color: #000000"> ]]
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Hello $USER</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">else</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Sorry, I don't know you</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span></pre>
</div>

<h2>循环语句</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#!/bin/<span style="color: #000000">bash


</span><span style="color: #0000ff">for</span> <span style="color: #0000ff">file</span> <span style="color: #0000ff">in</span> /home/hanxi<span style="color: #008000">/*</span><span style="color: #008000">
do
    if [ -d &quot;$file&quot; ]
    then
        echo &quot;$file is a directory&quot;
    elif [ -f &quot;$file&quot; ]
    then
        echo &quot;$file is a file&quot;
    fi
done

var1=10
while [ $var1 -gt 0 ]
do
    echo $var1
    var1=$[ $var1 - 1 ]
done

var1=100
until [ $var1 -eq 0 ]
do
    echo $var1
    var1=$[ $var1 - 25 ]
done

#文件数据的循环
IFSOLD=$IFS
IFS=$'\n'
for entry in `cat /etc/passwd`
do
    echo &quot;Values in $entry -&quot;
    IFS=:
    for value in $entry
    do
        echo &quot; $value&quot;
    done
done | more

for file in /home/hanxi/*
do
    if [ -d &quot;$file&quot; ]
    then
        echo &quot;$file is directory&quot;
    elif
        echo &quot;$file is a file&quot;
    fi
done &gt; output.txt</span></pre>
</div>

<h2>读取参数</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#!/bin/<span style="color: #000000">bash

name</span>=`<span style="color: #0000ff">basename</span> $<span style="color: #800080">0</span><span style="color: #000000">`
</span><span style="color: #0000ff">echo</span><span style="color: #000000"> the commane entered is : $name

c_args</span>=<span style="color: #000000">$#
</span><span style="color: #0000ff">echo</span><span style="color: #000000"> count args:$c_args

#取最后一个参数
</span><span style="color: #0000ff">echo</span> the <span style="color: #0000ff">last</span> parameter is ${!<span style="color: #000000">#}

</span><span style="color: #0000ff">echo</span> all parameter: $*
<span style="color: #0000ff">echo</span><span style="color: #000000"> all parameter: $@
count</span>=<span style="color: #800080">1</span>
<span style="color: #0000ff">for</span> param <span style="color: #0000ff">in</span> <span style="color: #800000">&quot;</span><span style="color: #800000">$@</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">do</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">\$@ parameter #$count = $param</span><span style="color: #800000">&quot;</span><span style="color: #000000">
    count</span>=$[ $count + <span style="color: #800080">1</span><span style="color: #000000"> ]
</span><span style="color: #0000ff">done</span><span style="color: #000000">

#getopts
</span><span style="color: #0000ff">while</span><span style="color: #000000"> getopts :ab:c opt
</span><span style="color: #0000ff">do</span>
    <span style="color: #0000ff">case</span> <span style="color: #800000">&quot;</span><span style="color: #800000">$opt</span><span style="color: #800000">&quot;</span> <span style="color: #0000ff">in</span><span style="color: #000000">
    a) </span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Found the -a option</span><span style="color: #800000">&quot;</span><span style="color: #000000">;;
    b) </span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Found the -b option, with value $OPTARG</span><span style="color: #800000">&quot;</span><span style="color: #000000">;;
    c) </span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Found the -c option</span><span style="color: #800000">&quot;</span><span style="color: #000000">;;
    </span>*) <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Unknown option : $opt</span><span style="color: #800000">&quot;</span><span style="color: #000000">;;
    </span><span style="color: #0000ff">esac</span>
<span style="color: #0000ff">done</span>
<span style="color: #0000ff">shift</span> $[ $OPTIND - <span style="color: #800080">1</span><span style="color: #000000"> ]

count</span>=<span style="color: #800080">1</span>
<span style="color: #0000ff">for</span> param <span style="color: #0000ff">in</span> <span style="color: #800000">&quot;</span><span style="color: #800000">$@</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">do</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Parameter $count: $param</span><span style="color: #800000">&quot;</span><span style="color: #000000">
    count</span>=$[ $count + <span style="color: #800080">1</span><span style="color: #000000"> ]
</span><span style="color: #0000ff">done</span><span style="color: #000000">

read </span>-p <span style="color: #800000">&quot;</span><span style="color: #800000">Please enter your age:</span><span style="color: #800000">&quot;</span><span style="color: #000000"> age
</span><span style="color: #0000ff">echo</span><span style="color: #000000"> age:$age

</span><span style="color: #0000ff">if</span> read -t <span style="color: #800080">5</span> -p <span style="color: #800000">&quot;</span><span style="color: #800000">Please enter your name: </span><span style="color: #800000">&quot;</span><span style="color: #000000"> name
</span><span style="color: #0000ff">then</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Hellp $name,welcome to my script</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">else</span>
    <span style="color: #0000ff">echo</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">sorry ,too slow!</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">fi</span><span style="color: #000000">

read </span>-n1 -p <span style="color: #800000">&quot;</span><span style="color: #800000">Do you want to continue [Y/N]?</span><span style="color: #800000">&quot;</span><span style="color: #000000"> answer
</span><span style="color: #0000ff">case</span> $answer <span style="color: #0000ff">in</span><span style="color: #000000">
Y </span>| y) <span style="color: #0000ff">echo</span>
       <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000"> fine, continue on...</span><span style="color: #800000">&quot;</span><span style="color: #000000">;;
N </span>| n) <span style="color: #0000ff">echo</span>
       <span style="color: #0000ff">echo</span><span style="color: #000000"> OK,Good bye
       exit;;
</span><span style="color: #0000ff">esac</span>

<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">This is the end of the script</span><span style="color: #800000">&quot;</span><span style="color: #000000">

read </span>-s -p <span style="color: #800000">&quot;</span><span style="color: #800000">Enter your password: </span><span style="color: #800000">&quot;</span><span style="color: #000000"> pass
</span><span style="color: #0000ff">echo</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Is your password really $pass?</span><span style="color: #800000">&quot;</span><span style="color: #000000">

#读取文件
count</span>=<span style="color: #800080">1</span>
<span style="color: #0000ff">cat</span> <span style="color: #0000ff">for</span>.txt | <span style="color: #0000ff">while</span><span style="color: #000000"> read line
</span><span style="color: #0000ff">do</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Line $count: $line</span><span style="color: #800000">&quot;</span><span style="color: #000000">
    count</span>=$[ $count+<span style="color: #800080">1</span><span style="color: #000000"> ]
</span><span style="color: #0000ff">done</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Finished processing the file</span><span style="color: #800000">&quot;</span></pre>
</div>

<h2>重定向文件描述符</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#!/bin/<span style="color: #000000">bash
#永久重定向
exec </span><span style="color: #800080">9</span>&gt;&amp;<span style="color: #800080">2</span><span style="color: #000000">
exec </span><span style="color: #800080">2</span>&gt;<span style="color: #000000">testerror
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">this will in testerror</span><span style="color: #800000">&quot;</span>&gt;&amp;<span style="color: #800080">2</span><span style="color: #000000">
exec </span><span style="color: #800080">2</span>&lt;&amp;<span style="color: #800080">9</span><span style="color: #000000">

exec </span><span style="color: #800080">9</span>&lt;&amp;<span style="color: #800080">0</span><span style="color: #000000">
exec </span><span style="color: #800080">0</span>&lt;<span style="color: #000000">testin
count</span>=<span style="color: #800080">1</span>
<span style="color: #0000ff">while</span><span style="color: #000000"> read line
</span><span style="color: #0000ff">do</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Line #$count:$line</span><span style="color: #800000">&quot;</span><span style="color: #000000">
    count</span>=$[ $count + <span style="color: #800080">1</span><span style="color: #000000"> ]
</span><span style="color: #0000ff">done</span><span style="color: #000000">
exec </span><span style="color: #800080">0</span>&lt;&amp;<span style="color: #800080">9</span><span style="color: #000000">

#重定向文件描述符
exec </span><span style="color: #800080">3</span>&gt;&amp;<span style="color: #800080">1</span><span style="color: #000000">
exec </span><span style="color: #800080">1</span>&gt;<span style="color: #000000">testout

</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">this should store in the output file</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">along with this line.</span><span style="color: #800000">&quot;</span><span style="color: #000000">

exec </span><span style="color: #800080">1</span>&gt;&amp;<span style="color: #800080">3</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Now things should be back to nomarl</span><span style="color: #800000">&quot;</span><span style="color: #000000">

exec </span><span style="color: #800080">4</span>&lt;&amp;<span style="color: #800080">0</span><span style="color: #000000">
exec </span><span style="color: #800080">0</span>&lt;<span style="color: #000000">testin
count</span>=<span style="color: #800080">1</span>
<span style="color: #0000ff">while</span><span style="color: #000000"> read line
</span><span style="color: #0000ff">do</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Line #$count:$line</span><span style="color: #800000">&quot;</span><span style="color: #000000">
    count</span>=$[ $count + <span style="color: #800080">1</span><span style="color: #000000"> ]
</span><span style="color: #0000ff">done</span><span style="color: #000000">
exec </span><span style="color: #800080">0</span>&lt;&amp;<span style="color: #800080">4</span><span style="color: #000000">
read </span>-p <span style="color: #800000">&quot;</span><span style="color: #800000">Are you done now?</span><span style="color: #800000">&quot;</span><span style="color: #000000"> answer
</span><span style="color: #0000ff">case</span> $answer <span style="color: #0000ff">in</span><span style="color: #000000">
Y</span>|y) <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Goodbye</span><span style="color: #800000">&quot;</span><span style="color: #000000">;;
N</span>|n) <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">continue...</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
</span><span style="color: #0000ff">esac</span><span style="color: #000000">

#创建读写文件描述符
exec </span><span style="color: #800080">8</span>&lt;&gt;<span style="color: #000000"> testfile
read line </span>&lt;&amp;<span style="color: #800080">8</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Read:$line</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">This is a test line</span><span style="color: #800000">&quot;</span> &gt;&amp;<span style="color: #800080">8</span><span style="color: #000000">

#关闭文件描述符
exec </span><span style="color: #800080">8</span>&gt;&amp;-<span style="color: #000000">
#列出文件描述服
#`</span>/usr/sbin/lsof -a -p $$`|<span style="color: #0000ff">more</span><span style="color: #000000">

#禁止命令输出
#</span><span style="color: #800080">2</span> &gt; /dev/<span style="color: #0000ff">null</span><span style="color: #000000">

#创建本地临时文件
</span><span style="color: #0000ff">tempfile</span>=`<span style="color: #0000ff">mktemp</span><span style="color: #000000"> test.XXXXXX`
exec </span><span style="color: #800080">4</span>&gt;$<span style="color: #0000ff">tempfile</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">This is the first line</span><span style="color: #800000">&quot;</span>&gt;&amp;<span style="color: #800080">3</span><span style="color: #000000">
exec </span><span style="color: #800080">4</span>&gt;&amp;-<span style="color: #000000">


#在</span>/<span style="color: #000000">temp中创建临时文件
tmpfile</span>=`<span style="color: #0000ff">mktemp</span> -<span style="color: #000000">t tmp.XXXXXX`
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">The temp file is located at:$tempfile</span><span style="color: #800000">&quot;</span>
<span style="color: #0000ff">cat</span> $<span style="color: #0000ff">tempfile</span>
<span style="color: #0000ff">rm</span> -f $<span style="color: #0000ff">tempfile</span><span style="color: #000000">
#创建临时文件夹
tmpdir</span>=`<span style="color: #0000ff">mktemp</span> -d <span style="color: #0000ff">dir</span><span style="color: #000000">.XXXXXX`
cd $tmpdir
tempfile1</span>=`<span style="color: #0000ff">mktemp</span><span style="color: #000000"> temp.XXXXXX`
</span><span style="color: #0000ff">ls</span> -<span style="color: #000000">l
cd ..

#记录消息
a</span>=`<span style="color: #0000ff">date</span> | <span style="color: #0000ff">tee</span><span style="color: #000000"> testfile;\
</span><span style="color: #0000ff">cat</span><span style="color: #000000"> testfile;\
</span><span style="color: #0000ff">date</span> | <span style="color: #0000ff">tee</span> -<span style="color: #000000">a testfile;\
</span><span style="color: #0000ff">cat</span> testfile`</pre>
</div>

<h2>信号处理</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#!/bin/<span style="color: #000000">bash
#信号处理

trap </span><span style="color: #800000">&quot;</span><span style="color: #800000">echo 'get a sign'</span><span style="color: #800000">&quot;</span><span style="color: #000000"> SIGINT SIGTERM
trap </span><span style="color: #800000">&quot;</span><span style="color: #800000">echo byebye</span><span style="color: #800000">&quot;</span><span style="color: #000000"> EXIT
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">This is a test program</span><span style="color: #800000">&quot;</span><span style="color: #000000">
count</span>=<span style="color: #800080">1</span>
<span style="color: #0000ff">while</span> [ $count -le <span style="color: #800080">10</span><span style="color: #000000"> ]
</span><span style="color: #0000ff">do</span>
    <span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">Loop #$count</span><span style="color: #800000">&quot;</span>
    <span style="color: #0000ff">sleep</span> <span style="color: #800080">10</span><span style="color: #000000">
    count</span>=$[ $count+<span style="color: #800080">1</span><span style="color: #000000"> ]
</span><span style="color: #0000ff">done</span>
<span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">This is the end of the test program</span><span style="color: #800000">&quot;</span><span style="color: #000000">


trap </span>-<span style="color: #000000"> EXIT#移除捕获

#后台牧师运行
#.</span>/test6.<span style="color: #0000ff">sh</span> &amp;<span style="color: #000000">
#不使用终端的情况下运行脚本
#nohup .</span>/test6.<span style="color: #0000ff">sh</span> &amp;<span style="color: #000000">
#查看作业
#jobs
#重新启动作业
#bg </span><span style="color: #800080">2</span>(作业序号)<span style="color: #008000">//</span><span style="color: #008000">后台</span>
#fg <span style="color: #800080">2</span><span style="color: #008000">//</span><span style="color: #008000">前台</span>
<span style="color: #000000">
#优先级
#</span><span style="color: #0000ff">nice</span> -n <span style="color: #800080">10</span> ./test6.<span style="color: #0000ff">sh</span><span style="color: #000000">
#</span><span style="color: #0000ff">renice</span> <span style="color: #800080">10</span> -p <span style="color: #800080">25904</span><span style="color: #000000">(进程号)

#预计时间运行at命令
#at </span>-f test6.<span style="color: #0000ff">sh</span> <span style="color: #800080">20</span>:<span style="color: #800080">00</span><span style="color: #000000">
#batch命令，系统平均负载低于0.8时运行，可以设定时间，比at命令更好
#corn表格可以设定循环运行,格式：
#min hour dayofmonth month dayofweek command
#每个月第一天运行：
#</span><span style="color: #800080">12</span> <span style="color: #800080">16</span> * * <span style="color: #800080">1</span><span style="color: #000000"> command
#每个月最后一天运行：
#</span><span style="color: #800080">12</span> <span style="color: #800080">16</span> * * * <span style="color: #0000ff">if</span> [ `<span style="color: #0000ff">date</span> +%d =d tommorrow` = <span style="color: #800080">01</span> ] ; <span style="color: #0000ff">then</span> ; command</pre>
</div>

<h2>函数的使用</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#!/bin/<span style="color: #000000">bash
#函数

#使用返回值
</span><span style="color: #0000ff">function</span><span style="color: #000000"> func1
{
    read </span>-p <span style="color: #800000">&quot;</span><span style="color: #800000">Enter a value: </span><span style="color: #800000">&quot;</span><span style="color: #000000"> value
    </span><span style="color: #0000ff">echo</span> $[ $value * <span style="color: #800080">2</span><span style="color: #000000"> ]
}

result</span>=<span style="color: #000000">`func1`
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">the new value is $result</span><span style="color: #800000">&quot;</span><span style="color: #000000">

#传递参数
</span><span style="color: #0000ff">function</span><span style="color: #000000"> func2
{
    </span><span style="color: #0000ff">echo</span> $[ $<span style="color: #800080">1</span>+$<span style="color: #800080">2</span><span style="color: #000000"> ]
}
result</span>=`func2 <span style="color: #800080">2</span> <span style="color: #800080">2</span><span style="color: #000000">`
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">the new result is $result</span><span style="color: #800000">&quot;</span><span style="color: #000000">

#局部变量, 递归
</span><span style="color: #0000ff">function</span><span style="color: #000000"> func3
{
    </span><span style="color: #0000ff">if</span> [ $<span style="color: #800080">1</span> -eq <span style="color: #800080">1</span><span style="color: #000000"> ]
    </span><span style="color: #0000ff">then</span>
        <span style="color: #0000ff">echo</span> <span style="color: #800080">1</span>
    <span style="color: #0000ff">else</span><span style="color: #000000">
        local temp</span>=$[ $<span style="color: #800080">1</span>-<span style="color: #800080">1</span><span style="color: #000000"> ]
        local result</span>=<span style="color: #000000">`func3 $temp`
        </span><span style="color: #0000ff">echo</span> $[ $result*$<span style="color: #800080">1</span><span style="color: #000000"> ]
    </span><span style="color: #0000ff">fi</span><span style="color: #000000">
}
read </span>-p <span style="color: #800000">&quot;</span><span style="color: #800000">Enter value:</span><span style="color: #800000">&quot;</span><span style="color: #000000"> value
result</span>=<span style="color: #000000">`func3 $value`
</span><span style="color: #0000ff">echo</span> <span style="color: #800000">&quot;</span><span style="color: #800000">the factorial of $value is: $result</span><span style="color: #800000">&quot;</span><span style="color: #000000">

#调用当前目录下到函数库
#. .</span>/myfuncs</pre>
</div>]]></description></item><item><title>回调函数的实现（指向类成员函数的指针）</title><link>http://www.cnblogs.com/hanxi/archive/2012/09/12/2682051.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 12 Sep 2012 08:56:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/09/12/2682051.html</guid><description><![CDATA[<p>参考《C和C++代码精粹》——Chunk Allison</p>  <p>&#160;</p>  <h2>菜单实现</h2>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre>#include &lt;iostream&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

</span><span style="color: #0000ff">class</span><span style="color: #000000"> Object
{
</span><span style="color: #0000ff">public</span><span style="color: #000000">:
    </span><span style="color: #0000ff">void</span> retrieve() {cout &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">Object::retrieve\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">;}
    </span><span style="color: #0000ff">void</span> insert() {cout &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">Object::insert\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">;}
    </span><span style="color: #0000ff">void</span> update() {cout &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">Object::update\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">;}
    </span><span style="color: #0000ff">void</span> process(<span style="color: #0000ff">int</span><span style="color: #000000"> choice);
    
</span><span style="color: #0000ff">private</span><span style="color: #000000">:
</span>    <span style="color: #0000ff">static</span> <span style="color: #0000ff">void</span> (Object::*farray[<span style="color: #800080">3</span><span style="color: #000000">])();
};

</span><span style="color: #0000ff">void</span> (Object::*Object::farray[<span style="color: #800080">3</span>])()=<span style="color: #000000">
{
    </span>&amp;<span style="color: #000000">Object::retrieve,
    </span>&amp;<span style="color: #000000">Object::insert,
    </span>&amp;<span style="color: #000000">Object::update
};

</span><span style="color: #0000ff">void</span> Object::process(<span style="color: #0000ff">int</span><span style="color: #000000"> choice)
{
    </span><span style="color: #0000ff">if</span> (<span style="color: #800080">0</span> &lt;= choice &amp;&amp; choice &lt;= <span style="color: #800080">2</span><span style="color: #000000">)
    {
        (</span><span style="color: #0000ff">this</span>-&gt;*<span style="color: #000000">farray[choice])();
    }
} 

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">int</span> show_menu(<span style="color: #0000ff">void</span><span style="color: #000000">);
    Object o;
    </span><span style="color: #0000ff">for</span><span style="color: #000000"> (;;)
    {
        </span><span style="color: #0000ff">int</span> choice =<span style="color: #000000"> show_menu();
        cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">choice=</span><span style="color: #800000">&quot;</span> &lt;&lt; choice &lt;&lt;<span style="color: #000000"> endl;
        </span><span style="color: #0000ff">if</span> (<span style="color: #800080">1</span>&lt;=choice &amp;&amp; choice &lt;= <span style="color: #800080">3</span><span style="color: #000000">)
        {
            o.process(choice</span>-<span style="color: #800080">1</span><span style="color: #000000">);
        }
        </span><span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span> (choice == <span style="color: #800080">4</span><span style="color: #000000">)
        {
            </span><span style="color: #0000ff">break</span><span style="color: #000000">;
        }
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}

</span><span style="color: #0000ff">int</span> show_menu(<span style="color: #0000ff">void</span><span style="color: #000000">)
{
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">==================MENU===================</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">1. retrieve</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">2. insert</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">3. update</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">4. exit</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">please input witch number you choose:</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    </span><span style="color: #0000ff">char</span><span style="color: #000000"> input;
    cin</span>&gt;&gt;<span style="color: #000000">input;
    </span><span style="color: #0000ff">return</span> input-<span style="color: #800000">'</span><span style="color: #800000">0</span><span style="color: #800000">'</span><span style="color: #000000">;
}</span></pre>
</div>

<h2>运行效果</h2>

<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209121655501984.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209121655523054.png" width="214" height="240" /></a></p>

<p>&#160;</p>

<h2>使用typedef使指向成员函数的指针更清晰</h2>

<div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">
  <pre>#include &lt;iostream&gt;
<span style="color: #0000ff">using</span> <span style="color: #0000ff">namespace</span><span style="color: #000000"> std;

</span><span style="color: #0000ff">class</span><span style="color: #000000"> Object
{
</span><span style="color: #0000ff">public</span><span style="color: #000000">:
    </span><span style="color: #0000ff">void</span> retrieve() {cout &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">Object::retrieve\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">;}
    </span><span style="color: #0000ff">void</span> insert() {cout &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">Object::insert\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">;}
    </span><span style="color: #0000ff">void</span> update() {cout &lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">Object::update\n</span><span style="color: #800000">&quot;</span><span style="color: #000000">;}
    </span><span style="color: #0000ff">void</span> process(<span style="color: #0000ff">int</span><span style="color: #000000"> choice);
    
</span><span style="color: #0000ff">private</span><span style="color: #000000">:
    typedef </span><span style="color: #0000ff">void</span> (Object::*<span style="color: #000000">Omf)();
    </span><span style="color: #0000ff">static</span> Omf farray[<span style="color: #800080">3</span><span style="color: #000000">];
</span><span style="color: #008000">//</span><span style="color: #008000">    static void (Object::*farray[3])();</span>
<span style="color: #000000">};

Object::Omf Object::farray[</span><span style="color: #800080">3</span>] = 
<span style="color: #008000">//</span><span style="color: #008000">void (Object::*Object::farray[3])()=</span>
<span style="color: #000000">{
    </span>&amp;<span style="color: #000000">Object::retrieve,
    </span>&amp;<span style="color: #000000">Object::insert,
    </span>&amp;<span style="color: #000000">Object::update
};

</span><span style="color: #0000ff">void</span> Object::process(<span style="color: #0000ff">int</span><span style="color: #000000"> choice)
{
    </span><span style="color: #0000ff">if</span> (<span style="color: #800080">0</span> &lt;= choice &amp;&amp; choice &lt;= <span style="color: #800080">2</span><span style="color: #000000">)
    {
        (</span><span style="color: #0000ff">this</span>-&gt;*<span style="color: #000000">farray[choice])();
    }
} 

</span><span style="color: #0000ff">int</span><span style="color: #000000"> main()
{
    </span><span style="color: #0000ff">int</span> show_menu(<span style="color: #0000ff">void</span><span style="color: #000000">);
    Object o;
    </span><span style="color: #0000ff">for</span><span style="color: #000000"> (;;)
    {
        </span><span style="color: #0000ff">int</span> choice =<span style="color: #000000"> show_menu();
        cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">choice=</span><span style="color: #800000">&quot;</span> &lt;&lt; choice &lt;&lt;<span style="color: #000000"> endl;
        </span><span style="color: #0000ff">if</span> (<span style="color: #800080">1</span>&lt;=choice &amp;&amp; choice &lt;= <span style="color: #800080">3</span><span style="color: #000000">)
        {
            o.process(choice</span>-<span style="color: #800080">1</span><span style="color: #000000">);
        }
        </span><span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span> (choice == <span style="color: #800080">4</span><span style="color: #000000">)
        {
            </span><span style="color: #0000ff">break</span><span style="color: #000000">;
        }
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #800080">0</span><span style="color: #000000">;
}

</span><span style="color: #0000ff">int</span> show_menu(<span style="color: #0000ff">void</span><span style="color: #000000">)
{
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">==================MENU===================</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">1. retrieve</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">2. insert</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">3. update</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">4. exit</span><span style="color: #800000">&quot;</span> &lt;&lt;<span style="color: #000000"> endl;
    cout </span>&lt;&lt; <span style="color: #800000">&quot;</span><span style="color: #800000">please input witch number you choose:</span><span style="color: #800000">&quot;</span><span style="color: #000000">;
    </span><span style="color: #0000ff">char</span><span style="color: #000000"> input;
    cin</span>&gt;&gt;<span style="color: #000000">input;
    </span><span style="color: #0000ff">return</span> input-<span style="color: #800000">'</span><span style="color: #800000">0</span><span style="color: #800000">'</span><span style="color: #000000">;
}</span></pre>
</div>]]></description></item><item><title>mysql数据库备份与还原</title><link>http://www.cnblogs.com/hanxi/archive/2012/09/06/2674128.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 06 Sep 2012 12:23:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/09/06/2674128.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #000000;">直接将MySQL数据库压缩备份，会清空之前的数据
mysqldump </span><span style="color: #808080;">-</span>&ndash;<span style="color: #0000ff;">add</span><span style="color: #808080;">-</span><span style="color: #0000ff;">drop</span><span style="color: #808080;">-</span><span style="color: #0000ff;">table</span> <span style="color: #808080;">-</span>hhostname <span style="color: #808080;">-</span>uusername <span style="color: #808080;">-</span>ppassword databasename <span style="color: #808080;">|</span> gzip <span style="color: #808080;">&gt;</span><span style="color: #000000;"> backupfile.sql.gz
mysqldump </span><span style="color: #008080;">--</span><span style="color: #008080;">add-drop-table --single-transaction -hlocalhost -udiscuz -pdiscuzexp discuz | gzip &gt; backupfile.sql.gz</span>
<span style="color: #000000;">还原压缩的MySQL数据库
gunzip </span><span style="color: #808080;">&lt;</span> backupfile.sql.gz <span style="color: #808080;">|</span> mysql <span style="color: #808080;">-</span>uusername <span style="color: #808080;">-</span><span style="color: #000000;">ppassword databasename
gunzip </span><span style="color: #808080;">&lt;</span> backupfile.sql.gz <span style="color: #808080;">|</span> mysql <span style="color: #808080;">-</span>udiscuz <span style="color: #808080;">-</span><span style="color: #000000;">pdiscuzexp discuz


备份MySQL数据库为带删除表的格式，能够让该备份覆盖已有数据库而不需要手动删除原有数据库。
mysqldump </span><span style="color: #808080;">-</span>&ndash;<span style="color: #0000ff;">add</span><span style="color: #808080;">-</span><span style="color: #0000ff;">drop</span><span style="color: #808080;">-</span><span style="color: #0000ff;">table</span> <span style="color: #808080;">-</span>uusername <span style="color: #808080;">-</span>ppassword databasename <span style="color: #808080;">&gt;</span><span style="color: #000000;"> backupfile.sql
mysqldump </span><span style="color: #008080;">--</span><span style="color: #008080;">add-drop-table --single-transaction -hlocalhost -udiscuz -pdiscuzexp discuz &gt; backupfile.sql</span>
<span style="color: #000000;">
还原MySQL数据库的命令
mysql </span><span style="color: #808080;">-</span>hhostname <span style="color: #808080;">-</span>uusername <span style="color: #808080;">-</span>ppassword databasename <span style="color: #808080;">&lt;</span><span style="color: #000000;"> backupfile.sql
mysql </span><span style="color: #808080;">-</span>hlocalhost <span style="color: #808080;">-</span>udiscuz <span style="color: #808080;">-</span>pdiscuzexp discuz <span style="color: #808080;">&lt;</span> backupfile.sql</pre>
</div>]]></description></item><item><title>学习FLTK图形库，拿扫雷游戏做例子</title><link>http://www.cnblogs.com/hanxi/archive/2012/09/02/2667991.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 02 Sep 2012 14:20:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/09/02/2667991.html</guid><description><![CDATA[<h1>[0]<em>起因</em></h1>
<p><em>花了一个星期左右的时间学习了下FLTK图形库，拿扫雷游戏作为学习FLTK图形库的原因有二：</em></p>
<ol>
<li><em>扫雷游戏算法很简单；</em></li>
<li><em>之前写过一个</em><a href="http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html" target="_blank"><em>Win32API的扫雷游戏</em></a><em>。<span style="color: #ff0000;">（自己回头去看看，感觉以前的按过程式的方法设计的代码不便于理解，结构不清晰）</span></em></li>
</ol>
<p>&nbsp;</p>
<h1>[1]设计一个可以载入图片的GameObject类</h1>
<p>&nbsp;</p>
<h2>[1.1]类的声明如下：</h2>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> GameObject
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    GameObject(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);
    GameObject(</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>*<span style="color: #000000;"> filename);
    GameObject(</span><span style="color: #0000ff;">const</span> GameObject&amp;<span style="color: #000000;"> a_rightSide);
    GameObject</span>&amp; <span style="color: #0000ff;">operator</span>=(<span style="color: #0000ff;">const</span> GameObject&amp;<span style="color: #000000;"> a_rightSide);
    </span>~GameObject(<span style="color: #0000ff;">void</span>) {}<span style="color: #008000;">//</span><span style="color: #008000;">没有需要删除的</span>

    <span style="color: #0000ff;">void</span> setImage(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>*<span style="color: #000000;"> filename);

    </span><span style="color: #0000ff;">float</span> getX(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span> m_pBox-&gt;<span style="color: #000000;">x();}
    </span><span style="color: #0000ff;">float</span> getY(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span> m_pBox-&gt;<span style="color: #000000;">y();}
    </span><span style="color: #0000ff;">float</span> getWidth(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span> m_pBox-&gt;<span style="color: #000000;">w();}
    </span><span style="color: #0000ff;">float</span> getHeight(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span> m_pBox-&gt;<span style="color: #000000;">h();}
    </span><span style="color: #0000ff;">void</span> setPosition(<span style="color: #0000ff;">float</span> a_x, <span style="color: #0000ff;">float</span><span style="color: #000000;"> a_y);
    </span><span style="color: #0000ff;">void</span> setSize(<span style="color: #0000ff;">float</span> a_width, <span style="color: #0000ff;">float</span><span style="color: #000000;"> a_height);

</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    auto_ptr</span>&lt;Fl_Box&gt; m_pBox;<span style="color: #008000;">//</span><span style="color: #008000;">图片框</span>
    auto_ptr&lt;Fl_Image&gt; m_pImage;<span style="color: #008000;">//</span><span style="color: #008000;">图片</span>
    Fl_Shared_Image* m_pSharedImage;<span style="color: #008000;">//</span><span style="color: #008000;">共享区图片</span>
};</pre>
</div>
<h2>[1.2]类的定义</h2>
<p>这里使用了组合的方式，将Fl_Box,Fl_Image组合在一起（使用了智能指针方便管理内存）。而且自己定义了拷贝构造函数和赋值运算符，实现自定义的赋值操作（主要是方便存放在vector里面）。方法的定义如下：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>inline GameObject::GameObject(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
:m_pSharedImage(NULL)
{
    m_pBox.reset(</span><span style="color: #0000ff;">new</span> Fl_Box(<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span><span style="color: #000000;">));
}
inline GameObject::GameObject(</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>*<span style="color: #000000;"> filename)
:m_pSharedImage(NULL)
{
    m_pBox.reset(</span><span style="color: #0000ff;">new</span> Fl_Box(<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span><span style="color: #000000;">));
    setImage(filename);</span><span style="color: #008000;">//</span><span style="color: #008000;">设置图片</span>
<span style="color: #000000;">}
inline GameObject::GameObject(</span><span style="color: #0000ff;">const</span> GameObject&amp;<span style="color: #000000;"> a_rightSide)
{
    m_pBox.reset(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Fl_Box(a_rightSide.getX(),a_rightSide.getY(),
        a_rightSide.getWidth(),a_rightSide.getHeight()));</span><span style="color: #008000;">//</span><span style="color: #008000;">构建一个新的大小位置相同的box</span>
    m_pSharedImage = Fl_Shared_Image::<span style="color: #0000ff;">get</span>(a_rightSide.m_pSharedImage-&gt;name());<span style="color: #008000;">//</span><span style="color: #008000;">获取相同的sharedImage</span>
    m_pImage.reset(m_pSharedImage-&gt;copy(a_rightSide.getWidth(),a_rightSide.getHeight()));<span style="color: #008000;">//</span><span style="color: #008000;">构建一幅大小相同的Image</span>
    m_pBox-&gt;image(m_pImage.<span style="color: #0000ff;">get</span><span style="color: #000000;">());
}
inline GameObject</span>&amp; GameObject::<span style="color: #0000ff;">operator</span>=(<span style="color: #0000ff;">const</span> GameObject&amp;<span style="color: #000000;"> a_rightSide)
{
    m_pBox</span>-&gt;<span style="color: #000000;">resize(a_rightSide.getX(),a_rightSide.getY(),
        a_rightSide.getWidth(),a_rightSide.getHeight());
    m_pSharedImage </span>= Fl_Shared_Image::<span style="color: #0000ff;">get</span>(a_rightSide.m_pSharedImage-&gt;<span style="color: #000000;">name());
    m_pImage.reset(m_pSharedImage</span>-&gt;copy(a_rightSide.getWidth(),a_rightSide.getHeight()));<span style="color: #008000;">//</span><span style="color: #008000;">构建一幅大小相同的Image</span>
    m_pBox-&gt;image(m_pImage.<span style="color: #0000ff;">get</span><span style="color: #000000;">());
    </span><span style="color: #0000ff;">return</span> *<span style="color: #0000ff;">this</span><span style="color: #000000;">;
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">设置图片</span>
inline <span style="color: #0000ff;">void</span> GameObject::setImage(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *<span style="color: #000000;">filename)
{
    fl_register_images();
    m_pSharedImage </span>= Fl_Shared_Image::<span style="color: #0000ff;">get</span><span style="color: #000000;">(filename);
    m_pImage.reset(m_pSharedImage</span>-&gt;<span style="color: #000000;">copy());
    m_pBox</span>-&gt;image(m_pImage.<span style="color: #0000ff;">get</span><span style="color: #000000;">());
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">设定位置和大小</span>
inline <span style="color: #0000ff;">void</span> GameObject::setPosition(<span style="color: #0000ff;">float</span> a_x, <span style="color: #0000ff;">float</span><span style="color: #000000;"> a_y)
{
    m_pBox</span>-&gt;<span style="color: #000000;">position(a_x,a_y);
}
inline </span><span style="color: #0000ff;">void</span> GameObject::setSize(<span style="color: #0000ff;">float</span> a_width, <span style="color: #0000ff;">float</span><span style="color: #000000;"> a_height)
{
    m_pBox</span>-&gt;<span style="color: #000000;">size(a_width,a_height);
    m_pImage.reset(m_pSharedImage</span>-&gt;<span style="color: #000000;">copy(a_width,a_height));
    m_pBox</span>-&gt;image(m_pImage.<span style="color: #0000ff;">get</span>());<span style="color: #008000;">//</span><span style="color: #008000;">重新修改image,因为之前的image会自动销毁</span>
}</pre>
</div>
<p>这样实现对于做控件的背景图片还是可以的，但是有个重要的缺点是响应事件的问题。如果不是继承含有handle()方法的类实现事件响应必须使用回调函数callback()（这只是我这几天看<a href="http://www.fltk.org/doc-1.3/index.html" target="_blank">FLTK1.3.0</a>帮助文档发现的，或许还有更好的方法我没有发现）。所以有了下面的修改，就可以重写父类的handle()方法来实现自定义的事件响应。</p>
<h2>[1.3]使用到的FLTK类</h2>
<p><a href="http://www.fltk.org/doc-1.3/classFl__Shared__Image.html" target="_blank">Fl_Shared_Image</a></p>
<p><a href="http://www.fltk.org/doc-1.3/classFl__Image.html" target="_blank">Fl_Image</a></p>
<p><a href="http://www.fltk.org/doc-1.3/classFl__Box.html" target="_blank">Fl_Box</a></p>
<h1>[2]改进的图片框ImageBox类</h1>
<h2>[2.1]类的实现</h2>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">用于放置图片的图片框</span>
<span style="color: #0000ff;">class</span> ImageBox:<span style="color: #0000ff;">public</span><span style="color: #000000;"> Fl_Box
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    ImageBox(</span><span style="color: #0000ff;">void</span>):Fl_Box(<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span><span style="color: #000000;">) {}
    ImageBox(</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>* filename):Fl_Box(<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span><span style="color: #000000;">)
    {
        setImage(filename);
    }
    ImageBox(</span><span style="color: #0000ff;">const</span> ImageBox&amp;<span style="color: #000000;"> a_rightSide)
    :Fl_Box(a_rightSide.getX(),a_rightSide.getY(),a_rightSide.getWidth(),a_rightSide.getHeight(),</span><span style="color: #800080;">0</span><span style="color: #000000;">)
    {
        m_x </span>=<span style="color: #000000;"> a_rightSide.getX();
        m_y </span>=<span style="color: #000000;"> a_rightSide.getY();
        m_width </span>=<span style="color: #000000;"> a_rightSide.getWidth();
        m_height </span>=<span style="color: #000000;"> a_rightSide.getHeight();
        m_pSharedImage </span>= Fl_Shared_Image::<span style="color: #0000ff;">get</span>(a_rightSide.m_pSharedImage-&gt;name());<span style="color: #008000;">//</span><span style="color: #008000;">获取相同的sharedImage</span>
        m_pImage.reset(m_pSharedImage-&gt;copy(m_width,m_height));<span style="color: #008000;">//</span><span style="color: #008000;">构建一幅大小相同的Image</span>
        image(m_pImage.<span style="color: #0000ff;">get</span><span style="color: #000000;">());
        redraw();
    }
    ImageBox</span>&amp; <span style="color: #0000ff;">operator</span>=(<span style="color: #0000ff;">const</span> ImageBox&amp;<span style="color: #000000;"> a_rightSide)
    {
        m_x </span>=<span style="color: #000000;"> a_rightSide.getX();
        m_y </span>=<span style="color: #000000;"> a_rightSide.getY();
        m_width </span>=<span style="color: #000000;"> a_rightSide.getWidth();
        m_height </span>=<span style="color: #000000;"> a_rightSide.getHeight();
        resize(m_x,m_y,m_width,m_height);
        m_pSharedImage </span>= Fl_Shared_Image::<span style="color: #0000ff;">get</span>(a_rightSide.m_pSharedImage-&gt;name());<span style="color: #008000;">//</span><span style="color: #008000;">获取相同的sharedImage</span>
        m_pImage.reset(m_pSharedImage-&gt;copy(m_width,m_height));<span style="color: #008000;">//</span><span style="color: #008000;">构建一幅大小相同的Image</span>
        image(m_pImage.<span style="color: #0000ff;">get</span><span style="color: #000000;">());
        redraw();
        </span><span style="color: #0000ff;">return</span> *<span style="color: #0000ff;">this</span><span style="color: #000000;">;
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;">设置图片</span>
    <span style="color: #0000ff;">void</span> setImage(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *<span style="color: #000000;">filename)
    {
        fl_register_images();
        m_pSharedImage </span>= Fl_Shared_Image::<span style="color: #0000ff;">get</span><span style="color: #000000;">(filename);
        m_pImage.reset(m_pSharedImage</span>-&gt;<span style="color: #000000;">copy());
        image(m_pImage.</span><span style="color: #0000ff;">get</span><span style="color: #000000;">());
        redraw();
    }

    </span><span style="color: #0000ff;">int</span> getX(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span><span style="color: #000000;"> x();}
    </span><span style="color: #0000ff;">int</span> getY(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span><span style="color: #000000;"> y();}
    </span><span style="color: #0000ff;">int</span> getWidth(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span><span style="color: #000000;"> w();}
    </span><span style="color: #0000ff;">int</span> getHeight(<span style="color: #0000ff;">void</span>)<span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span><span style="color: #000000;"> h();}
    </span><span style="color: #0000ff;">void</span> setPosition(<span style="color: #0000ff;">int</span> a_x, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_y) {position(a_x,a_y);}
    </span><span style="color: #0000ff;">void</span> setSize(<span style="color: #0000ff;">int</span> a_width, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_height)
    {
        m_width </span>=<span style="color: #000000;"> a_width;
        m_height </span>=<span style="color: #000000;"> a_height;
        size(m_width,m_height);
        m_pImage.reset(m_pSharedImage</span>-&gt;<span style="color: #000000;">copy(m_width,m_height));
        image(m_pImage.</span><span style="color: #0000ff;">get</span>());<span style="color: #008000;">//</span><span style="color: #008000;">重新修改image,因为之前的image会自动销毁</span>
<span style="color: #000000;">        redraw();
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;">Event处理</span>
    <span style="color: #0000ff;">int</span> handle(<span style="color: #0000ff;">int</span> <span style="color: #0000ff;">event</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">if</span> (!m_enable) <span style="color: #0000ff;">return</span> (<span style="color: #800080;">0</span>);<span style="color: #008000;">//</span><span style="color: #008000;">点开数字后失去操作权</span>
        <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;
        </span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;
        </span><span style="color: #0000ff;">switch</span> (<span style="color: #0000ff;">event</span><span style="color: #000000;">)
        {
        </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> FL_PUSH:
            </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (Fl::event_button())
            {
            </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> FL_LEFT_MOUSE:
                cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">你点击了鼠标左键</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
                cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">m_width=</span><span style="color: #800000;">"</span> &lt;&lt; m_width &lt;&lt;<span style="color: #000000;"> endl;
                m_pSharedImage </span>= Fl_Shared_Image::<span style="color: #0000ff;">get</span>(<span style="color: #800000;">"</span><span style="color: #800000;">res/images/bg.jpg</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                m_pImage.reset(m_pSharedImage</span>-&gt;<span style="color: #000000;">copy(m_width,m_height));
                image(m_pImage.</span><span style="color: #0000ff;">get</span>());<span style="color: #008000;">//</span><span style="color: #008000;">重新修改image,因为之前的image会自动销毁</span>
<span style="color: #000000;">                redraw();
                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
            }
            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
    }

</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    auto_ptr</span>&lt;Fl_Image&gt; m_pImage;<span style="color: #008000;">//</span><span style="color: #008000;">图片</span>
    Fl_Shared_Image* m_pSharedImage;<span style="color: #008000;">//</span><span style="color: #008000;">共享区图片</span>
    <span style="color: #0000ff;">int</span><span style="color: #000000;"> m_x,m_y;
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m_width,m_height;
    </span><span style="color: #0000ff;">bool</span> m_enable;<span style="color: #008000;">//</span><span style="color: #008000;">是否可以操作（当点开数字后就设为false）</span>
};</pre>
</div>
<p>这里包含了类的定义。在这里需要提到一个重要的问题，每当更换image后需要调用redraw()函数（第一个GameObject类没有使用，所以它更换图片的时候不会自动刷新的）。</p>
<h2>[2.2]这种实现方式的优点</h2>
<ul>
<li>可以很方便的处理事件；</li>
<li>继承FLTK的Fl_Box类，结构更清晰。</li>
<li><em><span style="color: #ff0000;">注：c++primer里有句经典的话，&ldquo;拷贝构造函数、重载赋值运算符、析构函数三个中只要定义了其中一个就需要定义其他两个&rdquo;。在这里由于使用了智能指针auto_ptr的缘故，并不需要自己定义析构函数。</span></em></li>
</ul>
<h2>[2.3]handl()函数</h2>
<p>使用handle()函数时，里面调用方法的过程大概是这样的（扫雷游戏的基本鼠标操作）：</p>
<ul>
<li>单击左键事件处理（完成点开格子的过程，调用扫雷算法的方法，完成image的修改，并置这些图片为不可再响应事件）；</li>
<li>单击右键事件处理（该过程只是改变image状态，右键第一次后改为红旗，右键第二次改为问号，右键第三次改为原样（前两个状态不能响应左键事件））。</li>
</ul>
<h2>[2.4]测试函数</h2>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #000000;">下面是两个测试函数：

</span><span style="color: #0000ff;">void</span> Test::test_copy_construdtor(GameObject&amp; t1, GameObject&amp;<span style="color: #000000;"> t2)
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">测试拷贝构造函数</span>
    t2.setSize(<span style="color: #800080;">800</span>,<span style="color: #800080;">500</span><span style="color: #000000;">);
    t1 </span>=<span style="color: #000000;"> t2;
    t2.setSize(</span><span style="color: #800080;">300</span>,<span style="color: #800080;">400</span><span style="color: #000000;">);
</span><span style="color: #008000;">//</span><span style="color: #008000;">    t1.setSize(800,300);</span><span style="color: #008000;">
/*</span><span style="color: #008000;">    t2 = t1;
    t1.setSize(700,500);
    t1 = t2;
    t2.setSize(700,400);
    </span><span style="color: #008000;">*/</span><span style="color: #000000;">
}

</span><span style="color: #0000ff;">void</span> Test::test_ImageBox(ImageBox&amp;<span style="color: #000000;"> t)
{
    t.setSize(</span><span style="color: #800080;">250</span>,<span style="color: #800080;">250</span><span style="color: #000000;">);
}</span></pre>
</div>
<h2>[2.5]使用到的FLTK类</h2>
<p><a href="http://www.fltk.org/doc-1.3/classFl__Shared__Image.html" target="_blank">Fl_Shared_Image</a></p>
<p><a href="http://www.fltk.org/doc-1.3/classFl__Image.html" target="_blank">Fl_Image</a></p>
<p><a href="http://www.fltk.org/doc-1.3/classFl__Box.html" target="_blank">Fl_Box</a></p>
<p><span style="color: #ff0000;">注：后面由于扫雷游戏用到图片框主要是每个格子使用图片框，我就把名字改成了GridBlock类，定义和ImageBox差不多，只是后面慢慢的有些改进。</span></p>
<h1>[3]进一步对扫雷游戏的设计</h1>
<h2>[3.1]设计单击鼠标左键后的事件处理流程</h2>
<ul>
<li>传递该消息(行号和列号)给GUI <em><span style="color: #ff0000;">（注：GUI类是控制主窗体的类，里面包含各种其他组件）</span></em></li>
<li>GUI调用核心算法获取点开的所有格子和对应的数字</li>
<li>根据地雷分布图调用setImage(image[k]).k属于[0,9]，并置格子为不可响应事件setDisable()<em><span style="color: #ff0000;">（格子点开之后必须禁止其继续响应事件）</span></em></li>
<li>GUI自身有一张数字地图，9表示初始态，0~8表示点开后的数字。各个数字对应着各个图片,10表示点到了地雷<span style="color: #ff0000;">=》</span>GameOver</li>
</ul>
<p>&nbsp;</p>
<p>如何处理左击事件？</p>
<ul>
<li>置该格子为不可响应事件状态<span style="color: #ff0000;">=》</span>调用核心算法（传递行列值）<span style="color: #ff0000;">=》</span>获取更新后的地图状态<span style="color: #ff0000;">=》</span>更换图片</li>
</ul>
<h2>[3.2]定义一个消息结构体&mdash;&mdash;获取左键点开的格子和对应的数字</h2>
<p>用于传递点开的格子的位置和数字的消息结构体</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">struct</span><span style="color: #000000;"> OpenGridMsg 
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j;
    </span><span style="color: #0000ff;">int</span> stat;<span style="color: #008000;">//</span><span style="color: #008000;">图片状态</span>
};</pre>
</div>
<p>核心算法中应该提供一个这样的接口</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">核心算法中给GUI提供的接口</span>

<span style="color: #0000ff;">void</span> clickOpen(<span style="color: #0000ff;">int</span> i, <span style="color: #0000ff;">int</span> j, vector&lt;OpenGridMsg&gt;&amp; msg);</pre>
</div>
<p>返回的msg存储着点开(i.j)位置后递归点开的位置和其状态，点到雷的情况是msg[0].stat=9;</p>
<p>&nbsp;</p>
<p>为了消除<span style="color: #ff0000;">魔数</span>还需要为类的状态设定一个枚举类型：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">格子最后显示状态的枚举类型</span>

<span style="color: #0000ff;">enum</span><span style="color: #000000;"> ImageName

{

zero</span>=<span style="color: #800080;">0</span>,one=<span style="color: #800080;">1</span>,two=<span style="color: #800080;">2</span>,three=<span style="color: #800080;">3</span>,four=<span style="color: #800080;">4</span>,five=<span style="color: #800080;">5</span>,six=<span style="color: #800080;">6</span>,seven=<span style="color: #800080;">7</span>,eight=<span style="color: #800080;">8</span><span style="color: #000000;">,

mineBoom</span>=<span style="color: #800080;">9</span>,mineInit=<span style="color: #800080;">10</span>,mineOut=<span style="color: #800080;">11</span>,mark=<span style="color: #800080;">12</span>,markWrong=<span style="color: #800080;">13</span>,markUnknow=<span style="color: #800080;">14</span><span style="color: #000000;">

};</span></pre>
</div>
<h2>[3.3]完成鼠标右键基本处理后的效果</h2>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220112123.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-2953" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/20120902222012454.png" alt="wps_clip_image-2953" width="227" height="240" border="0" /></a></p>
<p>右键事件处理的相关代码:</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #000000;">鼠标的右键事件已经完成。
</span><span style="color: #008000;">//</span><span style="color: #008000;">处理右击事件：状体转换，更换图片。如果是&ldquo;红旗&rdquo;和&ldquo;问号&rdquo;状体则置不可响应左击事件，否则置可响应左击事件</span>
inline <span style="color: #0000ff;">void</span> GridBlock::rightClick(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
{
    m_rightClickNumber</span>++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (m_rightClickNumber&gt;<span style="color: #800080;">2</span><span style="color: #000000;">)
    {
        m_rightClickNumber</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
    }
    setImage(imageName[markImage[m_rightClickNumber]]);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">在标记状态下停止响应左击事件</span>
    <span style="color: #0000ff;">if</span> (m_rightClickNumber == <span style="color: #800080;">0</span><span style="color: #000000;">)
    {
        m_isableLeftClick </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
    {
        m_isableLeftClick </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">;        
    }
}</span></pre>
</div>
<h2>[3.4]设计鼠标左键单击事件的处理</h2>
<p>为了方便实现鼠标左击事件，我接下来把GUI类设计为单例模式，这样的话在GridBlock::leftClick() 中容易调用GUI中的方法GUI::clickOpen(m_lineNumber,m_columnNumber);</p>
<p>调用过程很简单，就一句话：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220127073.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-4311[6]" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220127597.png" alt="wps_clip_image-4311[6]" width="402" height="72" border="0" /></a></p>
<p>下面是GUI的单例模式定义：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/20120902222012944.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-9713[6]" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220137007.png" alt="wps_clip_image-9713[6]" width="420" height="289" border="0" /></a></p>
<p>实现如下：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220138403.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-4877[6]" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220138926.png" alt="wps_clip_image-4877[6]" width="240" height="224" border="0" /></a></p>
<h1>[4]GUI类改进创建格子的过程</h1>
<p>当知道大小的时候，使用vector时优先使用resize()。</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>inline <span style="color: #0000ff;">void</span> GUI::createGameObjects(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">知道大小的情况下，优先使用resize()</span>
<span style="color: #000000;">    m_grid.resize(m_numberLines);
    std::vector</span>&lt;GridBlock&gt;<span style="color: #000000;"> grids;
    grids.resize(m_numberColumns);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;m_numberLines; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>; j&lt;m_numberColumns; j++<span style="color: #000000;">)
        {
            GridBlock gridBlock(imageName[mineInit]);
            gridBlock.setPosition(j</span>*initBlockWidth,i*<span style="color: #000000;">initBlockHeight);
            gridBlock.setSize(initBlockWidth,initBlockHeight);
            gridBlock.setLineColumn(i,j);</span><span style="color: #008000;">//</span><span style="color: #008000;">设置行号和列号</span>
            cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">i=</span><span style="color: #800000;">"</span> &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">,j=</span><span style="color: #800000;">"</span> &lt;&lt; j &lt;&lt;<span style="color: #000000;"> endl;
            grids[j] </span>=<span style="color: #000000;"> gridBlock;
        }
        m_grid[i] </span>=<span style="color: #000000;"> grids;
    }
}</span></pre>
</div>
<p>为了要让这个函数顺利进行，还需要修改GridBlock类的默认构造函数，拷贝构造函数，重载复制运算符</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #000000;">inline GridBlock::GridBlock(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)
:Fl_Box(</span><span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>),m_pSharedImage(NULL),m_x(<span style="color: #800080;">0</span>),m_y(<span style="color: #800080;">0</span>),m_width(<span style="color: #800080;">0</span>),m_height(<span style="color: #800080;">0</span><span style="color: #000000;">),
m_enable(</span><span style="color: #0000ff;">true</span>),m_isableLeftClick(<span style="color: #0000ff;">true</span>),m_lineNumber(<span style="color: #800080;">0</span>),m_columnNumber(<span style="color: #800080;">0</span><span style="color: #000000;">),
m_rightClickNumber(</span><span style="color: #800080;">0</span><span style="color: #000000;">)
{
&hellip;</span></pre>
<pre><span style="color: #000000;">&hellip;</span></pre>
<pre><span style="color: #000000;">&hellip;
}</span></pre>
</div>
<p><span style="color: #000000;">首先把pSharedImage置为NULL。我调试的时候发现的问题，这个问题需要记住，当 pSharedImage不存在的时候是不能调用它的方法的。<em><span style="color: #ff0000;">（一般调试了就能找到）</span></em></span></p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #000000;">inline GridBlock</span>&amp; GridBlock::<span style="color: #0000ff;">operator</span>=(<span style="color: #0000ff;">const</span> GridBlock&amp;<span style="color: #000000;"> a_rightSide)
{
    m_x </span>=<span style="color: #000000;"> a_rightSide.getX();
    m_y </span>=<span style="color: #000000;"> a_rightSide.getY();
    m_width </span>=<span style="color: #000000;"> a_rightSide.getWidth();
    m_height </span>=<span style="color: #000000;"> a_rightSide.getHeight();
    m_enable </span>=<span style="color: #000000;"> a_rightSide.m_enable;
    m_isableLeftClick </span>=<span style="color: #000000;"> a_rightSide.m_isableLeftClick;
    m_lineNumber </span>=<span style="color: #000000;"> a_rightSide.m_lineNumber;
    m_columnNumber </span>=<span style="color: #000000;"> a_rightSide.m_columnNumber;
    m_rightClickNumber </span>=<span style="color: #000000;"> a_rightSide.m_rightClickNumber;
    resize(m_x,m_y,m_width,m_height);
    </span><span style="color: #0000ff;">if</span> (a_rightSide.m_pSharedImage != NULL)<span style="color: #008000;">//</span><span style="color: #008000;">Fl_Shared_Image不存在的情况下不能调用它的方法</span>
<span style="color: #000000;">    {
        m_pSharedImage </span>= Fl_Shared_Image::<span style="color: #0000ff;">get</span>(a_rightSide.m_pSharedImage-&gt;name());<span style="color: #008000;">//</span><span style="color: #008000;">获取相同的sharedImage</span>
        m_pImage.reset(m_pSharedImage-&gt;copy(m_width,m_height));<span style="color: #008000;">//</span><span style="color: #008000;">构建一幅大小相同的Image</span>
        image(m_pImage.<span style="color: #0000ff;">get</span><span style="color: #000000;">());
        redraw();
    }
    </span><span style="color: #0000ff;">return</span> *<span style="color: #0000ff;">this</span><span style="color: #000000;">;
}</span></pre>
</div>
<p><span style="color: #000000;">然在赋值运算符重载函数中给个判断 </span><span style="color: #0000ff;">if</span> (a_rightSide.m_pSharedImage != NULL)</p>
<p>这样的话就不会在resize时出现Fl_Shared_Image不存在的情况下调用它的方法的错误问题了。</p>
<h1>[5]扫雷算法类Mines类的设计</h1>
<p>仅仅是一个矩阵（二维数组），操作只有这个地雷矩阵图的简单方法。GUI操作Mines类的接口见MinesInterface类。</p>
<h2>[5.1]Mines类的的声明</h2>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Mines
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    Mines(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">void</span> initMines(<span style="color: #0000ff;">int</span> a_lines, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_columns);
    </span><span style="color: #0000ff;">bool</span> isMine(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a_line, a_column);
    </span><span style="color: #0000ff;">int</span> countRoundMines(<span style="color: #0000ff;">int</span> a_line, <span style="color: #0000ff;">int</span> a_column);<span style="color: #008000;">//</span><span style="color: #008000;">统计周围的地雷数量</span>

<span style="color: #0000ff;">private</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">bool</span>&gt; &gt; m_minesMap;<span style="color: #008000;">//</span><span style="color: #008000;">雷的布局图</span>
    <span style="color: #0000ff;">int</span> m_numberLines;<span style="color: #008000;">//</span><span style="color: #008000;">行数</span>
    <span style="color: #0000ff;">int</span> m_numberColumns;<span style="color: #008000;">//</span><span style="color: #008000;">列数</span>
};</pre>
</div>
<p>当时我为设计每个元素为int型还是bool型纠结了一番的，最终选择了bool类型（有过几次想换为int型的冲动，结果还是没换）。</p>
<h2>[5.2]初始化雷区地图</h2>
<p><span style="color: #000000;">关于随机放置雷的问题，采用如下方法： </span></p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #000000;">inline </span><span style="color: #0000ff;">void</span> Mines::initMines(<span style="color: #0000ff;">int</span> a_lines, <span style="color: #0000ff;">int</span> a_columns, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_minesCount)
{
    assert(a_minesCount</span>&lt;a_lines*<span style="color: #000000;">a_columns);
    m_minesCount </span>=<span style="color: #000000;"> a_minesCount;
    m_minesMap.resize(a_lines);
    vector</span>&lt;<span style="color: #0000ff;">bool</span>&gt;<span style="color: #000000;"> minesMapLines;
    minesMapLines.resize(a_columns);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;a_lines; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>; j&lt;a_columns; j++<span style="color: #000000;">)
        {
            minesMapLines[j] </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">;
        }
        m_minesMap[i] </span>=<span style="color: #000000;"> minesMapLines;
    }
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;m_minesCount; i++<span style="color: #000000;">)
    {    </span><span style="color: #008000;">//</span><span style="color: #008000;">随机填充</span>
<span style="color: #000000;">        srand(time(NULL));
        </span><span style="color: #0000ff;">int</span> index = rand() % (a_lines*a_columns);<span style="color: #008000;">//</span><span style="color: #008000;">[0,a_lines*a_columns-1]</span>
        <span style="color: #0000ff;">if</span>(m_minesMap[index/a_columns][index%<span style="color: #000000;">acolumns] )
            i</span>--<span style="color: #000000;">;
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
            m_minesMap[index</span>/a_columns][index%a_columns] = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    }
}</span></pre>
</div>
<p>这样的话每次放置只取一次随机数，如果行列各取一次很容易出现相同的情形的。i--是为了防止已经放置了雷的地方重新放的问题。结果我又开始纠结了，随机生成地图慢啊！发现两个缺陷<em><span style="color: #ff0000;">（后面会有改进方案）</span></em>：</p>
<ul>
<li>初始化所有元素为false可以更快（但这不是慢的原因）</li>
<li>随机生减少重复</li>
</ul>
<h2>[5.3]计算周围地雷个数</h2>
<p>为了方便计算周围的地雷个数，这样设计isMines2方法。（内部使用，可以越界一格）</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>inline <span style="color: #0000ff;">bool</span> Mines::isMine2(<span style="color: #0000ff;">int</span> a_line, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_column)
{
    assert(a_line</span>&gt;-<span style="color: #800080;">2</span><span style="color: #000000;">);
    assert(a_column</span>&gt;-<span style="color: #800080;">2</span><span style="color: #000000;">);
    assert(a_line</span>&lt;m_numberLines+<span style="color: #800080;">1</span><span style="color: #000000;">);
    assert(a_column</span>&lt;m_numberColumns+<span style="color: #800080;">1</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">if</span> (a_line==-<span style="color: #800080;">1</span> || a_line==<span style="color: #000000;">m_numberLines
        </span>|| a_column==-<span style="color: #800080;">1</span> || a_column==m_numberColumns)<span style="color: #008000;">//</span><span style="color: #008000;">边界情况</span>
<span style="color: #000000;">    {
        cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">边界情况</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> m_minesMap[a_line][a_column];
}</span></pre>
</div>
<p>这样就可以很简单的写countRoundMines方法了。countRoundMines()方法定义如下：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>inline <span style="color: #0000ff;">int</span> Mines::countRoundMines(<span style="color: #0000ff;">int</span> a_line, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_column)
{
    </span><span style="color: #0000ff;">int</span> count=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i-<span style="color: #800080;">1</span>,j-<span style="color: #800080;">1</span>))        count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i,j-<span style="color: #800080;">1</span>))        count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i+<span style="color: #800080;">1</span>,j-<span style="color: #800080;">1</span>))    count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i-<span style="color: #800080;">1</span>,j))        count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i+<span style="color: #800080;">1</span>,j))        count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i-<span style="color: #800080;">1</span>,j+<span style="color: #800080;">1</span>))    count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i,j+<span style="color: #800080;">1</span>))        count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (isMine2(i+<span style="color: #800080;">1</span>,j+<span style="color: #800080;">1</span>))    count++<span style="color: #000000;">;
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> count;
}</span></pre>
</div>
<p>外部调用的isMine方法如下：(外部使用，不能出现越界情况)</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>inline <span style="color: #0000ff;">bool</span> Mines::isMine(<span style="color: #0000ff;">int</span> a_line, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_column)
{
    assert(a_line</span>&gt;-<span style="color: #800080;">1</span><span style="color: #000000;">);
    assert(a_column</span>&gt;-<span style="color: #800080;">1</span><span style="color: #000000;">);
    assert(a_line</span>&lt;<span style="color: #000000;">m_numberLines);
    assert(a_column</span>&lt;<span style="color: #000000;">m_numberColumns);
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> m_minesMap[a_line][a_column];
}</span></pre>
</div>
<h1>[6]设计SweepInterface类</h1>
<p>用于GUI使用Mines类的接口类</p>
<h2>[6.1]定义和实现</h2>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> SweepInterface
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">void</span> initMines(<span style="color: #0000ff;">int</span> a_lines, <span style="color: #0000ff;">int</span> a_columns, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_minesCount);
    </span><span style="color: #0000ff;">void</span> clickOpen(<span style="color: #0000ff;">int</span> i, <span style="color: #0000ff;">int</span> j, vector&lt;OpenGridMsg&gt;&amp;<span style="color: #000000;"> msg);

</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    Mines m_mines;
};

inline </span><span style="color: #0000ff;">void</span> SweepInterface::clickOpen(<span style="color: #0000ff;">int</span> i, <span style="color: #0000ff;">int</span> j, vector&lt;OpenGridMsg&gt;&amp;<span style="color: #000000;"> msg)
{
    OpenGridMsg amsg;
    </span><span style="color: #0000ff;">if</span> (m_mines.isMine(i,j))<span style="color: #008000;">//</span><span style="color: #008000;">踩到雷了</span>
<span style="color: #000000;">    {
        amsg.i </span>=<span style="color: #000000;"> i;
        amsg.j </span>=<span style="color: #000000;"> j;
        amsg.state </span>= mineBoom;<span style="color: #008000;">//</span><span style="color: #008000;">雷</span>
<span style="color: #000000;">        msg.push_back(amsg);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    amsg.i </span>=<span style="color: #000000;"> i;
    amsg.j </span>=<span style="color: #000000;"> j;
    amsg.state </span>=<span style="color: #000000;"> m_mines.countRoundMines(i,j);
    msg.push_back(amsg);
    </span><span style="color: #0000ff;">if</span> (amsg.state == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">如果周围没有雷，继续点开周围的</span>
<span style="color: #000000;">    {
        clickOpen(i</span>-<span style="color: #800080;">1</span>,j-<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        clickOpen(i,j</span>-<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        clickOpen(i</span>+<span style="color: #800080;">1</span>,j-<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        clickOpen(i</span>-<span style="color: #800080;">1</span><span style="color: #000000;">,j,msg);
        clickOpen(i</span>+<span style="color: #800080;">1</span><span style="color: #000000;">,j,msg);
        clickOpen(i</span>-<span style="color: #800080;">1</span>,j+<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        clickOpen(i,j</span>+<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        clickOpen(i</span>+<span style="color: #800080;">1</span>,j+<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
    }
}</span></pre>
</div>
<p>现在发现问题了，边界的问题，怎么解决了，我现在想到了两个方法。</p>
<ul>
<li>第一个是修改Mines类的isMine()方法，如果是雷返回1，不是雷返回0，是边界外返回-1。</li>
<li>第二个是修改下面的if(amsg.state==0){/***/}大括号里面如果越界就不clickOpen()。</li>
</ul>
<p>使用方法一需要进行比较大的修改，我选择方法二：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">if</span> (amsg.state == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">如果周围没有雷，继续点开周围的</span>
<span style="color: #000000;">    {
        </span><span style="color: #0000ff;">if</span> (i-<span style="color: #800080;">1</span>&gt;=<span style="color: #800080;">0</span> &amp;&amp; j-<span style="color: #800080;">1</span>&gt;=<span style="color: #800080;">0</span>)                        clickOpen(i-<span style="color: #800080;">1</span>,j-<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        </span><span style="color: #0000ff;">if</span> (j-<span style="color: #800080;">1</span>&gt;=<span style="color: #800080;">0</span>)                                    clickOpen(i,j-<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        </span><span style="color: #0000ff;">if</span> (i+<span style="color: #800080;">1</span>&lt;m_numberLines &amp;&amp; j-<span style="color: #800080;">1</span>&gt;=<span style="color: #800080;">0</span>)            clickOpen(i+<span style="color: #800080;">1</span>,j-<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        </span><span style="color: #0000ff;">if</span> (i-<span style="color: #800080;">1</span>&gt;=<span style="color: #800080;">0</span>)                                    clickOpen(i-<span style="color: #800080;">1</span><span style="color: #000000;">,j,msg);
        </span><span style="color: #0000ff;">if</span> (i+<span style="color: #800080;">1</span>&lt;m_numberLines)                        clickOpen(i+<span style="color: #800080;">1</span><span style="color: #000000;">,j,msg);
        </span><span style="color: #0000ff;">if</span> (i-<span style="color: #800080;">1</span>&gt;=<span style="color: #800080;">0</span> &amp;&amp; j+<span style="color: #800080;">1</span>&lt;m_numberColumns)            clickOpen(i-<span style="color: #800080;">1</span>,j+<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        </span><span style="color: #0000ff;">if</span> (j+<span style="color: #800080;">1</span>&lt;m_numberColumns)                        clickOpen(i,j+<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
        </span><span style="color: #0000ff;">if</span> (i+<span style="color: #800080;">1</span>&lt;m_numberLines &amp;&amp; j+<span style="color: #800080;">1</span>&lt;m_numberColumns)    clickOpen(i+<span style="color: #800080;">1</span>,j+<span style="color: #800080;">1</span><span style="color: #000000;">,msg);
    }</span></pre>
</div>
<p>原理很简单，就是迭代到了边界就不在迭代。</p>
<h2>[6.2]到此为止发现的两个问题分析</h2>
<p>现在又出现新问题了，每次迭代的时候会迭代到以前的位置。这样的话，需要在每次迭代前检测位置是否已经检查过。现在遇到两个问题：</p>
<ul>
<li>迭代不完全。（空白区域不能继续往下迭代）</li>
<li>初始化太慢了，那个随机生成Map的需要修改。</li>
</ul>
<p>初始化15个雷用的循环次数太多了</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220138370.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-9389" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220138893.png" alt="wps_clip_image-9389" width="314" height="26" border="0" /></a></p>
<p>第1个问题的原因：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220138860.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-9533" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220144367.png" alt="wps_clip_image-9533" width="646" height="442" border="0" /></a></p>
<p>行数和列数初始化的时候没有设置。所以引起右下角部分不能成功继续迭代。<em><span style="color: #ff0000;">（记住，包含数据成员的类一定要自己建立构造函数来初始化数据成员）</span></em></p>
<p>分析第一个问题的原因，没吃调用srand里面的时间在循环里面几乎是一样的，所有每次求出的index值在短时间是一样的。然后就需要很长时间才能找出不同的位置来放置地雷。我给出的解决方案如下，在srand的参数里面加入变量i来干扰随机数，这样的效果很好。几乎m_minesCount次就能完成。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220145762.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-9922" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220142698.png" alt="wps_clip_image-9922" width="240" height="67" border="0" /></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220144857.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-27092" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220157648.png" alt="wps_clip_image-27092" width="225" height="240" border="0" /></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220159808.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-24675" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/20120902222015647.png" alt="wps_clip_image-24675" width="227" height="240" border="0" /></a></p>
<p>&nbsp;</p>
<p>但是这样还是不够好，毕竟i大小有限制的。下面的这种更好。因为count的数字只增不减。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220159742.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-10013" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220165041.png" alt="wps_clip_image-10013" width="240" height="120" border="0" /></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/2012090222201624.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-367" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220162184.png" alt="wps_clip_image-367" width="211" height="240" border="0" /></a><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220165531.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-584" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220162467.png" alt="wps_clip_image-584" width="218" height="240" border="0" /></a><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220174626.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-2816" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220177101.png" alt="wps_clip_image-2816" width="226" height="240" border="0" /></a></p>
<h2>[6.3]修正随机生成地图</h2>
<p>上面的方法有问题，当玩行列很大的时候就很慢了。还有就是srand()一般只需要用一次的。下面的结果很好了。</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>unsigned <span style="color: #0000ff;">int</span> count=<span style="color: #800080;">0</span><span style="color: #000000;">;
    unsigned </span><span style="color: #0000ff;">int</span> alpha=<span style="color: #800080;">0</span><span style="color: #000000;">;
    srand(time(NULL));
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;m_minesCount; i++<span style="color: #000000;">)
    {    </span><span style="color: #008000;">//</span><span style="color: #008000;">随机填充</span>
        <span style="color: #0000ff;">int</span> index = (rand())%(m_numberLines*m_numberColumns);<span style="color: #008000;">//</span><span style="color: #008000;">[0,m_numberLines*m_numberColumns-1]</span>
        <span style="color: #0000ff;">if</span>(m_minesMap[index/m_numberColumns][index%<span style="color: #000000;">m_numberColumns])
        {
            i</span>--<span style="color: #000000;">;
            alpha</span>++;<span style="color: #008000;">//</span><span style="color: #008000;">统计重复的次数</span>
<span style="color: #000000;">        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            m_minesMap[index</span>/m_numberColumns][index%m_numberColumns] = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
        }
        count</span>++<span style="color: #000000;">;
    }
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">初始化雷区用来</span><span style="color: #800000;">"</span> &lt;&lt; count &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">次循环（雷数量：</span><span style="color: #800000;">"</span> &lt;&lt; m_minesCount &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">重复次数：</span><span style="color: #800000;">"</span> &lt;&lt; alpha &lt;&lt;<span style="color: #000000;"> endl;
}</span></pre>
</div>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220184843.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-10274" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220184494.png" alt="wps_clip_image-10274" width="240" height="173" border="0" /></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220189478.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-8271" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220184461.png" alt="wps_clip_image-8271" width="240" height="63" border="0" /></a></p>
<h1>[7]试玩一把</h1>
<p>到这里，已经完成了扫雷的基本要求，所以我就玩了一把</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220189760.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-10477" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220193872.png" alt="wps_clip_image-10477" width="227" height="240" border="0" /></a></p>
<h1>[8]对话框设计</h1>
<h1>[8.1]重来对话框的设计</h1>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220196903.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-10532" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/20120902222019251.png" alt="wps_clip_image-10532" width="240" height="63" border="0" /></a></p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> GUI::replayDialog(<span style="color: #0000ff;">void</span>)<span style="color: #008000;">//</span><span style="color: #008000;">GameOver对话框</span>
<span style="color: #000000;">{
    </span><span style="color: #0000ff;">int</span> hotspot =<span style="color: #000000;"> fl_message_hotspot();
    fl_message_hotspot(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
    fl_message_title(</span><span style="color: #800000;">"</span><span style="color: #800000;">Game Over!</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">int</span> rep = fl_choice(<span style="color: #800000;">"</span><span style="color: #800000;">重新开始？</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">Level</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">Replay</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">Exit</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    fl_message_hotspot(hotspot);
    </span><span style="color: #0000ff;">if</span> (rep==<span style="color: #800080;">2</span><span style="color: #000000;">) 
        exit(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (rep == <span style="color: #800080;">1</span><span style="color: #000000;">)
    {
        m_coreMines.initMines(m_numberLines,m_numberColumns,m_minesCount);
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;m_numberLines; i++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>; j&lt;m_numberColumns; j++<span style="color: #000000;">)
            {
                m_grid[i][j].init();
                m_grid[i][j].setImage(imageName[mineInit]);
            }
        }
    }
}</span></pre>
</div>
<p>FLTK提供的对话框很方便就能调用。<a href="http://www.fltk.org/doc-1.3/fl__ask_8H_source.html" target="_blank">Fl_ask.h</a>文件中定义了所以对话框调用函数。下面是我用到的对话框函数：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>FL_EXPORT <span style="color: #0000ff;">void</span> fl_message(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *,...) __fl_attr((__format__ (__printf__, <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span><span style="color: #000000;">)));
FL_EXPORT </span><span style="color: #0000ff;">void</span> fl_alert(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *,...) __fl_attr((__format__ (__printf__, <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span><span style="color: #000000;">)));
FL_EXPORT </span><span style="color: #0000ff;">int</span> fl_ask(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *,...) __fl_attr((__format__ (__printf__, <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span><span style="color: #000000;">), __deprecated__));
FL_EXPORT </span><span style="color: #0000ff;">int</span> fl_choice(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *q,<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *b0,<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *b1,<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *b2,...) __fl_attr((__format__ (__printf__, <span style="color: #800080;">1</span>, <span style="color: #800080;">5</span><span style="color: #000000;">)));
FL_EXPORT </span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *fl_input(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *label, <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *deflt = <span style="color: #800080;">0</span>, ...) __fl_attr((__format__ (__printf__, <span style="color: #800080;">1</span>, <span style="color: #800080;">3</span>)));</pre>
</div>
<h2>[8.2]退出对话框</h2>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220196870.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-11247" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220191854.png" alt="wps_clip_image-11247" width="240" height="61" border="0" /></a></p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> window_callback(Fl_Widget*, <span style="color: #0000ff;">void</span>*<span style="color: #000000;">)
{
    </span><span style="color: #0000ff;">int</span> hotspot =<span style="color: #000000;"> fl_message_hotspot();
    fl_message_hotspot(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
    fl_message_title(</span><span style="color: #800000;">"</span><span style="color: #800000;">Exit</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">int</span> rep = fl_ask(<span style="color: #800000;">"</span><span style="color: #800000;">确定退出？</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    fl_message_hotspot(hotspot);
    </span><span style="color: #0000ff;">if</span> (rep==<span style="color: #800080;">1</span><span style="color: #000000;">) 
        exit(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
}</span></pre>
</div>
<h2>[8.3]等级设置</h2>
<p>苦恼的问题，需要记住，FLTK中，如果删除了Fl_Window，它里面的东西也将会被删除。所以，在更换等级前必须做的事情是：先删除m_grid；然后删除窗体。这个问题是由于自己粗心，忘记了又这回事，最后通过测试函数：（慢慢思索，才找出原因的。)</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> Test::test_GridBlock(vector&lt;vector&lt;GridBlock&gt; &gt;&amp;<span style="color: #000000;"> vv)
{
    vv.clear();
    vv.resize(</span><span style="color: #800080;">10</span><span style="color: #000000;">);
    vector</span>&lt;GridBlock&gt;<span style="color: #000000;"> v;
    v.resize(</span><span style="color: #800080;">10</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;<span style="color: #800080;">10</span>; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>; j&lt;<span style="color: #800080;">10</span>; j++<span style="color: #000000;">)
        {
            GridBlock t(imageName[mineBoom]);
            t.setPosition(initBlockWidth,initBlockHeight);
            t.setSize(initBlockWidth,initBlockHeight);
            v[j] </span>=<span style="color: #000000;"> t;
        }
        vv[i] </span>=<span style="color: #000000;"> v;
    }
}</span></pre>
</div>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> GUI::setLevel(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a_level)
{
    m_minesCount </span>= initMinesCount*<span style="color: #000000;">a_level;
    m_numberLines </span>= initLines*a_level;<span style="color: #008000;">//</span><span style="color: #008000;">行数</span>
    m_numberColumns = initColumns*a_level;<span style="color: #008000;">//</span><span style="color: #008000;">列数</span>
    m_width=initBlockWidth*<span style="color: #000000;">m_numberColumns;
    m_height</span>=initBlockHeight*<span style="color: #000000;">m_numberLines;
    m_pWindow</span>-&gt;<span style="color: #000000;">size(m_width,m_height);
    m_pWindow</span>-&gt;begin();<span style="color: #008000;">//</span><span style="color: #008000;">往窗体里面添加对象</span>
<span style="color: #000000;">        createGameObjects();
    m_pWindow</span>-&gt;<span style="color: #000000;">end();
    m_pWindow</span>-&gt;<span style="color: #000000;">show();
}</span></pre>
</div>
<p>如果是这样的话，因为没有删除窗体，所以m_grid里的内容不会被删除。这解决办法比上面的好多了。</p>
<h2>[8.4]菜单设计</h2>
<p>仿造下面的菜单设计</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220195201.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-12178" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220207676.png" alt="wps_clip_image-12178" width="178" height="215" border="0" /></a></p>
<p>我设计的菜单如下</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220206248.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-15904" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220205135.png" alt="wps_clip_image-15904" width="205" height="240" border="0" /></a></p>
<p>扫雷英雄榜对话框的设计</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/20120902222020118.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-15282" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220204230.png" alt="wps_clip_image-15282" width="240" height="129" border="0" /></a></p>
<p>我的设计师这样的</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220207262.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-31545" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/20120902222021609.png" alt="wps_clip_image-31545" width="240" height="78" border="0" /></a></p>
<p>现在又发现FLTK的一个问题了，在写汉字的时候如果出现异常可以在异常汉字前后加全角的空格来消除异常。<a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220218101.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-14370" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220214720.png" alt="wps_clip_image-14370" width="240" height="25" border="0" /></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220213051.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-25182" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220215526.png" alt="wps_clip_image-25182" width="222" height="240" border="0" /></a></p>
<p>&nbsp;</p>
<h1>[9]三大界面问题</h1>
<h2>[9.1]自定义雷区对话框</h2>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/20120902222022510.png"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-12289" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220227445.png" alt="wps_clip_image-12289" width="204" height="157" border="0" /></a></p>
<p>我自己画的对话框</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220222429.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-20902" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220222952.png" alt="wps_clip_image-20902" width="226" height="240" border="0" /></a></p>
<p>处理事件有点麻烦,两个按钮的事件回调函数如下：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> DialogWindow::OkCB(Fl_Widget*<span style="color: #000000;"> w)
{
    DialogWindow</span>* dialog =<span style="color: #000000;"> DialogWindow::getInstance();
    dialog</span>-&gt;m_strH = dialog-&gt;m_pInputs[<span style="color: #800080;">0</span>]-&gt;<span style="color: #000000;">value();
    dialog</span>-&gt;m_strW = dialog-&gt;m_pInputs[<span style="color: #800080;">1</span>]-&gt;<span style="color: #000000;">value();
    dialog</span>-&gt;m_strC = dialog-&gt;m_pInputs[<span style="color: #800080;">2</span>]-&gt;<span style="color: #000000;">value();
    dialog</span>-&gt;<span style="color: #000000;">hide();
    GUI</span>* gui =<span style="color: #000000;"> GUI::getInstance();
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> H,W,C;
    H </span>=<span style="color: #000000;"> atoi(m_strH.c_str());
    W </span>=<span style="color: #000000;"> atoi(m_strW.c_str());
    C </span>=<span style="color: #000000;"> atoi(m_strC.c_str());
    gui</span>-&gt;<span style="color: #000000;">setLevelSelf(H,W,C);
}
</span><span style="color: #0000ff;">void</span> DialogWindow::CancelCB(Fl_Widget*<span style="color: #000000;"> w)
{
    DialogWindow</span>* dialog =<span style="color: #000000;"> DialogWindow::getInstance();
    dialog</span>-&gt;m_pInputs[<span style="color: #800080;">0</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
    dialog</span>-&gt;m_pInputs[<span style="color: #800080;">1</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
    dialog</span>-&gt;m_pInputs[<span style="color: #800080;">2</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
    dialog</span>-&gt;<span style="color: #000000;">hide();
}</span></pre>
</div>
<p>这样运行时可以了，但是少个对输入数据的判断，接下来加个判断进去：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220225984.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-12710" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220227379.png" alt="wps_clip_image-12710" width="240" height="62" border="0" /></a></p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> DialogWindow::OkCB(Fl_Widget*<span style="color: #000000;"> w)
{
    DialogWindow</span>* dialog =<span style="color: #000000;"> DialogWindow::getInstance();
    </span><span style="color: #0000ff;">string</span> strH(dialog-&gt;m_pInputs[<span style="color: #800080;">0</span>]-&gt;<span style="color: #000000;">value());
    </span><span style="color: #0000ff;">string</span> strW(dialog-&gt;m_pInputs[<span style="color: #800080;">1</span>]-&gt;<span style="color: #000000;">value());
    </span><span style="color: #0000ff;">string</span> strC(dialog-&gt;m_pInputs[<span style="color: #800080;">2</span>]-&gt;<span style="color: #000000;">value());
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> H,W,C;
    H </span>=<span style="color: #000000;"> atoi(strH.c_str());
    W </span>=<span style="color: #000000;"> atoi(strW.c_str());
    C </span>=<span style="color: #000000;"> atoi(strC.c_str());
    </span><span style="color: #0000ff;">if</span> (H&gt;<span style="color: #800080;">20</span> || H&lt;<span style="color: #800080;">5</span> || W&gt;<span style="color: #800080;">30</span> || W&lt;<span style="color: #800080;">5</span> || C&gt;W*<span style="color: #000000;">H)
    {
        fl_alert(dialogWindowStr[</span><span style="color: #800080;">6</span><span style="color: #000000;">]);
        dialog</span>-&gt;m_pInputs[<span style="color: #800080;">0</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
        dialog</span>-&gt;m_pInputs[<span style="color: #800080;">1</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
        dialog</span>-&gt;m_pInputs[<span style="color: #800080;">2</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    dialog</span>-&gt;<span style="color: #000000;">hide();
    GUI</span>* gui =<span style="color: #000000;"> GUI::getInstance();
    gui</span>-&gt;<span style="color: #000000;">setLevelSelf(H,W,C);
    dialog</span>-&gt;m_pInputs[<span style="color: #800080;">0</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
    dialog</span>-&gt;m_pInputs[<span style="color: #800080;">1</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
    dialog</span>-&gt;m_pInputs[<span style="color: #800080;">2</span>]-&gt;value(<span style="color: #800000;">""</span><span style="color: #000000;">);
}</span></pre>
</div>
<p>调用的那个setLevelSelf()函数比setLevel()更简单：</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> GUI::setLevel(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a_level)
{
    m_level </span>=<span style="color: #000000;"> a_level;
    </span><span style="color: #0000ff;">switch</span><span style="color: #000000;">(m_level)
    {
    </span><span style="color: #0000ff;">case</span> <span style="color: #800080;">1</span><span style="color: #000000;">:
        m_minesCount </span>=<span style="color: #000000;"> initMinesCount;
        m_numberLines </span>= initLines;<span style="color: #008000;">//</span><span style="color: #008000;">行数</span>
        m_numberColumns = initColumns;<span style="color: #008000;">//</span><span style="color: #008000;">列数</span>
        <span style="color: #0000ff;">break</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">case</span> <span style="color: #800080;">2</span><span style="color: #000000;">:
        m_minesCount </span>= initMinesCount*<span style="color: #800080;">4</span><span style="color: #000000;">;
        m_numberLines </span>= initLines*<span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">行数</span>
        m_numberColumns = initColumns*<span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">列数</span>
        <span style="color: #0000ff;">break</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">case</span> <span style="color: #800080;">3</span><span style="color: #000000;">:
        m_minesCount </span>= initMinesCount*<span style="color: #800080;">8</span><span style="color: #000000;">;
        m_numberLines </span>= initLines*<span style="color: #800080;">2</span>;<span style="color: #008000;">//</span><span style="color: #008000;">行数</span>
        m_numberColumns = initColumns*<span style="color: #800080;">3</span>;<span style="color: #008000;">//</span><span style="color: #008000;">列数</span>
        <span style="color: #0000ff;">break</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">default</span><span style="color: #000000;">:
        assert(</span><span style="color: #800000;">"</span><span style="color: #800000;">a_level must be [1~3]</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    updateWindow();
}
</span><span style="color: #0000ff;">void</span> GUI::updateWindow(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
{
    m_width</span>=initBlockWidth*<span style="color: #000000;">m_numberColumns;
    m_height</span>=initBlockHeight*<span style="color: #000000;">m_numberLines;
    m_pWindow</span>-&gt;size(m_width,m_height+<span style="color: #000000;">menuBarHeight);
    m_pMenuBar</span>-&gt;<span style="color: #000000;">size(m_width,menuBarHeight);
    m_pWindow</span>-&gt;begin();<span style="color: #008000;">//</span><span style="color: #008000;">往窗体里面添加对象</span>
<span style="color: #000000;">    createGameObjects();
    m_pWindow</span>-&gt;<span style="color: #000000;">end();
    m_pWindow</span>-&gt;<span style="color: #000000;">show();
    updateMap();
}

</span><span style="color: #0000ff;">void</span> GUI::setLevelSelf(<span style="color: #0000ff;">int</span> a_H, <span style="color: #0000ff;">int</span> a_W, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_C)
{
    m_level</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
    m_minesCount </span>=<span style="color: #000000;"> a_C;
    m_numberLines </span>= a_H;<span style="color: #008000;">//</span><span style="color: #008000;">行数</span>
    m_numberColumns = a_W;<span style="color: #008000;">//</span><span style="color: #008000;">列数</span>
<span style="color: #000000;">    updateWindow();
}</span></pre>
</div>
<h2>[9.2]游戏胜利对话框，包括记录的保存</h2>
<p>由于这个操作需要在右键单击时候进行判断，所以，我在GUI类中加一个rightClick()方法:</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> GUI::rightClick(<span style="color: #0000ff;">int</span> a_line, <span style="color: #0000ff;">int</span><span style="color: #000000;"> a_colum)
{
    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (strcmp(m_grid[a_line][a_colum].getImageName(),
        imageName[markUnknow]) </span>!= <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">如果不是问号就做判断</span>
<span style="color: #000000;">    {
        </span><span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>,j=<span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">for</span> (; i&lt;m_numberLines; i++<span style="color: #000000;">)
        {
            j</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">for</span> (; j&lt;m_numberColumns; j++<span style="color: #000000;">)
            {
                </span><span style="color: #0000ff;">if</span> (strcmp(m_grid[i][j].getImageName(),imageName[mineInit]) == <span style="color: #800080;">0</span><span style="color: #000000;">)
                {</span><span style="color: #008000;">//</span><span style="color: #008000;">如果还有没标记点开或者没标记的</span>
                    <span style="color: #0000ff;">break</span><span style="color: #000000;">;
                }
                </span><span style="color: #0000ff;">if</span> (strcmp(m_grid[i][j].getImageName(),imageName[mark]) == <span style="color: #800080;">0</span>
                    &amp;&amp; !m_coreMines.isMine(i,j))<span style="color: #008000;">//</span><span style="color: #008000;">该位置被标记，且该位置不是雷</span>
<span style="color: #000000;">                {
                    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                }
                </span><span style="color: #0000ff;">if</span> (strcmp(m_grid[i][j].getImageName(),imageName[markUnknow]) == <span style="color: #800080;">0</span>)<span style="color: #008000;">//</span><span style="color: #008000;">如果有问号</span>
<span style="color: #000000;">                {
                    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;
                }
            }
            </span><span style="color: #0000ff;">if</span> (j&lt;m_numberColumns) <span style="color: #0000ff;">break</span>;<span style="color: #008000;">//</span><span style="color: #008000;">很重要的一句话，跳出双重循环</span>
<span style="color: #000000;">        }
        </span><span style="color: #0000ff;">if</span> (i==m_numberLines &amp;&amp; j==<span style="color: #000000;">m_numberColumns)
        {</span><span style="color: #008000;">//</span><span style="color: #008000;">胜利</span>
            winnerDialog();<span style="color: #008000;">//</span><span style="color: #008000;">胜利对话框</span>
<span style="color: #000000;">        }
    }
}</span></pre>
</div>
<p>这是对胜利的条件的判断，如果判断胜利了，就调用winnerDialog()方法。胜利对话框用一个输入对话框来做会简单些，设计如下：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220223999.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-13083" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220237346.png" alt="wps_clip_image-13083" width="240" height="71" border="0" /></a></p>
<p>现在我使用的是把数据保存到文件中，所以需要用来对文件的写入操作（如果使用SQLite数据库的话可能更方便后续添加网络模块）。对于这个数据保存数据半夜搞了两个小时没搞定，结果花了一上午搞定了。</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> GUI::winnerDialog(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
{
    </span><span style="color: #0000ff;">int</span> hotspot =<span style="color: #000000;"> fl_message_hotspot();
    fl_message_hotspot(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
    fl_beep(FL_BEEP_MESSAGE);
    fl_message_hotspot(hotspot);
    fl_message_title(GUIStr[</span><span style="color: #800080;">8</span><span style="color: #000000;">]);
    </span><span style="color: #0000ff;">int</span> useTime = <span style="color: #800080;">102</span>;<span style="color: #008000;">//</span><span style="color: #008000;">下一步的任务是计算时间</span>
    <span style="color: #0000ff;">char</span> name[<span style="color: #800080;">20</span>]=<span style="color: #800000;">""</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (m_level != <span style="color: #800080;">0</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>* str = fl_input(GUIStr[<span style="color: #800080;">9</span>],<span style="color: #800000;">""</span><span style="color: #000000;">,useTime);
        </span><span style="color: #0000ff;">if</span> (strlen(name)==<span style="color: #800080;">0</span><span style="color: #000000;">)
        {
            strcpy(name,GUIStr[</span><span style="color: #800080;">12</span>]);<span style="color: #008000;">//</span><span style="color: #008000;">匿名</span>
<span style="color: #000000;">        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            strcpy(name,str);
        }
    }
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
    {
        fl_message(GUIStr[</span><span style="color: #800080;">10</span><span style="color: #000000;">],useTime);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    saveRecord(useTime,name);</span><span style="color: #008000;">//</span><span style="color: #008000;">保存记录</span>
}</pre>
</div>
<p>时间相关的等下一个<span style="color: #ff0000;">时间显示</span>问题做好了再添加上去，暂时用了个常数代替</p>
<blockquote>
<p>文件格式：</p>
<p>%d\t%s</p>
<p>文件有且仅有三行</p>
</blockquote>
<p>保存文件相对来说是比较麻烦的，主要是格式问题和记录的覆盖问题，这个问题花了一上午才解决的，要记住，读文件的时候先把内容全部读出了再操作（内容较少的情况下）。</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> GUI::saveRecord(<span style="color: #0000ff;">int</span> a_useTime, <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span>*<span style="color: #000000;"> a_userName)
{
    assert(m_level</span>!=<span style="color: #800080;">0</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::ofstream;
    </span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::ifstream;
    ofstream writeFile;
    ifstream readFile;

    </span><span style="color: #008000;">//</span><span style="color: #008000;">备份</span>
    <span style="color: #0000ff;">string</span><span style="color: #000000;"> text;
    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> str;
    readFile.open(GUIStr[</span><span style="color: #800080;">11</span><span style="color: #000000;">]);
    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (getline(readFile,str))
    {
        text </span>+= str+<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    }
</span><span style="color: #008000;">//</span><span style="color: #008000;">    cout &lt;&lt;"text:"&lt;&lt; text;</span>
<span style="color: #000000;">    readFile.close();

    writeFile.open(GUIStr[</span><span style="color: #800080;">11</span><span style="color: #000000;">]);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;<span style="color: #800080;">4</span>; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> b = text.find_first_of(<span style="color: #800000;">'</span><span style="color: #800000;">\n</span><span style="color: #800000;">'</span>,<span style="color: #800080;">0</span><span style="color: #000000;">);
        str </span>= text.substr(<span style="color: #800080;">0</span><span style="color: #000000;">,b);
</span><span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt;"str:"&lt;&lt; str;</span>
        text = text.substr(b+<span style="color: #800080;">1</span>,text.length()-<span style="color: #000000;">b);
</span><span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt;"text:"&lt;&lt; text;
</span><span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; i &lt;&lt; ":" &lt;&lt; str &lt;&lt; endl;</span>
        <span style="color: #0000ff;">if</span> (i==<span style="color: #000000;">m_level)
        {
</span><span style="color: #008000;">//</span><span style="color: #008000;">            cout &lt;&lt; m_level &lt;&lt; "级:" &lt;&lt; str;</span>
            <span style="color: #0000ff;">if</span> (str.length()==<span style="color: #800080;">0</span><span style="color: #000000;">)
            {
                writeFile</span>&lt;&lt;a_useTime&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span>&lt;&lt;a_userName&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
            }
            </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
            {
                </span><span style="color: #0000ff;">int</span> index = str.find(<span style="color: #800000;">'</span><span style="color: #800000;">\t</span><span style="color: #800000;">'</span><span style="color: #000000;">);
                </span><span style="color: #0000ff;">string</span> s = str.substr(<span style="color: #800080;">0</span>,index);<span style="color: #008000;">//</span><span style="color: #008000;">记住后面的参数是num</span>
                <span style="color: #0000ff;">int</span> time =<span style="color: #000000;"> atoi(s.c_str());
</span><span style="color: #008000;">//</span><span style="color: #008000;">                cout &lt;&lt; "old:" &lt;&lt; time &lt;&lt; endl;
</span><span style="color: #008000;">//</span><span style="color: #008000;">                cout &lt;&lt; "new:" &lt;&lt; a_useTime &lt;&lt; endl;</span>
                <span style="color: #0000ff;">if</span> (time&gt;a_useTime)<span style="color: #008000;">//</span><span style="color: #008000;">更新记录</span>
<span style="color: #000000;">                {
                    writeFile</span>&lt;&lt;a_useTime&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span>&lt;&lt;a_userName&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
                }
                </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
                {
                    writeFile</span>&lt;&lt;str&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
                }
            }
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
        {
            writeFile</span>&lt;&lt;str&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
        }
    }
    writeFile.close();
}</span></pre>
</div>
<p>也可以看到上面的cout部分都加了注释，是调试的时候用的。String操作中有个要注意的地方就是取子串的时候，第二个参数是子串的长度。现在文件保存弄好了，接下来就要修改<a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220233966.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-13906" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220237313.png" alt="wps_clip_image-13906" width="240" height="78" border="0" /></a></p>
<p>这个对话框的载入记录的内容了。</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">排行榜对话框</span>
<span style="color: #0000ff;">void</span> GUI::RankingsDialog(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
{
    </span><span style="color: #0000ff;">int</span> hotspot =<span style="color: #000000;"> fl_message_hotspot();
    fl_message_hotspot(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
    fl_message_title(GUIStr[</span><span style="color: #800080;">7</span><span style="color: #000000;">]);

    </span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::ifstream;
    ifstream readFile(GUIStr[</span><span style="color: #800080;">11</span>]);<span style="color: #008000;">//</span><span style="color: #008000;">读取文件中的数据</span>
    <span style="color: #0000ff;">string</span><span style="color: #000000;"> text;
    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> str;
    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (getline(readFile,str))
    {
        text </span>+= str+<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    }
    readFile.close();
    cout </span>&lt;&lt;<span style="color: #000000;"> text;

    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> textout;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">找到str为m_level行</span>
    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;<span style="color: #800080;">3</span>; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> b = text.find_first_of(<span style="color: #800000;">'</span><span style="color: #800000;">\n</span><span style="color: #800000;">'</span>,<span style="color: #800080;">0</span><span style="color: #000000;">);
        str </span>= text.substr(<span style="color: #800080;">0</span><span style="color: #000000;">,b);
        text </span>= text.substr(b+<span style="color: #800080;">1</span>,text.length()-<span style="color: #000000;">b);
        </span><span style="color: #0000ff;">int</span> index = str.find(<span style="color: #800000;">'</span><span style="color: #800000;">\t</span><span style="color: #800000;">'</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">string</span> time = str.substr(<span style="color: #800080;">0</span>,index);<span style="color: #008000;">//</span><span style="color: #008000;">记住后面的参数是num</span>
        <span style="color: #0000ff;">string</span> name = str.substr(index+<span style="color: #800080;">1</span>,str.length()-<span style="color: #000000;">index);
        cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">time,name:</span><span style="color: #800000;">"</span> &lt;&lt; time &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span> &lt;&lt; name &lt;&lt;<span style="color: #000000;"> endl;
        textout</span>+=GUIStr[<span style="color: #800080;">13</span>+i]+time+GUIStr[<span style="color: #800080;">16</span>]+name+<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    }
</span><span style="color: #008000;">/*</span><span style="color: #008000;">        "初级：　",                //13
        "中级：　",                //14
        "高级：　",                //15
        "　秒　\t",                //16
</span><span style="color: #008000;">*/</span><span style="color: #000000;">
    fl_message(</span><span style="color: #800000;">"</span><span style="color: #800000;">%s</span><span style="color: #800000;">"</span><span style="color: #000000;">,textout.c_str());
}</span></pre>
</div>
<p>到现在，也许已经注意到了许多GUIStr[]这样的字符串数组的使用了吧，主要是为了后续的本地化。需要本地化的时候只需要修改这个数组就行了。</p>
<h2>[9.3]时间显示和雷数显示</h2>
<p>雷数量的显示分两个：剩余雷数和已经标记的雷数</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220231981.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-14033" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220239788.png" alt="wps_clip_image-14033" width="240" height="66" border="0" /></a></p>
<p>这两个显示的话比较简单，在右键事件中加入就行了。</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre>inline <span style="color: #0000ff;">void</span> TimeShowBox::setRemainMines(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a_num)
{
    </span><span style="color: #0000ff;">if</span> (a_num&lt;<span style="color: #800080;">0</span>) a_num=<span style="color: #800080;">0</span><span style="color: #000000;">;
    sprintf(m_str,TimeShowBoxStr[</span><span style="color: #800080;">0</span><span style="color: #000000;">],a_num);
    m_pBox[</span><span style="color: #800080;">0</span>]-&gt;<span style="color: #000000;">copy_label(m_str);
    m_pBox[</span><span style="color: #800080;">0</span>]-&gt;<span style="color: #000000;">redraw_label();
}

inline </span><span style="color: #0000ff;">void</span> TimeShowBox::setMarkMines(<span style="color: #0000ff;">int</span><span style="color: #000000;"> a_num)
{
    sprintf(m_str,TimeShowBoxStr[</span><span style="color: #800080;">1</span><span style="color: #000000;">],a_num);
    m_pBox[</span><span style="color: #800080;">1</span>]-&gt;<span style="color: #000000;">copy_label(m_str);
    m_pBox[</span><span style="color: #800080;">1</span>]-&gt;<span style="color: #000000;">redraw_label();
}</span></pre>
</div>
<p>关于时间的显示还是有点难度的。我有点不理解FLTK自带的那个Fl_Timer。所以我就自己弄了个全局变量控制。</p>
<p>具体怎么控制这个g_useTime呢？首先在主函数中使用</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #0000ff;">void</span> callback(<span style="color: #0000ff;">void</span>*<span style="color: #000000;">)
{
    useTime</span>++<span style="color: #000000;">;
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">time:</span><span style="color: #800000;">"</span> &lt;&lt; useTime &lt;&lt;<span style="color: #000000;"> endl;
    Fl::repeat_timeout(</span><span style="color: #800080;">1.0</span><span style="color: #000000;">, callback);
}

</span><span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
{
    GUI</span>* gui =<span style="color: #000000;"> GUI::getInstance();
    Fl::add_timeout(</span><span style="color: #800080;">1.0</span><span style="color: #000000;">, callback);
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> Fl::run();
}</span></pre>
</div>
<p>这个的作用是，useTime每秒自增一次。为了防止溢出也可以加个判断在回调函数里面的。</p>
<p>然后在GUI创建的时候置g_sseTime为0。在更新地图的时候也置g_useTime为0。</p>
<div class="cnblogs_code" style="background-color: #f5f5f5; border: #cccccc 1px solid; padding: 5px;">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">更新地图</span>
<span style="color: #0000ff;">void</span> GUI::updateMap(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
{
    g_useTime</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
    m_coreMines.initMines(m_numberLines,m_numberColumns,m_minesCount);
...
}</span></pre>
</div>
<p>为了再弹出对话框的时候使时间暂停，我加了一个变量 g_isPauseTime=false;</p>
<p>控制是否暂停。需要暂停时间的弹出的对话框有：显示排行榜对话框。</p>
<p>刚刚试了一下5X5的时候，上面的显示不好看了。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220236408.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="wps_clip_image-14360" src="http://images.cnblogs.com/cnblogs_com/hanxi/201209/201209022220249755.png" alt="wps_clip_image-14360" width="138" height="240" border="0" /></a></p>
<p>所以我改下自定义的范围。 if (H&gt;20 || H&lt;3 || W&gt;40 || W&lt;10 || C&gt;W*H)</p>
<p>{</p>
<p>" 高度(3~20) ",</p>
<p>" 宽度(10~40) ",</p>
<h1>[10]结束语</h1>
<p>终于完工了，可以发布了，洗洗睡吧！</p>
<p>FLTK中还有强大的Event功能，这个扫雷游戏中只使用的了很基础的Event功能。</p>
<p><strong>忘记了一件重要的事情：公布源代码！代码已经push到github了，想看看，想玩玩的可以去下载，图片素材用的是别人的：<a href="http://www.cnblogs.com/jacky87/archive/2010/08/03/1791395.html" target="_blank">http://www.cnblogs.com/jacky87/archive/2010/08/03/1791395.html</a>，<br />代码下载地址：<a href="https://github.com/hanxi/MineSweeping" target="_blank">https://github.com/hanxi/MineSweeping</a></strong></p>]]></description></item><item><title>windows下获取文件夹下所有文件名，并保存到文件中</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/28/2660866.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 28 Aug 2012 13:31:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/28/2660866.html</guid><description><![CDATA[<p>DIR/ON/B&gt;D:\LIST.TXT<br />DIR为列表命令，/ON为按文件名排序参数，/B为只保留文件名和扩展名参数，&gt;为将命令结果导入到指定文件内；</p>]]></description></item><item><title>【转载】C++ 定义与声明，extern，const使用</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/28/2659411.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 27 Aug 2012 16:07:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/28/2659411.html</guid><description><![CDATA[<div class="Section0" style="layout-grid: both loose 15.6pt none;">
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">原文链接：<a href="http://blog.csdn.net/hangyu628/article/details/3854487">http://blog.csdn.net/hangyu628/article/details/3854487</a></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;">&nbsp;</p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">　　变量的定义分配了变量的存储空间，并有可能赋一个初始值给变量，在程序中变量只能定义一次；&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: Arial;">(</span><span style="font-family: 宋体;">如</span><span style="font-family: Arial;">int&nbsp;i;&nbsp;</span><span style="font-family: 宋体;">或&nbsp;</span><span style="font-family: Arial;">int&nbsp;i=1;)</span><span style="font-family: 宋体;">变量的声明主要声明了变量名和变量类型，没有分配空间定义也是一种声明。当在定义一个变量时，我们指出了其名称与类型。我们不能没定义一个变量就使用</span><span style="font-family: Arial;">extern</span><span style="font-family: 宋体;">来声明它，在程序中可以声明多次。&nbsp;&nbsp;&nbsp;</span><span style="font-family: Arial;">(</span><span style="font-family: 宋体;">如</span><span style="font-family: Arial;">extern&nbsp;int&nbsp;i;&nbsp;extern&nbsp;int&nbsp;i;).</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">&nbsp;</span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">只要声明存在初始值，就被认为定义，不管是否有<span style="font-family: Arial;">extern(</span><span style="font-family: 宋体;">例：</span><span style="font-family: Arial;">extern&nbsp;int&nbsp;i=2</span><span style="font-family: 宋体;">是定义</span><span style="font-family: Arial;">)</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----<span style="font-family: 宋体;">引用自：</span><span style="font-family: Arial;">C++primer</span><span style="font-family: 宋体;">：</span></span><span style="background: #ffffff; color: #ff6600; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">还有一点全局变量默认编译器会自动为其赋值为<span style="font-family: Arial;">0</span><span style="font-family: 宋体;">，而局部变量必须手动赋值</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #ff6600; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">一、一般情况，在<span style="font-family: Arial;">a.cpp</span><span style="font-family: 宋体;">定义一个</span><span style="font-family: Arial;">t</span><span style="font-family: 宋体;">，然后在</span><span style="font-family: Arial;">a_pub.h</span><span style="font-family: 宋体;">用</span><span style="font-family: Arial;">extern</span><span style="font-family: 宋体;">声明它，在</span><span style="font-family: Arial;">b.cpp&nbsp;include&nbsp;a_pub.h</span><span style="font-family: 宋体;">使用，如下情况</span></span><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">&nbsp;</span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">1.<span style="font-family: 宋体;">第一种情况：编译出错</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;">&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">Out_pub.h       </span>
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">int</span> t=<span style="color: #800080;">1</span>;         <span style="color: #008000;">//</span><span style="color: #008000;">属于定义
</span><span style="color: #008000;">//</span><span style="color: #008000;">Out.cpp</span>
<span style="color: #0000ff;">int</span> t;                       <span style="color: #008000;">//</span><span style="color: #008000;">定义一个全局变量，默认值为0,也可以改：int t=1;
</span><span style="color: #008000;">//</span><span style="color: #008000;">test.cpp</span>
#include &lt;iostream&gt;<span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">Out_pub.h</span><span style="color: #800000;">"</span>                                            
<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    std::cout</span>&lt;&lt;t&lt;&lt;<span style="color: #000000;">std::endl;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;">&nbsp;</p>
<p>&nbsp;</p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">2.<span style="font-family: 宋体;">第二种情况：</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">上面第二个程序，<span style="font-family: Arial;">main</span><span style="font-family: 宋体;">函数内自己再定义一个</span><span style="font-family: Arial;">int&nbsp;t=3</span><span style="font-family: 宋体;">，不会出错，因为内部的定义会屏蔽外部</span><span style="font-family: Arial;">(</span><span style="font-family: 宋体;">全局</span><span style="font-family: Arial;">)</span><span style="font-family: 宋体;">的定义</span></span><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">extern<span style="font-family: 宋体;">还可以声明函数，具体用法和声明变量一样</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">Out_pub.h       </span>
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">int</span> t;              <span style="color: #008000;">//</span><span style="color: #008000;">属于声明，可以有多个声明</span>
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">int</span> t;              <span style="color: #008000;">//</span><span style="color: #008000;">多加几个也正常.
</span><span style="color: #008000;">//</span><span style="color: #008000;">Out.cpp</span>
<span style="color: #0000ff;">int</span> t;                        <span style="color: #008000;">//</span><span style="color: #008000;">定义一个全局变量，默认值为0,也可以改：int t=1;
</span><span style="color: #008000;">//</span><span style="color: #008000;">test.cpp</span>
#include &lt;iostream&gt;<span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">Out_pub.h</span><span style="color: #800000;">"</span>                                            
<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    std::cout</span>&lt;&lt;t&lt;&lt;<span style="color: #000000;">std::endl;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p>&nbsp;</p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #ff6600; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">二、也可在<span style="font-family: Arial;">a.cpp</span><span style="font-family: 宋体;">定义，直接在</span><span style="font-family: Arial;">b.cpp</span><span style="font-family: 宋体;">引用它，如下情况</span></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">Out.cpp</span>
<span style="color: #0000ff;">int</span> t;                        <span style="color: #008000;">//</span><span style="color: #008000;">定义一个全局变量，默认值为0,也可以改：int t=1;
</span><span style="color: #008000;">//</span><span style="color: #008000;">test.cpp</span>
#include &lt;iostream&gt;    
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">int</span> t;              <span style="color: #008000;">//</span><span style="color: #008000;">声明一个外部的，若改为extern int i=2; 则重定义            </span>
<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    std::cout</span>&lt;&lt;t&lt;&lt;<span style="color: #000000;">std::endl;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p><br />&nbsp;</p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #ff6600; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">三、<span style="font-family: Arial;">extern</span><span style="font-family: 宋体;">的另一个用法：用于</span><span style="font-family: Arial;">C++</span><span style="font-family: 宋体;">编译器，来编译</span><span style="font-family: Arial;">extern</span><span style="font-family: 宋体;">的</span><span style="font-family: Arial;">C</span><span style="font-family: 宋体;">函数时，出现问题的。</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">　　原因，<span style="font-family: Arial;">C++</span><span style="font-family: 宋体;">为了解决多态，会将函数名与参数合一起生成中间函数，此时若用</span><span style="font-family: Arial;">C</span><span style="font-family: 宋体;">，也生成中间函数，所以编译时会出错</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">例：</span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;">&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">Out.h</span>
#ifdef __cplusplus          <span style="color: #008000;">//</span><span style="color: #008000;">该段代码引用网上的...，     </span>
<span style="color: #0000ff;">extern</span> <span style="color: #800000;">"</span><span style="color: #800000;">C</span><span style="color: #800000;">"</span><span style="color: #000000;">{
</span><span style="color: #0000ff;">#endif</span><span style="color: #000000;">
 
#include </span>&lt;stdio.h&gt;         <span style="color: #008000;">//</span><span style="color: #008000;">若 Out.h里  直接#include &lt;stdio.h&gt; </span>
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">void</span> aa();<span style="color: #008000;">//</span><span style="color: #008000;">                                        extern void aa();
                                   </span><span style="color: #008000;">//</span><span style="color: #008000;">出错：unresolved external symbol "void __cdecl aa(void)" (?aa@@YAXXZ)，在VC6调试结果</span>
<span style="color: #000000;">#ifdef __cplusplus
}
</span><span style="color: #0000ff;">#endif</span>

<span style="color: #008000;">//</span><span style="color: #008000;">Out.c</span>
#include <span style="color: #800000;">"</span><span style="color: #800000;">Out.h</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">void</span><span style="color: #000000;"> aa()
{
   printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">aa is running</span><span style="color: #800000;">"</span><span style="color: #000000;">);
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">Test.cpp</span>
#include &lt;iostream&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">Out.h</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{ 
   aa();
   </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">&nbsp;</span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #ff6600; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">四、<span style="font-family: Arial;">const</span><span style="font-family: 宋体;">默认是局部变量，即使是在全局中申明也一样，且在定义时，必须赋予初值。若想在外部引用，必须加</span><span style="font-family: Arial;">extern</span></span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">例子：</span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;">&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">a.cpp</span>
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> a=<span style="color: #800080;">100</span><span style="color: #000000;">;
</span><span style="color: #008000;">//</span><span style="color: #008000;">b.cpp</span>
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> a;  <span style="color: #008000;">//</span><span style="color: #008000;">引用a.cpp中的</span>

 </pre>
</div>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">&nbsp;</span></p>
<p class="p0" style="background: #ffffff; text-align: left; line-height: 19.5pt; margin-top: 0pt; margin-bottom: 0pt;"><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: bold; mso-spacerun: 'yes'; mso-shading: #ffffff;">　　const&nbsp;<span style="font-family: 宋体;">之所以放于</span><span style="font-family: Arial;">head</span><span style="font-family: 宋体;">文件，且默认为局部变量：</span></span><span style="background: #ffffff; color: #333333; font-family: 'Arial'; font-size: 10.5pt; font-style: normal; font-weight: normal; mso-spacerun: 'yes'; mso-shading: #ffffff;">编译时，<span style="font-family: Arial;">const</span><span style="font-family: 宋体;">变量将被常量表达式所替代。不存储任何空间为</span><span style="font-family: Arial;">const</span><span style="font-family: 宋体;">变量。而若</span><span style="font-family: Arial;">const</span><span style="font-family: 宋体;">变量不是用常量表达式所初始化的话，则不应该定义在</span><span style="font-family: Arial;">head</span><span style="font-family: 宋体;">，而应该定义在</span><span style="font-family: Arial;">cpp</span><span style="font-family: 宋体;">，然后用</span><span style="font-family: Arial;">extern</span><span style="font-family: 宋体;">在</span><span style="font-family: Arial;">head</span><span style="font-family: 宋体;">声明</span></span></p>
<p class="p0" style="margin-top: 0pt; margin-bottom: 0pt;">&nbsp;</p>
</div>
<!--EndFragment-->]]></description></item><item><title>网站用户注册实现（VB.NET）</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/25/2656976.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 25 Aug 2012 13:51:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/25/2656976.html</guid><description><![CDATA[<p>实现结果：<a href="http://shumo.jxustsrw.cn/zhaoxin/baoming.asp">http://shumo.jxustsrw.cn/zhaoxin/baoming.asp</a></p>
<p>数据库是MSSQLServer2000</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012082521495661.jpg" alt="" /></p>]]></description></item><item><title>看了李笑来老师的《把时间当做朋友》后，我做了一个{时间-事件记录系统}</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/20/2648322.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 20 Aug 2012 15:22:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/20/2648322.html</guid><description><![CDATA[<p><span style="font-family: 幼圆; font-size: 14pt;">系统地址：<a href="http://server.8mk.org/hanxi.php">http://server.8mk.org/hanxi.php</a>&nbsp;（借宿在人家的网站下面）</span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;">　　{时间-事件记录}这个东西挺好的，{时间-事件记录}是什么，李笑来老师老师的书上说的很好了，各位有时间可以去看看《<a href="http://book.douban.com/subject/3609132/">把时间当做朋友</a>》。这书写的挺好的，下次我有空再看一遍，然后再发表读后感吧。</span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;">&nbsp;</span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;">　　简单说这东西就是用来记录每天做过的事情的东西（系统帮你把时间地址填上的，不用自己写时间地址，使用手机的话就更方便了，随时可以记录）。</span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;"><img src="http://pic002.cnblogs.com/images/2012/198486/2012082022590460.jpg" alt="" /></span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;">　　web前端开发我一点都不会，我只是会一点数据库，然后自学了点php，所以就界面难看的不得了，以后有时间我改改界面。</span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;"><img src="http://pic002.cnblogs.com/images/2012/198486/2012082023000175.jpg" alt="" /></span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;">　　我测试了使用安卓机也可以登录，但是界面太不媲美了，我起初的想法就是jtouch来写的，结果不会js，在处理表单提交和显示数据方面卡住了。所以界面就是现在这个样子了。</span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;"><img src="http://pic002.cnblogs.com/images/2012/198486/2012082023031056.jpg" alt="" /></span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;"><img src="http://pic002.cnblogs.com/images/2012/198486/2012082023043777.jpg" alt="" /></span></p>
<p><span style="font-family: 幼圆; font-size: 14pt;">　　在此我就跟大伙分享下这个吧（寝室已经熄灯了，写的有点乱，介绍的也不太清楚，请见谅）。各位读者有时间试试的可以登录试用（测试用户名：test,密码：123456&nbsp;）。如果想长期使用这个的话就留个邮箱给我吧，我单个帮你注册（由于是别人的服务器，注册的页面我弄好了，但是担心有人乱来，所以没上传）。需要源代码的也留个邮箱吧。如果有朋友愿意帮我修改外观就更好了。谢谢各位捧场。晚安！</span></p>]]></description></item><item><title>【c++模板实现】二叉查找树</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/18/2645929.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 18 Aug 2012 14:53:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/18/2645929.html</guid><description><![CDATA[<p>捣鼓了一个晚上，最后还是照着书本把这BST弄出来了。悲催的娃娃啊，不动手写这个还真的很难啊！</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('f5f40e3a-c9a3-4201-a9fe-7071036e4bc3')"><img id="code_img_closed_f5f40e3a-c9a3-4201-a9fe-7071036e4bc3" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_f5f40e3a-c9a3-4201-a9fe-7071036e4bc3" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f5f40e3a-c9a3-4201-a9fe-7071036e4bc3',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">BSTree.h</span>
<div id="cnblogs_code_open_f5f40e3a-c9a3-4201-a9fe-7071036e4bc3" class="cnblogs_code_hide">
<pre><span style="color: #008080;">  1</span> <span style="color: #000000;">#ifndef BTREE_H_
</span><span style="color: #008080;">  2</span> <span style="color: #0000ff;">#define</span> BTREE_H_
<span style="color: #008080;">  3</span> 
<span style="color: #008080;">  4</span> #include &lt;iostream&gt;
<span style="color: #008080;">  5</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::ostream;
</span><span style="color: #008080;">  6</span> 
<span style="color: #008080;">  7</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;">  8</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> BSTree
</span><span style="color: #008080;">  9</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 10</span> <span style="color: #0000ff;">private</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 11</span>     <span style="color: #0000ff;">class</span><span style="color: #000000;"> BSTNode
</span><span style="color: #008080;"> 12</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 13</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 14</span>         BSTNode*<span style="color: #000000;"> left;
</span><span style="color: #008080;"> 15</span>         BSTNode*<span style="color: #000000;"> right;
</span><span style="color: #008080;"> 16</span> <span style="color: #000000;">        TreeDataType data; BSTNode():left(NULL),right(NULL) {}
</span><span style="color: #008080;"> 17</span> <span style="color: #000000;">        BSTNode(TreeDataType a_data):data(a_data),left(NULL),right(NULL) {}
</span><span style="color: #008080;"> 18</span>     };<span style="color: #008000;">//</span><span style="color: #008000;">节点声明</span>
<span style="color: #008080;"> 19</span>     typedef BSTNode*<span style="color: #000000;"> BSTNodePointer;
</span><span style="color: #008080;"> 20</span> <span style="color: #000000;">    BSTNodePointer m_root;
</span><span style="color: #008080;"> 21</span> 
<span style="color: #008080;"> 22</span> <span style="color: #0000ff;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 23</span> <span style="color: #000000;">    BSTree():m_root(NULL) {}
</span><span style="color: #008080;"> 24</span>     ~<span style="color: #000000;">BSTree() {deleteNode(m_root);}
</span><span style="color: #008080;"> 25</span>     <span style="color: #0000ff;">bool</span> isEmpty() <span style="color: #0000ff;">const</span> {<span style="color: #0000ff;">return</span> m_root ==<span style="color: #000000;"> NULL;}
</span><span style="color: #008080;"> 26</span>     <span style="color: #0000ff;">bool</span> find(<span style="color: #0000ff;">const</span> TreeDataType&amp; a_data) <span style="color: #0000ff;">const</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 27</span>     <span style="color: #0000ff;">void</span> insert(<span style="color: #0000ff;">const</span> TreeDataType&amp;<span style="color: #000000;"> a_data) {insertAux(m_root,a_data);}
</span><span style="color: #008080;"> 28</span>     <span style="color: #0000ff;">void</span> remove(<span style="color: #0000ff;">const</span> TreeDataType&amp;<span style="color: #000000;"> a_data);
</span><span style="color: #008080;"> 29</span>     <span style="color: #0000ff;">void</span> inorder(ostream&amp; <span style="color: #0000ff;">out</span>) <span style="color: #0000ff;">const</span> {inorderAux(<span style="color: #0000ff;">out</span><span style="color: #000000;">, m_root);}
</span><span style="color: #008080;"> 30</span>     <span style="color: #0000ff;">void</span> graph(ostream&amp; <span style="color: #0000ff;">out</span>) <span style="color: #0000ff;">const</span> {graphAux(<span style="color: #0000ff;">out</span>, <span style="color: #800080;">0</span><span style="color: #000000;">, m_root);}
</span><span style="color: #008080;"> 31</span> 
<span style="color: #008080;"> 32</span> <span style="color: #0000ff;">protected</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 33</span>     <span style="color: #0000ff;">void</span> deleteNode(BSTNodePointer a_node);<span style="color: #008000;">//</span><span style="color: #008000;">删除节点和所有到子节点</span>
<span style="color: #008080;"> 34</span>     <span style="color: #0000ff;">void</span> insertAux(BSTNodePointer&amp; a_subRoot, <span style="color: #0000ff;">const</span> TreeDataType&amp;<span style="color: #000000;"> a_data);
</span><span style="color: #008080;"> 35</span>     <span style="color: #0000ff;">void</span> inorderAux(ostream&amp; <span style="color: #0000ff;">out</span>, BSTNodePointer a_subRoot) <span style="color: #0000ff;">const</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 36</span>     <span style="color: #0000ff;">void</span> graphAux(ostream&amp; <span style="color: #0000ff;">out</span>, <span style="color: #0000ff;">int</span> a_indent, BSTNodePointer a_subRoot) <span style="color: #0000ff;">const</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 37</span>     <span style="color: #0000ff;">void</span> find2(<span style="color: #0000ff;">const</span> TreeDataType&amp; a_data, <span style="color: #0000ff;">bool</span>&amp; found, BSTNodePointer&amp; a_locPtr, BSTNodePointer&amp; a_parent) <span style="color: #0000ff;">const</span><span style="color: #000000;">; 
</span><span style="color: #008080;"> 38</span> };<span style="color: #008000;">//</span><span style="color: #008000;">类模板声明结束</span>
<span style="color: #008080;"> 39</span> <span style="color: #0000ff;">#endif</span>
<span style="color: #008080;"> 40</span> 
<span style="color: #008080;"> 41</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;"> 42</span> inline <span style="color: #0000ff;">void</span> BSTree&lt;TreeDataType&gt;::deleteNode(BSTree&lt;TreeDataType&gt;<span style="color: #000000;">::BSTNodePointer a_node)
</span><span style="color: #008080;"> 43</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 44</span>     <span style="color: #0000ff;">if</span> (a_node-&gt;left !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 46</span>         deleteNode(a_node-&gt;<span style="color: #000000;">left);
</span><span style="color: #008080;"> 47</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 48</span>     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a_node-&gt;right !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 50</span>         deleteNode(a_node-&gt;<span style="color: #000000;">right);
</span><span style="color: #008080;"> 51</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 52</span>     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a_node !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 54</span> <span style="color: #000000;">        delete a_node;
</span><span style="color: #008080;"> 55</span>         a_node =<span style="color: #000000;"> NULL;
</span><span style="color: #008080;"> 56</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 58</span> 
<span style="color: #008080;"> 59</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;"> 60</span> inline <span style="color: #0000ff;">void</span> BSTree&lt;TreeDataType&gt;::insertAux(BSTree&lt;TreeDataType&gt;::BSTNodePointer&amp; a_subRoot, <span style="color: #0000ff;">const</span> TreeDataType&amp;<span style="color: #000000;"> a_data)
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 62</span>     <span style="color: #0000ff;">if</span> (a_subRoot ==<span style="color: #000000;"> NULL)
</span><span style="color: #008080;"> 63</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 64</span>         a_subRoot = <span style="color: #0000ff;">new</span> BSTree&lt;TreeDataType&gt;<span style="color: #000000;">::BSTNode(a_data);
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 66</span>     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a_data &lt; a_subRoot-&gt;<span style="color: #000000;">data)
</span><span style="color: #008080;"> 67</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 68</span>         insertAux(a_subRoot-&gt;<span style="color: #000000;">left,a_data);
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 70</span>     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a_subRoot-&gt;data &lt;<span style="color: #000000;"> a_data)
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 72</span>         insertAux(a_subRoot-&gt;<span style="color: #000000;">right,a_data);
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 74</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;"> 75</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 76</span>         std::cerr &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">a_data already in the tree!\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 79</span> 
<span style="color: #008080;"> 80</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;"> 81</span> inline <span style="color: #0000ff;">void</span> BSTree&lt;TreeDataType&gt;::inorderAux(ostream&amp; <span style="color: #0000ff;">out</span>, BSTree&lt;TreeDataType&gt;::BSTNodePointer a_subRoot) <span style="color: #0000ff;">const</span>
<span style="color: #008080;"> 82</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 83</span>     <span style="color: #0000ff;">if</span> (a_subRoot !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;"> 84</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 85</span>         inorderAux(<span style="color: #0000ff;">out</span>, a_subRoot-&gt;left);<span style="color: #008000;">//</span><span style="color: #008000;">L</span>
<span style="color: #008080;"> 86</span>         <span style="color: #0000ff;">out</span> &lt;&lt; a_subRoot-&gt;data &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span>;<span style="color: #008000;">//</span><span style="color: #008000;">V</span>
<span style="color: #008080;"> 87</span>         inorderAux(<span style="color: #0000ff;">out</span>, a_subRoot-&gt;right);<span style="color: #008000;">//</span><span style="color: #008000;">R</span>
<span style="color: #008080;"> 88</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 89</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 90</span> 
<span style="color: #008080;"> 91</span> #include &lt;iomanip&gt;
<span style="color: #008080;"> 92</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::setw;
</span><span style="color: #008080;"> 93</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;
</span><span style="color: #008080;"> 94</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;"> 95</span> inline <span style="color: #0000ff;">void</span> BSTree&lt;TreeDataType&gt;::graphAux(ostream&amp; <span style="color: #0000ff;">out</span>, <span style="color: #0000ff;">int</span> a_indent, BSTree&lt;TreeDataType&gt;::BSTNodePointer a_subRoot) <span style="color: #0000ff;">const</span>
<span style="color: #008080;"> 96</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 97</span>     <span style="color: #0000ff;">if</span> (a_subRoot !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 99</span>         graphAux(<span style="color: #0000ff;">out</span>, a_indent+<span style="color: #800080;">8</span>, a_subRoot-&gt;right);                <span style="color: #008000;">//</span><span style="color: #008000;">R</span>
<span style="color: #008080;">100</span>         <span style="color: #0000ff;">out</span> &lt;&lt; setw(a_indent) &lt;&lt; <span style="color: #800000;">"</span> <span style="color: #800000;">"</span> &lt;&lt; a_subRoot-&gt;data &lt;&lt; endl;    <span style="color: #008000;">//</span><span style="color: #008000;">V</span>
<span style="color: #008080;">101</span>         graphAux(<span style="color: #0000ff;">out</span>, a_indent+<span style="color: #800080;">8</span>, a_subRoot-&gt;left);                    <span style="color: #008000;">//</span><span style="color: #008000;">L</span>
<span style="color: #008080;">102</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">103</span> <span style="color: #000000;">}
</span><span style="color: #008080;">104</span> 
<span style="color: #008080;">105</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;">106</span> inline <span style="color: #0000ff;">bool</span> BSTree&lt;TreeDataType&gt;::find(<span style="color: #0000ff;">const</span> TreeDataType&amp; a_data) <span style="color: #0000ff;">const</span>
<span style="color: #008080;">107</span> <span style="color: #000000;">{
</span><span style="color: #008080;">108</span>     BSTree&lt;TreeDataType&gt;::BSTNodePointer locPtr =<span style="color: #000000;"> m_root;
</span><span style="color: #008080;">109</span>     <span style="color: #0000ff;">bool</span> found = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">110</span>     <span style="color: #0000ff;">while</span> (!found &amp;&amp; locPtr !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;">111</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">112</span>         <span style="color: #0000ff;">if</span> (a_data &lt; locPtr-&gt;<span style="color: #000000;">data)
</span><span style="color: #008080;">113</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">114</span>             locPtr = locPtr-&gt;<span style="color: #000000;">left;
</span><span style="color: #008080;">115</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">116</span>         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (locPtr-&gt;data &lt;<span style="color: #000000;"> a_data)
</span><span style="color: #008080;">117</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">118</span>             locPtr = locPtr-&gt;<span style="color: #000000;">right;
</span><span style="color: #008080;">119</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">120</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">121</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">122</span>             found = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">123</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">124</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">125</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> found;
</span><span style="color: #008080;">126</span> <span style="color: #000000;">}
</span><span style="color: #008080;">127</span> 
<span style="color: #008080;">128</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;">129</span> inline <span style="color: #0000ff;">void</span> BSTree&lt;TreeDataType&gt;::find2(<span style="color: #0000ff;">const</span> TreeDataType&amp; a_data, <span style="color: #0000ff;">bool</span>&amp;<span style="color: #000000;"> found, 
</span><span style="color: #008080;">130</span>                                 BSTree&lt;TreeDataType&gt;::BSTNodePointer&amp;<span style="color: #000000;"> a_locPtr,
</span><span style="color: #008080;">131</span>                                 BSTree&lt;TreeDataType&gt;::BSTNodePointer&amp; a_parent) <span style="color: #0000ff;">const</span>
<span style="color: #008080;">132</span> <span style="color: #000000;">{
</span><span style="color: #008080;">133</span>     a_locPtr =<span style="color: #000000;"> m_root;
</span><span style="color: #008080;">134</span>     a_parent =<span style="color: #000000;"> NULL;
</span><span style="color: #008080;">135</span>     found = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">136</span>     <span style="color: #0000ff;">while</span> (!found &amp;&amp; a_locPtr !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;">137</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">138</span>         <span style="color: #0000ff;">if</span> (a_data &lt; a_locPtr-&gt;<span style="color: #000000;">data)
</span><span style="color: #008080;">139</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">140</span>             a_parent =<span style="color: #000000;"> a_locPtr; 
</span><span style="color: #008080;">141</span>             a_locPtr = a_locPtr-&gt;<span style="color: #000000;">left;
</span><span style="color: #008080;">142</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">143</span>         <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (a_locPtr-&gt;data &lt;<span style="color: #000000;"> a_data)
</span><span style="color: #008080;">144</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">145</span>             a_parent =<span style="color: #000000;"> a_locPtr; 
</span><span style="color: #008080;">146</span>             a_locPtr = a_locPtr-&gt;<span style="color: #000000;">right;
</span><span style="color: #008080;">147</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">148</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">149</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">150</span>             found = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">151</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">152</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">153</span> <span style="color: #000000;">}
</span><span style="color: #008080;">154</span> 
<span style="color: #008080;">155</span> template &lt;<span style="color: #0000ff;">class</span> TreeDataType&gt;
<span style="color: #008080;">156</span> inline <span style="color: #0000ff;">void</span> BSTree&lt;TreeDataType&gt;::remove(<span style="color: #0000ff;">const</span> TreeDataType&amp;<span style="color: #000000;"> a_data)
</span><span style="color: #008080;">157</span> <span style="color: #000000;">{
</span><span style="color: #008080;">158</span>     <span style="color: #0000ff;">bool</span> found = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">159</span>     BSTree&lt;TreeDataType&gt;::BSTNodePointer x; <span style="color: #008000;">//</span><span style="color: #008000;">被删除的节点</span>
<span style="color: #008080;">160</span>     BSTree&lt;TreeDataType&gt;<span style="color: #000000;">::BSTNodePointer parent;
</span><span style="color: #008080;">161</span> <span style="color: #000000;">    find2(a_data,found,x,parent);
</span><span style="color: #008080;">162</span>     <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">found)
</span><span style="color: #008080;">163</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">164</span>         std::cerr &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">a_data is not in the tree!\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">165</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;">;
</span><span style="color: #008080;">166</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">167</span>     
<span style="color: #008080;">168</span>     <span style="color: #0000ff;">if</span> (x-&gt;left != NULL &amp;&amp; x-&gt;right != NULL)<span style="color: #008000;">//</span><span style="color: #008000;">节点有两个子女</span>
<span style="color: #008080;">169</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">170</span>         <span style="color: #008000;">//</span><span style="color: #008000;">查找x的中续后继节点及其双亲节点</span>
<span style="color: #008080;">171</span>         BSTree&lt;TreeDataType&gt;::BSTNodePointer xSucc = x-&gt;<span style="color: #000000;">right;
</span><span style="color: #008080;">172</span>         parent =<span style="color: #000000;"> x;
</span><span style="color: #008080;">173</span>         <span style="color: #0000ff;">while</span> (xSucc-&gt;left !=<span style="color: #000000;"> NULL)
</span><span style="color: #008080;">174</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">175</span>             parent =<span style="color: #000000;"> xSucc;
</span><span style="color: #008080;">176</span>             xSucc = xSucc-&gt;<span style="color: #000000;">left;
</span><span style="color: #008080;">177</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">178</span>         x-&gt;data = xSucc-&gt;<span style="color: #000000;">data;
</span><span style="color: #008080;">179</span>         x =<span style="color: #000000;"> xSucc;
</span><span style="color: #008080;">180</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">181</span>     BSTree&lt;TreeDataType&gt;::BSTNodePointer subTree = x-&gt;<span style="color: #000000;">left;
</span><span style="color: #008080;">182</span>     <span style="color: #0000ff;">if</span> (subTree ==<span style="color: #000000;"> NULL)
</span><span style="color: #008080;">183</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">184</span>         subTree = x-&gt;<span style="color: #000000;">right;
</span><span style="color: #008080;">185</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">186</span>     <span style="color: #0000ff;">if</span> (parent ==<span style="color: #000000;"> NULL)
</span><span style="color: #008080;">187</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">188</span>         m_root =<span style="color: #000000;"> subTree;
</span><span style="color: #008080;">189</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">190</span>     <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (parent-&gt;left ==<span style="color: #000000;"> x)
</span><span style="color: #008080;">191</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">192</span>         parent-&gt;left =<span style="color: #000000;"> subTree;
</span><span style="color: #008080;">193</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">194</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">195</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">196</span>         parent-&gt;right =<span style="color: #000000;"> subTree;
</span><span style="color: #008080;">197</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">198</span> <span style="color: #000000;">    delete x;
</span><span style="color: #008080;">199</span> }</pre>
</div>
</div>
<p>测试下结果</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('6fdf5f40-03c2-4504-b37d-130a2cdd2df7')"><img id="code_img_closed_6fdf5f40-03c2-4504-b37d-130a2cdd2df7" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_6fdf5f40-03c2-4504-b37d-130a2cdd2df7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('6fdf5f40-03c2-4504-b37d-130a2cdd2df7',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">test.cpp</span>
<div id="cnblogs_code_open_6fdf5f40-03c2-4504-b37d-130a2cdd2df7" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> #include <span style="color: #800000;">"</span><span style="color: #800000;">BSTree.h</span><span style="color: #800000;">"</span>
<span style="color: #008080;"> 2</span> #include &lt;cstdlib&gt;
<span style="color: #008080;"> 3</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 5</span> 
<span style="color: #008080;"> 6</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 8</span>     BSTree&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> intBST;
</span><span style="color: #008080;"> 9</span>     cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">Constructing empty BST\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">10</span>     cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">BST </span><span style="color: #800000;">"</span> &lt;&lt; (intBST.isEmpty()?<span style="color: #800000;">"</span><span style="color: #800000;">is</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">is not</span><span style="color: #800000;">"</span>) &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">empty\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> number;
</span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">for</span><span style="color: #000000;"> (;;)
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">15</span>         cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">Item to insert (-999 to stop):</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">16</span>         cin &gt;&gt;<span style="color: #000000;"> number;
</span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">if</span> (number == -<span style="color: #800080;">999</span>) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">18</span> <span style="color: #000000;">        intBST.insert(number);
</span><span style="color: #008080;">19</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    intBST.inorder(cout);
</span><span style="color: #008080;">21</span>     cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">22</span> <span style="color: #000000;">    intBST.graph(cout);
</span><span style="color: #008080;">23</span>     
<span style="color: #008080;">24</span>     <span style="color: #008000;">//</span><span style="color: #008000;">测试find</span>
<span style="color: #008080;">25</span>     <span style="color: #0000ff;">for</span><span style="color: #000000;"> (;;)
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">27</span>         cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">Item to find (-999 to stop):</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">28</span>         cin &gt;&gt;<span style="color: #000000;"> number;
</span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">if</span> (number == -<span style="color: #800080;">999</span>) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">30</span>         <span style="color: #0000ff;">bool</span> found =<span style="color: #000000;"> intBST.find(number);
</span><span style="color: #008080;">31</span>         cout &lt;&lt; boolalpha &lt;&lt; found &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">32</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">33</span>     
<span style="color: #008080;">34</span>     <span style="color: #008000;">//</span><span style="color: #008000;">测试remove</span>
<span style="color: #008080;">35</span>     <span style="color: #0000ff;">for</span><span style="color: #000000;"> (;;)
</span><span style="color: #008080;">36</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">37</span>         cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">Item to remove (-999 to stop):</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">38</span>         cin &gt;&gt;<span style="color: #000000;"> number;
</span><span style="color: #008080;">39</span>         <span style="color: #0000ff;">if</span> (number == -<span style="color: #800080;">999</span>) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">40</span> <span style="color: #000000;">        intBST.remove(number);
</span><span style="color: #008080;">41</span>         cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">42</span> <span style="color: #000000;">        intBST.graph(cout);
</span><span style="color: #008080;">43</span>         cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">44</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">45</span> <span style="color: #000000;">    intBST.inorder(cout);
</span><span style="color: #008080;">46</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">47</span> }</pre>
</div>
</div>]]></description></item><item><title>回顾内存区：C语言C++的内存区是一样的。</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/03/2622253.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 03 Aug 2012 12:56:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/03/2622253.html</guid><description><![CDATA[<p class="p0">◎回顾内存区：<span style="font-family: 'Times New Roman';">C</span><span style="font-family: 宋体;">语言</span><span style="font-family: 'Times New Roman';">C++</span><span style="font-family: 宋体;">的内存区是一样的。</span><br />共五个区：栈区，堆区，全局区，代码区，文字常量区</p>
<p class="p0">把握内存的开辟时间和销毁时间，就能掌握这五个区的要点</p>
<p class="p0">&nbsp;</p>
<p class="p0">编辑&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: 'Times New Roman';">==</span><span style="font-family: 宋体;">》&nbsp;&nbsp;&nbsp;&nbsp;编译&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'Times New Roman';">==</span><span style="font-family: 宋体;">》&nbsp;&nbsp;&nbsp;&nbsp;连接&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'Times New Roman';">==</span><span style="font-family: 宋体;">》&nbsp;&nbsp;&nbsp;&nbsp;运行</span></p>
<p class="p0">敲代码&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;语法检查&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;库文件</p>
<p class="p0">＃栈区<span style="font-family: 'Times New Roman';">statck</span></p>
<p class="p0">运行到时开辟，所在函数结束（即作用域结束）时销毁</p>
<p class="p0">如：</p>
<p class="p0">void&nbsp;foo(int&nbsp;arg)</p>
<p class="p0">{</p>
<p class="p0">int&nbsp;LocalVar;</p>
<p class="p0">if&nbsp;&nbsp;(100&nbsp;==&nbsp;arg&nbsp;)</p>
<p class="p0">{</p>
<p class="p0">int&nbsp;var;</p>
<p class="p0">}</p>
<p class="p0">}</p>
<p class="p0">实际上代码为</p>
<p class="p0">void&nbsp;foo(auto&nbsp;int&nbsp;arg)</p>
<p class="p0">{</p>
<p class="p0">	auto&nbsp;int&nbsp;LocalVar;</p>
<p class="p0">	if&nbsp;&nbsp;(100&nbsp;==&nbsp;arg&nbsp;)</p>
<p class="p0">	{</p>
<p class="p0">		auto&nbsp;int&nbsp;var;</p>
<p class="p0">	}</p>
<p class="p0">}</p>
<p class="p0">因为<span style="font-family: 'Times New Roman';">auto</span><span style="font-family: 宋体;">一般都是不用写的。只有形式参数和局部变量可以定义为</span><span style="font-family: 'Times New Roman';">auto</span><span style="font-family: 宋体;">变量。</span>全局变量之前不能加<span style="font-family: 'Times New Roman';">auto</span>，编译器也不会自动给全局变量加<span style="font-family: 'Times New Roman';">auto</span><span style="font-family: 宋体;">。</span></p>
<p class="p0">arg,LocalVal,var<span style="font-family: 宋体;">都在栈区，局部变量</span></p>
<p class="p0">内存不由程序员回收，由编译器自动回收。</p>
<p class="p0">&nbsp;</p>
<p class="p0">＃堆区<span style="font-family: 'Times New Roman';">heap</span></p>
<p class="p0">调用<span style="font-family: 'Times New Roman';">malloc</span><span style="font-family: 宋体;">和</span><span style="font-family: 'Times New Roman';">calloc</span><span style="font-family: 宋体;">时开辟，</span><span style="font-family: 'Times New Roman';">free()</span><span style="font-family: 宋体;">时销毁，堆区的内存必须手动回收。</span></p>
<p class="p0">int&nbsp;main()</p>
<p class="p0">{</p>
<p class="p0">	int*&nbsp;p&nbsp;=&nbsp;(int*)malloc;//p<span style="font-family: 宋体;">在栈区</span><span style="font-family: 'Times New Roman';">,</span><span style="font-family: 宋体;">但是</span><span style="font-family: 'Times New Roman';">p</span><span style="font-family: 宋体;">所指向的内存是堆区</span></p>
<p class="p0">	free(p);</p>
<p class="p0">	return&nbsp;0;</p>
<p class="p0">}</p>
<p class="p0">C++<span style="font-family: 宋体;">中用</span><span style="font-family: 'Times New Roman';">new</span><span style="font-family: 宋体;">和</span><span style="font-family: 'Times New Roman';">delete</span><span style="font-family: 宋体;">。</span></p>
<p class="p0">&nbsp;</p>
<p class="p0">＃全局区</p>
<p class="p0">编译时（<span style="font-family: 'Times New Roman';">main</span><span style="font-family: 宋体;">函数执行之前）开辟，并自动初始化。</span><span style="font-family: 'Times New Roman';">main()</span><span style="font-family: 宋体;">函数结束时销毁。在函数内部定义时，在变量类型前加</span><span style="font-family: 'Times New Roman';">static</span><span style="font-family: 宋体;">关键字。</span></p>
<p class="p0">int&nbsp;foo()</p>
<p class="p0">{</p>
<p class="p0">	static&nbsp;int&nbsp;var;</p>
<p class="p0">var++;</p>
<p class="p0">}</p>
<p class="p0">&nbsp;</p>
<p class="p0">int&nbsp;main()</p>
<p class="p0">{</p>
<p class="p0">	foo();</p>
<p class="p0">	foo();</p>
<p class="p0">	return&nbsp;0;</p>
<p class="p0">}</p>
<p class="p0">foo()<span style="font-family: 宋体;">函数执行时不会执行</span><span style="font-family: 'Times New Roman';">static&nbsp;int&nbsp;var;</span><span style="font-family: 宋体;">这条语句。因为它是在编译时执行的。</span></p>
<p class="p0">全局变量无论前面是否加<span style="font-family: 'Times New Roman';">static</span><span style="font-family: 宋体;">都是在全局区的。</span></p>
<p class="p0">全局变量之前加<span style="font-family: 'Times New Roman';">static</span><span style="font-family: 宋体;">变量和不加</span><span style="font-family: 'Times New Roman';">static</span><span style="font-family: 宋体;">变量有什么区别？通过使用编译器写测试代码查看区别：</span></p>
<p class="p0">作用域不同，加了<span style="font-family: 'Times New Roman';">static</span><span style="font-family: 宋体;">后，全局变量的作用域限定在本文件内部，不允许使用</span><span style="font-family: 'Times New Roman';">extern</span><span style="font-family: 宋体;">关键字扩展到其他文件内部。但是没加</span><span style="font-family: 'Times New Roman';">static</span><span style="font-family: 宋体;">的全局变量可以被扩展到其他文件。</span></p>
<p class="p0">extern<span style="font-family: 宋体;">只能用于扩展非静态的全局变量。</span></p>
<p class="p0">＃代码区</p>
<p class="p0">函数本身是在代码区。</p>
<p class="p0">&nbsp;</p>
<p class="p0">void&nbsp;foo(void)</p>
<p class="p0">{</p>
<p class="p0">}</p>
<p class="p0">int&nbsp;main(void)</p>
<p class="p0">{</p>
<p class="p0">	void&nbsp;(*pFn)()&nbsp;=&nbsp;foo;//foo<span style="font-family: 宋体;">是地址常量</span></p>
<p class="p0">	foo();</p>
<p class="p0">	pFn();</p>
<p class="p0">	printf("%x\n",foo);</p>
<p class="p0">&nbsp;</p>
<p class="p0">	return&nbsp;0;</p>
<p class="p0">&nbsp;</p>
<p class="p0">}</p>
<p class="p0">&nbsp;</p>
<p class="p0">&nbsp;</p>
<p class="p0">＃文字常量区</p>
<p class="p0">字面值在文字常量区。</p>
<p class="p0">int&nbsp;foo()</p>
<p class="p0">{</p>
<p class="p0">	printf("%d",100);</p>
<p class="p0">}</p>
<p class="p0">&nbsp;</p>
<p class="p0">int&nbsp;foo()</p>
<p class="p0">{</p>
<p class="p0">	printf("%d",100);//100<span style="font-family: 宋体;">在文字常量区</span></p>
<p class="p0">	char&nbsp;arr[]&nbsp;=&nbsp;"boy";//boy<span style="font-family: 宋体;">在栈区</span></p>
<p class="p0">	char*p&nbsp;=&nbsp;"girl";//girl<span style="font-family: 宋体;">在文字常量区</span></p>
<p class="p0">	//*p&nbsp;=&nbsp;'h';//<span style="font-family: 宋体;">错误，文字常量区不能改写内容，运行时才报错&ldquo;该内存不能写&rdquo;</span></p>
<p class="p0">	arr[0]&nbsp;=&nbsp;'m';//<span style="font-family: 宋体;">可以修改，因为在栈区</span></p>
<p class="p0">	*arr&nbsp;=&nbsp;'k';</p>
<p class="p0">}</p>
<p class="p0">&nbsp;</p>
<p class="p0">总结：栈的大小小的多；堆区的内存多的多，而且可以使用虚拟内存，会调用硬盘存储。除了文字常量区的内存不能写之外，其他内存区都可以写。</p>]]></description></item><item><title>汉诺塔问题的求解</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/03/2622166.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 03 Aug 2012 11:26:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/03/2622166.html</guid><description><![CDATA[<p>设三个盘子分别为A,B,C;</p>
<p>递归方法很简单，当盘子个数为1时，就可以直接将A上的盘子放到C盘。</p>
<p>如果A上的盘子数为n,则首先将上面的n-1个盘子移到B盘，借助C盘为暂放处；</p>
<p>然后将A上的一个盘子移到C盘；</p>
<p>然后将B上的n-1个盘子移到C盘，借助A盘为暂放处。</p>
<p>&nbsp;</p>
<p>代码如下：</p>
<div class="cnblogs_code">
<pre>#include &lt;iostream&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">void</span> move (<span style="color: #0000ff;">int</span> a_n, <span style="color: #0000ff;">int</span>&amp; o_countNum, <span style="color: #0000ff;">char</span> a_A, <span style="color: #0000ff;">char</span> a_B, <span style="color: #0000ff;">char</span><span style="color: #000000;"> a_C);

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">char</span> A = <span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> B = <span style="color: #800000;">'</span><span style="color: #800000;">B</span><span style="color: #800000;">'</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">char</span> C = <span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">int</span> countNum = <span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n;
    cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">====汉诺塔(Hanoi)问题求解====\n</span><span style="color: #800000;">"</span>
         &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">请输入盘子个数(输入-1退出)：</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    cin </span>&gt;&gt;<span style="color: #000000;"> n;
    </span><span style="color: #0000ff;">while</span> (n != -<span style="color: #800080;">1</span><span style="color: #000000;">)
    {
        move(n,countNum,A,B,C);
        cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">请输入盘子个数(输入-1退出)：</span><span style="color: #800000;">"</span><span style="color: #000000;">;
        cin </span>&gt;&gt;<span style="color: #000000;"> n;
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}

</span><span style="color: #0000ff;">void</span> move (<span style="color: #0000ff;">int</span> a_n, <span style="color: #0000ff;">int</span>&amp; o_countNum, <span style="color: #0000ff;">char</span> a_A, <span style="color: #0000ff;">char</span> a_B, <span style="color: #0000ff;">char</span><span style="color: #000000;"> a_C)
{
    </span><span style="color: #0000ff;">if</span> (<span style="color: #800080;">1</span> ==<span style="color: #000000;"> a_n)
    {
        o_countNum</span>++<span style="color: #000000;">;
        cout </span>&lt;&lt; o_countNum &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;"> : 将最上面的盘子从</span><span style="color: #800000;">"</span> &lt;&lt; a_A &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">移动到</span><span style="color: #800000;">"</span> &lt;&lt; a_C &lt;&lt;<span style="color: #000000;"> endl;
    }
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
    {
        move(a_n</span>-<span style="color: #800080;">1</span><span style="color: #000000;">, o_countNum, a_A,a_C,a_B);
        move(</span><span style="color: #800080;">1</span><span style="color: #000000;">, o_countNum, a_A,a_B,a_C);
        move(a_n</span>-<span style="color: #800080;">1</span><span style="color: #000000;">, o_countNum, a_B,a_A,a_C);
    }
}</span></pre>
</div>]]></description></item><item><title>关于实训的那点事儿</title><link>http://www.cnblogs.com/hanxi/archive/2012/08/01/2617648.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 31 Jul 2012 23:51:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/08/01/2617648.html</guid><description><![CDATA[<p><strong><span style="font-family: 楷体; font-size: 16px;"> 　　本来不打算发表关于实训的文章的，但是看了<a href="http://www.cnblogs.com/karotte/archive/2012/07/31/2616643.html">《吐槽重庆中软实训》</a>这篇文章后，我觉得是该发表下我的观点了。</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">	　　</span></strong></p>
<p><strong><span style="font-family: 楷体; font-size: 16px;">　　上学期末，也就是我大三下学期最后一个月（7月份左右）。我专业62人都被弄到南昌中兴培训了一个月。和<a href="http://www.cnblogs.com/karotte/archive/2012/07/31/2616643.html">karottc</a>说的情况差不多，学校本来说是去学Java的，可是到那里才发现学的是C++。老师给的说法是之前领导之间的商量出了误差（看样子领导不懂什么是C++，什么是Java吧）。</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">	　　</span></strong></p>
<p><strong><span style="font-family: 楷体; font-size: 16px;">　　实训过程中，老师讲的东西确实是学校老师没有讲的东西，但还是有好多人在那里打酱油的（他们的说法是：我是来学Java的，搞什么C++啊，不学）。诚然，C++是比Java难学（是指难入门，希望有语言之争的网友们看清楚，这观点是公认的），可是再怎么样你也别上课玩植物大战僵尸、纸牌等单机游戏吧（前期上课是没网的，后期有了网更疯狂的都有）。一是学校花了钱给你来学东西咱也别浪费自己交给学校的学费啊（学费可是5k+/年）！二是现在IT行业技术更新的快，有平台（平台有点老，VC6.0）给你学就学吧。</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">	　　</span></strong></p>
<p><strong><span style="font-family: 楷体; font-size: 16px;">　　同样的，因为跟学分有牵制，在那里实训的我们同样是服从安排的。在那里培训学到的东西不多，但终究是学到了点东西的。我跟<strong><span><a href="http://www.cnblogs.com/karotte/archive/2012/07/31/2616643.html">karottc</a></span></strong>不同的观点是：</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">	　　1、 不管学什么，只要去学总能学到东西的；</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">	　　2、 学的东西跟自己想学的东西不一样也没关系，好好学吧，知识是相通的；</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">	　　3、 不要抱怨学校或培训机构（指负责任的培训机构），他们给你的仅仅是一个平台，具体怎么发展靠自己；</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">	　　4、 软件工程的思想最重要，不论做什么项目，咱做软件的都知道，软件工程的几个步骤和模型是摆在那里的。所以说不要有语言歧视（用词不当，想要表达的意思是不要专学某种语言）。</span></strong><br /><strong><span style="font-family: 楷体; font-size: 16px;">　　【注】 也许还有东西没想到，都过去一个多月了，就写到这里吧。读者看到了有意见也发表下吧。支持就点支持，反对就点反对吧（文章右下角）。{博客园排版有点吃力，希望能改进！}</span></strong></p>
<p><strong><span style="font-family: 楷体; font-size: 16px;">	　　</span></strong></p>
<p><strong><span style="font-family: 楷体; font-size: 16px;">　　现在说下我在南昌中兴培训都学到了什么东西吧，我把我在那里写的培训感言贴出来给大家共享下。（写培训感言的时候，先写电子稿，然后抄手写稿，我专业里有人说纸张不够，电子稿都写了几页纸，看样子意见比<strong><span><a href="http://www.cnblogs.com/karotte/archive/2012/07/31/2616643.html">karottc</a></span></strong>还多。）</span></strong></p>
<p style="text-align: center;">==========优美的分割线===========</p>
<div class="Section0">
<h3 style="text-align: center;"><span style="font-family: 黑体;">南昌中兴培训总结</span></h3>
<p class="p0"><span style="font-size: 15px;"><strong><span style="font-family: 幼圆;">　　感谢学校给予我这个机会来到南昌中兴软件培训，感谢郭老师的辛勤教导。在这里我不仅学到了技术上的知识，而且还学到了许多工作中需要掌握的本领。</span></strong></span></p>
<p class="p0"><span style="font-size: 15px;"><strong><span style="font-family: 幼圆;">　　首先，在这里学会了C语言中最难的一个知识点&mdash;指针。在学校里，虽然知道一点点指针的东西，但是从来没有这么深的理清楚指针的用法。一个主要的原因可能就是在学校里没有搞清楚C语言中内存是怎么分配的。在这里，郭老师讲的非常的详细，把C语言中5个内存区都做了详细的讲解。</span></strong></span></p>
<p class="p0"><span style="font-size: 15px;"><strong><span style="font-family: 幼圆;">　　其次，郭老师讲了软件工程课上没有讲的需求分析文档和概要设计文档的书写。并且教会了我画用例图和类图。之前我自学过用StarUML画类图，但是没有郭老师的教导，我还画不出个像样的类图。郭老师讲了6个类之间的关系：关联、聚合、组合、依赖、泛化、实现。并结合着类图和代码一起讲解，使我更加深刻的领会了面向对象的思想。郭老师还讲解了设计模式中的创建型模式，包括简单工厂模式，工厂模式，抽象工厂模式，单例模式。</span></strong></span></p>
<p class="p0"><span style="font-size: 15px;"><strong><span style="font-family: 幼圆;">　　再次，郭老师还结合两个实际项目（通讯录软件和画图软件）进行教授。中间贯穿着链表的许多知识。在编写代码的过程中，郭老师还教会了许多代码规范。通过画图软件的制作，教会了我Windows的GDI程序编程。培训中期还请来了杨老师讲解一节非常有用的课&mdash;程序员之路，这让我对程序员有了一个更深一层次的了解，未来的路也变得更加明确。</span></strong></span></p>
<p class="p0"><span style="font-size: 15px;"><strong><span style="font-family: 幼圆;">　　最后，在这里不仅仅是学习C++，这里有早锻炼，有晚自习，每天都很充实。有拔河比赛，有篮球比赛，有端午联欢会，有汉丽轩烤肉等活动，这使得学习更加轻松。再次感谢这里的老师们的辛勤教导，谢谢！</span></strong></span></p>

</div>
<p style="text-align: center;">===========优美的分割线=============</p>
<p style="text-align: left;">　　<strong><span style="font-family: 楷体; font-size: 16px;">我同样给个链接吧，<a href="http://www.cnblogs.com/hanxi/archive/2012/06/30/2570475.html">软件开发笔记</a>。这是我参加培训的笔记，只上传1天的笔记。</span></strong></p>]]></description></item><item><title>【转载】解决git Push时请求username和password，而不是ssh-key验证</title><link>http://www.cnblogs.com/hanxi/archive/2012/07/31/2616628.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 31 Jul 2012 04:20:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/07/31/2616628.html</guid><description><![CDATA[<p>转载自：<a href="https://blog.lowstz.org/posts/2011/11/23/why-git-push-require-username-password-github/">https://blog.lowstz.org/posts/2011/11/23/why-git-push-require-username-password-github/</a></p>
<p>之前开始用github时是在ubuntu下按着<a href="http://help.github.com/linux-set-up-git/" target="_blank">官方的新手指南</a>搞定的。但最近一直在用fedora，所以也想在fedora下用github，配置的时候很顺利，就是在git push的每次都需要输入username和password，而我是配置好公钥登陆的。用ssh -T git@github.com 也是成功用公钥登陆的。</p>
<p>查看了下~/.gitconfig，发现和ubuntu下的一样，google看到一篇<a href="http://www.cppblog.com/deercoder/archive/2011/11/13/160050.html" target="_blank">《GitHub使用简介》</a>，里面说了git push的两种方式，SSH方式和HTTPS方式。</p>
<p><a href="https://blog.lowstz.org/images/uploads/2011/11/git-ssh.png"><img class="aligncenter size-full wp-image-311" title="git-ssh" src="https://blog.lowstz.org/images/uploads/2011/11/git-ssh.png" alt="git-ssh" width="679" height="59" /></a><a href="https://blog.lowstz.org/images/uploads/2011/11/git-https.png"><img class="aligncenter size-full wp-image-312" title="git-https" src="https://blog.lowstz.org/images/uploads/2011/11/git-https.png" alt="git-https" width="688" height="58" /></a>在版本库的SSH方式和HTTPS方式是不同的，具体来说就是url信息的不同，但是，实际的认证机制也是不同的。当建立了本机密钥之后，使用ssh方式实际上是不需要再次认证的，而https则每次需要输入密码 。<a href="http://help.github.com/ssh-key-passphrases/" target="_blank">《Help.GitHub - SSH key passphrases》</a>里也说了用SSH更方便更安全，不需要去输入长长的密码。</p>
<p>我去看了下repo目录下的.git/config，果然，我的url是HTTPS形式。</p>
<div class="highlight">
<table>
<tbody>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre>
</td>
<td class="code">
<pre><code><span class="line">[remote "origin"]
</span><span class="line">fetch = + refs/heads/*:refs/remotes/origin/*
</span><span class="line">url = https://username@github.com/username/projectname.git</span></code></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p>因为远程版本库的url是HTTPS，估计是我git clone的时候用HTTPS链接造成的</p>
<p>所以问题就出在这了，每次都很不方便，都要输入用户名和密码。</p>
<p>为了使用SSH公钥的方式认证，我把config的url改成下面这样</p>
<div class="highlight">
<table>
<tbody>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre>
</td>
<td class="code">
<pre><code><span class="line">[remote "origin"]
</span><span class="line">fetch = + refs/heads/*:refs/remotes/origin/*
</span><span class="line">url = git@github.com:username/projectname.git</span></code></pre>
</td>
</tr>
</tbody>
</table>
</div>
<p>这样我git push的时候又可以用SSH公钥认证而不用去输入用户名和密码，不仅方便，而且更安全。</p>]]></description></item><item><title>【转载】git/github初级运用自如</title><link>http://www.cnblogs.com/hanxi/archive/2012/07/31/2616435.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 31 Jul 2012 02:54:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/07/31/2616435.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span><strong>转载自：<a href="http://www.cnblogs.com/fnng/archive/2012/01/07/2315685.html">http://www.cnblogs.com/fnng/archive/2012/01/07/2315685.html</a></strong></span></pre>
</div>
<p class="p0"><span><strong>一&nbsp;.&nbsp; github<span>上创建立一个项目</span></strong></span></p>
<p class="p0">用户登录后系统，在github<span>首页，点击页面右下角</span><span>&ldquo;New&nbsp;Repository&rdquo;</span></p>
<p class="p0">填写项目信息：</p>
<p class="p0"><strong>project&nbsp;name</strong>:&nbsp;hibernate-demo&nbsp;&nbsp;</p>
<p class="p0"><strong>description&nbsp;</strong>:&nbsp;my&nbsp;first&nbsp;project</p>
<p class="p0">点击<span>&ldquo;<strong>Create&nbsp;Repository</strong>&rdquo;&nbsp;</span><span>；&nbsp;现在完成了一个项目在</span><span>github</span><span>上的创建。</span></p>
<p class="p0">说明：我们创建的是一个<span>github</span><span>仓库，一个仓库里只能存放（或叫对应）一个项目。</span></p>
<p class="p0">当你创建完成一个仓库的之后，<span>github</span><span>已经给你一个提示：当你看完了我的文章再来看这个提示就非常清楚了。</span></p>
<p class="p0">&nbsp;</p>
<div class="cnblogs_code">
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码" href="http://www.cnblogs.com/fnng/archive/2012/01/07/2315685.html"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" /></a></span></div>
<pre><strong>Global setup:</strong><br />&nbsp;Set up git<br />&nbsp; git config --global user.name "Your Name"<br />&nbsp; git config --global user.email defnngj@gmail.com<br />&nbsp; &nbsp; &nbsp;&nbsp;<br /><strong>Next steps:</strong><br />&nbsp; mkdir hibernaet-demo2<br />&nbsp; cd hibernaet-demo2<br />&nbsp; git init<br />&nbsp; touch README<br />&nbsp; git add README<br />&nbsp; git commit -m 'first commit'<br />&nbsp; git remote add origin git@github.com:defnngj/hibernaet-demo2.git<br />&nbsp; git push -u origin master</pre>
<pre><br /><strong>Existing Git Repo?</strong><br />&nbsp; cd existing_git_repo<br />&nbsp; git remote add origin git@github.com:defnngj/hibernaet-demo2.git<br />&nbsp; git push -u origin master</pre>
<pre><br /><strong>Importing a Subversion Repo?</strong><br />&nbsp; Click here&nbsp;<br />When you're done:<br />&nbsp; Continue</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码" href="http://www.cnblogs.com/fnng/archive/2012/01/07/2315685.html"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" /></a></span></div>
</div>
<p class="p0">&nbsp;</p>
<p class="p0">&nbsp;</p>
<p class="p0"><span><strong>二&nbsp; .&nbsp; 创建密钥</strong></span></p>
<p class="p0">我们如何让本地<span>git</span><span>项目与远程的</span><span>github</span><span>建立联系呢？之里就用的密钥。通俗点叫口令吧！（天王盖地老，宝塔镇河妖。。）</span></p>
<p class="p0">&nbsp;</p>
<div class="cnblogs_code">
<pre>$ cd ~/. ssh 检查本机的ssh密钥</pre>
</div>
<p class="p0">如果提示：No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory&nbsp;<span>说明你是第一次使用</span><span>git</span>。</p>
<p class="p0">如果不是第一次使用，请执行下面的操作<span>,</span><span>清理原有</span><span>ssh</span><span>密钥</span>。</p>
<div class="cnblogs_code">
<pre> $ mkdir key_backup<br /> $ cp id_rsa* key_backup<br /> $ rm id_rsa*</pre>
</div>
<p class="p19">生成新的密钥：</p>
<div class="cnblogs_code">
<pre>Ssh-keygen &ndash;t rsa &ndash;C &ldquo;defnngj@gmai.com&rdquo; </pre>
</div>
<p class="p19">&nbsp;</p>
<p class="p0"><strong>注意:&nbsp;</strong>此处的邮箱地址，你可以输入自己的邮箱地址。在回车中会提示你输入一个密码，这个密码会在你提交项目时使用，如果为空的话提交项目时则不用输入。这个设置是防止别人往你的项目里提交内容。</p>
<p class="p0">&nbsp;</p>
<p class="p0">打开本地<span>C:\Documents&nbsp;and&nbsp;Settings\Administrator\.ssh\id_rsa.pub</span><span>文件。此文件里面内容为刚才生成人密钥。</span></p>
<p class="p0">登陆<span>github</span><span>系统。点击右上角的</span>&nbsp;<a href="https://github.com/account">Account&nbsp;Settings</a>---&gt;SSH&nbsp;Public&nbsp;keys&nbsp;---&gt;&nbsp;add&nbsp;another&nbsp;public&nbsp;keys</p>
<p class="p0">把你本地生成的密钥复制到里面（<span>key</span><span>文本框中），</span><span>&nbsp;</span><span>点击&nbsp;</span><span>add&nbsp;key&nbsp;</span><span>就</span><span>ok</span><span>了</span></p>
<p class="p0">在<span>git</span><span>中运行下面命令：</span></p>
<p class="p0">&nbsp;</p>
<div class="cnblogs_code">
<pre>$ git &ndash;T git@github.com</pre>
</div>
<p class="p0">如果提示：Hi&nbsp;defnngj&nbsp;You've&nbsp;successfully&nbsp;authenticated,&nbsp;but&nbsp;GitHub&nbsp;does&nbsp;not&nbsp;provide&nbsp;shell&nbsp;access.&nbsp;<span>说明你连接成功了</span>。</p>
<p class="p0">&nbsp;</p>
<p class="p0"><span><strong>三 . 设置用户信息</strong></span></p>
<p class="p0">这一步不是很重要，貌似不设置也行，但<span>github</span><span>官方步骤中有，所以这里也提一下。</span></p>
<p class="p0">在<span>git</span><span>中设置用户名，邮箱</span></p>
<p class="p0">&nbsp;</p>
<div class="cnblogs_code">
<pre>$ git config --global user.name "defnngj"//给自己起个用户名<br />$ git config --global user.email  "defnngj@gmail.com"//填写自己的邮箱</pre>
</div>
<p class="p0"><span>&nbsp;</span></p>
<p class="p0">在<span>github</span><span>中找到&nbsp;</span><span>Account&nbsp;Settings---&gt;Account&nbsp;Admin&nbsp;,</span><span>找到一下信息：</span></p>
<p class="p0">Your&nbsp;API&nbsp;token&nbsp;is&nbsp;e97279836f0d415a3954c1193dba522f&nbsp;---keep&nbsp;it&nbsp;secret!&nbsp;Changing&nbsp;your&nbsp;password&nbsp;will</p>
<p class="p0">generate&nbsp;a&nbsp;new&nbsp;token</p>
<div class="cnblogs_code">
<pre>$ git config --global github.user defnngj      //github 上的用户名<br />$ git config --global github.token e97279836f0d415a3954c1193dba522f</pre>
</div>
<p class="p0">&nbsp;</p>
<p class="p0">&nbsp;</p>
<p class="p0">&nbsp;</p>
<div class="cnblogs_code">
<pre><span><strong>----//小玩一下git</strong></span></pre>
</div>
<p class="p0">&nbsp;</p>
<p class="p0">&nbsp;</p>
<p class="p0">上面都是准备工作，一次完成，以后就不用设置了。下面内容才是亮点。</p>
<p class="p0">&nbsp;</p>
<p class="p0">先来说说<span>git</span><span>下常用的几个基本操作，和</span><span>linux</span><span>系统的操作是一样一样的：</span></p>
<div class="cnblogs_code">
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码" href="http://www.cnblogs.com/fnng/archive/2012/01/07/2315685.html"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" /></a></span></div>
<pre>$ ls   查看当前目录的内容<br /><br />$ cd  /d   切换到d盘<br /><br />$ cd  java/   打开当前目录下的java目录<br /><br />$ cd  j(table键)  如果当你想打开java目录且当前目录下只有一个j开头的目录，输入J 然后按键盘上的table键，会自动帮你补齐。<br /><br />$ cd ..  返回上一级目录</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a title="复制代码" href="http://www.cnblogs.com/fnng/archive/2012/01/07/2315685.html"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" /></a></span></div>
</div>
<p class="p0">&nbsp;</p>
<div class="Section0">
<p class="p0"><span><strong>假如你现在新创建了一个项目，想把它提交到<span>github</span><span>上面？</span></strong></span></p>
<p class="p0">&nbsp;</p>
<p class="p0">假设你创建好了一个项目，并切换到项目的根目录下面：</p>
<p class="p0"><strong><span>$&nbsp;git&nbsp;status</span>&nbsp;&nbsp;</strong>&nbsp;//<span>查看当前项目下所有文的状态，如果第一次，你会发现都红颜色的，因为它还没有交给</span><span>git/github</span><span>管理。</span></p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;add&nbsp;.&nbsp;</strong>&nbsp;</span>&nbsp;//<span>（</span><span>.</span><span>）点表示当前目录下的所有内容，交给</span><span>git</span><span>管理，也就是提交到了</span><span>git</span><span>的本地仓库。</span></p>
<p class="p0"><strong>Ps</strong>:git<span>的强大之处就是有一个本地仓库的概念，在没有网络的情况下可以先将更新的内容提交到本地仓库。</span></p>
<p class="p0"><strong><span>$&nbsp;git&nbsp;commit&nbsp;&ndash;m&rdquo;new&nbsp;natter&nbsp;&rdquo;</span></strong>&nbsp;&nbsp;//<span>对你更新或修改了哪些内容做一个描述。</span></p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;remote&nbsp;add&nbsp;origin&nbsp;git@github.com:defnngj/hibernate-demo.git</strong></span></p>
<p class="p0">//如果你是第一次提交项目，这一句非常重要，这是你本地的当前的项目与远程的哪个仓库建立连接。</p>
<p class="p0"><strong>Ps</strong>:&nbsp;<strong>origin</strong>可以改为别人的名字，但是在你下一次push（提交）时，也要用你修改之后的名字。</p>
<p class="p0"><strong><span>$&nbsp;git&nbsp;remote&nbsp;-v&nbsp;</span></strong>&nbsp;//查看你当前项目远程连接的是哪个仓库地址。</p>
<p class="p0"><strong><span>$&nbsp;git&nbsp;push&nbsp;-u&nbsp;origin&nbsp;master&nbsp;</span></strong>&nbsp;//将本地的项目提交到远程仓库中。</p>
<p class="p0">&nbsp;</p>
<p class="p0">&nbsp;------------------------------------------------------------</p>
<p class="p0"><span><strong>假如，你回到了家，想把公司提交的项目克隆到本地？</strong></span></p>
<p class="p0">&nbsp;</p>
<p class="p0">如果你是第一次想把github上面的项目克隆到本地或者要克隆别人的项目到地。</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;clone&nbsp;git@github.com:defnngj/hibernate-demo.git&nbsp;</strong></span>&nbsp;//在git下面切换到想存放此项目的文件目录下，运行这条命令就可以将项目克隆下来。</p>
<p class="p0">&nbsp;</p>
<p class="p0">假如本地已经存在了这个项目，而仓库中又有一新的更新，如何把更的合并到本地的项目中？</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;fetch&nbsp;origin&nbsp;</strong></span>&nbsp;&nbsp;&nbsp;//取得远程更新，这里可以看做是准备要取了</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;merge&nbsp;origin/master</strong></span>&nbsp;&nbsp;//把更新的内容合并到本地分支/master</p>
<p class="p0">&nbsp;</p>
<p class="p0">-------------------------------------------&nbsp;</p>
<p class="p0"><span><strong>项目中删除了一些文件，如何提交？</strong></span></p>
<p class="p0">&nbsp;</p>
<p class="p0">假如远程仓库中已经存了aaa这个文件，我fetch了下来，并删除了aaa这个文件，想再push上到远程仓库中，并使远程仓库中的项目被新的修改覆盖（也是是远程仓库中的aaa也被删除）</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;status</strong></span>&nbsp;&nbsp;&nbsp;//可以看到我们删除的哪些文件</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;add&nbsp;.</strong></span>&nbsp;&nbsp;&nbsp;//删除之后的文件提交git管理。</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;rm&nbsp;&nbsp;&nbsp;src/com/hzh/hibernate/dao/aaa.java</strong></span>&nbsp;&nbsp;&nbsp;&nbsp;//移除我们删除的那个文件，不然git不允许我们往远程仓库提交。</p>
<p class="p0">Ps:&nbsp;如果你想删除的是某个目录（java包），这里想移除整个目录的内容。</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;rm&nbsp;&nbsp;src/com/hzh/hibernate/bbb/&nbsp;-r&nbsp;</strong></span>&nbsp;&nbsp;//&nbsp;<strong>-r</strong>&nbsp;会把bbb/目录下的所有内容一次性移动。</p>
<p class="p0">&nbsp;</p>
<p class="p0">------------------------------------------------------------------------</p>
<p class="p0"><strong><span>远程创建了一个新仓库，本地创建了一个新项目，如何使新的项目与仓库对应起来？</span></strong></p>
<p class="p0">&nbsp;</p>
<p class="p0">其实，这个也很简单，只是我当时对那些命令不太理解，所以比较模糊，不知如何对应。</p>
<p class="p0">&nbsp;</p>
<p class="p0"><span><strong>$&nbsp;git&nbsp;remote&nbsp;add&nbsp;origin&nbsp;git@github.com:defnngj/hibernate-demo.git</strong></span></p>
<p class="p0">//还是这个命令，在你push项目之前加上这一句就OK了。</p>
<p class="p0"><strong>git@github.com:defnngj/hibernate-demo.git</strong>&nbsp;<span>就是你常见的新仓库的地址啊。</span><span>git</span><span>切换到新项目下，在</span><span>push</span><span>之前，加上这一句，我们创建的新仓库就与新项目建立了连接。</span></p>
</div>]]></description></item><item><title>FLTK在linux下的编译安装过程，让大家少走弯路</title><link>http://www.cnblogs.com/hanxi/archive/2012/07/30/2616069.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 30 Jul 2012 15:28:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/07/30/2616069.html</guid><description><![CDATA[<p>　　今天整整花了一天的时间才算在linux下安装完<a href="http://www.fltk.org/">fltk</a>。我见网上对fltk2.0的评价很好，我就下载了<tt><a href="http://www.fltk.org/software.php?VERSION=1.3.0&amp;FILE=fltk/snapshots/fltk-2.0.x-alpha-r9296.tar.bz2">fltk-2.0.x-alpha-r9296.tar.bz2</a>。然后我就开始了编译。打开README.unix。定位到下面：</tt></p>
<p>...<br />    You can get the exact setup you need. Options that you can pass to<br />    ./configure include:</p>
<p>	--disable-xft           - Don't use Xft/XRender (anti-aliased fonts)<br />	--enable-debug          - Enable debugging code &amp; symbols<br />	--enable-shared         - Enable generation of shared libraries</p>
<p>	--prefix=/dir           - Set the directory prefix for files<br />                        	  [default = /usr/local]<br />	--bindir=/path          - Set the location for executables<br />                        	  [default = /usr/local/bin]<br />	--libdir=/path          - Set the location for libraries<br />                        	  [default = /usr/local/lib]<br />	--includedir=/path      - Set the location for include files.<br />                        	  [default = /usr/local/include]</p>
<p>    To install the library, become root and type "make install".  This<br />    will copy the "fluid" executable to "bindir", the header files to<br />    "includedir"/fltk, and the library files to "libdir".<br />...</p>
<p>这点英语，在linux下安装过软件的都懂的。</p>
<p>于是乎，我就解压：</p>
<p>$ tar xvf&nbsp;fltk-2.0.x-alpha-r9296.tar.bz2</p>
<p>接着configure</p>
<p>$&nbsp;./configure --disable-xft --enable-debug --enable-shared</p>
<p>几分钟后，就make了</p>
<p>$ make</p>
<p>make中途出错了，问题出在fltk/GL/文件夹下的少了一些文件。然后我就走了许多弯路。结果还是以失败告终。下面说重点的。</p>
<p>　　按照上面的操作总是会有些问题的。我找了许多资料，就<a href="http://blog.csdn.net/yuehungulei1987/article/details/6346926">这个资料</a>（<a href="http://blog.csdn.net/yuehungulei1987/article/details/6346926">ubuntu安装FLTK</a>）帮助了我。虽然人家的是1.x版本的，但是在linux下安装东西都差不多。这里我同样建议：如果安装的代码库，尽量自己设定库文件的目录。</p>
<p>这里，我创建了如下的目录用来存放fltk库。</p>
<p>$ mkdir /home/hanxi/reference/fltk2</p>
<p>$ cd&nbsp;/home/hanxi/reference/fltk2</p>
<p>$ mkdir {bin,lib,include}</p>
<p>　　为库设定好目录后，我就可以来安装，先进入到源代码的目录，然后执行下面语句进行configure</p>
<p>$ ./configure --enable-debug --disable-gl --enable-shared --enable-threads --enable-xdbe --enable-xft --bindir=/home/hanxi/reference/fltk2/bin --libdir=/home/hanxi/reference/fltk2/lib --includedir=/home/hanxi/reference/fltk2/include --prefix=/home/hanxi/reference/fltk2</p>
<p>主要是注意后面路径别写错了。然后执行mak语句，注意了，中间还是会有那个GL目录缺失文件的错误。所以使用下面的命令</p>
<p>$ make -ki</p>
<p>几分钟过后，执行make install</p>
<p>$ make install</p>
<p>到这里，就算安装成功了。下面弄个例子试一试：</p>
<p>　　测试代码：</p>
<div class="cnblogs_code">
<pre>#include &lt;fltk/Window.h&gt;<span style="color: #000000;">
#include </span>&lt;fltk/Widget.h&gt;<span style="color: #000000;">
#include </span>&lt;fltk/run.h&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> fltk;

</span><span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> **<span style="color: #000000;">argv)
{
    Window </span>*window = <span style="color: #0000ff;">new</span> Window(<span style="color: #800080;">800</span>, <span style="color: #800080;">600</span><span style="color: #000000;">);
    window</span>-&gt;<span style="color: #000000;">begin();
    Widget </span>*box = <span style="color: #0000ff;">new</span> Widget(<span style="color: #800080;">20</span>, <span style="color: #800080;">40</span>, <span style="color: #800080;">260</span>, <span style="color: #800080;">100</span>, <span style="color: #800000;">"</span><span style="color: #800000;">Hello, World!</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    box</span>-&gt;<span style="color: #000000;">box(UP_BOX);
    box</span>-&gt;<span style="color: #000000;">labelfont(HELVETICA_BOLD_ITALIC);
    box</span>-&gt;labelsize(<span style="color: #800080;">36</span><span style="color: #000000;">);
    box</span>-&gt;<span style="color: #000000;">labeltype(SHADOW_LABEL);
    window</span>-&gt;<span style="color: #000000;">end();
    window</span>-&gt;<span style="color: #000000;">show(argc, argv);
    run();
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
}</span></pre>
</div>
<p>makefile文件：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">test: test.cpp
    g</span>++ test.cpp -o test -I/home/hanxi/reference/fltk2/include -L/home/hanxi/reference/fltk2/lib -lfltk2 -lXext -lXinerama -lXft -lX11 -lXi -<span style="color: #000000;">lm
clean:
    rm </span>*.o</pre>
</div>
<p>运行效果：</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012073023230636.png" alt="" /></p>
<p>后记：在国内，linux下安装东西的教程还是比较少的。不过学会了读帮助文档的话这些根本就不是问题。谢谢您看到这里，希望您会有所收益。</p>
<p>参考资料：</p>
<p>[1]&nbsp;<a href="http://blog.csdn.net/yuehungulei1987/article/details/6346926">ubuntu安装FLTK</a></p>
<p>[2]&nbsp;<a href="http://blog.csdn.net/haoel/article/details/2886">跟我一起写 Makefile（一）</a></p>]]></description></item><item><title>while循环和for循环的区别酿成的Bug</title><link>http://www.cnblogs.com/hanxi/archive/2012/07/29/2614257.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 29 Jul 2012 12:28:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/07/29/2614257.html</guid><description><![CDATA[<p>　　由于我的粗心大意，犯了个不该犯的错误，幸好经过调试找到了Bug。</p>
<p>大伙都了解:for循环一般在</p>
<p>for(;;<span style="color: #0000ff;"><strong>这里</strong></span>)</p>
<p>{</p>
<p>......</p>
<p>}</p>
<p>写那个叠加变量（迭代器）的。而while循环一般在</p>
<p>while()</p>
<p>{</p>
<p>...</p>
<p><strong><span style="color: #0000ff;">这里</span></strong>;</p>
<p>}</p>
<p>写叠加变量的。我犯的错误就是for循环在两个地方都写了叠加变量，结果你懂的。</p>
<p>　　大家看看下面的代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">void</span> Func(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 3</span>     vector&lt;Boat*&gt;::iterator it_Boat =<span style="color: #000000;"> m_pBoats.begin();
</span><span style="color: #008080;"> 4</span>     vector&lt;Claw*&gt;::iterator it_Claw =<span style="color: #000000;"> m_pClaws.begin();
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">while</span> (it_Boat !=<span style="color: #000000;"> m_pBoats.end())
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 7</span>         (*it_Boat++)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;"> 8</span>         (*it_Claw++)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span>     <span style="color: #0000ff;">for</span> (vector&lt;Treasure*&gt;::iterator it =<span style="color: #000000;"> m_pTreasures.begin();
</span><span style="color: #008080;">12</span>         it != m_pTreasures.end(); it++<span style="color: #000000;">)
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">14</span>         (*it++)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;">15</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">16</span> }</pre>
</div>
<p>大家也许也一眼看到了错误所在，大家看到第12行和第14行。两个地方都用了it++，这不就是it+=2了吗？对啊，我犯这个错误时由于下面的写的时候是copy上面的while循环的。这下好了，忘记删除it++了。结果导致了严重的错误。当时调试到这里时我还没发现有两个it++（郁闷吧！^-^）。改正后的代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">void</span> Func(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 3</span>     vector&lt;Boat*&gt;::iterator it_Boat =<span style="color: #000000;"> m_pBoats.begin();
</span><span style="color: #008080;"> 4</span>     vector&lt;Claw*&gt;::iterator it_Claw =<span style="color: #000000;"> m_pClaws.begin();
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">while</span> (it_Boat !=<span style="color: #000000;"> m_pBoats.end())
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 7</span>         (*it_Boat++)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;"> 8</span>         (*it_Claw++)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span>     <span style="color: #0000ff;">for</span> (vector&lt;Treasure*&gt;::iterator it =<span style="color: #000000;"> m_pTreasures.begin();
</span><span style="color: #008080;">12</span>         it != m_pTreasures.end(); it++<span style="color: #000000;">)
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">14</span>         (*it)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;">15</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">16</span> }</pre>
</div>
<p>&nbsp;</p>
<p>我开始是这样改的：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">void</span> Func(<span style="color: #0000ff;">void</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 3</span>     vector&lt;Boat*&gt;::iterator it_Boat =<span style="color: #000000;"> m_pBoats.begin();
</span><span style="color: #008080;"> 4</span>     vector&lt;Claw*&gt;::iterator it_Claw =<span style="color: #000000;"> m_pClaws.begin();
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">while</span> (it_Boat !=<span style="color: #000000;"> m_pBoats.end())
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 7</span>         (*it_Boat++)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;"> 8</span>         (*it_Claw++)-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span>     <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;<span style="color: #800080;">10</span>; i++<span style="color: #000000;">)
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">13</span>         m_pTreasures[i]-&gt;<span style="color: #000000;">Draw();
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">15</span> }</pre>
</div>
<p>我没发现有两个it++，我这样修改后程序正常运行。我就以为是vs对stl支持的问题了（这种想法都有了，上吊吧我）。我想了想，其他地方也有上面的迭代器的for循环啊，也没错啊。所以我在仔细看看代码。结果就找到了两个it++。再然后就修改好了。再然后就没有然后了。程序就结束了。</p>
<p>　　我发表这篇文章有两个意图：</p>
<p>&lt;1&gt; 给自己一个警醒，不要犯同样的错误</p>
<p>&lt;2&gt; 给看这篇文章的网友们一个建议</p>
<p>　　上个月在参加培训的时候，听到老师讲到了一句话：&ldquo;代码相似的时候尽量copy代码&rdquo;。这句话我记住了，一是减少重复输入，二是减少书写错误的变量名。结果导致我这个问题发生了。我给网友们的建议是：&ldquo;代码相似的时候也尽量copy代码，但是注意while循环和for循环&rdquo;。同样的也许还会有其他的地方需要注意不能乱copy的。所以，copy代码时一定得仔细点。谢谢你花时间看到这里。有意见请评论。一个小Bug搞垮一个大软件（借用：&ldquo;<strong><span style="color: #ff0000;">一粒老鼠屎，坏了一锅汤</span></strong>&rdquo;）</p>]]></description></item><item><title>C++中两个类中互相包含对方对象的指针问题</title><link>http://www.cnblogs.com/hanxi/archive/2012/07/25/2608068.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 25 Jul 2012 04:39:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/07/25/2608068.html</guid><description><![CDATA[<p>　　前几天很不爽，因为C++中两个类中互相包含对方对象的指针编译时提示某一个类未定义。。。所以我就想啊想，这样也对，我的头文件都有#ifndef的，包含了一次就不能再包含了，以为就实现不了这样的功能，于是就改了设计方案：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> A
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    A(B</span>*<span style="color: #000000;"> pB):m_pB(pB)
    {
    }

</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    B</span>*<span style="color: #000000;"> m_pB;
};

</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> B
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    B() {}
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m_i;
};</span></pre>
</div>
<p>只在一个类中包含另一个类的指针（算是聚类吧，A不管理m_pB的死活），而在B需要A的属性时通过传递参数进去。这样有些麻烦，但是勉强达到了我的需求。</p>
<p>　　今天，又遇到一个必须使用相互包含对象指针的问题，要不然通过参数传来传去麻烦的不得了。所以还是百度了下，结果终于找到了：<span class="tcnt" style="color: #0000ff;"><a href="http://a117702.blog.163.com/blog/static/327871062009716111134177/" target="_blank">(c++)两个类相互包含引用的问题</a>。</span><span class="tcnt">里面说的和我需要的差不多，解决方法是一样的。</span></p>
<p>　　文章里面说的很清楚了，我也在这里复述一遍吧，主要解决的就是文件包含的问题：在A的头文件(A.h)中包含B的头文件(B.h)，在A的源文件(A.cpp)中包含(A.h)，在B的头文件中使用A的声明(class A;)而不是包含A的头文件，然后在B的源文件(B.cpp)中包含A的头文件和B的头文件。代码如下：</p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;"> A.h</span>
#include <span style="color: #800000;">"</span><span style="color: #800000;">B.h</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">class</span><span style="color: #000000;"> A
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    A(B</span>*<span style="color: #000000;"> pB):m_pB(pB) {}
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> useB();
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    B</span>*<span style="color: #000000;"> m_pB;
};

</span><span style="color: #008000;">//</span><span style="color: #008000;">A.cpp</span>
#include <span style="color: #800000;">"</span><span style="color: #800000;">A.h</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">void</span><span style="color: #000000;"> A::useB()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">do something for m_pB</span>
<span style="color: #000000;">}


</span><span style="color: #008000;">//</span><span style="color: #008000;">B.h</span>
<span style="color: #0000ff;">class</span><span style="color: #000000;"> A;
</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> B
{
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    B(A</span>*<span style="color: #000000;"> pA):m_pA(pA) {}
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> useA();
    
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    A</span>*<span style="color: #000000;"> m_pA;
};

</span><span style="color: #008000;">//</span><span style="color: #008000;">B.h</span>
#include <span style="color: #800000;">"</span><span style="color: #800000;">A.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">B.h</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">void</span><span style="color: #000000;"> B::useA()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">do something for m_pA</span>
}</pre>
</div>
<p>这样的话B的头文件中不能有使用A的对象指针m_pA的代码，否则会出现&ldquo;使用了未定义的A&rdquo;错误。</p>
<p>　　最后，问题算是解决了，但是我现在还是有点不明白的，这C++头文件的包含和类的声明等等都应该牵涉到编译器的编译顺序问题，忘大师为我讲解下这是为什么。</p>
<p>　　谢谢观众的捧场！</p>]]></description></item><item><title>记录一件有意思的事情</title><link>http://www.cnblogs.com/hanxi/archive/2012/07/23/2604552.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 23 Jul 2012 02:24:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/07/23/2604552.html</guid><description><![CDATA[<p>　　一大清早，我打开配置的论坛拿来修改，由于不懂的css，js等等东西，所以只有在后台管理里面设置。好了一部小心把论坛主页搞成下面的样子了：</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072310181771.png" alt="" /></p>
<p>出现这个情况是我在后台设置的时候，给每个版块添加图片后出现的，可是把图片删除后也回不到以前了，怎么办？？？我又不懂后面的代码，心里想了想，还是看代码吧，页面布局一般是交给css来处理的，于是我就进入代码目录下找css文件。终于，还是找到了几个：</p>
<p>&nbsp;</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072309501938.png" alt="" /></p>
<p>先打开common看了一遍，不懂，然后就干脆全部打开</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072310202638.png" alt="" /></p>
<p>看了看中文的注释，还是有些不解，但是已经确定修改那个宽度就是在这两个文件了。在哪里修改呢？下面我就想了一个特别的方法：</p>
<p><span style="font-size: 18pt; color: #0000ff;">&lt;搜索数字!&gt;</span></p>
<p>于是我就想办法去得到当前宽度的大小，怎么找呢？</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072310212230.png" alt="" /></p>
<p>然后我就到代码里面搜索730，很碰巧，被我搜到了，</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072310082742.png" alt="" /></p>
<p>然后改为了960。然后再保存，更新缓存，就ok了。</p>
<p>　　后续总结，想到这个搜索数字后，我还想起了一个方法，界面的&lt;div&gt;的大小可以使用浏览器看得到的，如下</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072310145254.png" alt="" /></p>
<p>上面显示的是730X372,右下角显示的是728X371。这样就更快的知道宽度了，就不用我一个一个数子去尝试了。这个最初没想到啊！</p>
<p>　　<span style="font-family: 楷体; font-size: 18pt; color: #0000ff;">我发表这篇文章主要是说明一个事情，看不懂人家的代码的时候，又想要修改某些跟数字相关的属性的时候，可以先找到原有属性的数字，然后去代码里面搜，最后来修改。</span></p>]]></description></item><item><title>C++文件的批处理</title><link>http://www.cnblogs.com/hanxi/archive/2012/07/22/2603584.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 22 Jul 2012 04:34:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/07/22/2603584.html</guid><description><![CDATA[<p>　　好久没写文章了，今天又来做个学习C++的小总结。</p>
<p>&nbsp;</p>
<h1><span style="font-family: 楷体; font-size: 18pt; color: #0000ff; background-color: #33cccc;">一、统计代码行数</span></h1>
<p>　　<span style="font-family: 楷体; font-size: 18pt;">几</span>个星期前做了个统计代码的小程序，对文件的批处理需要获取文件列表，因为是在windows下操作的，所以百度到一个系统调用</p>
<p><span style="font-family: 'courier new', courier; color: #0000ff;">　　　　system("dir /a /b &gt;&gt; file_list.txt");</span></p>
<p>功能就是把当前目录下的所有文件名写到file_list.txt文件中去。这样我就得到了所有的文件名，从而就可以对文件批处理了。对每一个文件的操作就是首先读取文件名，然后就打开文件，接着一行一行的读文件，没读取一行文件就累计代码行数。过程很简单，代码如下：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;fstream&gt;
<span style="color: #008080;"> 3</span> #include &lt;cstdlib&gt;
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::fstream;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">using</span> std::<span style="color: #0000ff;">string</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> <span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> **<span style="color: #000000;">argv)
</span><span style="color: #008080;">11</span> <span style="color: #000000;">{
</span><span style="color: #008080;">12</span>     <span style="color: #008000;">//</span><span style="color: #008000;">创建文件名列表文件，若存在则清空文件</span>
<span style="color: #008080;">13</span>     fstream file_list(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span>     <span style="color: #008000;">//</span><span style="color: #008000;">写入文件名列表到file_list.txt</span>
<span style="color: #008080;">17</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">dir /a /b &gt;&gt; file_list.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">18</span>     
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">long</span> sum_code = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    fstream code_file;
</span><span style="color: #008080;">21</span>     file_list.open(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>, std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">string</span> str_line = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span>     <span style="color: #0000ff;">string</span> t_str = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">24</span>     unsigned <span style="color: #0000ff;">int</span> loc = <span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">查找文件名中的"."</span>
<span style="color: #008080;">25</span>     <span style="color: #0000ff;">string</span> str_last = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">26</span>     
<span style="color: #008080;">27</span>     <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">file_list.eof())
</span><span style="color: #008080;">28</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">29</span> <span style="color: #000000;">        getline(file_list,str_line);
</span><span style="color: #008080;">30</span>         loc = str_line.find(<span style="color: #800000;">"</span><span style="color: #800000;">.</span><span style="color: #800000;">"</span>,<span style="color: #800080;">0</span><span style="color: #000000;">);
</span><span style="color: #008080;">31</span> <span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; "loc = " &lt;&lt; loc &lt;&lt; endl;</span>
<span style="color: #008080;">32</span>         <span style="color: #0000ff;">if</span> (loc != <span style="color: #0000ff;">string</span><span style="color: #000000;">::npos)
</span><span style="color: #008080;">33</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">34</span>             str_last =<span style="color: #000000;"> str_line.substr(loc);
</span><span style="color: #008080;">35</span> <span style="color: #008000;">//</span><span style="color: #008000;">            cout &lt;&lt; "str_last = " &lt;&lt; str_last &lt;&lt; endl;</span>
<span style="color: #008080;">36</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">38</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">39</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">40</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">41</span>         
<span style="color: #008080;">42</span>         <span style="color: #0000ff;">if</span> (str_last.compare(<span style="color: #800000;">"</span><span style="color: #800000;">.h</span><span style="color: #800000;">"</span>) == <span style="color: #800080;">0</span>
<span style="color: #008080;">43</span>         || str_last.compare(<span style="color: #800000;">"</span><span style="color: #800000;">.c</span><span style="color: #800000;">"</span>) == <span style="color: #800080;">0</span>
<span style="color: #008080;">44</span>         || str_last.compare(<span style="color: #800000;">"</span><span style="color: #800000;">.cpp</span><span style="color: #800000;">"</span>) == <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">45</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">46</span>             code_file.open(str_line.c_str(),std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">47</span>             cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">文件名 : </span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">48</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">49</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">50</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">51</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">52</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">53</span>         
<span style="color: #008080;">54</span>         <span style="color: #008000;">//</span><span style="color: #008000;">读文件行数</span>
<span style="color: #008080;">55</span>         <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof())
</span><span style="color: #008080;">56</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">57</span> <span style="color: #000000;">            getline(code_file,t_str);
</span><span style="color: #008080;">58</span>             cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">59</span>             sum_code++<span style="color: #000000;">;
</span><span style="color: #008080;">60</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">61</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">62</span>         cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">63</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">64</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">65</span>     
<span style="color: #008080;">66</span>     cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">代码行数：</span><span style="color: #800000;">"</span> &lt;&lt; sum_code &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">67</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">pause</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">68</span> 
<span style="color: #008080;">69</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">70</span> }</pre>
</div>
<h1><span style="font-size: 18pt; color: #0000ff; background-color: #33cccc; font-family: 楷体;">二、批量删除文件中的某一行</span></h1>
<p>　　<span style="font-family: 楷体; font-size: 18pt;">今</span>天做的修改时有原因的，因为我正在将<a href="http://www.cplusplus.com/reference/">http://www.cplusplus.com/reference/</a>做成一个chm文件（供离线查寻的文档）。通过<a href="http://www.orsoon.com/Soft/3126.html"><span style="color: #0000ff;">Teleport Ultra</span></a>软件获取到网站的代码后，代码有好多是404页面和用户登录页面。这些文件我是通过手工删除的，删除404页面就是根据文件大小来删除的（不会傻到对着一千多个文件一个一个打开查看，毕竟404页面大小是一样的）。删除登录页面是根据文件名的。文件名有new.cgi?或者edit.cgi?等等，是按文件名排序删除的。</p>
<p>　　<span style="font-family: 楷体; font-size: 18pt;">然</span>后使用<a href="http://www.downxia.com/downinfo/868.html">EasyCHM</a>软件开始制作。制作后出现了问题，打开页面预览出现</p>
<p>&nbsp;</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072210101419.jpg" alt="" /></p>
<p>我郁闷了，我就打开源代码，找到了有这么一行，打开每一文件都这样。</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072210114395.jpg" alt="" /></p>
<p>因此，我就想到之前写的代码统计的程序了，然后我就做了个微小的修改把这一行删除掉。在上面的55行的while中加入</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">if</span> (t_str == <span style="color: #800000;">"</span><span style="color: #800000;">onPrint.print();</span><span style="color: #800000;">"</span><span style="color: #000000;">)
{
　　cout </span>&lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
　　</span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;
}</span></pre>
</div>
<p>因为要修改源文件，我就通过一个临时文件来存储修改后的文件，文件修改完成后再将临时文件的内容复制到源文件中，复制文件的代码段：</p>
<div class="cnblogs_code">
<pre>        <span style="color: #008000;">//</span><span style="color: #008000;">复制回来</span>
        out_tmp.open(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
        code_file.open(str_line.c_str(),std::ios::</span><span style="color: #0000ff;">out</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> ch;
        </span><span style="color: #0000ff;">while</span>(code_file &amp;&amp; out_tmp.<span style="color: #0000ff;">get</span><span style="color: #000000;">(ch))
        {
            code_file.put(ch);
        }
        code_file.close();
        out_tmp.close();
        cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">修改</span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">完成</span><span style="color: #800000;">"</span> &lt;&lt; endl;</pre>
</div>
<p>&nbsp;</p>
<p>全部代码如下：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('4b41f826-4907-4e91-aa4f-1c0f637946f1')"><img id="code_img_closed_4b41f826-4907-4e91-aa4f-1c0f637946f1" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_4b41f826-4907-4e91-aa4f-1c0f637946f1" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4b41f826-4907-4e91-aa4f-1c0f637946f1',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">删除指定行的代码</span>
<div id="cnblogs_code_open_4b41f826-4907-4e91-aa4f-1c0f637946f1" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;fstream&gt;
<span style="color: #008080;"> 3</span> #include &lt;cstdlib&gt;
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::fstream;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">using</span> std::<span style="color: #0000ff;">string</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> <span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> **<span style="color: #000000;">argv)
</span><span style="color: #008080;">11</span> <span style="color: #000000;">{
</span><span style="color: #008080;">12</span>     <span style="color: #008000;">//</span><span style="color: #008000;">创建文件名列表文件，若存在则清空文件</span>
<span style="color: #008080;">13</span>     fstream file_list(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span>     <span style="color: #008000;">//</span><span style="color: #008000;">写入文件名列表到file_list.txt</span>
<span style="color: #008080;">17</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">dir /a /b &gt;&gt; file_list.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">18</span>     
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">long</span> sum_code = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    fstream code_file;
</span><span style="color: #008080;">21</span>     file_list.open(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>, std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">string</span> str_line = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span>     <span style="color: #0000ff;">string</span> t_str = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">24</span>     unsigned <span style="color: #0000ff;">int</span> loc = <span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">查找文件名中的"."</span>
<span style="color: #008080;">25</span>     <span style="color: #0000ff;">string</span> str_last = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">26</span>     
<span style="color: #008080;">27</span>     <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">file_list.eof())
</span><span style="color: #008080;">28</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">29</span> <span style="color: #000000;">        getline(file_list,str_line);
</span><span style="color: #008080;">30</span>         loc = str_line.find(<span style="color: #800000;">"</span><span style="color: #800000;">.</span><span style="color: #800000;">"</span>,<span style="color: #800080;">0</span><span style="color: #000000;">);
</span><span style="color: #008080;">31</span> <span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; "loc = " &lt;&lt; loc &lt;&lt; endl;</span>
<span style="color: #008080;">32</span>         <span style="color: #0000ff;">if</span> (loc != <span style="color: #0000ff;">string</span><span style="color: #000000;">::npos)
</span><span style="color: #008080;">33</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">34</span>             str_last =<span style="color: #000000;"> str_line.substr(loc);
</span><span style="color: #008080;">35</span> <span style="color: #008000;">//</span><span style="color: #008000;">            cout &lt;&lt; "str_last = " &lt;&lt; str_last &lt;&lt; endl;</span>
<span style="color: #008080;">36</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">38</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">39</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">40</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">41</span>         
<span style="color: #008080;">42</span>         <span style="color: #0000ff;">if</span> (str_last.compare(<span style="color: #800000;">"</span><span style="color: #800000;">.htm</span><span style="color: #800000;">"</span>) == <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">43</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">44</span>             code_file.open(str_line.c_str(),std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">45</span>             cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">文件名 : </span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">46</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">47</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">48</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">49</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">50</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">51</span>         
<span style="color: #008080;">52</span>         fstream out_tmp(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">53</span>         <span style="color: #008000;">//</span><span style="color: #008000;">读文件行数</span>
<span style="color: #008080;">54</span>         <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof())
</span><span style="color: #008080;">55</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">56</span> <span style="color: #000000;">            getline(code_file,t_str);
</span><span style="color: #008080;">57</span>             <span style="color: #0000ff;">if</span> (t_str == <span style="color: #800000;">"</span><span style="color: #800000;">onPrint.print();</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">58</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">59</span>                 cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">60</span>                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">61</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">62</span>             out_tmp &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">63</span>             sum_code++<span style="color: #000000;">;
</span><span style="color: #008080;">64</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">65</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">66</span> <span style="color: #000000;">        out_tmp.close();
</span><span style="color: #008080;">67</span>         cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">68</span>         
<span style="color: #008080;">69</span>         <span style="color: #008000;">//</span><span style="color: #008000;">复制回来</span>
<span style="color: #008080;">70</span>         out_tmp.open(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">71</span>         code_file.open(str_line.c_str(),std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">72</span>         <span style="color: #0000ff;">char</span><span style="color: #000000;"> ch;
</span><span style="color: #008080;">73</span>         <span style="color: #0000ff;">while</span>(code_file &amp;&amp; out_tmp.<span style="color: #0000ff;">get</span><span style="color: #000000;">(ch))
</span><span style="color: #008080;">74</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">75</span> <span style="color: #000000;">            code_file.put(ch);
</span><span style="color: #008080;">76</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">77</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">78</span> <span style="color: #000000;">        out_tmp.close();
</span><span style="color: #008080;">79</span>         cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">修改</span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">完成</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">80</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">81</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">82</span>     
<span style="color: #008080;">83</span>     cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">代码行数：</span><span style="color: #800000;">"</span> &lt;&lt; sum_code &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">84</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">pause</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">85</span> 
<span style="color: #008080;">86</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">87</span> }</pre>
</div>
</div>
<p>&nbsp;</p>
<h1><span style="font-family: 楷体; background-color: #33cccc; color: #0000ff;">三、批量删除文件中的某一代码段</span></h1>
<p>　　<span style="font-family: 楷体; font-size: 18pt;">这</span>样对所有文件批处理后又有了新问题，弹出的脚本对话框和上面的类似。这样慢慢删岂不会累死，我能不能把所有的&lt;script&gt;&lt;/&lt;script&gt;都删除掉呢？我就先手动删除一个文件的所有&lt;script&gt; ... &lt;/&lt;script&gt;。然后放到<a href="http://www.downxia.com/downinfo/868.html">EasyCHM</a>软件中，结果真的好了，不弹出脚本错误对话框了（脚本都没了，何来脚本错误呢？）。这样我就放心了，因为脚本文件删除了不影响htm文件的界面。这样我就开始修改代码了，同样修改读文件那一段代码。</p>
<div class="cnblogs_code">
<pre>            <span style="color: #0000ff;">if</span> (t_str.substr(<span style="color: #800080;">0</span>,<span style="color: #800080;">7</span>) == <span style="color: #800000;">"</span><span style="color: #800000;">&lt;script</span><span style="color: #800000;">"</span><span style="color: #000000;">)
            {
                </span><span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof() 
                        </span>&amp;&amp; t_str != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span> 
                        &amp;&amp; t_str.substr(t_str.size()&gt;<span style="color: #800080;">9</span>?t_str.size()-<span style="color: #800080;">9</span>:<span style="color: #800080;">0</span>) != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span><span style="color: #000000;">)
                {
                    cout </span>&lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
                    getline(code_file,t_str);
                }
                cout </span>&lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
                getline(code_file,t_str);
            }</span></pre>
</div>
<p>这是放在读文件循环中的代码。每次读到一行的头几个字符是"&lt;script"就对接下来的字符处理知道读到"&lt;/script&gt;"。因为我查了所有代码都类似，"&lt;script"在每行的行首，"&lt;/script&gt;"在字符串的末尾后者行首，所以就只是简单的判断了下，没有考虑到一行中既有脚本文件又有非脚本文件的情况：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">google_ad_height </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">60</span><span style="background-color: #f5f5f5; color: #000000;">;</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="I_midclear"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="show_ads.js"</span><span style="color: #ff0000;"> tppabs</span><span style="color: #0000ff;">="http://pagead2.googlesyndication.com/pagead/show_ads.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>我想也不会有人会把这种代码写成一行吧。接着就测试了一个htm文件，结果可以了，只是有一个bug，运行一次后还残留着&lt;script&gt; ... &lt;/&lt;script&gt;。再运行一次就清理完了。先看有bug的代码：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('1a392bd7-1ba3-47e8-8086-1b714d7c930e')"><img id="code_img_closed_1a392bd7-1ba3-47e8-8086-1b714d7c930e" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_1a392bd7-1ba3-47e8-8086-1b714d7c930e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('1a392bd7-1ba3-47e8-8086-1b714d7c930e',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">有bug但是可以完成任务的代码</span>
<div id="cnblogs_code_open_1a392bd7-1ba3-47e8-8086-1b714d7c930e" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;fstream&gt;
<span style="color: #008080;"> 3</span> #include &lt;cstdlib&gt;
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::fstream;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">using</span> std::<span style="color: #0000ff;">string</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> <span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> **<span style="color: #000000;">argv)
</span><span style="color: #008080;">11</span> <span style="color: #000000;">{
</span><span style="color: #008080;">12</span>     <span style="color: #008000;">//</span><span style="color: #008000;">创建文件名列表文件，若存在则清空文件</span>
<span style="color: #008080;">13</span>     fstream file_list(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span>     <span style="color: #008000;">//</span><span style="color: #008000;">写入文件名列表到file_list.txt</span>
<span style="color: #008080;">17</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">dir /a /b &gt;&gt; file_list.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">18</span>     
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">long</span> sum_code = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    fstream code_file;
</span><span style="color: #008080;">21</span>     file_list.open(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>, std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">string</span> str_line = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span>     <span style="color: #0000ff;">string</span> t_str = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">24</span>     unsigned <span style="color: #0000ff;">int</span> loc = <span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">查找文件名中的"."</span>
<span style="color: #008080;">25</span>     <span style="color: #0000ff;">string</span> str_last = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">26</span>     
<span style="color: #008080;">27</span>     <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">file_list.eof())
</span><span style="color: #008080;">28</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">29</span> <span style="color: #000000;">        getline(file_list,str_line);
</span><span style="color: #008080;">30</span>         loc = str_line.find(<span style="color: #800000;">"</span><span style="color: #800000;">.</span><span style="color: #800000;">"</span>,<span style="color: #800080;">0</span><span style="color: #000000;">);
</span><span style="color: #008080;">31</span> <span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; "loc = " &lt;&lt; loc &lt;&lt; endl;</span>
<span style="color: #008080;">32</span>         <span style="color: #0000ff;">if</span> (loc != <span style="color: #0000ff;">string</span><span style="color: #000000;">::npos)
</span><span style="color: #008080;">33</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">34</span>             str_last =<span style="color: #000000;"> str_line.substr(loc);
</span><span style="color: #008080;">35</span> <span style="color: #008000;">//</span><span style="color: #008000;">            cout &lt;&lt; "str_last = " &lt;&lt; str_last &lt;&lt; endl;</span>
<span style="color: #008080;">36</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">38</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">39</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">40</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">41</span>         
<span style="color: #008080;">42</span>         <span style="color: #0000ff;">if</span> (str_last.compare(<span style="color: #800000;">"</span><span style="color: #800000;">.htm</span><span style="color: #800000;">"</span>) == <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">43</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">44</span>             code_file.open(str_line.c_str(),std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">45</span>             cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">文件名 : </span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">46</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">47</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">48</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">49</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">50</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">51</span>         
<span style="color: #008080;">52</span>         fstream out_tmp(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">53</span>         <span style="color: #008000;">//</span><span style="color: #008000;">读文件行数</span>
<span style="color: #008080;">54</span>         <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof())
</span><span style="color: #008080;">55</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">56</span> <span style="color: #000000;">            getline(code_file,t_str);
</span><span style="color: #008080;">57</span>             <span style="color: #0000ff;">if</span> (t_str.substr(<span style="color: #800080;">0</span>,<span style="color: #800080;">7</span>) == <span style="color: #800000;">"</span><span style="color: #800000;">&lt;script</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">58</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">59</span>                 <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof() 
</span><span style="color: #008080;">60</span>                         &amp;&amp; t_str != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span> 
<span style="color: #008080;">61</span>                         &amp;&amp; t_str.substr(t_str.size()&gt;<span style="color: #800080;">9</span>?t_str.size()-<span style="color: #800080;">9</span>:<span style="color: #800080;">0</span>) != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">62</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">63</span>                     cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">64</span> <span style="color: #000000;">                    getline(code_file,t_str);
</span><span style="color: #008080;">65</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">66</span>                 cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">67</span> <span style="color: #000000;">                getline(code_file,t_str);
</span><span style="color: #008080;">68</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">69</span>             out_tmp &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">70</span>             sum_code++<span style="color: #000000;">;
</span><span style="color: #008080;">71</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">72</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">73</span> <span style="color: #000000;">        out_tmp.close();
</span><span style="color: #008080;">74</span>         cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">75</span>         
<span style="color: #008080;">76</span>         <span style="color: #008000;">//</span><span style="color: #008000;">复制回来</span>
<span style="color: #008080;">77</span>         out_tmp.open(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">78</span>         code_file.open(str_line.c_str(),std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">79</span>         <span style="color: #0000ff;">char</span><span style="color: #000000;"> ch;
</span><span style="color: #008080;">80</span>         <span style="color: #0000ff;">while</span>(code_file &amp;&amp; out_tmp.<span style="color: #0000ff;">get</span><span style="color: #000000;">(ch))
</span><span style="color: #008080;">81</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">82</span> <span style="color: #000000;">            code_file.put(ch);
</span><span style="color: #008080;">83</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">84</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">85</span> <span style="color: #000000;">        out_tmp.close();
</span><span style="color: #008080;">86</span>         cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">修改</span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">完成</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">87</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">88</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">89</span>     
<span style="color: #008080;">90</span>     cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">代码行数：</span><span style="color: #800000;">"</span> &lt;&lt; sum_code &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">91</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">pause</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">92</span> 
<span style="color: #008080;">93</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">94</span> }</pre>
</div>
</div>
<p>&nbsp;</p>
<p>　　<span style="font-family: 楷体; font-size: 18pt;">接</span>下来就是查找bug了，然后在解决bug，记住哦，做这些操作记得备份之前原版的htm文件哦，要不然你弄完后原版的文件没了怎么来找bug，怎么测试啊。关键还是看这里（循环读文件人后再判断的代码段）：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span>         fstream out_tmp(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 2</span>         <span style="color: #008000;">//</span><span style="color: #008000;">读文件行数</span>
<span style="color: #008080;"> 3</span>         <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof())
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">            getline(code_file,t_str);
</span><span style="color: #008080;"> 6</span>             <span style="color: #0000ff;">if</span> (t_str.substr(<span style="color: #800080;">0</span>,<span style="color: #800080;">7</span>) == <span style="color: #800000;">"</span><span style="color: #800000;">&lt;script</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 8</span>                 <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof() 
</span><span style="color: #008080;"> 9</span>                         &amp;&amp; t_str != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span> 
<span style="color: #008080;">10</span>                         &amp;&amp; t_str.substr(t_str.size()&gt;<span style="color: #800080;">9</span>?t_str.size()-<span style="color: #800080;">9</span>:<span style="color: #800080;">0</span>) != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">11</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">12</span>                     cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">                    getline(code_file,t_str);
</span><span style="color: #008080;">14</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">15</span>                 cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">16</span> <span style="color: #000000;">                getline(code_file,t_str);
</span><span style="color: #008080;">17</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">18</span>             out_tmp &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">19</span>             sum_code++<span style="color: #000000;">;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">21</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">22</span> <span style="color: #000000;">        out_tmp.close();
</span><span style="color: #008080;">23</span>         cout &lt;&lt; endl;</pre>
</div>
<p>要修改这段代码，需要来查看结果的，我把运行一次后的结果和原始文件对比了下，结果如下：</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012072210430648.jpg" alt="" /></p>
<p>发现了问题，是因为执行了一次删除脚本后，接下来的脚本紧接在其下一行，读取的时候跳过了这一次检查，这样简单啊，只执行一次判定&lt;script&gt;，我把if改成while就可以了，修改后的代码如下：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('23208a93-052e-4508-bed7-82ba8e5296eb')"><img id="code_img_closed_23208a93-052e-4508-bed7-82ba8e5296eb" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_23208a93-052e-4508-bed7-82ba8e5296eb" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('23208a93-052e-4508-bed7-82ba8e5296eb',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">最后代码</span>
<div id="cnblogs_code_open_23208a93-052e-4508-bed7-82ba8e5296eb" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> #include &lt;iostream&gt;
<span style="color: #008080;"> 2</span> #include &lt;fstream&gt;
<span style="color: #008080;"> 3</span> #include &lt;cstdlib&gt;
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> std::fstream;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">using</span> std::<span style="color: #0000ff;">string</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> <span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> **<span style="color: #000000;">argv)
</span><span style="color: #008080;">11</span> <span style="color: #000000;">{
</span><span style="color: #008080;">12</span>     <span style="color: #008000;">//</span><span style="color: #008000;">创建文件名列表文件，若存在则清空文件</span>
<span style="color: #008080;">13</span>     fstream file_list(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span>     <span style="color: #008000;">//</span><span style="color: #008000;">写入文件名列表到file_list.txt</span>
<span style="color: #008080;">17</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">dir /a /b &gt;&gt; file_list.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">18</span>     
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">long</span> sum_code = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">20</span> <span style="color: #000000;">    fstream code_file;
</span><span style="color: #008080;">21</span>     file_list.open(<span style="color: #800000;">"</span><span style="color: #800000;">file_list.txt</span><span style="color: #800000;">"</span>, std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">string</span> str_line = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span>     <span style="color: #0000ff;">string</span> t_str = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">24</span>     unsigned <span style="color: #0000ff;">int</span> loc = <span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">查找文件名中的"."</span>
<span style="color: #008080;">25</span>     <span style="color: #0000ff;">string</span> str_last = <span style="color: #800000;">""</span><span style="color: #000000;">;
</span><span style="color: #008080;">26</span>     
<span style="color: #008080;">27</span>     <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">file_list.eof())
</span><span style="color: #008080;">28</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">29</span> <span style="color: #000000;">        getline(file_list,str_line);
</span><span style="color: #008080;">30</span>         loc = str_line.find(<span style="color: #800000;">"</span><span style="color: #800000;">.</span><span style="color: #800000;">"</span>,<span style="color: #800080;">0</span><span style="color: #000000;">);
</span><span style="color: #008080;">31</span> <span style="color: #008000;">//</span><span style="color: #008000;">        cout &lt;&lt; "loc = " &lt;&lt; loc &lt;&lt; endl;</span>
<span style="color: #008080;">32</span>         <span style="color: #0000ff;">if</span> (loc != <span style="color: #0000ff;">string</span><span style="color: #000000;">::npos)
</span><span style="color: #008080;">33</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">34</span>             str_last =<span style="color: #000000;"> str_line.substr(loc);
</span><span style="color: #008080;">35</span> <span style="color: #008000;">//</span><span style="color: #008000;">            cout &lt;&lt; "str_last = " &lt;&lt; str_last &lt;&lt; endl;</span>
<span style="color: #008080;">36</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">38</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">39</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">40</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">41</span>         
<span style="color: #008080;">42</span>         <span style="color: #0000ff;">if</span> (str_last.compare(<span style="color: #800000;">"</span><span style="color: #800000;">.htm</span><span style="color: #800000;">"</span>) == <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">43</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">44</span>             code_file.open(str_line.c_str(),std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">45</span>             cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">文件名 : </span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">46</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">47</span>         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">48</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">49</span>             <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">50</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">51</span>         
<span style="color: #008080;">52</span>         fstream out_tmp(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">53</span>         <span style="color: #008000;">//</span><span style="color: #008000;">读文件行数</span>
<span style="color: #008080;">54</span>         <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof())
</span><span style="color: #008080;">55</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">56</span> <span style="color: #000000;">            getline(code_file,t_str);
</span><span style="color: #008080;">57</span>             <span style="color: #0000ff;">while</span> (t_str.substr(<span style="color: #800080;">0</span>,<span style="color: #800080;">7</span>) == <span style="color: #800000;">"</span><span style="color: #800000;">&lt;script</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">58</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">59</span>                 <span style="color: #0000ff;">while</span> (!<span style="color: #000000;">code_file.eof() 
</span><span style="color: #008080;">60</span>                         &amp;&amp; t_str != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span> 
<span style="color: #008080;">61</span>                         &amp;&amp; t_str.substr(t_str.size()&gt;<span style="color: #800080;">9</span>?t_str.size()-<span style="color: #800080;">9</span>:<span style="color: #800080;">0</span>) != <span style="color: #800000;">"</span><span style="color: #800000;">&lt;/script&gt;</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">62</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">63</span>                     cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">64</span> <span style="color: #000000;">                    getline(code_file,t_str);
</span><span style="color: #008080;">65</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">66</span>                 cout &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">67</span> <span style="color: #000000;">                getline(code_file,t_str);
</span><span style="color: #008080;">68</span>                     
<span style="color: #008080;">69</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">70</span>             out_tmp &lt;&lt; t_str &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">71</span>             sum_code++<span style="color: #000000;">;
</span><span style="color: #008080;">72</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">73</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">74</span> <span style="color: #000000;">        out_tmp.close();
</span><span style="color: #008080;">75</span>         cout &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">76</span>         
<span style="color: #008080;">77</span>         <span style="color: #008000;">//</span><span style="color: #008000;">复制回来</span>
<span style="color: #008080;">78</span>         out_tmp.open(<span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span>,std::ios::<span style="color: #0000ff;">in</span><span style="color: #000000;">);
</span><span style="color: #008080;">79</span>         code_file.open(str_line.c_str(),std::ios::<span style="color: #0000ff;">out</span><span style="color: #000000;">);
</span><span style="color: #008080;">80</span>         <span style="color: #0000ff;">char</span><span style="color: #000000;"> ch;
</span><span style="color: #008080;">81</span>         <span style="color: #0000ff;">while</span>(code_file &amp;&amp; out_tmp.<span style="color: #0000ff;">get</span><span style="color: #000000;">(ch))
</span><span style="color: #008080;">82</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">83</span> <span style="color: #000000;">            code_file.put(ch);
</span><span style="color: #008080;">84</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">85</span> <span style="color: #000000;">        code_file.close();
</span><span style="color: #008080;">86</span> <span style="color: #000000;">        out_tmp.close();
</span><span style="color: #008080;">87</span>         cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">修改</span><span style="color: #800000;">"</span> &lt;&lt; str_line &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">完成</span><span style="color: #800000;">"</span> &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">88</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">89</span> <span style="color: #000000;">    file_list.close();
</span><span style="color: #008080;">90</span>     
<span style="color: #008080;">91</span>     cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">代码行数：</span><span style="color: #800000;">"</span> &lt;&lt; sum_code &lt;&lt;<span style="color: #000000;"> endl;
</span><span style="color: #008080;">92</span>     system(<span style="color: #800000;">"</span><span style="color: #800000;">pause</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">93</span> 
<span style="color: #008080;">94</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">95</span> }</pre>
</div>
</div>
<p>　　<span style="font-family: 楷体; font-size: 18pt;">最</span>后，我也完成了<a href="http://www.cplusplus.com/reference/">http://www.cplusplus.com/reference/</a>离线chm版本。大家玩这个注意备份文件哦！！！</p>
<p>&nbsp;</p>
<p><span style="background-color: #888888;">附件：</span></p>
<p>　　[1] &nbsp;<a href="http://files.cnblogs.com/hanxi/CountCode.7z">统计代码行数</a></p>
<p>　　[2] &nbsp;<a href="http://files.cnblogs.com/hanxi/batFile.7z">删除htm文件中脚本代码段</a></p>
<p>　　[3] <a href="http://files.cnblogs.com/hanxi/cplusplus.7z">c++标准参考文档离线chm版</a></p>
<p>&nbsp;</p>]]></description></item><item><title>软件开发笔记</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/30/2570475.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 30 Jun 2012 04:37:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/30/2570475.html</guid><description><![CDATA[<div class="Section0">
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012062921433197.png" alt="" /></p>
</div>]]></description></item><item><title>gdb常用命令的用法</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/14/2549268.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 14 Jun 2012 14:13:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/14/2549268.html</guid><description><![CDATA[<p><span style="font-size: 15px;"><span style="font-family: 楷体;">　　今天花了几分钟来学习使用gdb调试程序，有过以前使用IDE调试程序的基础，仅仅只需要花几分钟就能够很快的学会使用gdb命令来调试程序了。</span><span style="font-family: 楷体;">这里结合实例来说明怎么使用gdb命令。首先写一个简单的程序，然后载对程序进行调试。</span></span></p>
<p><span style="font-family: 楷体; font-size: 15px;">&nbsp; &nbsp; 用于调试的示例程序：</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('55c02e99-c7d8-4281-95a9-a612ae428ec8')"><img id="code_img_closed_55c02e99-c7d8-4281-95a9-a612ae428ec8" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_55c02e99-c7d8-4281-95a9-a612ae428ec8" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('55c02e99-c7d8-4281-95a9-a612ae428ec8',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">示例代码</span>
<div id="cnblogs_code_open_55c02e99-c7d8-4281-95a9-a612ae428ec8" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> #include &lt;stdio.h&gt;
<span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">int</span> sum(<span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span><span style="color: #000000;"> b)
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> result;
</span><span style="color: #008080;"> 6</span>     result = a +<span style="color: #000000;"> b;
</span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> result;
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> <span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> **<span style="color: #000000;"> argv)
</span><span style="color: #008080;">11</span> <span style="color: #000000;">{
</span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">if</span> (argc != <span style="color: #800080;">3</span><span style="color: #000000;">)
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">14</span>         printf(<span style="color: #800000;">"</span><span style="color: #800000;">请输入2个数字参数，用空格分开</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">return</span> -<span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">int</span> a = *argv[<span style="color: #800080;">1</span>]-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
</span><span style="color: #008080;">18</span>     <span style="color: #0000ff;">int</span> b = *argv[<span style="color: #800080;">2</span>]-<span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">;
</span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">int</span> re =<span style="color: #000000;"> sum(a,b);
</span><span style="color: #008080;">20</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">%d + %d = %d</span><span style="color: #800000;">"</span><span style="color: #000000;">,a,b,re);
</span><span style="color: #008080;">21</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">22</span> }</pre>
</div>
</div>
<p>&nbsp;</p>
<p><span style="font-family: 楷体; font-size: 15px;">　　这个程序很简单，只做了个加法运算。现在我们开始调试程序了。</span></p>
<p><span style="font-family: 楷体; background-color: #999999; font-size: 14pt;"><span style="color: #0000ff;"><span style="color: #ff0000;"><span style="color: #ffffff;">　　1.编译生成。</span></span></span>&nbsp; &nbsp; &nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　IDE中分Debug和Release版本,那么在Linux我们一般编译这个文件使用：</span></p>
<p>　　　　gcc -o testgdb testgdb.c&nbsp;</p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　这就相当于IDE中的Release版本的编译生成工作了，那么怎么编译出Debug版本呢？这样，只需要添加 -g 命令就行：</span></p>
<p>　　　　gcc -o testgdb testgdb.c -g</p>
<p><span style="font-family: 楷体; background-color: #999999; color: #ffffff; font-size: 14pt;">　　2.进入调试状态，即进入dgb。&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　进入gdb有两种方式，一种是直接输入命令gdb。另一种是在gdb后面加上第一步编译好的文件名。进入到gdb调试状态后可以看到</span></p>
<p style="margin-left: 90px;"><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">GNU gdb (GDB) 7.0.1-debian</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">Copyright (C) 2009 Free Software Foundation, Inc.</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">This is free software: you are free to change and redistribute it.</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">There is NO WARRANTY, to the extent permitted by law.  Type "show copying"</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">and "show warranty" for details.</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">This GDB was configured as "i486-linux-gnu".</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">For bug reporting instructions, please see:</span></em></span><br /><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span></em></span></p>
<p style="margin-left: 90px;"><span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">(gdb)</span></em></span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　如果使用的是第一种方式，那么进入后得继续使用file命令来打开待调试的文件：(gdb)file testgdb</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　会给出如下提示信息：</span></p>
<p style="margin-left: 30px;">　　　　<span style="background-color: #000000; color: #99cc00;"><em><span style="font-size: 12px;">Reading symbols from /home/hanxi/cpp/testgdb/testgdb...done.</span></em></span></p>
<p><span style="font-family: 楷体; background-color: #999999; color: #ffffff; font-size: 14pt;">　　3.调试程序。 &nbsp;&nbsp;<br /></span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　常用命令：</span></p>
<table border="0">
<tbody>
<tr>
<td style="text-align: left;"><span style="font-size: 15px;">GDB常用命令</span></td>
<td><span style="font-size: 15px;">格式</span></td>
<td><span style="font-size: 15px;">含义</span></td>
<td><span style="font-size: 15px;">简写</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">list</span></td>
<td><span style="font-size: 15px;">List [开始，结束]</span></td>
<td><span style="font-size: 15px;">列出文件的代码清单</span></td>
<td><span style="font-size: 15px;">l</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">prit</span></td>
<td><span style="font-size: 15px;">Print 变量名</span></td>
<td><span style="font-size: 15px;">打印变量内容</span></td>
<td><span style="font-size: 15px;">p</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">break</span></td>
<td><span style="font-size: 15px;">Break [行号或函数名]</span></td>
<td><span style="font-size: 15px;">设置断点</span></td>
<td><span style="font-size: 15px;">b</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">continue</span></td>
<td><span style="font-size: 15px;">Continue [开始，结束]</span></td>
<td><span style="font-size: 15px;">继续运行</span></td>
<td><span style="font-size: 15px;">c</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">info</span></td>
<td><span style="font-size: 15px;">Info 变量名</span></td>
<td><span style="font-size: 15px;">列出信息</span></td>
<td><span style="font-size: 15px;">i</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">next</span></td>
<td><span style="font-size: 15px;">Next</span></td>
<td><span style="font-size: 15px;">下一行</span></td>
<td><span style="font-size: 15px;">n</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">step</span></td>
<td><span style="font-size: 15px;">Step</span></td>
<td><span style="font-size: 15px;">进入函数（步入）</span></td>
<td><span style="font-size: 15px;">S</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">display</span></td>
<td><span style="font-size: 15px;">Display 变量名</span></td>
<td><span style="font-size: 15px;">显示参数</span></td>
<td><span style="font-size: 15px;">&nbsp;</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">file</span></td>
<td><span style="font-size: 15px;">File 文件名（可以是绝对路径和相对路径）</span></td>
<td><span style="font-size: 15px;">加载文件</span></td>
<td><span style="font-size: 15px;">&nbsp;</span></td>





</tr>
<tr>
<td><span style="font-size: 15px;">run</span></td>
<td><span style="font-size: 15px;">Run args</span></td>
<td><span style="font-size: 15px;">运行程序</span></td>
<td><span style="font-size: 15px;">r</span></td>





</tr>





</tbody>





</table>
<p><span style="font-family: 楷体; font-size: 15px;">&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　接下来对一个一个命令进行测试。(注:(gdb)后面是输入的命令和参数)</span></p>
<p><span style="color: #99cc00;"><span style="font-family: 楷体;">　 &nbsp; &nbsp; &nbsp;<span style="background-color: #000000;">(1):</span></span><span style="font-family: 楷体; background-color: #000000;">　　</span></span><span style="font-family: 楷体;"><span style="color: #99cc00;"><span style="background-color: #000000;">(gdb)run 2 3</span> &nbsp;</span> &nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　表示执行调试并传入两个参数2,3</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　运行结果：</span></p>
<p style="margin-left: 90px;"><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>Starting program: /home/hanxi/cpp/testgdb/testgdb 2 3</em></span><br /><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>2 + 3 = 5</em></span><br /><span style="background-color: #000000; color: #99cc00;"><span style="font-size: 12px;"><em>Program exited normally.</em></span>&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　这样就出现了计算结果，因为没有设置断点，所以就会执行完程序。下面就是使用设置断点的命令了。</span></p>
<p><span style="background-color: #000000; color: #99cc00; font-family: 楷体;"><span style="background-color: #ffffff;">&nbsp; &nbsp; &nbsp; &nbsp;</span>(2): &nbsp; &nbsp;(gdb)b 4 &nbsp;&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　表示在第4行设置断点，gdb给出以下提示说明设置断点成功</span></p>
<p style="margin-left: 90px;"><span style="background-color: #000000; color: #99cc00;"><em>Breakpoint 1 at 0x80483ca: file testgdb.c, line 4.</em></span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　设置完断点后，我们再来运行程序，执行run命令。出现下面的提示信息：</span></p>
<p style="margin-left: 90px;"><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>Starting program: /home/hanxi/cpp/testgdb/testgdb 2 3</em></span></p>
<p style="margin-left: 90px;"><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>Breakpoint 1, sum (a=2, b=3) at testgdb.c:6</em></span><br /><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>6		result = a + b;</em></span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　这样它停留在第6行了。我们怎么来继续执行了，使用c命令，相当于VS中的快捷键F5</span></p>
<p><span style="font-family: 楷体; background-color: #000000; color: #99cc00;"><span style="background-color: #ffffff;">　　　　</span>(3): &nbsp; &nbsp; (gdb)c &nbsp;&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　继续执行程序，gdb给出以下提示信息</span></p>
<p style="margin-left: 90px;"><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>Continuing.</em></span><br /><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>2 + 3 = 5</em></span><br /><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>Program exited normally.</em></span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　这里又把程序执行完了，因为前面只设置一个断点。那么我们怎么知道设置了多少个断点呢？使用info break命令就能满足</span></p>
<p><span style="font-family: 楷体; color: #99cc00; background-color: #000000;"><span style="background-color: #ffffff;">　　　　</span>(4): &nbsp; &nbsp; (gdb)info break &nbsp;&nbsp;</span></p>
<p><span style="font-size: 15px;"><span style="font-family: 楷体;">　　　　gdb给出了下面的提示信息：</span>&nbsp;</span></p>
<p style="margin-left: 90px;"><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>Num Type Disp Enb Address What</em></span><br /><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>2       breakpoint     keep y   0x080483ca in sum at testgdb.c:4</em></span><br /><span style="font-size: 12px; background-color: #000000; color: #99cc00;"><em>	breakpoint already hit 1 time</em></span></p>
<p><span style="font-size: 15px;"><span style="font-family: 楷体;">　　　　这信息提示我们，已经在第4行设置了一个断点，接下来就是去除断点的问题了，</span><span style="font-family: 楷体;">我们怎么把刚才的断点删除掉呢？在VS6.0是重复点工具栏的鼠型图标，在VS2010是点击每行的行首。在这里，我们也可以使用命令简单的删除或者禁用断点。删除断点的命令是delete b，禁用断点的命令是disable b。推荐使用disable b 命令。恢复禁用的断点的命令是enable b。这些命令后面可以带参数来说明第几个断点（是第几个不是第几行）。如：</span></span></p>
<p><span style="font-family: 楷体; background-color: #000000; color: #99cc00;"><span style="background-color: #ffffff;">　　　　</span>(5): &nbsp; &nbsp; (gdb)disable b &nbsp;&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　然后执行run命令后就不会断点了，接着使用enable b命令后再使用run命令，这样又有了断点。有时候我们断点了就需要查看某个变量的值，那么使用什么命令查看变量的值和设置变量的值呢？答案是使用display或者是p</span></p>
<p><span style="font-family: 楷体; color: #99cc00; background-color: #000000;"><span style="background-color: #ffffff;">　　　　</span>(6): &nbsp; &nbsp; (gdb)display result &nbsp;&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　这个效果在IDE中也有对应的：display相当于添加监听变量，每一次run后都会给出result的值。而print就对应着IDE中的鼠标停留时显示变量的值。</span></p>
<p><span style="font-family: 楷体; background-color: #000000; color: #99cc00;"><span style="background-color: #ffffff;">　　　　</span>(7): &nbsp; &nbsp; (gdb)s &nbsp;&nbsp;</span></p>
<p><span style="font-family: 楷体; font-size: 15px;">　　　　这是步入命令step，同样也有步过命令next（简写为n）。</span></p>
<p><span style="font-size: 15px;"><span style="font-family: 楷体;">　　好吧，上面说的一些基本命令用来调试一些小代码差不多够用了，刚百度搜索了下，百度文库中有个不错的详细教程，如果有想深入的朋友可以进去<span style="color: #0000ff;"><a title="Linux下GDB教程" href="http://wenku.baidu.com/view/c4d4404e767f5acfa1c7cdc6.html?from=rec&amp;pos=0&amp;weight=537&amp;lastweight=106&amp;count=5" target="_blank"><span style="color: #0000ff;">Linux下GDB教程</span></a></span>看看。</span><span style="font-family: 楷体;">&nbsp;如果平时使用的时候忘记了命令也可以使用help命令来查看帮助信息，会提示一些命令的用法，只可惜是英语的，一般也能将就的看懂，实在看不懂的可以把可能的命令测试就ok了。下面是输入help命令后的信息：</span></span></p>
<p style="margin-left: 90px;"><span style="background-color: #000000; color: #99cc00; font-size: 12px;">List of classes of commands:</span></p>
<p style="margin-left: 90px;"><span style="background-color: #000000; color: #99cc00; font-size: 12px;">aliases -- Aliases of other commands</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">breakpoints -- Making program stop at certain points</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">data -- Examining data</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">files -- Specifying and examining files</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">internals -- Maintenance commands</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">obscure -- Obscure features</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">running -- Running the program</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">stack -- Examining the stack</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">status -- Status inquiries</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">support -- Support facilities</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">tracepoints -- Tracing of program execution without stopping the program</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">user-defined -- User-defined commands</span></p>
<p style="margin-left: 90px;"><span style="background-color: #000000; color: #99cc00; font-size: 12px;">Type "help" followed by a class name for a list of commands in that class.</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">Type "help all" for the list of all commands.</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">Type "help" followed by command name for full documentation.</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">Type "apropos word" to search for commands related to "word".</span><br /><span style="background-color: #000000; color: #99cc00; font-size: 12px;">Command name abbreviations are allowed if unambiguous.</span></p>
<p><span style="color: #000000; background-color: #ffffff; font-size: 15px;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="font-family: 楷体; font-size: 16px;">上面的提示是：比如说你想查看断点（breakpoints）的信息可以使用help breakpoints命令。希望各位看了这文章的朋友们可以学到点东西！欢迎拍砖！</span></span></p>]]></description></item><item><title>推导基姆拉尔森公式根据日期计算星期</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/12/2545828.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 12 Jun 2012 01:17:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/12/2545828.html</guid><description><![CDATA[<p><span>转自：<a href="http://topic.csdn.net/t/20050425/23/3966336.html">http://topic.csdn.net/t/20050425/23/3966336.html</a></span></p>
<p><span>========================================================&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 计算给定日期星期几好象是编程都会遇到的问题，最近论坛里也有人提到这个问题，并给出了一个公式：&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; W= &nbsp; (d+2*m+3*(m+1)/5+y+y/4-y/100+y/400) &nbsp; mod &nbsp; 7&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; (要求将1、2月当作上一年的13、14月来计算)&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 去看了看这个公式的原帖 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; http://blog.csdn.net/ycrao/archive/2000/11/24/3825.aspx&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 其讲述的过程并不清楚，便想怎样自己推导出一个公式来，花了几个小时，总算是弄出来了，结果跟上面的公式一样：)&nbsp;</span><br /><span>========================================================&nbsp;</span><br /><br /><span>下面我们完全按自己的思路由简单到复杂一步步进行推导&hellip;&hellip;&nbsp;</span><br /><br /><span>推导之前，先作两项规定：&nbsp;</span><br /><span>①用 &nbsp; y, &nbsp; m, &nbsp; d, &nbsp; w &nbsp; 分别表示 &nbsp; 年 &nbsp; 月 &nbsp; 日 &nbsp; 星期(w=0-6 &nbsp; 代表星期日-星期六&nbsp;</span><br /><span>②我们从 &nbsp; 公元0年1月1日星期日 &nbsp; 开始&nbsp;</span><br /><br /><br /><span>一、只考虑最开始的 &nbsp; 7 &nbsp; 天，即 &nbsp; d &nbsp; = &nbsp; 1---7 &nbsp; 变换到 &nbsp; w &nbsp; = &nbsp; 0---6&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 很直观的得到:&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; d-1&nbsp;</span><br /><br /><span>二、扩展到整个1月份&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 模7的概念大家都知道了，也没什么好多说的。不过也可以从我们平常用的日历中看出来，在周历里边每列都是一个按7增长的等差数列，如1、8、15、22的星期都是相同的。所以得到整个1月的公式如下：&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; (d-1) &nbsp; % &nbsp; 7 &nbsp; &nbsp; --------- &nbsp; 公式⑴&nbsp;</span><br /><br /><span>三、按年扩展&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 由于按月扩展比较麻烦，所以将年扩展放在前面说&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ① &nbsp; 我们不考虑闰年，假设每一年都是 &nbsp; 365 &nbsp; 天。由于365是7的52倍多1天，所以每一年的第一天和最后一天星期是相同的。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 也就是说下一年的第一天与上一年的第一天星期滞后一天。这是个重要的结论，每过一年，公式⑴会有一天的误差，由于我们是从0年开始的，所以只须要简单的加上年就可以修正扩展年引起的误差，得到公式如下：&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; (d-1 &nbsp; + &nbsp; y) &nbsp; % &nbsp; 7 &nbsp;&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ② &nbsp; 将闰年考虑进去&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 每个闰年会多出一天，会使后面的年份产生一天的误差。如我们要计算2005年1月1日星期几，就要考虑前面的已经过的2004年中有多少个闰年，将这个误差加上就可以正确的计算了。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 根据闰年的定义(能被4整但不能被100整除或能被400整)，得到计算闰年的个数的算式：y/4 &nbsp; - &nbsp; y/100 &nbsp; + &nbsp; y/400。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 由于我们要计算的是当前要计算的年之前的闰年数，所以要将年减1，得到了如下的公式：&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; [d-1+y &nbsp; + &nbsp; (y-1)/4-(y-1)/100+(y-1)/400] &nbsp; % &nbsp; 7 &nbsp; -----公式⑵&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 现在，我们得到了按年扩展的公式⑵，用这个公式可以计算任一年的1月份的星期&nbsp;</span><br /><br /><span>四、扩展到其它月&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 考虑这个问题颇费了一翻脑筋，后来还是按前面的方法大胆假才找到突破口。&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ①现在我们假设每个月都是28天，且不考虑闰年&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 有了这个假设，计算星期就太简单了，因为28正好是7的整数倍，每个月的星期都是一样的，公式⑵对任一个月都适用 &nbsp; ：)&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ②但假设终究是假设，首先1月就不是28天，这将会造成2月份的计算误差。1月份比28天要多出3天，就是说公式⑵的基础上，2月份的星期应该推后3天。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 而对3月份来说，推后也是3天(2月正好28天，对3月的计算没有影响)。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 依此类推，每个月的计算要将前面几个月的累计误差加上。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 要注意的是误差只影响后面月的计算，因为12月已是最后一个月，所以不用考虑12月的误差天数，同理，1月份的误差天数是0，因为前面没有月份影响它。&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 由此，想到建立一个误差表来修正每个月的计算。&nbsp;</span><br /><span>==================================================&nbsp;</span><br /><span>月 &nbsp; &nbsp; 误差 &nbsp; 累计 &nbsp; &nbsp; 模7&nbsp;</span><br /><span>1 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;</span><br /><span>2 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp;</span><br /><span>3 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp;</span><br /><span>4 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp;</span><br /><span>5 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp;</span><br /><span>6 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 11 &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp;</span><br /><span>7 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 13 &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp;</span><br /><span>8 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 16 &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp;</span><br /><span>9 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 19 &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp;</span><br /><span>10 &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 21 &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;</span><br /><span>11 &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 24 &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp;</span><br /><span>12 &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; &nbsp; 26 &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; (闰年时2月会有一天的误差，但我们现在不考虑)&nbsp;</span><br /><span>==================================================&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 我们将最后的误差表用一个数组存放&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 在公式⑵的基础上可以得到扩展到其它月的公式&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; e[] &nbsp; = &nbsp; {0,3,3,6,1,4,6,2,5,0,3,5}&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; [d-1+y &nbsp; + &nbsp; e[m-1] &nbsp; + &nbsp; (y-1)/4-(y-1)/100+(y-1)/400] &nbsp; % &nbsp; 7 &nbsp; --公式⑶&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ③上面的误差表我们没有考虑闰年，如果是闰年，2月会一天的误差，会对后面的3-12月的计算产生影响，对此，我们暂时在编程时来修正这种情况，增加的限定条件是如果当年是闰年，且计算的月在2月以后，需要加上一天的误差。大概代码是这样的：&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; (d-1 &nbsp; + &nbsp; y &nbsp; + &nbsp; e[m-1] &nbsp; + &nbsp; (y-1)/4 &nbsp; - &nbsp; (y-1)/100 &nbsp; + &nbsp; (y-1)/400);&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; if(m&gt; 2 &nbsp; &amp;&amp; &nbsp; (y%4==0 &nbsp; &amp;&amp; &nbsp; y%100!=0 &nbsp; || &nbsp; y%400==0) &nbsp; &amp;&amp; &nbsp; y!=0)&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++w;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; %= &nbsp; 7;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 现在，已经可以正确的计算任一天的星期了。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 注意：0年不是闰年，虽然现在大都不用这个条件，但我们因从公元0年开始计算，所以这个条件是不能少的。&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ④ &nbsp; 改进&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 公式⑶中，计算闰年数的子项 &nbsp; (y-1)/4-(y-1)/100+(y-1)/400 &nbsp; 没有包含当年，如果将当年包含进去，则实现了如果当年是闰年，w &nbsp; 自动加1。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 由此带来的影响是如果当年是闰年，1,2月份的计算会多一天误差，我们同样在编程时修正。则代码如下&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; (d-1 &nbsp; + &nbsp; y &nbsp; + &nbsp; e[m-1] &nbsp; + &nbsp; y/4 &nbsp; - &nbsp; y/100 &nbsp; + &nbsp; y/400); &nbsp; ---- &nbsp; 公式⑷&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; if(m &lt;3 &nbsp; &amp;&amp; &nbsp; (y%4==0 &nbsp; &amp;&amp; &nbsp; y%100!=0 &nbsp; || &nbsp; y%400==0) &nbsp; &amp;&amp; &nbsp; y!=0)&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --w;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; %= &nbsp; 7;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 与前一段代码相比，我们简化了 &nbsp; w &nbsp; 的计算部分。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 实际上还可以进一步将常数 &nbsp; -1 &nbsp; 合并到误差表中，但我们暂时先不这样做。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 至此，我们得到了一个阶段性的算法，可以计算任一天的星期了。&nbsp;</span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">public</span>   <span style="color: #0000ff;">class</span><span style="color: #000000;">   Week   { 
        </span><span style="color: #0000ff;">public</span>   <span style="color: #0000ff;">static</span>   <span style="color: #0000ff;">void</span><span style="color: #000000;">   main(String[]   args){ 
                </span><span style="color: #0000ff;">int</span>   y   =   <span style="color: #800080;">2005</span><span style="color: #000000;">; 
                </span><span style="color: #0000ff;">int</span>   m   =   <span style="color: #800080;">4</span><span style="color: #000000;">; 
                </span><span style="color: #0000ff;">int</span>   d   =   <span style="color: #800080;">25</span><span style="color: #000000;">; 
                
                </span><span style="color: #0000ff;">int</span>   e[]   =   <span style="color: #0000ff;">new</span>   <span style="color: #0000ff;">int</span>[]{<span style="color: #800080;">0</span>,<span style="color: #800080;">3</span>,<span style="color: #800080;">3</span>,<span style="color: #800080;">6</span>,<span style="color: #800080;">1</span>,<span style="color: #800080;">4</span>,<span style="color: #800080;">6</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">5</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">3</span>,<span style="color: #800080;">5</span><span style="color: #000000;">}; 
                </span><span style="color: #0000ff;">int</span>   w   =   (d-<span style="color: #800080;">1</span>+e[m-<span style="color: #800080;">1</span>]+y+(y&gt; &gt; <span style="color: #800080;">2</span>)-y/<span style="color: #800080;">100</span>+y/<span style="color: #800080;">400</span><span style="color: #000000;">); 
                </span><span style="color: #0000ff;">if</span>(m &lt;<span style="color: #800080;">3</span>   &amp;&amp;   ((y&amp;<span style="color: #800080;">3</span>)==<span style="color: #800080;">0</span>   &amp;&amp;   y%<span style="color: #800080;">100</span>!=<span style="color: #800080;">0</span>   ||   y%<span style="color: #800080;">400</span>==<span style="color: #800080;">0</span>)   &amp;&amp;   y!=<span style="color: #800080;">0</span><span style="color: #000000;">){ 
                        </span>--<span style="color: #000000;">w; 
                } 
                w   </span>%=   <span style="color: #800080;">7</span><span style="color: #000000;">; 
                
                System.</span><span style="color: #0000ff;">out</span><span style="color: #000000;">.println(w); 
        } 
} </span></pre>
</div>
<p><span>五、简化&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 现在我们推导出了自己的计算星期的算法了，但还不能称之为公式。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 所谓公式，应该给定年月日后可以手工算出星期几的，但我们现在的算法需要记住一个误差表才能进行计算，所以只能称为一种算法，还不是公式。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 下面，我们试图消掉这个误差表&hellip;&hellip;&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; =============================&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 消除闰年判断的条件表达式&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; =============================&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 由于闰年在2月份产生的误差，影响的是后面的月份计算。如果2月是排在一年的最后的话，它就不能对其它月份的计算产生影响了。可能已经有人联想到了文章开头的公式中为什么1,2月转换为上年的13,14月计算了吧 &nbsp; ：)</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 就是这个思想了，我们也将1,2月当作上一年的13,14月来看待。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 由此会产生两个问题需要解决：&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 1&gt; 一年的第一天是3月1日了，我们要对 &nbsp; w &nbsp; 的计算公式重新推导&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 2&gt; 误差表也发生了变化，需要得新计算&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ①推导 &nbsp; w &nbsp; 计算式&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&gt; &nbsp; 用前面的算法算出 &nbsp; 0年3月1日是星期3&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 前7天, &nbsp; d &nbsp; = &nbsp; 1---7 &nbsp; &nbsp; ===&gt; &nbsp; &nbsp; w &nbsp; = &nbsp; 3----2&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 得到 &nbsp; w &nbsp; = &nbsp; (d+2) &nbsp; % &nbsp; 7&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 此式同样适用于整个三月份&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2&gt; &nbsp; 扩展到每一年的三月份&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [d &nbsp; + &nbsp; 2 &nbsp; + &nbsp; y &nbsp; + &nbsp; (y-1)/4 &nbsp; - &nbsp; (y-1)/100 &nbsp; + &nbsp; (y-1)/400] &nbsp; % &nbsp; 7&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ②误差表&nbsp;</span><br /><span>==================================================&nbsp;</span><br /><span>月 &nbsp; &nbsp; 误差 &nbsp; 累计 &nbsp; &nbsp; 模7&nbsp;</span><br /><span>3 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;</span><br /><span>4 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp;</span><br /><span>5 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp;</span><br /><span>6 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp;</span><br /><span>7 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 10 &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp;</span><br /><span>8 &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 13 &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp;</span><br /><span>9 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 16 &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp;</span><br /><span>10 &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 18 &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp;</span><br /><span>11 &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; 21 &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp;</span><br /><span>12 &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 23 &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp;</span><br /><span>13 &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; 26 &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp;</span><br /><span>14 &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; &nbsp; 29 &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp;</span><br /><span>==================================================&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; ③得到扩展到其它月的公式&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; e[] &nbsp; = &nbsp; {0,3,5,1,3,6,2,4,0,2,5,1}&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; [d+2 &nbsp; + &nbsp; e[m-3] &nbsp; +y+(y-1)/4-(y-1)/100+(y-1)/400] &nbsp; % &nbsp; 7&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; (3 &nbsp; &lt;= &nbsp; m &nbsp; &lt;= &nbsp; 14)&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 我们还是将 &nbsp; y-1 &nbsp; 的式子进行简化&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; [d+2 &nbsp; + &nbsp; e[m-3] &nbsp; +y+y/4-y/100+y/400] &nbsp; % &nbsp; 7&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; (3 &nbsp; &lt;= &nbsp; m &nbsp; &lt;= &nbsp; 14)&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 这个式子如果当年是闰年，会告成多1的误差&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 但我们将1,2月变换到上一年的13,14月，年份要减1，所以这个误差会自动消除，所以得到下面的算法：&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; int &nbsp; e[] &nbsp; = &nbsp; new &nbsp; int[]{0,3,5,1,3,6,2,4,0,2,5,1};&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; if(m &nbsp; &lt; &nbsp; 3) &nbsp; {&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m &nbsp; += &nbsp; 12;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --y;&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; int &nbsp; w &nbsp; = &nbsp; (d+2 &nbsp; + &nbsp; e[m-3] &nbsp; +y+(y/4)-y/100+y/400) &nbsp; % &nbsp; 7; &nbsp; -----公式⑸&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 我们可以看到公式⑸与公式⑷几乎是一样的，仅仅是误差天和一个常数的差别&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 常数的区别是由起始日期的星期不同引起的，0年1月1日星期日，0年3日1日星期三，有三天的差别，所以常数也从 &nbsp; -1 &nbsp; 变成了 &nbsp; 2。&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 现在，我们成功的消除了繁琐的闰年条件判断。&nbsp;</span><br /><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; =============================&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 消除误差表&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; =============================&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 假如存在一种m到e的函数映射关系，使得&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e[m-3] &nbsp; = &nbsp; f(m)&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 则我们就可以用 &nbsp; f(m) &nbsp; 取代公式⑸中的子项 &nbsp; e[m-3]，也就消除了误差表。&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 由于误差表只有12个项，且每一项都可以加减 &nbsp; 7n &nbsp; 进行调整，这个函数关系是可以拼凑出来的。但是这个过程可能是极其枯燥无味的，我现在不想自己去推导它，我要利用前人的成果。所谓前人栽树，后人乘凉嘛 &nbsp; ：)</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 文章开头开出的公式中的 &nbsp; 2*m+3*(m+1)/5 &nbsp; 这个子项引起了我的兴趣&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 经过多次试试验，我运行下面的代码&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; for(m=1; &nbsp; m &lt;=14; &nbsp; ++m)&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.out.print((-1+2*m+3*(m+1)/5)%7 &nbsp; + &nbsp; " &nbsp; ");&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; System.out.println();&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 天哪，输出结果与我的误差表不谋而合，成功了，哈哈&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; 4 &nbsp; 0 &nbsp; 3 &nbsp; 5 &nbsp; 1 &nbsp; 3 &nbsp; 6 &nbsp; 2 &nbsp; 4 &nbsp; 0 &nbsp; 2 &nbsp; 5 &nbsp; 1&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; Press &nbsp; any &nbsp; key &nbsp; to &nbsp; continue...&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 上面就是输出结果，看它后面的12项，与我的误差表完全吻合!!!&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 现在就简单的，将 &nbsp; f(m) &nbsp; = &nbsp; -1 &nbsp; + &nbsp; 2*m &nbsp; + &nbsp; 3*(m+1)/5 &nbsp; 代入公式⑸，得到&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; w &nbsp; = &nbsp; (d+1+2*m+3*(m+1)/5+y+(y/4)-y/100+y/400) &nbsp; % &nbsp; 7 &nbsp; ----公式6&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 约束条件: &nbsp; m=1,m=2 &nbsp; 时 &nbsp; m=m+12,y=y-1;&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 现在，我们得到了通用的计算星期的公式，并且&ldquo;完全&rdquo;是按自己的思想推导出来的(那个函数映射关系不算)，只要理解了这个推导的步骤，即使有一天忘记了这个公式，也可以重新推导出来!&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 可能有人会注意到公式⑹与文章开头的公式相差一个常数 &nbsp; 1，这是因为原公式使用数字0--6表示星期一到星期日，而我用0--6表示星期日到星期六。实际上是一样，你可以改成任意你喜欢的表示方法，只需改变这个常数就可以了。&nbsp;</span><br /><br /><br /><span>六、验证公式的正确性。&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 一个月中的日期是连续的，只要有一天对的，模7的关系就不会错，所以一个月中只须验证一天就可以了，一天需要验12天。由于扩展到年和月只跟是否闰年有关系，就是说至少要验证一个平年和一个闰年，也就是最少得验证24次。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 我选择了 &nbsp; 2005 &nbsp; 年和 &nbsp; 2008 &nbsp; 年，验证每个月的1号。&nbsp;</span><br /><span>测试代码如下：&nbsp;</span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;">   test   { 
        </span><span style="color: #0000ff;">public</span>   <span style="color: #0000ff;">int</span>   GetWeek(<span style="color: #0000ff;">int</span>   y,   <span style="color: #0000ff;">int</span>   m,   <span style="color: #0000ff;">int</span><span style="color: #000000;">   d)   { 
                </span><span style="color: #0000ff;">if</span>(m &lt;3<span style="color: #000000;">)   { 
                        m   </span>+=   12<span style="color: #000000;">; 
                        </span>--<span style="color: #000000;">y; 
                } 
                </span><span style="color: #0000ff;">int</span>   w   =   (d+1+2*m+3*(m+1)/5+y+(y&gt; &gt; 2)-y/100+y/400)   %   7<span style="color: #000000;">; 
                </span><span style="color: #0000ff;">return</span><span style="color: #000000;">   w; 
        } 
} 

</span><span style="color: #0000ff;">public</span>   <span style="color: #0000ff;">class</span><span style="color: #000000;">   Week   { 
        </span><span style="color: #0000ff;">public</span>   <span style="color: #0000ff;">static</span>   <span style="color: #0000ff;">void</span><span style="color: #000000;">   main(String[]   args){ 
                </span><span style="color: #0000ff;">int</span>   y   =   2005<span style="color: #000000;">; 
                </span><span style="color: #0000ff;">int</span>   m   =   1<span style="color: #000000;">; 
                </span><span style="color: #0000ff;">int</span>   d   =   1<span style="color: #000000;">; 
                
                test   t   </span>=   <span style="color: #0000ff;">new</span><span style="color: #000000;">   test(); 
                String   week[]   </span>=   <span style="color: #0000ff;">new</span><span style="color: #000000;">   String[]{ 
                        </span>"星期日 ", "星期一 ", "星期二 ", "星期三 ", "星期四 ", "星期五 ", "星期六 "<span style="color: #000000;"> 
                }; 
                
                </span><span style="color: #0000ff;">for</span>(y=2005;   y &lt;=2008;   y+=3<span style="color: #000000;">)   { 
                        </span><span style="color: #0000ff;">for</span>(m=1;   m &lt;=12;   ++<span style="color: #000000;">m)   { 
                                String   str   </span>=   y   +   "- "   +   m   +   "- "   +   d   +   "\t "   +<span style="color: #000000;">   week[t.GetWeek(y,m,d)]; 
                                System.out.println(str); 
                        } 
                } 
        } 
} </span></pre>
</div>
<p><span>查万年历，检查程序的输出，完全正确。&nbsp;</span><br /><br /><span>七、后话&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 我们这个公式的推导是以0年3月1日为基础的，对该日以后的日期都是可以计算的。但是否可以扩展到公元前(1,2已属于公元前1年的13,14月了)呢？&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 虽然我对0年1月和2月、以及公元前1年(令y=-1)的12月作了验证是正确的，但我在推导这个公式时并未想到将其扩展到公元前，所以上面的推导过程没有足够理论依据可以证明其适用于公元前。(负数的取模在不同的编译器如C++中好象处理并不完全正确)。&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 另外一有点是对于0年是否存在的争议，一种折中的说法是0年存在，但什么也没有发生，其持续时间为0。还有在罗马的格利戈里历法中有10天是不存的(1582年10月5日至14持续时间为0)，英国的历法中有11天(1752年9月3日至13日)是不存在的。感兴趣的朋友可以看看这里：&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; http://www.whtv.com.cn/zhuanti/celebration/when/wz16.htm&nbsp;</span><br /><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 但是我们做的是数字计算，不管那一天是否存在，持续的时间是24小时还是23小时甚至是0小时，只要那个号码存在，就有一个星期与之对应。所以这个公式仍然是适用的。&nbsp;</span><br /><span>&nbsp; &nbsp; &nbsp; &nbsp; 如果要计算的是时间段，就必须考虑这个问题了。&nbsp;</span></p>
<p><span>&nbsp;</span></p>
<p><span>&nbsp;</span></p>]]></description></item><item><title>利用基姆拉尔森公式根据日期计算星期</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/12/2545808.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 12 Jun 2012 00:54:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/12/2545808.html</guid><description><![CDATA[<pre>参考网址：<a href="http://blog.sina.com.cn/s/blog_5f571dba0100cvjl.html">http://blog.sina.com.cn/s/blog_5f571dba0100cvjl.html</a><br /><br />修改了下，<span>把一月和二月看成是上一年的十三月和十四月，例：如果是</span><span style="color: #ff0000;">2004-1-10</span><span>则换算成：</span><span style="color: #ff0000;">2003-13-10</span><span>来代入公式计算。源代码对这个问题没有减年份。<br />但是我测试了下，结果是一样的。</span></pre>
<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;"> ConsoleApplication1.cpp : 定义控制台应用程序的入口点。
</span><span style="color: #008000;">//
</span><span style="color: #000000;">
#include </span>&lt;vector&gt;<span style="color: #000000;">
#include </span>&lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">string</span> CaculateWeekDay(<span style="color: #0000ff;">int</span> y, <span style="color: #0000ff;">int</span> m, <span style="color: #0000ff;">int</span><span style="color: #000000;"> d)  
{  
    </span><span style="color: #0000ff;">if</span>(m==<span style="color: #800080;">1</span><span style="color: #000000;">)  
    {
        m</span>=<span style="color: #800080;">13</span><span style="color: #000000;">;
        y</span>--<span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">if</span>(m==<span style="color: #800080;">2</span><span style="color: #000000;">)   
    {
        m</span>=<span style="color: #800080;">14</span><span style="color: #000000;">;
        y</span>--<span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">int</span>   week=(d+<span style="color: #800080;">2</span>*m+<span style="color: #800080;">3</span>*(m+<span style="color: #800080;">1</span>)/<span style="color: #800080;">5</span>+y+y/<span style="color: #800080;">4</span>-y/<span style="color: #800080;">100</span>+y/<span style="color: #800080;">400</span>)%<span style="color: #800080;">7</span><span style="color: #000000;">;    
    </span><span style="color: #0000ff;">string</span>   weekstr=<span style="color: #800000;">""</span><span style="color: #000000;">;  
    </span><span style="color: #0000ff;">switch</span><span style="color: #000000;">(week)  
    {  
        </span><span style="color: #0000ff;">case</span>   <span style="color: #800080;">0</span>:   weekstr=<span style="color: #800000;">"</span><span style="color: #800000;">星期一</span><span style="color: #800000;">"</span>;   <span style="color: #0000ff;">break</span><span style="color: #000000;">;  
        </span><span style="color: #0000ff;">case</span>   <span style="color: #800080;">1</span>:   weekstr=<span style="color: #800000;">"</span><span style="color: #800000;">星期二</span><span style="color: #800000;">"</span>;   <span style="color: #0000ff;">break</span><span style="color: #000000;">;  
        </span><span style="color: #0000ff;">case</span>   <span style="color: #800080;">2</span>:   weekstr=<span style="color: #800000;">"</span><span style="color: #800000;">星期三</span><span style="color: #800000;">"</span>;   <span style="color: #0000ff;">break</span><span style="color: #000000;">;  
        </span><span style="color: #0000ff;">case</span>   <span style="color: #800080;">3</span>:   weekstr=<span style="color: #800000;">"</span><span style="color: #800000;">星期四</span><span style="color: #800000;">"</span>;   <span style="color: #0000ff;">break</span><span style="color: #000000;">;  
        </span><span style="color: #0000ff;">case</span>   <span style="color: #800080;">4</span>:   weekstr=<span style="color: #800000;">"</span><span style="color: #800000;">星期五</span><span style="color: #800000;">"</span>;   <span style="color: #0000ff;">break</span><span style="color: #000000;">;  
        </span><span style="color: #0000ff;">case</span>   <span style="color: #800080;">5</span>:   weekstr=<span style="color: #800000;">"</span><span style="color: #800000;">星期六</span><span style="color: #800000;">"</span>;   <span style="color: #0000ff;">break</span><span style="color: #000000;">;  
        </span><span style="color: #0000ff;">case</span>   <span style="color: #800080;">6</span>:   weekstr=<span style="color: #800000;">"</span><span style="color: #800000;">星期日</span><span style="color: #800000;">"</span>;   <span style="color: #0000ff;">break</span><span style="color: #000000;">;  
    }     
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">   weekstr;    
}  

</span><span style="color: #0000ff;">int</span> main(<span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span>*<span style="color: #000000;"> argv[])
{
    cout</span>&lt;&lt;CaculateWeekDay(<span style="color: #800080;">2012</span>, <span style="color: #800080;">6</span>, <span style="color: #800080;">12</span>)&lt;&lt;<span style="color: #000000;">endl;
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>]]></description></item><item><title>Git教程</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/11/2545542.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 11 Jun 2012 13:09:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/11/2545542.html</guid><description><![CDATA[<h1>转自：<a href="http://imzzh.com/linux/git/git-setup-guide.html">http://imzzh.com/linux/git/git-setup-guide.html</a></h1>
<p>Git是一个版本控制系统，linux内核就是由git管理的。同时git是由linux之父设计的，显然在linux下搭建git更能发挥其功效。</p>
<p>以下教程搭建在ubuntu 10.04之上</p>
<p>搭建一个Git服务器一般需要以下软件：OpenSSH Server、Git、Gitosis和Apache2(如果想使用Gitweb的话)<br />Tips：<br />1,使用 gitosis 來管理(gitosis 可以設定到 "誰" 可以存取此專案).<br />2,使用 gitolite 來管理(gitolite 可以設定 "誰" 可以存取此專案, 而且, 可以設定只能存取哪個 branch 等路徑)<br />本文只使用了gitosis<br /><br />一，首先，先在服务器上建立一个git用户，让其来管理commit / push，避免权限问题；</p>
<blockquote>
<p>sudo useradd -m git<br />sudo passwd git</p>

</blockquote>
<p>二，安装OpenSSH Server<br />sudo apt-get install openssh-server<br />可以对SSH进行配置，主要是修改登录权限<br />修改ssh服务端配置文件 /etc/ssh/sshd_config<br />Port 22 # 修改成你想要的登陆端口,如2222<br />PermitRootLogin no # 禁止root用户登陆<br />StrictModes yes # 检查密钥的用户和权限是否正确，默认打开的<br />RSAAuthentication yes # 启用 RSA 认证<br />PubkeyAuthentication yes # 启用公钥认证<br />PasswordAuthentication no # 禁止密码认证，默认是打开的<br />ServerKeyBits 1024 # 修改后变为此状态，将ServerKey强度改为1024比特<br />PermitEmptyPasswords no # 修改后变为此状态，禁止空密码进行登录</p>
<p>修改完成后，重启ssh服务：<br />sudo /etc/init.d/ssh restart</p>
<p>三，安装Git<br />sudo apt-get install git-core<br />如果出现依赖包问题，先update和upgrade一下</p>
<p>四,安装gitosis<br />(1)新建一个文件夹，用来存放下载的gitosis文件，如<br />mkdir ~/gitosis_setup<br />(2)安装gitosis<br />cd ~/ gitosis_setup<br />git clone git://eagain.net/gitosis<br />cd gitosis<br />sudo python setup.py install<br />如果提示没有找到python-setuptools.py，请到文章底下下载deb安装包。</p>
<p>五，安装gitweb<br />sudo apt-get install gitweb</p>
<p>六，安装apache2<br />sudo apt-get install apache2</p>
<p>七，配置gitweb<br />（1）默认没有 css 加载，把 gitweb 要用的静态文件连接到 web服务器目录 下：<br />cd /var/ www/<br />sudo ln -s / usr/ share/ gitweb/* .<br />(注意后面的点)<br />（2）sudo vi /etc/ gitweb.conf<br />将 $projectroot 改为gitosis-admin.git所在目录： /home/git/repositories<br />（3）修改 /home/git/repositories权限，默认情况下，gitosis将 repositories权限设置为不可读的<br />sudo chmod 777 -R /home/git/repositories</p>
<p>八，重新启动apache：sudo /etc/init.d/apache2 restart，访问http://localhost/cgi-bin/gitweb.cgi</p>]]></description></item><item><title>今天使用VS2012遇到一个问题："链接器工具错误 LNK2026  XXX模块对于 SAFESEH 映像是不安全的"</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/10/2544230.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 10 Jun 2012 12:20:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/10/2544230.html</guid><description><![CDATA[<p><span>解决方法：</span></p>
<p><span id="tgt19">1.打开该项目的<span class="label">&ldquo;属性页&rdquo;</span>对话框。</span></p>
<p><span id="tgt21">2.单击&ldquo;链接器&rdquo;文件夹。</span></p>
<p><span id="tgt22">3.单击<span class="label">&ldquo;命令行&rdquo;</span>属性页。</span></p>
<p><span id="tgt23">4.将<span>&nbsp;</span><strong>/SAFESEH:NO&nbsp;</strong>键入<span class="label">&ldquo;附加选项&rdquo;</span>框中，然后点击应用。</span></p>]]></description></item><item><title>套接字的域和地址族</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/07/2540125.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 07 Jun 2012 04:44:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/07/2540125.html</guid><description><![CDATA[<p><span style="font-family: 楷体;">　　今天，说一下套接字的域和地址族。前面<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2012/06/04/2533861.html">linux的套接口和管道</a>已经说到domain这个参数了，这个参数可以使AF_LOCAL.AF_LOCAL的前缀AF_表示地址族（address family），domain参数就是在选择到底使用哪个地址族。</span></p>
<p><span style="font-family: 楷体;">　　通用套接字地址的结构：</span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">struct</span><span style="color: #000000;"> sockaddr {
    sa_family_t sa_family;</span><span style="color: #008000;">//</span><span style="color: #008000;">地址族</span>
    <span style="color: #0000ff;">char</span>            sa_data[<span style="color: #800080;">14</span>];<span style="color: #008000;">//</span><span style="color: #008000;">地址数据</span>
};</pre>
</div>
<p><span style="font-family: 楷体;">其中sa_family_t是一个无符号的短整数。整个数据占16个字节。</span></p>
<p><span style="font-family: 楷体;">　　我们常见的domain参数一般是AF_INET(IPv4)，AF_INET6(IPv6)。AF_INET的结构格式为：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;netinet/<span style="color: #0000ff;">in</span>.h&gt;
<span style="color: #0000ff;">struct</span><span style="color: #000000;"> sockaddr_in {
    sa_family_t    sin_family;</span><span style="color: #008000;">//</span><span style="color: #008000;">地址族</span>
    uint16_t         sin_port;<span style="color: #008000;">//</span><span style="color: #008000;">端口号</span>
    <span style="color: #0000ff;">struct</span> in_addr sin_addr;<span style="color: #008000;">//</span><span style="color: #008000;">Inernet地址</span>
    unsigned <span style="color: #0000ff;">char</span> sin_zero[<span style="color: #800080;">8</span>];<span style="color: #008000;">//</span><span style="color: #008000;">占位字节</span>
};</pre>
</div>
<p><span style="font-family: 楷体;">　　说到网络字节问题，就需要考虑到网络字节序。因为字节序有些系统是不同的。为了实现大端/小端字节序之间的转换，系统提供了几个转换函数：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;netinet/<span style="color: #0000ff;">in</span>.h&gt;<span style="color: #000000;">
unsigned </span><span style="color: #0000ff;">long</span> htonl(unsigned <span style="color: #0000ff;">long</span><span style="color: #000000;"> hostlong);
unsigned </span><span style="color: #0000ff;">short</span> htons(unsigned <span style="color: #0000ff;">short</span><span style="color: #000000;"> hostshort);
unsigned </span><span style="color: #0000ff;">long</span> ntohl(unsigend <span style="color: #0000ff;">long</span><span style="color: #000000;"> netlong);
unsigned </span><span style="color: #0000ff;">short</span> ntohs(unsigned <span style="color: #0000ff;">short</span> netshort);</pre>
</div>
<p>　　<span style="font-family: 楷体;">有了前面的介绍，可以开始初始化Internet地址了。下面的例子使用了到了<a href="http://baike.baidu.com/view/13870.htm">socket()</a>和<a href="http://baike.baidu.com/view/569184.htm">bind()</a>函数。</span><span style="font-family: 楷体;"><br /></span></p>
<div class="cnblogs_code">
<pre>#include &lt;stdio.h&gt;<span style="color: #000000;">
#include </span>&lt;unistd.h&gt;<span style="color: #000000;">
#include </span>&lt;stdlib.h&gt;<span style="color: #000000;">
#include </span>&lt;errno.h&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>.h&gt;<span style="color: #000000;">
#include </span>&lt;sys/types.h&gt;<span style="color: #000000;">
#include </span>&lt;sys/stat.h&gt;<span style="color: #000000;">
#include </span>&lt;sys/socket.h&gt;<span style="color: #000000;">
#include </span>&lt;netinet/<span style="color: #0000ff;">in</span>.h&gt;

<span style="color: #008000;">//</span><span style="color: #008000;">error，用于输出错误</span>
<span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> bail(<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *<span style="color: #000000;">on_what)
{
    perror(on_what);
    exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
}

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">int</span> sck_inet = socket(AF_INET,SOCK_STREAM,<span style="color: #800080;">0</span><span style="color: #000000;">);//套接口，套接字
    </span><span style="color: #0000ff;">if</span> (sck_inet == -<span style="color: #800080;">1</span><span style="color: #000000;">)
    {
        bail(</span><span style="color: #800000;">"</span><span style="color: #800000;">sock()</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    }
    </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> sockaddr_in adr_inet;//IPv4地址结构
    memset(</span>&amp;adr_inet,<span style="color: #800080;">0</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;"> adr_inet);
    adr_inet.sin_family </span>=<span style="color: #000000;"> AF_INET;
    adr_inet.sin_port </span>= htons(<span style="color: #800080;">8081</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">const</span> unsigned <span style="color: #0000ff;">char</span> IPno[] = {<span style="color: #800080;">127</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">23</span><span style="color: #000000;">};
    memcpy(</span>&amp;adr_inet.sin_addr.s_addr,IPno,<span style="color: #800080;">4</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">int</span> len_inet = <span style="color: #0000ff;">sizeof</span><span style="color: #000000;"> adr_inet;
    </span><span style="color: #0000ff;">int</span> z = bind(sck_inet, (<span style="color: #0000ff;">struct</span> sockaddr*)&amp;<span style="color: #000000;">adr_inet,len_inet);//绑定套接字和ip地址
    </span><span style="color: #0000ff;">if</span> (z == -<span style="color: #800080;">1</span><span style="color: #000000;">)
    {
        bail(</span><span style="color: #800000;">"</span><span style="color: #800000;">bind()</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    }
    system(</span><span style="color: #800000;">"</span><span style="color: #800000;">netstat -pa --tcp 2&gt;/dev/null | </span><span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #800000;">sed -n '1,/^Proto/p;/af_inet/p' </span><span style="color: #800000;">"</span><span style="color: #000000;">);
    close(sck_inet);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p>　　<span style="font-family: 楷体;">今天的套接字就介绍到这，下一篇要介绍的是</span><span style="font-family: 楷体; color: #0000ff;">地址转换函数</span></p>
<p><span style="font-family: 楷体;">&nbsp;</span></p>]]></description></item><item><title>套接口和I/O通信</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/04/2533868.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 04 Jun 2012 01:11:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/04/2533868.html</guid><description><![CDATA[<p><span style="font-family: 楷体;">　　几个I/O相关的函数：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;unistd.h&gt;<span style="color: #000000;">
ssize_t read(</span><span style="color: #0000ff;">int</span> fd, <span style="color: #0000ff;">void</span> *<span style="color: #000000;">buf, size_t count);
ssize_t write(</span><span style="color: #0000ff;">int</span> fd, <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">void</span> *<span style="color: #000000;">buf, size_t count);
</span><span style="color: #0000ff;">int</span> close(<span style="color: #0000ff;">int</span> fd);</pre>
</div>
<p><span style="font-family: 楷体;">　　为了实现通信，fd可以是套接口（见<a id="homepage1_HomePageDays_DaysList_DayItem_0_DayList_0_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2012/06/04/2533861.html">linux的套接口和管道</a>）的描述符。使用示例如下：</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>#include &lt;stdio.h&gt;<span style="color: #000000;">
#include </span>&lt;stdlib.h&gt;<span style="color: #000000;">
#include </span>&lt;unistd.h&gt;<span style="color: #000000;">
#include </span>&lt;errno.h&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>.h&gt;<span style="color: #000000;">
#include </span>&lt;time.h&gt;<span style="color: #000000;">
#include </span>&lt;sys/wait.h&gt;<span style="color: #000000;">
#include </span>&lt;sys/types.h&gt;<span style="color: #000000;">
#include </span>&lt;sys/socket.h&gt;<span style="color: #000000;">

#ifndef SHUT_WR
</span><span style="color: #0000ff;">#define</span> SHUT_WR 1
<span style="color: #0000ff;">#endif</span>

<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> z;
    </span><span style="color: #0000ff;">int</span> s[<span style="color: #800080;">2</span><span style="color: #000000;">];
    </span><span style="color: #0000ff;">char</span> *<span style="color: #000000;">msgp;
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> mlen;
    pid_t chpid;
    </span><span style="color: #0000ff;">char</span> buf[<span style="color: #800080;">80</span><span style="color: #000000;">];
    
    z </span>= socketpair(AF_LOCAL,SOCK_STREAM,<span style="color: #800080;">0</span><span style="color: #000000;">,s);
    </span><span style="color: #0000ff;">if</span> (z==-<span style="color: #800080;">1</span><span style="color: #000000;">)
    {
        fprintf(stderr,</span><span style="color: #800000;">"</span><span style="color: #800000;">%s:socketpair(AF_LOCAL,SOCK_STREAM,0)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,strerror(errno));
        exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;">char *cp;

    </span><span style="color: #008000;">//</span><span style="color: #008000;">z=write(s[1],cp="Hello?",6);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">printf("Wrote message '%s' on s[1]\n",cp);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">z=read(s[0],buf,sizeof buf);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">buf[z]=0;
    </span><span style="color: #008000;">//</span><span style="color: #008000;">printf("Received message '%s' from socket s[0]\n",buf);</span>
<span style="color: #000000;">
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">s[0]=%d;\n</span><span style="color: #800000;">"</span>,s[<span style="color: #800080;">0</span><span style="color: #000000;">]);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">s[1]=%d;\n</span><span style="color: #800000;">"</span>,s[<span style="color: #800080;">1</span><span style="color: #000000;">]);


    chpid </span>=<span style="color: #000000;"> fork();
    </span><span style="color: #0000ff;">if</span> ( chpid == (pid_t)-<span style="color: #800080;">1</span><span style="color: #000000;"> )
    {
        fprintf(stderr,</span><span style="color: #800000;">"</span><span style="color: #800000;">%s:fork(2)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,strerror(errno));
        exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
    }
    </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (chpid==<span style="color: #800080;">0</span><span style="color: #000000;">)
    { 
        </span><span style="color: #0000ff;">char</span> rxbuf[<span style="color: #800080;">80</span><span style="color: #000000;">];
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Parent PID is %ld\n</span><span style="color: #800000;">"</span>,(<span style="color: #0000ff;">long</span><span style="color: #000000;">)getppid());
        close(s[</span><span style="color: #800080;">0</span><span style="color: #000000;">]);
        s[</span><span style="color: #800080;">0</span>]=-<span style="color: #800080;">1</span><span style="color: #000000;">;

        msgp</span>=<span style="color: #800000;">"</span><span style="color: #800000;">%Y-%m-%d %A %H:%M %P</span><span style="color: #800000;">"</span><span style="color: #000000;">;
        mlen</span>=<span style="color: #000000;">strlen(msgp);
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Child sending request '%s'\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,msgp);
        fflush(stdout);
        z</span>=write(s[<span style="color: #800080;">1</span><span style="color: #000000;">],msgp,mlen);
        </span><span style="color: #0000ff;">if</span> (z&lt;<span style="color: #800080;">0</span><span style="color: #000000;">)
        {
            fprintf(stderr,</span><span style="color: #800000;">"</span><span style="color: #800000;">%s:write(2)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,strerror(errno));
            exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
        }
        
    </span><span style="color: #008000;">/*</span><span style="color: #008000;">    if (shutdown(s[1],SHUT_WR)==-1)
        {
            fprintf(stderr,"%s:shutdown(2)\n",strerror(errno));
            exit(1);
        } 
</span><span style="color: #008000;">*/</span><span style="color: #000000;">
        z</span>=read(s[<span style="color: #800080;">1</span>],rxbuf,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;"> rxbuf);
        </span><span style="color: #0000ff;">if</span> (z&lt;<span style="color: #800080;">0</span><span style="color: #000000;">)
        {
            fprintf(stderr,</span><span style="color: #800000;">"</span><span style="color: #800000;">%s:read(2)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,strerror(errno));
            exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
        }
        rxbuf[z]</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Server returned '%s' \n</span><span style="color: #800000;">"</span><span style="color: #000000;">,rxbuf);
        fflush(stdout);
        close(s[</span><span style="color: #800080;">1</span><span style="color: #000000;">]);
    }
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
    {
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> status;
        </span><span style="color: #0000ff;">char</span> txbuf[<span style="color: #800080;">80</span><span style="color: #000000;">];
        time_t td;
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Child PID is %ld\n</span><span style="color: #800000;">"</span>,(<span style="color: #0000ff;">long</span><span style="color: #000000;">)chpid);
        fflush(stdout);
        close(s[</span><span style="color: #800080;">1</span><span style="color: #000000;">]);
        s[</span><span style="color: #800080;">1</span>]=-<span style="color: #800080;">1</span><span style="color: #000000;">;
        z</span>=read(s[<span style="color: #800080;">0</span>],buf,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;"> buf);
        </span><span style="color: #0000ff;">if</span> (z&lt;<span style="color: #800080;">0</span><span style="color: #000000;">)
        {
            fprintf(stderr,</span><span style="color: #800000;">"</span><span style="color: #800000;">%s:read(2)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,strerror(errno));
            exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
        }
        buf[z]</span>=<span style="color: #800080;">0</span><span style="color: #000000;">;
        time(</span>&amp;<span style="color: #000000;">td);
        strftime(txbuf,</span><span style="color: #0000ff;">sizeof</span> txbuf, buf, localtime(&amp;<span style="color: #000000;">td));
        z</span>=write(s[<span style="color: #800080;">0</span><span style="color: #000000;">],txbuf,strlen(txbuf));
        </span><span style="color: #0000ff;">if</span> (z&lt;<span style="color: #800080;">0</span><span style="color: #000000;">)
        {
            fprintf(stderr,</span><span style="color: #800000;">"</span><span style="color: #800000;">%s:write(2)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,strerror(errno));
            exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
        }
        close(s[</span><span style="color: #800080;">0</span><span style="color: #000000;">]);
        waitpid(chpid,</span>&amp;status,<span style="color: #800080;">0</span><span style="color: #000000;">);
    } 
    </span><span style="color: #008000;">//</span><span style="color: #008000;">system("netstat --unix -p");</span>

    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
<p><span style="font-family: 楷体;">　　例子有点长，</span></p>
<pre><span>　　//</span><span>z=write(s[1],cp="Hello?",6);
    </span><span>//</span><span>printf("Wrote message '%s' on s[1]\n",cp);<br /></span>　　//z=read(s[0],buf,sizeof buf);<br />　　//buf[z]=0;<br />   //printf("Received message '%s' from socket s[0]\n",buf);</pre>
<p><span style="font-family: 楷体;">&nbsp;　　这一小段就实现了通信，我已经注释掉了，因为后面写的代码是一个获取服务器时间的代码。这一段代码就是从s[1]写数据，然后从s[0]读取数据。这点和管道是一样的。但是套接口的好处是还可以从s[0]写数据，从s[1]读数据。</span></p>
<p><span style="font-family: 楷体;">　　后面的大段代码中使用了shutdown函数，是用于关闭套接口的专用函数，关闭套接口优先使用shutdown函数而不是close函数。shutdown函数的原型：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;sys/socket.h&gt;
<span style="color: #0000ff;">int</span> shutdown(<span style="color: #0000ff;">int</span> sockfd, <span style="color: #0000ff;">int</span> how);</pre>
</div>
<p>　　<span style="font-family: 楷体;">就是因为多了一个how选项，使得shutdown的功能多于close函数。how可以设置为：</span>SHUT_RD, SHUT_WR, SHUT_RDWR。<span style="font-family: 楷体;">分别是代表关闭读，关闭写，关闭读写（等价于close）。</span></p>
<p><span style="font-family: 楷体;">　　为了获取服务器的时间符合需要的格式，还使用了strftime函数：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;time.h&gt;<span style="color: #000000;">

size_t strftime(</span><span style="color: #0000ff;">char</span> *s, size_t max, <span style="color: #0000ff;">const</span> <span style="color: #0000ff;">char</span> *<span style="color: #000000;">format,
                </span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">struct</span> tm *tm);</pre>
</div>
<p>　　<span style="font-family: 楷体;">参数介绍见：<a href="http://www.cppblog.com/gan/archive/2008/12/07/68788.html">http://www.cppblog.com/gan/archive/2008/12/07/68788.html</a></span></p>
<p><span style="font-family: 楷体;">　　下一篇将介绍<a href="http://www.cnblogs.com/hanxi/archive/2012/06/07/2540125.html">套接字的域和地址族</a>。</span></p>]]></description></item><item><title>linux的套接口和管道</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/04/2533861.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 04 Jun 2012 00:39:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/04/2533861.html</guid><description><![CDATA[<p><span style="font-family: 楷体;">　　创建管道的函数：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;unistd.h&gt;
<span style="color: #0000ff;">int</span> pipe(<span style="color: #0000ff;">int</span> pipefd[<span style="color: #800080;">2</span><span style="color: #000000;">]);</span><span style="color: #0000ff;"><br /></span></pre>
</div>
<p><span style="font-family: 楷体;">　　pipefd[0]代表管道读出端的文件描述符，pipefd[1]代表管道写入端的文件描述符。信息只能从pipefd[0]读出，也只能重pipefd[1]写进。所以实现的通信就是单项的，如果要实现双向通信的话可以采用建立两个管道。不过也可以使用套接字通信。因为套接字的通信是双向的。</span></p>
<p><span style="font-family: 楷体;">　　创建管道的例子：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;sys/wait.h&gt;<span style="color: #000000;">
#include </span>&lt;stdio.h&gt;<span style="color: #000000;">
#include </span>&lt;stdlib.h&gt;<span style="color: #000000;">
#include </span>&lt;unistd.h&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>.h&gt;
<span style="color: #0000ff;">int</span><span style="color: #000000;">
main(</span><span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> *<span style="color: #000000;">argv[])
{
    </span><span style="color: #0000ff;">int</span> pipefd[<span style="color: #800080;">2</span><span style="color: #000000;">];
    pid_t cpid;
    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> buf;
    </span><span style="color: #0000ff;">if</span> (argc != <span style="color: #800080;">2</span><span style="color: #000000;">) {
    　　fprintf(stderr, </span><span style="color: #800000;">"</span><span style="color: #800000;">Usage: %s &lt;string&gt;\n</span><span style="color: #800000;">"</span>, argv[<span style="color: #800080;">0</span><span style="color: #000000;">]);
    　　exit(EXIT_FAILURE);
    }
    </span><span style="color: #0000ff;">if</span> (pipe(pipefd) == -<span style="color: #800080;">1</span><span style="color: #000000;">) {
        perror(</span><span style="color: #800000;">"</span><span style="color: #800000;">pipe</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        exit(EXIT_FAILURE);
    }
    cpid </span>=<span style="color: #000000;"> fork();
    </span><span style="color: #0000ff;">if</span> (cpid == -<span style="color: #800080;">1</span><span style="color: #000000;">) {
        perror(</span><span style="color: #800000;">"</span><span style="color: #800000;">fork</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        exit(EXIT_FAILURE);
    }
    </span><span style="color: #0000ff;">if</span> (cpid == <span style="color: #800080;">0</span>) {    <span style="color: #008000;">/*</span><span style="color: #008000;"> 子进程从管道中读取 </span><span style="color: #008000;">*/   </span><span style="color: #000000;">
        close(pipefd[</span><span style="color: #800080;">1</span>]);          <span style="color: #008000;">/*</span><span style="color: #008000;"> 读的时候先关闭不用的写进端 </span><span style="color: #008000;">*/</span>
        <span style="color: #0000ff;">while</span> (read(pipefd[<span style="color: #800080;">0</span>], &amp;buf, <span style="color: #800080;">1</span>) &gt; <span style="color: #800080;">0</span><span style="color: #000000;">)
            write(STDOUT_FILENO, </span>&amp;buf, <span style="color: #800080;">1</span><span style="color: #000000;">);
        write(STDOUT_FILENO, </span><span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span>, <span style="color: #800080;">1</span><span style="color: #000000;">);
        close(pipefd[</span><span style="color: #800080;">0</span><span style="color: #000000;">]);
        _exit(EXIT_SUCCESS);
    } </span><span style="color: #0000ff;">else</span> {            <span style="color: #008000;">/*</span><span style="color: #008000;"> 父进程向管道写入 argv[1]</span><span style="color: #008000;">*/</span><span style="color: #000000;">
        close(pipefd[</span><span style="color: #800080;">0</span>]);          <span style="color: #008000;">/*</span><span style="color: #008000;"> 写之前关闭不用的读出端</span><span style="color: #008000;">*/</span><span style="color: #000000;">
        write(pipefd[</span><span style="color: #800080;">1</span>], argv[<span style="color: #800080;">1</span>], strlen(argv[<span style="color: #800080;">1</span><span style="color: #000000;">]));
        close(pipefd[</span><span style="color: #800080;">1</span>]);          <span style="color: #008000;">/*</span><span style="color: #008000;"> Reader will see EOF </span><span style="color: #008000;">*/</span><span style="color: #000000;">
        wait(NULL);                </span><span style="color: #008000;">/*</span><span style="color: #008000;"> Wait for child </span><span style="color: #008000;">*/</span><span style="color: #000000;">
        exit(EXIT_SUCCESS);
    }
}</span></pre>
</div>
<p><span style="font-family: 楷体;">　　</span></p>
<p><span style="font-family: 楷体;">　　创建套接口的函数：</span></p>
<div class="cnblogs_code">
<pre>#include &lt;sys/types.h&gt; <span style="color: #000000;">
#include </span>&lt;sys/socket.h&gt;
<span style="color: #0000ff;">int</span> socketpair(<span style="color: #0000ff;">int</span> domain, <span style="color: #0000ff;">int</span> type, <span style="color: #0000ff;">int</span> protocolint <span style="color: #800000;">"</span><span style="color: #800000;"> sv [2]);</span></pre>
</div>
<p><span style="font-family: 楷体;">　　sv[2]是指向接收用于引用套接口文件描述符数组的指针。类似于管道中的端点。使用例子：</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>#include &lt;stdio.h&gt;<span style="color: #000000;">
#include </span>&lt;stdlib.h&gt;<span style="color: #000000;">
#include </span>&lt;unistd.h&gt;<span style="color: #000000;">
#include </span>&lt;errno.h&gt;<span style="color: #000000;">
#include </span>&lt;<span style="color: #0000ff;">string</span>.h&gt;<span style="color: #000000;">#include </span>&lt;sys/types.h&gt;<span style="color: #000000;">
#include </span>&lt;sys/socket.h&gt;

<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> z;
    </span><span style="color: #0000ff;">int</span> s[<span style="color: #800080;">2</span><span style="color: #000000;">];
    
    z </span>= socketpair(AF_LOCAL,SOCK_STREAM,<span style="color: #800080;">0</span><span style="color: #000000;">,s);
    </span><span style="color: #0000ff;">if</span> (z==-<span style="color: #800080;">1</span><span style="color: #000000;">)
    {
        fprintf(stderr,</span><span style="color: #800000;">"</span><span style="color: #800000;">%s:socketpair(AF_LOCAL,SOCK_STREAM,0)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,strerror(errno));
        exit(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
    }

    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">s[0]=%d;\n</span><span style="color: #800000;">"</span>,s[<span style="color: #800080;">0</span><span style="color: #000000;">]);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">s[1]=%d;\n</span><span style="color: #800000;">"</span>,s[<span style="color: #800080;">1</span><span style="color: #000000;">]);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;    
}</span></pre>
</div>
<p><span style="font-family: 楷体;">　　 下一篇：<a id="homepage1_HomePageDays_DaysList_DayItem_0_DayList_0_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2012/06/04/2533868.html">套接口和I/O通信</a></span></p>]]></description></item><item><title>makefile文件的两种常用书写格式（搜索路径式+递归式）</title><link>http://www.cnblogs.com/hanxi/archive/2012/06/03/2533025.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 03 Jun 2012 12:05:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/06/03/2533025.html</guid><description><![CDATA[<p><span style="font-family: 楷体;">　　首先，写一个测试代码，很简单的加减程序：</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('2e8c8362-afc1-499d-b9fe-4e7a61e185c9')"><img id="code_img_closed_2e8c8362-afc1-499d-b9fe-4e7a61e185c9" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_2e8c8362-afc1-499d-b9fe-4e7a61e185c9" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2e8c8362-afc1-499d-b9fe-4e7a61e185c9',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">//path: cacu/main.c</span>
<div id="cnblogs_code_open_2e8c8362-afc1-499d-b9fe-4e7a61e185c9" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">path: cacu/main.c</span>
#include &lt;stdio.h&gt;<span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">add.h</span><span style="color: #800000;">"</span><span style="color: #000000;">
#include </span><span style="color: #800000;">"</span><span style="color: #800000;">sub.h</span><span style="color: #800000;">"</span>

<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">int</span> a=<span style="color: #800080;">10</span>,b=<span style="color: #800080;">12</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">float</span> x=<span style="color: #800080;">1.23456</span>,y=<span style="color: #800080;">9.87654</span><span style="color: #000000;">;

    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">int a+b IS:%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,add_int(a,b));
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">int a-b IS:%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,sub_int(a,b));
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">float x+y IS:%f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,add_float(x,y));
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">float x-y IS:%f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,sub_float(x,y));
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('744d9370-d124-4ad9-bd8f-6a0e4bb23589')"><img id="code_img_closed_744d9370-d124-4ad9-bd8f-6a0e4bb23589" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_744d9370-d124-4ad9-bd8f-6a0e4bb23589" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('744d9370-d124-4ad9-bd8f-6a0e4bb23589',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">//path: cacu/sub/sub.h</span>
<div id="cnblogs_code_open_744d9370-d124-4ad9-bd8f-6a0e4bb23589" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">path: cacu/sub/sub.h</span>
<span style="color: #000000;">#ifndef SUB_H
</span><span style="color: #0000ff;">#define</span> SUB_H
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">float</span> sub_float(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span><span style="color: #000000;"> b);
</span><span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">int</span> sub_int(<span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span><span style="color: #000000;"> b);
</span><span style="color: #0000ff;">#endif</span></pre>
</div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('63631b80-562d-44b3-9cf5-a63bcface2da')"><img id="code_img_closed_63631b80-562d-44b3-9cf5-a63bcface2da" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_63631b80-562d-44b3-9cf5-a63bcface2da" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('63631b80-562d-44b3-9cf5-a63bcface2da',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">//path: cacu/sub/sub_float.c</span>
<div id="cnblogs_code_open_63631b80-562d-44b3-9cf5-a63bcface2da" class="cnblogs_code_hide">
<pre><span style="color: #0000ff;">float</span> sub_float(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">return</span> a-<span style="color: #000000;">b;
}</span></pre>
</div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('9c508156-20a5-4c0e-91ca-08306d918d0c')"><img id="code_img_closed_9c508156-20a5-4c0e-91ca-08306d918d0c" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_9c508156-20a5-4c0e-91ca-08306d918d0c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('9c508156-20a5-4c0e-91ca-08306d918d0c',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">//path: cacu/sub/sub_int.c</span>
<div id="cnblogs_code_open_9c508156-20a5-4c0e-91ca-08306d918d0c" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">path: cacu/sub/sub_int.c</span>
<span style="color: #0000ff;">int</span> sub_int(<span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">return</span> a-<span style="color: #000000;">b;
}</span></pre>
</div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('f3d68217-a0ff-40e7-b843-d2cd2a22eb86')"><img id="code_img_closed_f3d68217-a0ff-40e7-b843-d2cd2a22eb86" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_f3d68217-a0ff-40e7-b843-d2cd2a22eb86" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f3d68217-a0ff-40e7-b843-d2cd2a22eb86',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">//path: cacu/add/add.h</span>
<div id="cnblogs_code_open_f3d68217-a0ff-40e7-b843-d2cd2a22eb86" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">path: cacu/add/add.h</span>
<span style="color: #000000;">#ifndef ADD_H
</span><span style="color: #0000ff;">#define</span> ADD_H
<span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">int</span> add_int(<span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span><span style="color: #000000;"> b);
</span><span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">float</span> add_float(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span><span style="color: #000000;"> b);
</span><span style="color: #0000ff;">#endif</span></pre>
</div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('e1c6bddd-0929-448a-9bb9-d94f184fc676')"><img id="code_img_closed_e1c6bddd-0929-448a-9bb9-d94f184fc676" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_e1c6bddd-0929-448a-9bb9-d94f184fc676" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e1c6bddd-0929-448a-9bb9-d94f184fc676',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">//path: cacu/add/add_float.c</span>
<div id="cnblogs_code_open_e1c6bddd-0929-448a-9bb9-d94f184fc676" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">path: cacu/add/add_float.c</span>
<span style="color: #0000ff;">float</span> add_float(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">return</span> a+<span style="color: #000000;">b;
}</span></pre>
</div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('63e37e96-c46e-42d1-a4f6-e4cc01f2eb18')"><img id="code_img_closed_63e37e96-c46e-42d1-a4f6-e4cc01f2eb18" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_63e37e96-c46e-42d1-a4f6-e4cc01f2eb18" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('63e37e96-c46e-42d1-a4f6-e4cc01f2eb18',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">//path: cacu/add/add_int.c</span>
<div id="cnblogs_code_open_63e37e96-c46e-42d1-a4f6-e4cc01f2eb18" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">path: cacu/add/add_int.c</span>
<span style="color: #0000ff;">int</span> add_int(<span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span><span style="color: #000000;"> b)
{
    </span><span style="color: #0000ff;">return</span> a+<span style="color: #000000;">b;
}</span></pre>
</div>
</div>
<p><span style="font-family: 楷体;">　　接下来看看怎么写makefile文件。</span></p>
<p><strong><span style="background-color: #000000; color: #99cc00;">第一种：搜索路径式</span></strong></p>
<p><span style="font-family: 楷体;">　　该方法使用了VPATH变量，VPATH的格式如下：</span></p>
<p>　　　　VPATH=path1：path2:...</p>
<p><span style="font-family: 楷体;">　　VPATH等号右边的路径名以冒号(:)分割，如</span></p>
<div class="cnblogs_code">
<pre>VPATH = add:sub:.</pre>
</div>
<p><span style="font-family: 楷体;">　　使用该方法实现前面给出的例子的makefile文件如下：</span></p>
<div class="cnblogs_code">
<pre>CFLAGS =<span style="color: #000000;"> -Iadd -Isub -O2
OBJSDIR </span>=<span style="color: #000000;"> .objs
VPATH </span>=<span style="color: #000000;"> add:sub:.
OBJS </span>=<span style="color: #000000;"> add_int.o add_float.o sub_int.o sub_float.o main.o
TARGET </span>=<span style="color: #000000;"> cacu<br />
$(OBJSDIR):
    mkdir -p ./$@
$(TARGET):$(OBJSDIR) $(OBJS)
    $(CC) -o $(TARGET) $(OBJSDIR)/*.o $(CFLAGS)
$(OBJS):%.o:%.c
    $(CC) -c $(CFLAGS) $&lt; -o $(OBJSDIR)/$@
clean:
    -$(RM) $(TARGET)
    -$(RM) $(OBJSDIR)/*.o</span></pre>
</div>
<p><span style="font-family: 楷体;">　　makdir命令的那一行是建立一个.bojs文件。</span></p>
<pre><span>　　$(OBJS):%.o:%.c
   　　 $(CC) -c $(CFLAGS) $&lt; -o $(OBJSDIR)/$@</span></pre>
<p><span style="font-family: 楷体;">　　这里也使用了搜索路径。</span></p>
<p><span style="font-family: 楷体;">　　其他的$&lt;,$@等介绍请参考：<a href="http://baike.baidu.com/view/974566.htm">http://baike.baidu.com/view/974566.htm</a>，百度文库把基本用法已经写的很清楚了。</span></p>
<p>&nbsp;</p>
<p><strong><span style="background-color: #000000; color: #99cc00;">第二种：递归式</span></strong></p>
<p><span style="font-family: 楷体;">　　为了实现每个目录下的代码具有独立的makefile，且根目录下的makefile可以一次执行子目录下的makefile，就有了递归式的方法来写父目录下的makefile了，该方法的实现是使用的$(MAKE)变量，使用格式如下：</span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">add:
       cd add &amp;&amp;  $(MAKE)</span></pre>
</div>
<p><span style="font-family: 楷体;">　　也可以这样写：</span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">add:
           $(MAKE)  -C add</span></pre>
</div>
<p><span style="font-family: 楷体;">　　这样就可以递归调用子目录add下面make命令来执行add目录下的makefile文件，我们先把add和sub两个子目录下的makefile文件写好来，如下：</span></p>
<div class="cnblogs_code">
<pre>OBJS =<span style="color: #000000;"> add_int.o add_float.o
CFLAGS </span>=<span style="color: #000000;"> -O2
all:$(OBJS)
$(OBJS):%.o:%.c
    $(CC) -c $&lt; -o $(OBJSDIR)/$@ $(CFLAGS)
clean:
    $(RM) $(OBJS)</span></pre>
</div>
<div class="cnblogs_code">
<pre>OBJS =<span style="color: #000000;"> sub_int.o sub_float.o
CFLAGS</span>=<span style="color: #000000;">-O2
all:$(OBJS)
$(OBJS):%.o:%.c
    $(CC) -c $&lt; -o $(OBJSDIR)/$@ $(CFLAGS)
clean:
    $(RM) $(OBJS)</span></pre>
</div>
<p><span style="font-family: 楷体;">　　接下来就是写主目录cacu下面的makefile文件了，使用前面递归调用格式，makefile文件如下：</span></p>
<div class="cnblogs_code">
<pre>CC =<span style="color: #000000;"> gcc
CFLAGS </span>=<span style="color: #000000;"> -O2
TARGET </span>=<span style="color: #000000;"> cacu
export OBJSDIR </span>=<span style="color: #000000;"> ${shell pwd}/.objs
$(TARGET):$(OBJSDIR) main.o
    $(MAKE) -C add
    $(MAKE) -C sub
    $(CC) -o $(TARGET) $(OBJSDIR)/*.o
main.o:%.o:%.c
    $(CC) -c $&lt; -o $(OBJSDIR)/$@ $(CFLAGS) -Iadd -Isub
$(OBJSDIR):
    mkdir -p $(OBJSDIR)
clean:
    -$(RM) $(TARGET)
    -$(RM) $(OBJSDIR)/*.o</span></pre>
</div>
<pre><span>    <br /><span style="font-family: 楷体;">　　&ldquo;$(MAKE) -C add&rdquo; &ldquo;$(MAKE) -C sub&rdquo;</span><span style="font-size: 14px;"><span style="font-family: 楷体;">这两句实现的就是在执行下面的命令前先执行子目录下的makefile文件。</span><br /><br /><br /><span style="font-family: 楷体;">测试结果：</span><br /><span style="font-family: 楷体;">　　搜索路径式的测试结果：</span></span></span></pre>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012060319523897.jpg" alt="" /></p>
<pre><span><span style="font-size: 14px;"><span style="font-family: 楷体;">递归式的测试结果：</span><br /></span></span></pre>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012060319535758.jpg" alt="" /></p>
<pre><span style="font-family: 楷体;"><span style="font-size: 14px;">　　这个不算我原创的，借用了书上的，算是学习笔记吧。参考书《Linux网络编程》-宋敬彬，孙海滨。<br /><br />我就菜鸟一个，欢迎拍砖</span></span></pre>]]></description></item><item><title>Debian on VirtualBox下共享win7文件夹设置</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/26/2519514.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 26 May 2012 12:47:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/26/2519514.html</guid><description><![CDATA[<p class="entry-title"><span class="sep">借用：<a href="http://www.dbasoul.com/2010/695.html">http://www.dbasoul.com/2010/695.html</a></span></p>
<p class="entry-title"><span class="sep">1. 安装增强功能包(Guest Additions)</span></p>
<div class="entry-content">
<p>参考文档：<a href="http://www.dbasoul.com/2010/694.html">Debian下安装VirtualBox增强功能</a><br />2. 设置共享文件夹</p>
<p>重启完成后点击&rdquo;设备(Devices)&rdquo; -&gt; 共享文件夹(Shared Folders)菜单，添加一个共享文件夹，选项固定和临时是指该文件夹是否是持久的。共享名可以任取一个自己喜欢的，比如&rdquo;share&rdquo;，尽量使用英文名称。&nbsp;</p>
<p>3. 挂载共享文件夹</p>
<p>重新进入虚拟Debian，在命令行终端下输入：</p>
<p>sudo mkdir /mnt/shared</p>
<p>注意：如果不创建文件夹的话会有问题的。</p>
<p>sudo mount -t vboxsf share&nbsp;/mnt/shared</p>
<p>其中&rdquo;share&rdquo;是之前创建的共享文件夹的名字。OK，现在Debian和主机可以互传文件了。</p>
<p>假如您不想每一次都手动挂载，可以在/etc/fstab中添加一项</p>
<p>share /mnt/shared vboxsf rw,gid=100,uid=1000,auto 0 0</p>
<p>这样就能够自动挂载了。</p>
<p>4. 卸载的话使用下面的命令：</p>
<p>sudo umount -f /mnt/shared</p>
<p>注意：</p>
<p>共享文件夹的名称千万不要和挂载点的名称相同。比如，上面的挂载点是/mnt/shared，如果共享文件夹的名字也是shared的话，在挂载的时候就会出现如下的错误信息：<br />/sbin/mount.vboxsf: mounting failed with the error: Protocol error</p>


</div>]]></description></item><item><title>vim配置文件管理WM和taglist</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/26/2519248.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 26 May 2012 06:38:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/26/2519248.html</guid><description><![CDATA[<p>一、进入vim自动打开winmanager</p>
<p>这个功能作为可选功能，我们可以在vimrc中设置：</p>
<p>"在进入vim时自动打开winmanager</p>
<p>let g:AutoOpenWinManager = 1<br />就可以让winmanager自动打开。<br />在winmanager.vim中修改：<br /> <br />"set auto open Winmanager </p>
<p>if g:AutoOpenWinManager </p>
<p>autocmd VimEnter * nested call s:StartWindowsManager()|1wincmd w<br />endif</p>
<p><br />二、退出缓冲区时，自动退出vim</p>
<p>这个功能是参考了taglist的自动退出功能，在taglist.vim中修改的。</p>
<p>函数：function! s:Tlist_Window_Exit_Only_Window()中的winbunr(2)改为winbunr(3)，即只剩2个窗口时关闭，考虑到2个窗口肯定是同时存</p>
<p>在，所以这样还是可行的：</p>
<p>function! s:Tlist_Window_Exit_Only_Window()</p>
<p>    " Before quitting Vim, delete the taglist buffer so that</p>
<p>    " the '0 mark is correctly set to the previous buffer.</p>
<p>    if v:version &lt; 700</p>
<p>    if winbufnr(3) == -1</p>
<p>        bdelete</p>
<p>        quit</p>
<p>    endif</p>
<p>    else</p>
<p>    if winbufnr(3) == -1</p>
<p>        if tabpagenr('$') == 1</p>
<p>           " Only one tag page is present</p>
<p>           bdelete</p>
<p>           quit</p>
<p>        else</p>
<p>           " More than one tab page is present. Close only the current</p>
<p>           " tab page</p>
<p>           close</p>
<p>        endif</p>
<p>    endif</p>
<p>    endif</p>
<p>endfunction<br />同时在vimrc中需要设置：</p>
<p>let Tlist_Exit_OnlyWindow=1</p>
<p>winmanager自带的fileexplorer这个插件实在是比较差。最重要的一点是fileexplorer不能自动更新，如果通过其他的途径修改了文件夹</p>
<p>中的内容，fileexplorer是不会显示的。相对而言Nerd_Tree功能就比较强大了。下面要把Nerd_Tree加入winmanager。</p>
<p>&nbsp;</p>]]></description></item><item><title>vimrc</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/23/2515071.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 23 May 2012 09:16:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/23/2515071.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #800000;">"</span><span style="color: #800000;"> An example for a vimrc file.</span><span style="color: #800000;">
"
"</span><span style="color: #800000;"> Maintainer: a18ccms &lt;a18ccms@gmail.com&gt;</span><span style="color: #800000;">
"</span><span style="color: #800000;"> Last change: 2010 03 12</span><span style="color: #800000;">
"
"</span><span style="color: #800000;"> To use it, copy it to</span><span style="color: #800000;">
"</span><span style="color: #800000;"> for Unix and OS/2: ~/.vimrc</span><span style="color: #800000;">
"</span><span style="color: #800000;"> for Amiga: s:.vimrc</span><span style="color: #800000;">
"</span><span style="color: #800000;"> for MS-DOS and Win32: $VIM\_vimrc</span><span style="color: #800000;">
"</span><span style="color: #800000;"> for OpenVMS: sys$login:.vimrc</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> When started as </span><span style="color: #800000;">"</span>evim<span style="color: #800000;">"</span><span style="color: #800000;">, evim.vim will already have done these settings.</span>
<span style="color: #0000ff;">if</span> v:progname =~? <span style="color: #800000;">"</span><span style="color: #800000;">evim</span><span style="color: #800000;">"</span><span style="color: #000000;">
finish
endif

</span><span style="color: #0000ff;">set</span> history=<span style="color: #800080;">50</span>   <span style="color: #800000;">"</span><span style="color: #800000;"> keep 50 lines of command line history</span>
<span style="color: #0000ff;">set</span> showcmd   <span style="color: #800000;">"</span><span style="color: #800000;"> display incomplete commands</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> For Win32 GUI: remove 't' flag from 'guioptions': no tearoff menu entries</span><span style="color: #800000;">
"</span><span style="color: #800000;"> let &amp;guioptions = substitute(&amp;guioptions, </span><span style="color: #800000;">"</span>t<span style="color: #800000;">"</span><span style="color: #800000;">, </span><span style="color: #800000;">""</span><span style="color: #800000;">, </span><span style="color: #800000;">"</span>g<span style="color: #800000;">"</span><span style="color: #800000;">)</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> Don't use Ex mode, use Q for formatting</span>
<span style="color: #000000;">map Q gq


</span><span style="color: #800000;">"</span><span style="color: #800000;"> Convenient command to see the difference between the current buffer and the</span><span style="color: #800000;">
"</span><span style="color: #800000;"> file it was loaded from, thus the changes you made.</span>
command DiffOrig vert <span style="color: #0000ff;">new</span> | <span style="color: #0000ff;">set</span> bt=nofile | r # | 0d_ |<span style="color: #000000;"> diffthis
\ </span>| wincmd p |<span style="color: #000000;"> diffthis
\ </span>| wincmd p |<span style="color: #000000;"> diffthis


</span><span style="color: #0000ff;">set</span> guioptions-=<span style="color: #000000;">T


</span><span style="color: #800000;">"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 一般设定</span><span style="color: #800000;">
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 设定默认解码</span>
<span style="color: #0000ff;">set</span> encoding=utf-<span style="color: #800080;">8</span>
<span style="color: #0000ff;">set</span> fileencodings=utf-<span style="color: #800080;">8</span>,chinese,latin-<span style="color: #800080;">1</span>
<span style="color: #0000ff;">if</span> has(<span style="color: #800000;">"</span><span style="color: #800000;">win32</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">set</span> fileencoding=<span style="color: #000000;">chinese
</span><span style="color: #0000ff;">else</span>
<span style="color: #0000ff;">set</span> fileencoding=utf-<span style="color: #800080;">8</span><span style="color: #000000;">
endif
language message zh_CN.utf</span>-<span style="color: #800080;">8</span>
<span style="color: #800000;">"</span><span style="color: #800000;">解决菜单乱码</span>
source $VIMRUNTIME/<span style="color: #000000;">delmenu.vim
source $VIMRUNTIME</span>/<span style="color: #000000;">menu.vim
</span><span style="color: #800000;">"</span><span style="color: #800000;">set font</span><span style="color: #800000;">
"</span><span style="color: #800000;">set guifont=Nsimsun</span>

<span style="color: #800000;">"</span><span style="color: #800000;">设置窗口大小</span>
<span style="color: #0000ff;">set</span> lines=<span style="color: #800080;">35</span>
<span style="color: #0000ff;">set</span> columns=<span style="color: #800080;">120</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 不要使用vi的键盘模式，而是vim自己的</span><span style="color: #800000;">
"</span><span style="color: #800000;">set nocompatible</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 在处理未保存或只读文件的时候，弹出确认</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> confirm

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 与windows共享剪贴板</span>
<span style="color: #0000ff;">set</span> clipboard+=<span style="color: #000000;">unnamed

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 侦测文件类型</span>
<span style="color: #000000;">filetype on

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 载入文件类型插件</span>
<span style="color: #000000;">filetype plugin on

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 为特定文件类型载入相关缩进文件</span>
<span style="color: #000000;">filetype indent on

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 带有如下符号的单词不要被换行分割</span>
<span style="color: #0000ff;">set</span> iskeyword+=_,$,@,%,#,-

<span style="color: #800000;">"</span><span style="color: #800000;"> 语法高亮</span>
<span style="color: #000000;">syntax on

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 高亮字符，让其不受100列限制</span>
:highlight OverLength ctermbg=red ctermfg=white guibg=red guifg=<span style="color: #000000;">white
:match OverLength </span><span style="color: #800000;">'</span><span style="color: #800000;">\%101v.*</span><span style="color: #800000;">'</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 状态行颜色</span>
highlight StatusLine guifg=SlateBlue guibg=<span style="color: #000000;">Yellow
highlight StatusLineNC guifg</span>=Gray guibg=<span style="color: #000000;">White

</span><span style="color: #800000;">"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 文件设置</span><span style="color: #800000;">
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 不要备份文件（根据自己需要取舍）</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> nobackup

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 不要生成swap文件，当buffer被丢弃的时候隐藏它</span>
<span style="color: #000000;">setlocal noswapfile
</span><span style="color: #0000ff;">set</span> bufhidden=<span style="color: #000000;">hide

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 字符间插入的像素行数目</span>
<span style="color: #0000ff;">set</span> linespace=<span style="color: #800080;">0</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 增强模式中的命令行自动完成操作</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> wildmenu

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 在状态行上显示光标所在位置的行号和列号</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> ruler
</span><span style="color: #0000ff;">set</span> rulerformat=%<span style="color: #800080;">20</span>(%<span style="color: #800080;">2</span>*%&lt;%f%=\ %m%r\ %<span style="color: #800080;">3l</span>\ %c\ %p%%%<span style="color: #000000;">)

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 命令行（在状态行下）的高度，默认为1，这里是2</span>
<span style="color: #0000ff;">set</span> cmdheight=<span style="color: #800080;">2</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 使回格键（backspace）正常处理indent, eol, start等</span>
<span style="color: #0000ff;">set</span> backspace=<span style="color: #800080;">2</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 允许backspace和光标键跨越行边界</span>
<span style="color: #0000ff;">set</span> whichwrap+=&lt;,&gt;<span style="color: #000000;">,h,l

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 可以在buffer的任何地方使用鼠标（类似office中在工作区双击鼠标定位）</span>
<span style="color: #0000ff;">set</span> mouse=<span style="color: #000000;">a
</span><span style="color: #0000ff;">set</span> selection=<span style="color: #000000;">exclusive
</span><span style="color: #0000ff;">set</span> selectmode=<span style="color: #000000;">mouse,key

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 启动的时候不显示那个援助索马里儿童的提示</span>
<span style="color: #0000ff;">set</span> shortmess=<span style="color: #000000;">atI

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 通过使用: commands命令，告诉我们文件的哪一行被改变过</span>
<span style="color: #0000ff;">set</span> report=<span style="color: #800080;">0</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 不让vim发出讨厌的滴滴声</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> noerrorbells

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 在被分割的窗口间显示空白，便于阅读</span>
<span style="color: #0000ff;">set</span> fillchars=<span style="color: #000000;">vert:\ ,stl:\ ,stlnc:\

</span><span style="color: #800000;">"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 搜索和匹配</span><span style="color: #800000;">
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 高亮显示匹配的括号</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> showmatch

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 匹配括号高亮的时间（单位是十分之一秒）</span>
<span style="color: #0000ff;">set</span> matchtime=<span style="color: #800080;">5</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 在搜索的时候忽略大小写</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> ignorecase

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 高亮被搜索的句子（phrases）</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> hlsearch

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 在搜索时，输入的词句的逐字符高亮（类似firefox的搜索）</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> incsearch

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 输入:set list命令是应该显示些啥？</span>
<span style="color: #0000ff;">set</span> listchars=tab:\|\ ,trail:.,extends:&gt;,precedes:&lt;<span style="color: #000000;">,eol:$

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 光标移动到buffer的顶部和底部时保持3行距离</span>
<span style="color: #0000ff;">set</span> scrolloff=<span style="color: #800080;">3</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 不要闪烁</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> novisualbell

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 我的状态行显示的内容（包括文件类型和解码）</span>
<span style="color: #0000ff;">set</span> statusline=%F%m%r%h%w\ [FORMAT=%{&amp;ff}]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %{strftime(\<span style="color: #800000;">"</span><span style="color: #800000;">%d/%m/%y\ -\ %H:%M\")}</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 总是显示状态行</span>
<span style="color: #0000ff;">set</span> laststatus=<span style="color: #800080;">2</span>

<span style="color: #800000;">"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 文本格式和排版</span><span style="color: #800000;">
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 自动格式化</span>
<span style="color: #0000ff;">set</span> formatoptions=<span style="color: #000000;">tcrqn

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 继承前一行的缩进方式，特别适用于多行注释</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> autoindent

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 为C程序提供自动缩进</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> smartindent

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 使用C样式的缩进</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> cindent

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 制表符为4</span>
<span style="color: #0000ff;">set</span> tabstop=<span style="color: #800080;">4</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 统一缩进为4</span>
<span style="color: #0000ff;">set</span> softtabstop=<span style="color: #800080;">4</span>
<span style="color: #0000ff;">set</span> shiftwidth=<span style="color: #800080;">4</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 不要用空格代替制表符</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> noexpandtab

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 不要换行</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> nowrap

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 在行和段开始处使用制表符</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> smarttab

</span><span style="color: #800000;">"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> Autocommands</span><span style="color: #800000;">
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"</span><span style="color: #800000;"> 只在下列文件类型被侦测到的时候显示行号，普通文本文件不显示</span>

<span style="color: #0000ff;">if</span> has(<span style="color: #800000;">"</span><span style="color: #800000;">autocmd</span><span style="color: #800000;">"</span><span style="color: #000000;">)
   autocmd FileType xml,html,c,cs,java,perl,shell,bash,cpp,python,vim,php,ruby </span><span style="color: #0000ff;">set</span><span style="color: #000000;"> number
   autocmd FileType xml,html vmap </span>&lt;C-o&gt; &lt;ESC&gt;<span style="color: #800000;">'</span><span style="color: #800000;">&lt;i&lt;!--&lt;ESC&gt;o&lt;ESC&gt;</span><span style="color: #800000;">'</span>&gt;o--&gt;<span style="color: #000000;">
   autocmd FileType java,c,cpp,cs vmap </span>&lt;C-o&gt; &lt;ESC&gt;<span style="color: #800000;">'</span><span style="color: #800000;">&lt;o</span>
   autocmd FileType html,text,php,vim,c,java,xml,bash,shell,perl,python setlocal textwidth=<span style="color: #800080;">100</span><span style="color: #000000;">
   autocmd Filetype html,xml,xsl source $VIMRUNTIME</span>/plugin/<span style="color: #000000;">closetag.vim
   autocmd BufReadPost </span>*<span style="color: #000000;">
      \ </span><span style="color: #0000ff;">if</span> line(<span style="color: #800000;">"</span><span style="color: #800000;">'\"</span><span style="color: #800000;">"</span>) &gt; <span style="color: #800080;">0</span> &amp;&amp; line(<span style="color: #800000;">"</span><span style="color: #800000;">'\"</span><span style="color: #800000;">"</span>) &lt;= line(<span style="color: #800000;">"</span><span style="color: #800000;">$</span><span style="color: #800000;">"</span>) |<span style="color: #000000;">
      \   exe </span><span style="color: #800000;">"</span><span style="color: #800000;">normal g`\"</span><span style="color: #800000;">"</span> |<span style="color: #000000;">
      \ endif
endif </span><span style="color: #800000;">"</span><span style="color: #800000;"> has(</span><span style="color: #800000;">"</span>autocmd<span style="color: #800000;">"</span><span style="color: #800000;">)</span>

<span style="color: #800000;">"</span><span style="color: #800000;">设置Java代码的自动补全</span>
au FileType java setlocal omnifunc=<span style="color: #000000;">javacomplete#Complete

let mapleader </span>= <span style="color: #800000;">"</span><span style="color: #800000;">.</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">绑定自动补全的快捷键&lt;C-X&gt;&lt;C-O&gt;到&lt;leader&gt;;</span>
imap &lt;leader&gt;; &lt;C-X&gt;&lt;C-O&gt;

<span style="color: #800000;">"</span><span style="color: #800000;">设定开关Taglist插件的快捷键为F4，可以在VIM的左侧栏列出函数列表等</span>
map &lt;F4&gt; :Tlist&lt;CR&gt;

<span style="color: #800000;">"</span><span style="color: #800000;">设置程序的编译运行和调试的快捷键F5，F6，Ctrl-F5</span>
map &lt;F5&gt; :call CompileRun()&lt;CR&gt;<span style="color: #000000;">
map </span>&lt;C-F5&gt; :call Debug()&lt;CR&gt;<span style="color: #000000;">
map </span>&lt;F6&gt; :call Run()&lt;CR&gt;

<span style="color: #800000;">"</span><span style="color: #800000;">设置代码格式化快捷键F3</span>
map &lt;F3&gt; :call FormartSrc()&lt;CR&gt;

<span style="color: #800000;">"</span><span style="color: #800000;">设置tab操作的快捷键，绑定:tabnew到&lt;leader&gt;t，绑定:tabn, :tabp到&lt;leader&gt;n,</span><span style="color: #800000;">
"</span><span style="color: #800000;">&lt;leader&gt;p</span>
map &lt;leader&gt;t :tabnew&lt;CR&gt;<span style="color: #000000;">
map </span>&lt;leader&gt;n :tabn&lt;CR&gt;<span style="color: #000000;">
map </span>&lt;leader&gt;p :tabp&lt;CR&gt;

<span style="color: #800000;">"</span><span style="color: #800000;">用cscope支持</span><span style="color: #800000;">
"</span><span style="color: #800000;">set csprg=d:\bin\cscope</span>


<span style="color: #800000;">"</span><span style="color: #800000;">使用&lt;leader&gt;e打开当前文件同目录中的文件</span>
<span style="color: #0000ff;">if</span> has(<span style="color: #800000;">"</span><span style="color: #800000;">unix</span><span style="color: #800000;">"</span><span style="color: #000000;">)
map ,e :e </span>&lt;C-R&gt;=expand(<span style="color: #800000;">"</span><span style="color: #800000;">%:p:h</span><span style="color: #800000;">"</span>) . <span style="color: #800000;">"</span><span style="color: #800000;">/</span><span style="color: #800000;">"</span> &lt;CR&gt;
<span style="color: #0000ff;">else</span><span style="color: #000000;">
map ,e :e </span>&lt;C-R&gt;=expand(<span style="color: #800000;">"</span><span style="color: #800000;">%:p:h</span><span style="color: #800000;">"</span>) . <span style="color: #800000;">"</span><span style="color: #800000;">\" &lt;CR&gt;</span>
<span style="color: #000000;">endif

</span><span style="color: #800000;">"</span><span style="color: #800000;">定义CompileRun函数，用来调用进行编译和运行</span>
<span style="color: #000000;">func CompileRun()
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">w</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">C程序</span>
<span style="color: #0000ff;">if</span> &amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">c</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!del %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!gcc % -o %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!%&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">cpp</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!del %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!g++ % -o %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!%&lt;.exe</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">Java程序</span>
elseif &amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">java</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!del %&lt;.class</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!javac %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!java %&lt;</span><span style="color: #800000;">"</span><span style="color: #000000;">
endif
endfunc
</span><span style="color: #800000;">"</span><span style="color: #800000;">结束定义CompileRun</span>

<span style="color: #800000;">"</span><span style="color: #800000;">定义Run函数，用来调用进行编译和运行</span>
<span style="color: #000000;">func Run()
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">w</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">C程序</span>
<span style="color: #0000ff;">if</span> &amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">c</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!%&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">cpp</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!%&lt;.exe</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">Java程序</span>
elseif &amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">java</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!java %&lt;</span><span style="color: #800000;">"</span><span style="color: #000000;">
endif
endfunc
</span><span style="color: #800000;">"</span><span style="color: #800000;">结束定义Run</span>


<span style="color: #800000;">"</span><span style="color: #800000;">定义Debug函数，用来调试程序</span>
<span style="color: #000000;">func Debug()
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">w</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">C程序</span>
<span style="color: #0000ff;">if</span> &amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">c</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!del %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!gcc % -g -o %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!gdb %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">cpp</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!del %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!g++ % -g -o %&lt;.exe</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!gdb %&lt;.exe</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">Java程序</span>
exec <span style="color: #800000;">"</span><span style="color: #800000;">!del %&lt;.class</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">java</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!javac %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!jdb %&lt;</span><span style="color: #800000;">"</span><span style="color: #000000;">
endif
endfunc
</span><span style="color: #800000;">"</span><span style="color: #800000;">结束定义Debug</span><span style="color: #800000;">
"</span><span style="color: #800000;">定义FormartSrc()</span>
<span style="color: #000000;">func FormartSrc()
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">w</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">C程序,Perl程序,Python程序</span>
<span style="color: #0000ff;">if</span> &amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">c</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">cpp</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">perl</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">py</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span>
<span style="color: #800000;">"</span><span style="color: #800000;">Java程序</span>
elseif &amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">java</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=java --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">jsp</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">xml</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">
elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">html</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">

elseif </span>&amp;filetype == <span style="color: #800000;">'</span><span style="color: #800000;">htm</span><span style="color: #800000;">'</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">!astyle --style=gnu --suffix=none %</span><span style="color: #800000;">"</span><span style="color: #000000;">
exec </span><span style="color: #800000;">"</span><span style="color: #800000;">e! %</span><span style="color: #800000;">"</span><span style="color: #000000;">

endif
endfunc
</span><span style="color: #800000;">"</span><span style="color: #800000;">结束定义FormartSrc</span>

<span style="color: #800000;">"</span><span style="color: #800000;"> 能够漂亮地显示.NFO文件</span>
<span style="color: #0000ff;">set</span> encoding=utf-<span style="color: #800080;">8</span><span style="color: #000000;">
function</span>!<span style="color: #000000;"> SetFileEncodings(encodings)
    let b:myfileencodingsbak</span>=&amp;<span style="color: #000000;">fileencodings
    let </span>&amp;fileencodings=<span style="color: #000000;">a:encodings
endfunction
function</span>!<span style="color: #000000;"> RestoreFileEncodings()
    let </span>&amp;fileencodings=<span style="color: #000000;">b:myfileencodingsbak
    unlet b:myfileencodingsbak
endfunction

au BufReadPre </span>*.nfo call SetFileEncodings(<span style="color: #800000;">'</span><span style="color: #800000;">cp437</span><span style="color: #800000;">'</span>)|<span style="color: #0000ff;">set</span> ambiwidth=<span style="color: #000000;">single
au BufReadPost </span>*<span style="color: #000000;">.nfo call RestoreFileEncodings()

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 高亮显示普通txt文件（需要txt.vim脚本）</span>
au BufRead,BufNewFile *<span style="color: #000000;"> setfiletype txt

</span><span style="color: #800000;">"</span><span style="color: #800000;"> 用空格键来开关折叠</span>
<span style="color: #0000ff;">set</span><span style="color: #000000;"> foldenable
</span><span style="color: #0000ff;">set</span> foldmethod=<span style="color: #000000;">manual
nnoremap </span>&lt;space&gt; @=((foldclosed(line(<span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span>)) &lt; <span style="color: #800080;">0</span>) ? <span style="color: #800000;">'</span><span style="color: #800000;">zc</span><span style="color: #800000;">'</span> : <span style="color: #800000;">'</span><span style="color: #800000;">zo</span><span style="color: #800000;">'</span>)&lt;CR&gt;<span style="color: #000000;">

colo darkblue</span></pre>
</div>]]></description></item><item><title>[转]Linux启动界面切换:图形界面-字符界面</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/23/2514648.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 23 May 2012 05:22:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/23/2514648.html</guid><description><![CDATA[<p><span>转自：<a href="http://blog.csdn.net/xznuwdh/article/details/6053860">http://blog.csdn.net/xznuwdh/article/details/6053860</a></span></p>
<p><span>Linux字符界面切换到图形界面&nbsp;<br />由字符界面切换到图形界面可用两种简单方法实现：&nbsp;<br />1、在字符界面输入startx或init 5 。&nbsp;<br />2、通过编辑/etc/inittab文件实现默认进入图形界面。&nbsp;<br />把其中的id:3:initdefault中的3改为5，这样以后系统启动后将直接进入文本模式。&nbsp;<br />以下是配置引导进入图形模式的etc/inittab文件的部分内容：&nbsp;<br />#Default runlevel.The runlevels used by RHS are:&nbsp;<br /># 0-halt(Do NOT set initdefault to this)&nbsp;<br /># 1 -Single user mode&nbsp;<br /># 2-Multiuser,without NFS(The same as 3,if you do not have networking)&nbsp;<br /># 3-Full multiuser mode&nbsp;&nbsp;&nbsp;&nbsp;<br /># 4-unused&nbsp;<br /># 5-X11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //选择此项，系统在登录时将进入图形化登录界面&nbsp;<br /># 6-reboot(Do NOT set initdefault to this)&nbsp;<br />#&nbsp;<br />id:3:initdefault:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //此处若改为3，系统将被引导进入文本登录提示符界面</span></p>
<p><span>linux切换到图形界面与多种模式</span></p>
<p><span>1.开机进入文本模式&nbsp;<br />如果想让开机自动进纯文本模式,修改/etc/inittab,找到其中的id:5:initdefault:,这行指示启动时的运行级是5,也就是图形 模式,改成3就是文本模式了id:3:initdefault:,这是因为Linux操作系统有六种不同的运行级（run&nbsp;<br />level），在不同的运行级下，系统有着不同的状态，这六种运行级分别为：&nbsp;<br />0：停机（记住不要把initdefault 设置为0，因为这样会使Linux无法启动）&nbsp;<br />1：单用户模式，就像Win9X下的安全模式。&nbsp;<br />2：多用户，但是没有 NFS 。&nbsp;<br />3：完全多用户模式，标准的运行级。&nbsp;<br />4：一般不用，在一些特殊情况下可以用它来做一些事情。&nbsp;<br />5：X11，即进到 X-Window 系统。&nbsp;<br />6：重新启动 （记住不要把initdefault 设置为6，因为这样会使Linux不断地重新启动）。&nbsp;<br />其中运行级3就是我们要进入的标准Console字符界面模式。&nbsp;<br />2.强行退出X-Window进入文本模式&nbsp;<br />打开一个终端,输入init 3,(注意init后面有一个空格),等一会就进入了图形界面,以上方法切换后,窗口模式完全关闭.如果窗口中有文件未保存,将丢失.(用init 5可以回到图形界面,但原来的进程已死)&nbsp;<br />方法1：运行命令&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #startx ， 需要先配置图形界面信息，（暂时不会~） ；&nbsp;<br />方法2：修改/etc/inittab文件中的&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; id:3:initdefault ， 将3改为5 ，重新启动系统；</span></p>
<p><span>linux字符界面和图形界面切换</span></p>
<p><span>Linux忘记root密码怎么办？&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />在机器启动到grub进行操作系统选择时，对于Redhat linux：&nbsp;<br />用上下键将光标放在linux系统上，按&ldquo;e&rdquo;&nbsp;<br />在有kernel那一行按&ldquo;e&rdquo;，输入&ldquo;空格 single&rdquo;，然后回车&nbsp;<br />按&ldquo;b&rdquo;，启动，系统会自动进入单用户模式，&nbsp;<br />使用passwd root命令，按提示输入新口令&nbsp;<br />修改口令后，输入reboot 命令重启系统即可&nbsp;<br />对于SUSE linux：&nbsp;<br />先按&rdquo;esc&rdquo;键，从grub的图形界面转至字符界面&nbsp;<br />然后，用上下键将光标放在linux系统上，按&ldquo;e&rdquo;&nbsp;<br />在有kernel那一行按&ldquo;e&rdquo;，输入&ldquo;空格 1&rdquo;，然后回车&nbsp;<br />按&ldquo;B&rdquo;启动，系统会自动进入&ldquo;runlevel 1&rdquo;。&nbsp;<br />然后执行&ldquo;passwd&rdquo;，按提示输入新口令&nbsp;<br />修改完口令后，输入reboot命令重启系统即可。&nbsp;<br />linux字符界面和图形界面切换&nbsp;<br />1、硬盘安装的linux，在系统图形界面启动后，可使用Ctrl+Alt+F1~6切换到字符界面，再用Ctrl+Alt+F7切换到图形界面。&nbsp;<br />对于使用虚拟机安装的linux，由于虚拟机屏蔽了Ctrl+Alt键，必须使用其他热键：Ctrl+Alt+shift+F1~6切换到字符界面；使用Alt+F7返回到图形界面。&nbsp;<br />2、如果为了每次启动直接进入字符界面，则要修改etc/inittab文件，将启动级别由5改为3即可。</span></p>]]></description></item><item><title>java版贪吃蛇游戏</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/19/2509174.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 19 May 2012 12:50:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/19/2509174.html</guid><description><![CDATA[<p>　　由于这个游戏比较简单，具体实现不做详细的解释，只是说说框架吧，我今天花了一个下午敲好代码，需要代码的可以到 <a href="https://github.com/hanxi/Snake" target="_blank">https://github.com/hanxi/Snake</a>&nbsp;下载源代码。</p>
<p>　　写代码前，没有设计类图，下面是用starUML生成的类图</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012051920334289.jpg" alt="" /></p>
<p>　　同样的，下面的思维导图是为了写这篇文章而做的，本来这些事情都应该在写代码之前做的，因为这个游戏是很简单的，建议初学者还是按照顺序来写软件</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012051920373949.jpg" alt="" /></p>
<p>　　运行效果图：</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012051920414051.jpg" alt="" /></p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012051920423232.jpg" alt="" /></p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012051920430564.jpg" alt="" /></p>
<p>　　</p>
<p>我在这里只是简单的说个框架，具体怎么实现，建议大家参看下面这些文章，我就不再详细论述。</p>
<p>维基百科：<a href="http://zh.wikipedia.org/wiki/%E8%B4%AA%E5%90%83%E8%9B%87">http://zh.wikipedia.org/wiki/%E8%B4%AA%E5%90%83%E8%9B%87</a></p>
<p>百度百科：<a href="http://baike.baidu.com/view/530152.htm">http://baike.baidu.com/view/530152.htm</a></p>
<p>百度文库：<a href="http://wenku.baidu.com/view/2da10d66783e0912a2162a8f.html">http://wenku.baidu.com/view/2da10d66783e0912a2162a8f.html</a></p>
<p>道客巴巴:<a href="http://www.doc88.com/p-959290685722.html">http://www.doc88.com/p-959290685722.html</a></p>
<p>还有好多介绍着贪食蛇的文章，实在是太多了，这游戏也是非常的经典。建议学完一门编程语言后拿这个练手，因为里面涉及的数学知识很简单，可以用来巩固所学的编程语言的语法。</p>]]></description></item><item><title>判断点是否在两个多边形之间</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/01/2478184.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 01 May 2012 13:16:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/01/2478184.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre>inline <span style="color: #0000ff;">bool</span> in_range(<span style="color: #0000ff;">float</span> t1, <span style="color: #0000ff;">float</span> t2,<span style="color: #0000ff;">float</span><span style="color: #000000;"> x)
{
    </span><span style="color: #0000ff;">return</span> x&gt;t1 &amp;&amp; x&lt;t2 || x&lt;t1 &amp;&amp; x&gt;<span style="color: #000000;">t2;
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">判断点是否在圈内
</span><span style="color: #008000;">//</span><span style="color: #008000;">采用水平填充算法</span><span style="color: #008000;">
/*</span><span style="color: #008000;">    
1. count &larr; 0;
2. 以P为端点，作从右向左的射线L;  
3, for 多边形的每条边s
4.   do if P在边s上  
5.          then return true;
6.      if s不是水平的
7.          then if s的一个端点在L上且该端点是s两端点中纵坐标较大的端点
9.                  then count &larr; count+1
10.              else if s和L相交
11.                 then count &larr; count+1;
12. if count mod 2 = 1 
13.   then return true
14.   else return false;
</span><span style="color: #008000;">*/</span>
<span style="color: #0000ff;">bool</span> Fish::IsInside(Point *polygon, <span style="color: #0000ff;">int</span><span style="color: #000000;"> N, Point p)
{
    </span><span style="color: #0000ff;">bool</span> inside = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">int</span> count=<span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;N; i++<span style="color: #000000;">)
    {

        </span><span style="color: #0000ff;">if</span> (polygon[i].y != polygon[i+<span style="color: #800080;">1</span>].y)<span style="color: #008000;">//</span><span style="color: #008000;">s不是水平的</span>
<span style="color: #000000;">        {
            </span><span style="color: #008000;">//</span><span style="color: #008000;">if (polygon[i].y == p.y)continue;</span>
            <span style="color: #0000ff;">if</span> ((polygon[i].y == p.y &amp;&amp; polygon[i].x&lt;<span style="color: #000000;">p.x)
            </span>&amp;&amp; (polygon[i].y&gt;polygon[i-<span style="color: #800080;">1</span>].y || polygon[i].vy&lt;<span style="color: #800080;">0</span><span style="color: #000000;">))
            {
                count</span>++<span style="color: #000000;">;
            }
            </span><span style="color: #0000ff;">else</span> 
            <span style="color: #0000ff;">if</span> (in_range(polygon[i].y, polygon[i].y+<span style="color: #000000;">polygon[i].vy,p.y))
            {
                </span><span style="color: #0000ff;">if</span>(in_range(polygon[i].x, polygon[i].x+<span style="color: #000000;">polygon[i].vx,p.x))
                {
                    count</span>++<span style="color: #000000;">;
                    </span><span style="color: #0000ff;">float</span> k=polygon[i].vy/<span style="color: #000000;">polygon[i].vx;
                    </span><span style="color: #0000ff;">float</span> x=polygon[i].x-(polygon[i].y-p.y)/<span style="color: #000000;">k;
                    </span><span style="color: #0000ff;">if</span> (x&gt;<span style="color: #000000;">p.x)
                    {
                        count</span>--<span style="color: #000000;">;
                    }
                    </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(x==<span style="color: #000000;">p.x)
                    {
                        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                    }
                }
                </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(p.x &gt;=polygon[i].x &amp;&amp; p.x &gt;=polygon[i].x+<span style="color: #000000;">polygon[i].vx )
                {
                    count</span>++<span style="color: #000000;">;
                }
            }
        }
    }
    </span><span style="color: #0000ff;">if</span> (<span style="color: #800080;">1</span> == count%<span style="color: #800080;">2</span><span style="color: #000000;">)
    {
        inside </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
    {
        inside </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> inside;
}


</span><span style="color: #008000;">//</span><span style="color: #008000;">判断点 是否满足条件</span>
<span style="color: #0000ff;">bool</span> Fish::IsOkPoint(Point &amp;<span style="color: #000000;">point)
{
    Point </span>*p_point_outside,*<span style="color: #000000;">p_point_inside;
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n_inside,n_outside;
    map.GetNum(n_inside,n_outside);
    p_point_inside</span>=<span style="color: #000000;">map.GetInPoint();
    p_point_outside</span>=<span style="color: #000000;">map.GetOutPoint();

    </span><span style="color: #008000;">//</span><span style="color: #008000;">点在内边界的外面，在外边界的里面</span>
    <span style="color: #0000ff;">if</span> (!<span style="color: #000000;">IsInside(p_point_inside,n_inside,point)
        </span>&amp;&amp;<span style="color: #000000;"> IsInside(p_point_outside,n_outside,point))
    {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
    {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    }
}</span></pre>
</div>]]></description></item><item><title>鱼群生长曲线分析</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/01/2478146.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 01 May 2012 12:39:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/01/2478146.html</guid><description><![CDATA[<p align="center">鱼群生长曲线分析</p>
<p>1、生长曲线图（鱼群数量n - 时间t）</p>
<p>&nbsp;</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012050120321090.jpg" alt="" /></p>
<p>2、分段函数</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012050120353649.jpg" alt="" /></p>
<p>转折点：when n==MAXN/2</p>
<p>3、简化变化函数</p>
<p>&nbsp;</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012050120361957.jpg" alt="" /></p>
<p>4、伪代码</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">int</span> t=<span style="color: #800080;">0</span>,N0=<span style="color: #800080;">1</span>,r=<span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">int</span> N=<span style="color: #000000;">N0;
</span><span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> MAXN = <span style="color: #800080;">20</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">)
{
　　</span><span style="color: #0000ff;">if</span> (N&lt;MAXN/<span style="color: #800080;">2</span><span style="color: #000000;">)
　　{
   　　 N </span>= N0*<span style="color: #000000;">pow(r,t);
　　}
　　</span><span style="color: #0000ff;">else</span><span style="color: #000000;">
　　{
    　　N </span>= N0*pow(r,<span style="color: #800080;">1</span>/(<span style="color: #800080;">1.0</span>*<span style="color: #000000;">t));
　　}
　　printf(&ldquo;当前鱼的数量为：</span>%<span style="color: #000000;">d\n&rdquo;,N);
}</span></pre>
</div>]]></description></item><item><title>编译boost命令</title><link>http://www.cnblogs.com/hanxi/archive/2012/05/01/2477926.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 01 May 2012 07:45:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/05/01/2477926.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre>bjam stage --toolset=msvc-<span style="color: #800080;">8.0</span> --without-graph --without-graph_parallel --without-math --without-mpi --without-python --without-serialization --without-wave --stagedir=<span style="color: #800000;">"</span><span style="color: #800000;">E:\Boost\bin\vc8</span><span style="color: #800000;">"</span> link=<span style="color: #0000ff;">static</span> runtime-link=shared runtime-link=<span style="color: #0000ff;">static</span> threading=multi debug release</pre>
</div>]]></description></item><item><title>记住这一刻，学会感恩</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/30/2477072.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 30 Apr 2012 09:55:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/30/2477072.html</guid><description><![CDATA[<p>　　今天一老同学跟我说了句&ldquo;没有她天天为你带饭，你怎么能考上本科呢？&rdquo;</p>
<p>&nbsp;</p>
<p>　　说真的，一路上，她一直陪在我身旁。</p>
<p>&nbsp;</p>
<p>　　今天我记录下</p>]]></description></item><item><title>a的b次方模n算法</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/26/2471278.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 26 Apr 2012 05:34:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/26/2471278.html</guid><description><![CDATA[<p>当b好大时，使用该算法是最好的选择。常应用于密码学：</p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">/*</span><span style="color: #008000;">
File:                 abn.c
Description:          求 a的b次方模n的通用算法
Author:               hanxi
</span><span style="color: #008000;">*/</span><span style="color: #000000;">

#include </span>&lt;stdio.h&gt;<span style="color: #000000;">
#include </span>&lt;math.h&gt;

<span style="color: #0000ff;">int</span> f(<span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span> b, <span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
{
    </span><span style="color: #0000ff;">int</span> c=<span style="color: #800080;">0</span>, d=<span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;
    </span><span style="color: #0000ff;">for</span> (i=<span style="color: #800080;">31</span>; i&gt;=<span style="color: #800080;">0</span>; i--<span style="color: #000000;">)
    {
        d </span>= (d*d) %<span style="color: #000000;"> n;
        c </span>*= <span style="color: #800080;">2</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp;
        tmp </span>= <span style="color: #800080;">1</span>&lt;&lt;<span style="color: #000000;">i;
        </span><span style="color: #008000;">//</span><span style="color: #008000;">printf("tmp=%d\n",tmp);</span>
        <span style="color: #0000ff;">if</span> ((b&amp;tmp)!=<span style="color: #800080;">0</span><span style="color: #000000;">)
        {
            d </span>= (d*a) %<span style="color: #000000;"> n;
            c</span>++<span style="color: #000000;">; 
        }
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> d;
}

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #0000ff;">int</span> a = <span style="color: #800080;">2</span>, b = <span style="color: #800080;">5</span>, n = <span style="color: #800080;">10</span><span style="color: #000000;">;
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">求a的b次方模n\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入a,b,n（用逗号隔开，如果a,b,n全为0则退出系统）:</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d,%d,%d</span><span style="color: #800000;">"</span>,&amp;a,&amp;b,&amp;<span style="color: #000000;">n);
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">a=%d,b=%d,n=%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,a,b,n);
    </span><span style="color: #0000ff;">while</span> (a!=<span style="color: #800080;">0</span> &amp;&amp; b!=<span style="color: #800080;">0</span> &amp;&amp; n!=<span style="color: #800080;">0</span><span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span> d =<span style="color: #000000;"> f(a,b,n);
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d的%d次方模%d=%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,a,b,n,d);
        </span><span style="color: #0000ff;">int</span> x =<span style="color: #000000;"> pow(a,b);
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d的%d次方模%d=%d\n</span><span style="color: #800000;">"</span>,a,b,n,x%<span style="color: #000000;">n);
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入a,b,b（用逗号隔开）：</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d,%d,%d</span><span style="color: #800000;">"</span>,&amp;a,&amp;b,&amp;<span style="color: #000000;">n);
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">a=%d,b=%d,n=%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,a,b,n);
    }
    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">程序已结束...</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
}</span></pre>
</div>]]></description></item><item><title>java实现简单的记事本</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/24/2469002.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 24 Apr 2012 14:30:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/24/2469002.html</guid><description><![CDATA[<p>包含打开文件，保存文件，复制，粘贴，剪切功能，都是在菜单栏目上实现的功能</p>
<p>源代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">import</span> java.awt.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.awt.event.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.io.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> javax.swing.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> javax.swing.event.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.swing.filechooser.FileFilter;
</span><span style="color: #0000ff;">import</span> <span style="color: #0000ff;">static</span> java.awt.event.InputEvent.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.awt.datatransfer.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Enumeration;
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Hashtable;
</span><span style="color: #008000;">/*</span><span style="color: #008000;">import javax.swing.*;
import javax.swing.filechooser.FileFilter;

import java.awt.event.*;
import java.awt.*;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;</span><span style="color: #008000;">*/</span>

<span style="color: #0000ff;">class</span><span style="color: #000000;"> jishiben 
{
  </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String args[])
  {
     TextEdit TE</span>=<span style="color: #0000ff;">new</span> TextEdit("记事本"<span style="color: #000000;">);
  }
}
</span><span style="color: #0000ff;">class</span> TextEdit <span style="color: #0000ff;">extends</span> Frame <span style="color: #0000ff;">implements</span><span style="color: #000000;"> ActionListener
{
   MenuBar m;
   Menu m1,m2;
   MenuItem xinjian,dakai,baocun,tuichu,jianqie,fuzhi,zhantie;
   TextArea text;
   String filename;
   FileDialog openFD,saveFD;
   BufferedReader in;
   FileReader read;
   BufferedWriter out;
   FileWriter writer;
   Clipboard cb;
   TextEdit(String s)
   {
     </span><span style="color: #0000ff;">super</span><span style="color: #000000;">(s);
     m</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> MenuBar();
     m1</span>=<span style="color: #0000ff;">new</span> Menu("文件"<span style="color: #000000;">);
     xinjian</span>=<span style="color: #0000ff;">new</span> MenuItem("新建"<span style="color: #000000;">);
     dakai</span>=<span style="color: #0000ff;">new</span> MenuItem("打开"<span style="color: #000000;">);
     baocun</span>=<span style="color: #0000ff;">new</span> MenuItem("保存"<span style="color: #000000;">);
     tuichu</span>=<span style="color: #0000ff;">new</span> MenuItem("退出"<span style="color: #000000;">);
     m2</span>=<span style="color: #0000ff;">new</span> Menu("编辑"<span style="color: #000000;">);
     jianqie</span>=<span style="color: #0000ff;">new</span> MenuItem("剪切"<span style="color: #000000;">);
     fuzhi</span>=<span style="color: #0000ff;">new</span> MenuItem("复制"<span style="color: #000000;">);
     zhantie</span>=<span style="color: #0000ff;">new</span> MenuItem("粘贴"<span style="color: #000000;">);
     text</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> TextArea();
     openFD</span>=<span style="color: #0000ff;">new</span> FileDialog(<span style="color: #0000ff;">this</span>,"打开"<span style="color: #000000;">,FileDialog.LOAD);
     saveFD</span>=<span style="color: #0000ff;">new</span> FileDialog(<span style="color: #0000ff;">this</span>,"保存"<span style="color: #000000;">,FileDialog.SAVE);
     filename</span>="NoName"<span style="color: #000000;">;
     
     m1.add(xinjian);
     m1.addSeparator();
     m1.add(dakai);
     m1.addSeparator();
     m1.add(baocun);
     m1.addSeparator();
     m1.add(tuichu);
     m2.add(jianqie);
     m2.addSeparator();
     m2.add(fuzhi);
     m2.addSeparator();
     m2.add(zhantie);
     m.add(m1);
     m.add(m2);
     
     </span><span style="color: #008000;">//</span><span style="color: #008000;">关键部分，没有为cb申请内存，下面对cb操作会出错</span>
    cb = <span style="color: #0000ff;">new</span> Clipboard("nothing"<span style="color: #000000;">);
     </span><span style="color: #008000;">//
</span><span style="color: #000000;">     
     setMenuBar(m);
     setSize(</span>300,400);setVisible(<span style="color: #0000ff;">true</span><span style="color: #000000;">);
     add(text,</span>"Center"<span style="color: #000000;">);
     
     xinjian.addActionListener(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
     dakai.addActionListener(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
     baocun.addActionListener(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
     tuichu.addActionListener(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
     jianqie.addActionListener(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
     fuzhi.addActionListener(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
     zhantie.addActionListener(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);
     addWindowListener(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> WindowAdapter()
                      {
                        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> windowClosing(WindowEvent e)
                        {
                          System.exit(</span>0<span style="color: #000000;">);
                        }
                      });
    }
    
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> actionPerformed(ActionEvent e)
    {
      </span><span style="color: #0000ff;">if</span>(e.getSource()==<span style="color: #000000;">xinjian)
       {
         text.setText(</span>""<span style="color: #000000;">);
       }
      </span><span style="color: #0000ff;">if</span>(e.getSource()==<span style="color: #000000;">dakai)
       {
        openFD.show();
        String s;
        filename</span>=openFD.getDirectory()+<span style="color: #000000;">openFD.getFile();
        </span><span style="color: #0000ff;">if</span>(filename!=<span style="color: #0000ff;">null</span><span style="color: #000000;">)
         {
          </span><span style="color: #0000ff;">try</span><span style="color: #000000;">
           {
            File file</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> File(filename);
            read</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> FileReader(file);
            in</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> BufferedReader(read);
            </span><span style="color: #0000ff;">while</span>((s=in.readLine())!=<span style="color: #0000ff;">null</span><span style="color: #000000;">)
                text.append(s</span>+'\n'<span style="color: #000000;">);
            in.close();
            read.close();
           }
            </span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(IOException e2){}
         }
       }
      
      </span><span style="color: #0000ff;">if</span>(e.getSource()==<span style="color: #000000;">baocun)
      {
        saveFD.show();
        filename</span>=saveFD.getDirectory()+<span style="color: #000000;">saveFD.getFile();
        </span><span style="color: #0000ff;">if</span>(filename!=<span style="color: #0000ff;">null</span><span style="color: #000000;">)
        {
         </span><span style="color: #0000ff;">try</span><span style="color: #000000;">
           {
            File file</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> File(filename);
            writer</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> FileWriter(file);
            out</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> BufferedWriter(writer);
            out.write(text.getText(),</span>0<span style="color: #000000;">,(text.getText()).length());
            
            out.close();
            writer.close();
           }
          </span><span style="color: #0000ff;">catch</span><span style="color: #000000;">(IOException e2){} 
        }
      }
      </span><span style="color: #0000ff;">if</span>(e.getSource()==<span style="color: #000000;">tuichu)
      {
        System.exit(</span>0<span style="color: #000000;">);
      }
      
      
      
      
     </span><span style="color: #0000ff;">if</span>(e.getSource()==<span style="color: #000000;">jianqie)
      {
      </span><span style="color: #008000;">//</span><span style="color: #008000;">类text中没有cut方法，不能使用text.cut</span>
        String s=<span style="color: #000000;">text.getSelectedText();
        StringSelection select</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> StringSelection(s);
        cb.setContents(select,</span><span style="color: #0000ff;">null</span><span style="color: #000000;">);
        text.replaceRange(</span>""<span style="color: #000000;">,text.getSelectionStart(),text.getSelectionEnd());
      }
      </span><span style="color: #0000ff;">if</span>(e.getSource()==<span style="color: #000000;">fuzhi)
      {
      </span><span style="color: #008000;">//</span><span style="color: #008000;">同上，没有copy这个方法</span>
        String s=<span style="color: #000000;">text.getSelectedText();
        StringSelection select</span>=<span style="color: #0000ff;">new</span><span style="color: #000000;"> StringSelection(s);
        cb.setContents(select,</span><span style="color: #0000ff;">null</span><span style="color: #000000;">);
      }
      </span><span style="color: #0000ff;">if</span>(e.getSource()==<span style="color: #000000;">zhantie)
      {
      </span><span style="color: #008000;">//</span><span style="color: #008000;">同上，没有paste方法</span>
           String s=""<span style="color: #000000;">;
          Transferable t </span>= cb.getContents(<span style="color: #0000ff;">null</span><span style="color: #000000;">);
          </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> 
          {
                </span><span style="color: #0000ff;">if</span> (t != <span style="color: #0000ff;">null</span>
                    &amp;&amp;<span style="color: #000000;"> t.isDataFlavorSupported(DataFlavor.stringFlavor)) 
                {
                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 因为原系的剪贴板里有多种信息, 如文字, 图片, 文件等
                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 先判断开始取得的可传输的数据是不是文字, 如果是, 取得这些文字</span>
<span style="color: #000000;">                        
                    s </span>=<span style="color: #000000;"> (String)t.getTransferData(DataFlavor.stringFlavor);
                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 同样, 因为Transferable中的DataFlavor是多种类型的,
                        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 所以传入DataFlavor这个参数, 指定要取得哪种类型的Data.
                        </span><span style="color: #008000;">//</span><span style="color: #008000;">System.out.println(s);</span>
<span style="color: #000000;">                }
          } 
          </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (UnsupportedFlavorException ex) 
          {
                ex.printStackTrace();
          } 
          </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException ex) 
          {
                ex.printStackTrace();
          }
          
          text.insert(s,text.getCaretPosition());
          
      }
      
    }
  
   
}</span></pre>
</div>]]></description></item><item><title>java实现局域网聊天工具</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/24/2468990.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 24 Apr 2012 14:26:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/24/2468990.html</guid><description><![CDATA[<p>使用UDP协议，通过发送数据报给对方，每次启动时需要设定接收数据的端口号，发送到的ip地址和端口可以在启动后修改。</p>
<p>&nbsp;打包好的代码：</p>
<p><a title="http://115.com/file/e7jb7noz# QQ.zip " href="http://115.com/file/e7jb7noz#%20QQ.zip%20">http://115.com/file/e7jb7noz#</a><br /><a title="http://115.com/file/e7jb7noz# QQ.zip " href="http://115.com/file/e7jb7noz#%20QQ.zip%20">QQ.zip</a></p>
<p>主要思路很简单：</p>
<p>1.设置自己的接收端口</p>
<p>2.设置对方IP和端口</p>
<p>3.发送数据和接收数据</p>
<p>&nbsp;</p>
<p>下面是主要代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">import</span> java.net.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.awt.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.awt.event.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> javax.swing.*<span style="color: #000000;">;
</span><span style="color: #0000ff;">import</span> java.io.*<span style="color: #000000;">;

</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> QQFrame <span style="color: #0000ff;">extends</span> JFrame <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Runnable
{
    </span><span style="color: #0000ff;">private</span> JTextArea sendArea = <span style="color: #0000ff;">new</span> JTextArea(20,20<span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> JTextArea showArea = <span style="color: #0000ff;">new</span> JTextArea(10,20<span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> JButton sendButton = <span style="color: #0000ff;">new</span> JButton("发送"<span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> MenuBar menuBar = <span style="color: #0000ff;">new</span><span style="color: #000000;"> MenuBar();
    </span><span style="color: #0000ff;">private</span> Menu setMenu = <span style="color: #0000ff;">new</span> Menu("设置"<span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> Menu helpMenu = <span style="color: #0000ff;">new</span> Menu("帮助"<span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> MenuItem aboutItem = <span style="color: #0000ff;">new</span> MenuItem("关于"<span style="color: #000000;">);    
    </span><span style="color: #0000ff;">private</span> MenuItem setItem = <span style="color: #0000ff;">new</span> MenuItem("配置参数"<span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> Thread thread = <span style="color: #0000ff;">new</span> Thread(<span style="color: #0000ff;">this</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> Config config = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Config();
    </span><span style="color: #0000ff;">private</span> JDialog dialog = <span style="color: #0000ff;">new</span> JDialog(<span style="color: #0000ff;">this</span>,"参数配置",<span style="color: #0000ff;">true</span><span style="color: #000000;">);
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> myPort;
    QQFrame(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> in_myPort)
    {
        </span><span style="color: #0000ff;">super</span>("局域网聊天工具"<span style="color: #000000;">);
        setResizable(</span><span style="color: #0000ff;">false</span><span style="color: #000000;">);
        myPort </span>=<span style="color: #000000;"> in_myPort;
        setItem.addActionListener(</span><span style="color: #0000ff;">new</span> SetDialog(dialog,<span style="color: #0000ff;">this</span><span style="color: #000000;">));
        aboutItem.addActionListener(</span><span style="color: #0000ff;">new</span> AboutDialog(<span style="color: #0000ff;">this</span><span style="color: #000000;">));
        initLayout();
        sendButton.addActionListener(</span><span style="color: #0000ff;">new</span> SendListener(<span style="color: #0000ff;">this</span><span style="color: #000000;">,sendArea,showArea,config));
        thread.start();
        addWindowListener(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> WindowAdapter()
        {
            </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> windowClosing(WindowEvent e)
            {
                System.exit(</span>0<span style="color: #000000;">);
            }
        });
    }
    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> initLayout()
    {
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> w,h;
        w </span>= 400<span style="color: #000000;">;
        h </span>= 500<span style="color: #000000;">;
        setBounds(</span>100,100<span style="color: #000000;">,w,h);
        setVisible(</span><span style="color: #0000ff;">true</span><span style="color: #000000;">);
        setLayout(</span><span style="color: #0000ff;">new</span> GridLayout(3,1,10,15<span style="color: #000000;">));
        JPanel jp1,jp2;
        jp1 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> JPanel();
        jp2 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> JPanel();
        JLabel jl1;
        jl1 </span>= <span style="color: #0000ff;">new</span> JLabel("聊天记录框："<span style="color: #000000;">);
        jp1.setLayout(</span><span style="color: #0000ff;">null</span><span style="color: #000000;">);
        jp1.add(jl1);
        jl1.setBounds(</span>0,0,w,20<span style="color: #000000;">);
        jp1.add(showArea);
        showArea.setBounds(</span>0,30,w,h/3-20<span style="color: #000000;">);
        JLabel jl2;
        jp2.setLayout(</span><span style="color: #0000ff;">null</span><span style="color: #000000;">);
        jl2 </span>= <span style="color: #0000ff;">new</span> JLabel("发送框："<span style="color: #000000;">);
        jp2.add(jl2);
        jl2.setBounds(</span>0,0,w,20<span style="color: #000000;">);
        sendArea.setBounds(</span>0,30,w,h/3-20<span style="color: #000000;">);
        jp2.add(sendArea);
        JPanel jp3 </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> JPanel();
        add(jp1);
        add(jp2);
        add(jp3);
        jp3.add(sendButton);
        setMenuBar(menuBar);
        menuBar.add(setMenu);
        menuBar.add(helpMenu);
        helpMenu.add(aboutItem);
        setMenu.add(setItem);
        dialog.setBounds(</span>120,150,200,250<span style="color: #000000;">);
        JLabel IPLabel </span>= <span style="color: #0000ff;">new</span> JLabel("对方IP"<span style="color: #000000;">);
        JLabel yourPortLabel </span>= <span style="color: #0000ff;">new</span> JLabel("对方接收端口"<span style="color: #000000;">);
        JLabel nameLabel </span>= <span style="color: #0000ff;">new</span> JLabel("本机名"<span style="color: #000000;">);
        JTextField IPTextField </span>= <span style="color: #0000ff;">new</span> JTextField(15<span style="color: #000000;">);
        JTextField yourPortTextField </span>= <span style="color: #0000ff;">new</span> JTextField(8<span style="color: #000000;">);
        JTextField nameTextField </span>= <span style="color: #0000ff;">new</span> JTextField(15<span style="color: #000000;">);
        IPTextField.setText(</span>"127.0.0.1"<span style="color: #000000;">);
        yourPortTextField.setText(</span>"879"<span style="color: #000000;">);
        nameTextField.setText(</span>"hanxi"<span style="color: #000000;">);
        
        dialog.setLayout(</span><span style="color: #0000ff;">new</span> GridLayout(4,2,10,10<span style="color: #000000;">));
        dialog.add(IPLabel);
        dialog.add(IPTextField);
        dialog.add(yourPortLabel);
        dialog.add(yourPortTextField);
        dialog.add(nameLabel);
        dialog.add(nameTextField);
        dialog.add(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Panel());
        JButton sureButton </span>= <span style="color: #0000ff;">new</span> JButton("确定"<span style="color: #000000;">);
        dialog.add(sureButton);
        sureButton.addActionListener(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> SureListener(IPTextField,yourPortTextField,nameTextField,dialog,config));
    }
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run()
    {
        DatagramPacket dp </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        DatagramSocket ds </span>= <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">byte</span>[] buf = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">byte</span>[1024<span style="color: #000000;">];
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;">
        {
            dp </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> DatagramPacket(buf,buf.length);
            ds </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> DatagramSocket(myPort);
            System.out.println(</span>"myport="+<span style="color: #000000;">myPort);
        }
        </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e)
        {}
        </span><span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">true</span><span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">try</span><span style="color: #000000;">
            {
                ds.receive(dp);
                </span><span style="color: #0000ff;">int</span> length =<span style="color: #000000;"> dp.getLength();
                InetAddress address </span>=<span style="color: #000000;"> dp.getAddress();
                </span><span style="color: #0000ff;">int</span> port =<span style="color: #000000;"> dp.getPort();
                String message </span>= <span style="color: #0000ff;">new</span> String(dp.getData(),0<span style="color: #000000;">,length);
                showArea.append(</span>"收到数据长度："+length+"\n"<span style="color: #000000;">);
                showArea.append(</span>"收到数据来自："+address+"端口："+port+"\n"<span style="color: #000000;">);
                showArea.append(</span>"收到数据是："+message+"\n"<span style="color: #000000;">);
            }
            </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e)
            {
            }
        }        
    }
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">发送事件</span>
<span style="color: #0000ff;">class</span> SendListener <span style="color: #0000ff;">implements</span><span style="color: #000000;"> ActionListener
{
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> JFrame QQFrame;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> JTextArea sendArea;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> JTextArea showArea;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Config config;
    SendListener(JFrame in_QQFrame, JTextArea in_sendArea, JTextArea in_showArea, Config in_config)
    {
        QQFrame </span>=<span style="color: #000000;"> in_QQFrame;
        sendArea </span>=<span style="color: #000000;"> in_sendArea;
        showArea </span>=<span style="color: #000000;">in_showArea;
        config </span>=<span style="color: #000000;"> in_config;
        System.out.println(</span>"in_port:"+<span style="color: #000000;">config.getyourPort());
        QQFrame.validate();
    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> actionPerformed(ActionEvent e)
    {
        System.out.println(</span>"你点击了发送按钮"<span style="color: #000000;">);
        </span><span style="color: #0000ff;">byte</span>[] buf =<span style="color: #000000;"> sendArea.getText().trim().getBytes();
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;">
        {
            InetAddress address </span>=<span style="color: #000000;"> InetAddress.getByName(config.getIP());
            DatagramPacket dp </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> DatagramPacket(buf,buf.length,address,Integer.parseInt(config.getyourPort()));
            DatagramSocket ds </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> DatagramSocket();
            showArea.append(</span>"数据包目标地址："+dp.getAddress()+"\n"<span style="color: #000000;">);
            showArea.append(</span>"数据包目标端口号："+dp.getPort()+"\n"<span style="color: #000000;">);
            showArea.append(</span>"数据包长度："+dp.getLength()+"\n"<span style="color: #000000;">);
            ds.send(dp);
        }
        </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception ee) {}
    }
}

</span><span style="color: #008000;">//</span><span style="color: #008000;">配置设置</span>
<span style="color: #0000ff;">class</span> SetDialog <span style="color: #0000ff;">implements</span><span style="color: #000000;"> ActionListener
{
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> JDialog dialog;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> JFrame frame;
    SetDialog(JDialog in_dialog,JFrame parent)
    {
        dialog </span>=<span style="color: #000000;"> in_dialog;
        frame </span>=<span style="color: #000000;"> parent;
    }
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> actionPerformed(ActionEvent e)
    {
        dialog.validate();
        </span><span style="color: #0000ff;">int</span> x =<span style="color: #000000;"> frame.getX();
        </span><span style="color: #0000ff;">int</span> y =<span style="color: #000000;"> frame.getY();
        dialog.setBounds(x</span>+50,y+50,200,250<span style="color: #000000;">);
        dialog.setVisible(</span><span style="color: #0000ff;">true</span><span style="color: #000000;">);
    }
}
</span><span style="color: #008000;">//</span><span style="color: #008000;">关于对话框</span>
<span style="color: #0000ff;">class</span> AboutDialog <span style="color: #0000ff;">extends</span> JDialog <span style="color: #0000ff;">implements</span><span style="color: #000000;"> ActionListener
{
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> JFrame frame;
    </span><span style="color: #0000ff;">private</span> JLabel jl = <span style="color: #0000ff;">new</span> JLabel("感谢您的使用，作者：涵曦"<span style="color: #000000;">);
    AboutDialog(JFrame parent)
    {
        frame </span>=<span style="color: #000000;"> parent;
        add(jl);
    }
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> actionPerformed(ActionEvent e)
    {
        validate();
        </span><span style="color: #0000ff;">int</span> x =<span style="color: #000000;"> frame.getX();
        </span><span style="color: #0000ff;">int</span> y =<span style="color: #000000;"> frame.getY();
        setBounds(x</span>+50,y+50,200,250<span style="color: #000000;">);
        setVisible(</span><span style="color: #0000ff;">true</span><span style="color: #000000;">);
    }
}
</span><span style="color: #008000;">//</span><span style="color: #008000;">对话框的确定按钮事件</span>
<span style="color: #0000ff;">class</span> SureListener <span style="color: #0000ff;">implements</span><span style="color: #000000;"> ActionListener
{
    JTextField IPTextField;
    JTextField yourPortTextField;
    JTextField nameTextField;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Dialog dialog;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Config config;
    
    SureListener(JTextField in_IPTextField,JTextField in_yourPortTextField,JTextField in_nameTextField,JDialog in_dialog,Config in_config)
    {
        IPTextField </span>=<span style="color: #000000;"> in_IPTextField;
        yourPortTextField </span>=<span style="color: #000000;"> in_yourPortTextField;
        nameTextField </span>=<span style="color: #000000;"> in_nameTextField;
        dialog </span>=<span style="color: #000000;"> in_dialog;
        config </span>=<span style="color: #000000;"> in_config;
    }
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> actionPerformed(ActionEvent e)
    {
        config.set(IPTextField.getText(),yourPortTextField.getText(),nameTextField.getText());
        System.out.println(</span>"config:yourPort:"+<span style="color: #000000;">config.getyourPort());
        dialog.setVisible(</span><span style="color: #0000ff;">false</span><span style="color: #000000;">);
    }
}
</span><span style="color: #008000;">//</span><span style="color: #008000;">参数</span>
<span style="color: #0000ff;">class</span><span style="color: #000000;"> Config
{
    </span><span style="color: #0000ff;">private</span> String IP="127.0.0.1"<span style="color: #000000;">;
    </span><span style="color: #0000ff;">private</span> String yourPort="666"<span style="color: #000000;">;
    </span><span style="color: #0000ff;">private</span> String name="hanxi"<span style="color: #000000;">;

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> set(String in_IP, String in_yourPort,String in_name)
    {
        IP </span>=<span style="color: #000000;"> in_IP;
        yourPort </span>=<span style="color: #000000;"> in_yourPort;
        name </span>=<span style="color: #000000;"> in_name;
    }
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getIP()
    {
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> IP;
    }
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getyourPort()
    {
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> yourPort;
    }
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getName()
    {
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> name;
    }
}</span></pre>
</div>
<p>下面是主方法代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> QQ
{
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String args[])
    {
        </span><span style="color: #0000ff;">if</span> (args.length == 0<span style="color: #000000;">)
        {
            System.out.println(</span>"请在QQ后面输入接收数据的端口号（需要空格）！"<span style="color: #000000;">);
            System.exit(</span>0<span style="color: #000000;">);
        }
        System.out.println(Integer.parseInt(args[</span>0<span style="color: #000000;">]));
        QQFrame frame </span>= <span style="color: #0000ff;">new</span> QQFrame(Integer.parseInt(args[0<span style="color: #000000;">]));
    }
}</span></pre>
</div>
<p>设置端口和IP的图片</p>
<p>&nbsp;</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012042422223952.jpg" alt="" /></p>
<p>下面是聊天界面</p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012042422233417.jpg" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;感谢&nbsp;<a id="a_comment_author_2978825" href="http://home.cnblogs.com/u/648708/" target="_blank">我是一林风</a>&nbsp;提供的录屏，请下载观看<a href="http://pan.baidu.com/s/1o6Hkero">http://pan.baidu.com/s/1o6Hkero</a></p>
<p>&nbsp;</p>]]></description></item><item><title>简单的二次B样条曲线</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/14/2446722.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 14 Apr 2012 00:22:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/14/2446722.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">使用二次B样条曲线生成离散点
</span>vector&lt;Point&gt;&amp;<span style="color: #000000;"> Route::bSpline()
{
    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> a0,a1,a2;
    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> dt,t1,t2;
    Point tmp_p;

    </span><span style="color: #008000;">//</span><span style="color: #008000;">使首位相连</span>
    Point *newp = <span style="color: #0000ff;">new</span> Point[num_points+<span style="color: #800080;">2</span><span style="color: #000000;">];
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;num_points; i++<span style="color: #000000;">)
    {
        newp[i].setXY(p[i].x, p[i].y);
    }
    newp[num_points].setXY(p[</span><span style="color: #800080;">0</span>].x, p[<span style="color: #800080;">0</span><span style="color: #000000;">].y);
    newp[num_points</span>+<span style="color: #800080;">1</span>].setXY(p[<span style="color: #800080;">1</span>].x, p[<span style="color: #800080;">1</span><span style="color: #000000;">].y);

    dt</span>=<span style="color: #800080;">1.0</span>/<span style="color: #000000;">k;
    tmp_p.setXY((newp[</span><span style="color: #800080;">0</span>].x+newp[<span style="color: #800080;">1</span>].x)/<span style="color: #800080;">2</span>,(newp[<span style="color: #800080;">0</span>].y+newp[<span style="color: #800080;">1</span>].y)/<span style="color: #800080;">2</span>); <span style="color: #008000;">//</span><span style="color: #008000;">曲线起始点；</span>
<span style="color: #000000;">    positions.push_back(tmp_p);
    </span><span style="color: #008000;">//</span><span style="color: #008000;">将结果输出到文件</span>
    ofstream outlog(<span style="color: #800000;">"</span><span style="color: #800000;">positons.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">);
    outlog</span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">x= </span><span style="color: #800000;">"</span>&lt;&lt;tmp_p.x&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">    y= </span><span style="color: #800000;">"</span>&lt;&lt;tmp_p.y&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;

    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;num_points+<span style="color: #800080;">1</span>;i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=<span style="color: #800080;">0</span>;j&lt;=k;j++<span style="color: #000000;">)
        {  
            t1</span>=j*<span style="color: #000000;">dt;
            t2</span>=t1*<span style="color: #000000;">t1;
            
            a0</span>=(t2-<span style="color: #800080;">2</span>*t1+<span style="color: #800080;">1</span>)/<span style="color: #800080;">2.0</span><span style="color: #000000;">;
            a1</span>=(<span style="color: #800080;">2</span>*t1-<span style="color: #800080;">2</span>*t2+<span style="color: #800080;">1</span>)/<span style="color: #800080;">2.0</span><span style="color: #000000;">;
            a2</span>=t2/<span style="color: #800080;">2.0</span><span style="color: #000000;">;
            
            </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> t_x,t_y;
            t_x</span>=a0*newp[i-<span style="color: #800080;">1</span>].x+a1*newp[i].x+a2*newp[i+<span style="color: #800080;">1</span><span style="color: #000000;">].x;
            t_y</span>=a0*newp[i-<span style="color: #800080;">1</span>].y+a1*newp[i].y+a2*newp[i+<span style="color: #800080;">1</span><span style="color: #000000;">].y;
            tmp_p.setXY(t_x,t_y);
            outlog</span>&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">x= </span><span style="color: #800000;">"</span>&lt;&lt;tmp_p.x&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">    y= </span><span style="color: #800000;">"</span>&lt;&lt;tmp_p.y&lt;&lt;<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
            positions.push_back(tmp_p);
        }
    }
</span><span style="color: #008000;">//</span><span style="color: #008000;">    positions.pop_back();</span>
<span style="color: #000000;">    outlog.close();
    delete [] newp;
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> positions;
}</span></pre>
</div>]]></description></item><item><title>高斯法解方程组</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/10/2440506.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 10 Apr 2012 06:16:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/10/2440506.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #0000ff;">void</span> gauss(<span style="color: #0000ff;">double</span> a[<span style="color: #800080;">3</span>][<span style="color: #800080;">3</span>], <span style="color: #0000ff;">double</span> b[], <span style="color: #0000ff;">int</span> m, <span style="color: #0000ff;">double</span><span style="color: #000000;"> x[])
{
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;m; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">float</span> tmp =<span style="color: #000000;"> a[i][i];
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> t;
        </span><span style="color: #008000;">//</span><span style="color: #008000;">选主元</span>
        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k=i+<span style="color: #800080;">1</span>; k&lt;m; k++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">if</span> (fabs(tmp) &lt;<span style="color: #000000;"> fabs(a[k][i]))
            {
                t</span>=<span style="color: #000000;">k;
                tmp </span>=<span style="color: #000000;"> a[k][i];
            }
        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;">列主元(换行)</span>
        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j=i; j&lt;m; j++<span style="color: #000000;">)
        {
            tmp</span>=<span style="color: #000000;">a[i][j];
            a[i][j]</span>=<span style="color: #000000;">a[t][j];
            a[t][j]</span>=<span style="color: #000000;">tmp;
        }
        tmp </span>=<span style="color: #000000;"> b[i];
        b[i] </span>=<span style="color: #000000;"> b[t];
        b[t] </span>=<span style="color: #000000;"> tmp;
        
        </span><span style="color: #008000;">//</span><span style="color: #008000;">列消去</span>
        <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> k=i+<span style="color: #800080;">1</span>;k&lt;m;k++<span style="color: #000000;">)
        {
            a[k][i]</span>=a[k][i]/<span style="color: #000000;">a[i][i];
            </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=i+<span style="color: #800080;">1</span>;j&lt;m;j++<span style="color: #000000;">)
            {
                a[k][j]</span>=a[k][j]-a[k][i]*<span style="color: #000000;">a[i][j];
            }
            b[k]</span>=b[k]-a[k][i]*<span style="color: #000000;">b[i];
        }
    }
    
    </span><span style="color: #008000;">//</span><span style="color: #008000;">回代</span>
    x[m-<span style="color: #800080;">1</span>]=b[m-<span style="color: #800080;">1</span>]/a[m-<span style="color: #800080;">1</span>][m-<span style="color: #800080;">1</span><span style="color: #000000;">];
    </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=m-<span style="color: #800080;">2</span>;i&gt;=<span style="color: #800080;">0</span>;i--<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> k=m-<span style="color: #800080;">1</span>;k&gt;i;k--<span style="color: #000000;">)
        {
            b[i]</span>=b[i]-a[i][k]*<span style="color: #000000;">x[k];
        }
        x[i]</span>=b[i]/<span style="color: #000000;">a[i][i];
    }    
}</span></pre>
</div>]]></description></item><item><title>追赶法解方程</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/09/2439623.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 09 Apr 2012 14:12:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/09/2439623.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">追赶法解方程组Pursue.cpp</span>
#include &lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;vector&gt;<span style="color: #000000;">
#include </span>&lt;algorithm&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;


</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> SolutionEquations
{
</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> a;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> b;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> c;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> f;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> x;
    
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">void</span> setABCF(vector&lt;<span style="color: #0000ff;">double</span>&gt; in_a, vector&lt;<span style="color: #0000ff;">double</span>&gt; in_b, vector&lt;<span style="color: #0000ff;">double</span>&gt; in_c, vector&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> in_f)
    {
        a </span>=<span style="color: #000000;"> in_a;
        b </span>=<span style="color: #000000;"> in_b;
        c </span>=<span style="color: #000000;"> in_c;
        f </span>=<span style="color: #000000;"> in_f;
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">追赶法解方程组</span>
    vector&lt;<span style="color: #0000ff;">double</span>&gt;&amp;<span style="color: #000000;"> Pursue()
    {
        vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> bita;
        vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> y;
        </span><span style="color: #0000ff;">int</span> n =<span style="color: #000000;"> f.size();
        bita.push_back(c.at(</span><span style="color: #800080;">0</span>)/b.at(<span style="color: #800080;">0</span><span style="color: #000000;">));
        y.push_back(f.at(</span><span style="color: #800080;">0</span>)/b.at(<span style="color: #800080;">0</span><span style="color: #000000;">));
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;n-<span style="color: #800080;">1</span>; i++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">double</span> alpha = b.at(i)-a.at(i)*bita.at(i-<span style="color: #800080;">1</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">double</span> tmp = c.at(i)/<span style="color: #000000;">alpha;
            bita.push_back(tmp);
            tmp </span>= (f.at(i)-a.at(i)*y.at(i-<span style="color: #800080;">1</span>))/<span style="color: #000000;">alpha;
            y.push_back(tmp);
        }
        </span><span style="color: #0000ff;">double</span> alpha = b.at(n-<span style="color: #800080;">1</span>)-a.at(n-<span style="color: #800080;">1</span>)*bita.at(n-<span style="color: #800080;">2</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">double</span> tmp = (f.at(n-<span style="color: #800080;">1</span>)-a.at(n-<span style="color: #800080;">1</span>)*y.at(n-<span style="color: #800080;">2</span>))/<span style="color: #000000;">alpha;
        y.push_back(tmp);

        x.push_back(y.at(n</span>-<span style="color: #800080;">1</span><span style="color: #000000;">));
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=n-<span style="color: #800080;">2</span>,k=<span style="color: #800080;">0</span>; i&gt;=<span style="color: #800080;">0</span>; i--,k++<span style="color: #000000;">)
        {
            </span><span style="color: #0000ff;">double</span> tmp = y.at(i)-bita.at(i)*<span style="color: #000000;">x.at(k);
            x.push_back(tmp);
        }
        reverse(x.begin(),x.end());
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> x;
    }
};

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    SolutionEquations solution;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> a;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> b;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> c;
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> f;

    a.push_back(</span><span style="color: #800080;">0</span><span style="color: #000000;">);
    a.push_back(</span>-<span style="color: #800080;">1</span><span style="color: #000000;">);
    a.push_back(</span>-<span style="color: #800080;">2</span><span style="color: #000000;">);
    a.push_back(</span>-<span style="color: #800080;">3</span><span style="color: #000000;">);
    b.push_back(</span><span style="color: #800080;">2</span><span style="color: #000000;">);
    b.push_back(</span><span style="color: #800080;">3</span><span style="color: #000000;">);
    b.push_back(</span><span style="color: #800080;">4</span><span style="color: #000000;">);
    b.push_back(</span><span style="color: #800080;">5</span><span style="color: #000000;">);
    c.push_back(</span>-<span style="color: #800080;">1</span><span style="color: #000000;">);
    c.push_back(</span>-<span style="color: #800080;">2</span><span style="color: #000000;">);
    c.push_back(</span>-<span style="color: #800080;">3</span><span style="color: #000000;">);
    f.push_back(</span><span style="color: #800080;">6</span><span style="color: #000000;">);
    f.push_back(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
    f.push_back(</span>-<span style="color: #800080;">2</span><span style="color: #000000;">);
    f.push_back(</span><span style="color: #800080;">1</span><span style="color: #000000;">);
    
    solution.setABCF(a,b,c,f);
        
    vector</span>&lt;<span style="color: #0000ff;">double</span>&gt;x =<span style="color: #000000;"> solution.Pursue();
    
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;x.size(); i++<span style="color: #000000;">)
    {
        cout </span>&lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">x=</span><span style="color: #800000;">"</span> &lt;&lt; x.at(i) &lt;&lt;<span style="color: #000000;"> endl;
    }
    
}<br /><br /><br /></span></pre>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012040922131285.jpg" alt="" /></p>
<pre><span style="color: #000000;">&nbsp;</span></pre>
</div>]]></description></item><item><title>二次样条差值算法</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/09/2439516.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 09 Apr 2012 12:40:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/09/2439516.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #008000;">//注明：a为存储每段二次曲线的系数的二维矩阵<br />//</span><span style="color: #008000;">二次样条差值</span>
<span style="color: #0000ff;">void</span> fit_second(Point *p, <span style="color: #0000ff;">int</span> n, <span style="color: #0000ff;">double</span> y0d, vector&lt;vector&lt;<span style="color: #0000ff;">double</span>&gt; &gt; &amp;<span style="color: #000000;">a)
{
    vector </span>&lt;<span style="color: #0000ff;">double</span>&gt;<span style="color: #000000;"> va;
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;n-<span style="color: #800080;">1</span>; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">double</span> x0 =<span style="color: #000000;"> p[i].x;
        </span><span style="color: #0000ff;">double</span> y0 =<span style="color: #000000;"> p[i].y;
        </span><span style="color: #0000ff;">double</span> x1 = p[i+<span style="color: #800080;">1</span><span style="color: #000000;">].x;
        </span><span style="color: #0000ff;">double</span> y1 = p[i+<span style="color: #800080;">1</span><span style="color: #000000;">].y;
        </span><span style="color: #0000ff;">double</span> h0 = x1 -<span style="color: #000000;"> x0;
        </span><span style="color: #008000;">//</span><span style="color: #008000;">S(x) = (y1-y0-h0*y0')*(x-x0)^2/(h0^2)  +  y0'*(x-x0)  +  y0</span>
        <span style="color: #0000ff;">double</span> a2 = (y1-y0-h0*y0d)/(h0*<span style="color: #000000;">h0);
        </span><span style="color: #0000ff;">double</span> a1 = (-<span style="color: #800080;">2</span>*x0)*(y1-y0-h0*y0d)/(h0*h0) +<span style="color: #000000;"> y0d;
        </span><span style="color: #0000ff;">double</span> a0 = (x0*x0)*(y1-y0-h0*y0d)/(h0*h0) - y0d*x0 +<span style="color: #000000;"> y0;
        y0d </span>= <span style="color: #800080;">2</span>*(y1-y0)/h0 -<span style="color: #000000;"> y0d;
        va.clear();
        va.push_back(a0);
        va.push_back(a1);
        va.push_back(a2);
        a.push_back(va);
    }
}</span></pre>
</div>]]></description></item><item><title>java小计算器</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/07/2435884.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 07 Apr 2012 05:11:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/07/2435884.html</guid><description><![CDATA[<p>只支持鼠标操作的。</p>
<p>打包好的源代码下载地址：</p>
<p><a title="http://115.com/file/anc92nmj# calculator.zip " href="http://115.com/file/anc92nmj#%20calculator.zip%20">http://115.com/file/anc92nmj#</a><br /><a title="http://115.com/file/anc92nmj# calculator.zip " href="http://115.com/file/anc92nmj#%20calculator.zip%20">calculator.zip</a></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">/**</span><span style="color: #008000;"><br /> * @(#)CaculatorFrame.java<br /> *<br /> *<br /> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> huangliangming<br /> * @说明： 实现了基本功能，只支持鼠标操作<br />           <br /> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.00 2012/4/3<br /> </span><span style="color: #008000;">*/</span><br /><span style="color: #0000ff;">package</span> calculator;<br /><span style="color: #0000ff;">import</span> java.awt.*;<br /><span style="color: #0000ff;">import</span> java.awt.event.*;<br /><span style="color: #0000ff;">import</span> javax.swing.*;<br /><br /><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> CaculatorFrame <span style="color: #0000ff;">extends</span> JFrame<br />{<br />    <span style="color: #0000ff;">private</span> JButton jButton;<br />    <span style="color: #0000ff;">private</span> JTextField textField;<br />    <span style="color: #0000ff;">int</span> w = 242,<br />        h = 260;<br />    <span style="color: #0000ff;">int</span> buttonSizeX = 45,<br />        buttonSizeY = 35;<br />    <span style="color: #0000ff;">static</span> Double num1=0.0;<br />    <span style="color: #0000ff;">static</span> String cal;<br />    <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">boolean</span> isANext = <span style="color: #0000ff;">false</span>;<br />    <span style="color: #0000ff;">public</span> CaculatorFrame()<br />    {<br />        Dimension screensize = Toolkit.getDefaultToolkit().getScreenSize();<br />        <span style="color: #0000ff;">int</span> swidth = (<span style="color: #0000ff;">int</span>)screensize.getWidth();<br />        <span style="color: #0000ff;">int</span> sheight = (<span style="color: #0000ff;">int</span>)screensize.getHeight();<br />        setBounds(swidth/2-w/2,sheight/2-h/2,w,h);<br />        setResizable(<span style="color: #0000ff;">false</span>);<br />        setVisible(<span style="color: #0000ff;">true</span>);<br />        <span style="color: #0000ff;">this</span>.addWindowListener(<span style="color: #0000ff;">new</span> WindowAdapter()<br />        {<br />            <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> windowClosing(WindowEvent e)<br />            {<br />                CaculatorFrame.<span style="color: #0000ff;">this</span>.windowClosed();<br />            }<br />        });<br />        initButton();<br />        repaint();<br />    }<br />    <br />    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> initButton()<br />    {<br />        setLayout(<span style="color: #0000ff;">null</span>);<br />        textField = <span style="color: #0000ff;">new</span> JTextField("0");<br />        add(textField);<br />        textField.setBounds(2,2,w-10,30);<br />        textField.setHorizontalAlignment(JTextField.RIGHT);<br />        textField.setEditable(<span style="color: #0000ff;">false</span>);<br />        textField.setBackground(Color.WHITE);<br />        <span style="color: #008000;">//</span><span style="color: #008000;">画数字键</span><span style="color: #008000;"><br /></span> JPanel numPanel = <span style="color: #0000ff;">new</span> JPanel();<br />          numPanel.setLayout(<span style="color: #0000ff;">new</span> GridLayout(4,4,5,5));<br />          String str = "789+456-123x0.c/";<br />        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=0; i&lt;16; i++)<br />        {<br />            jButton = <span style="color: #0000ff;">new</span> JButton(str.substring(i,i+1));<br />            numPanel.add(jButton);<br />            <span style="color: #0000ff;">if</span> (i == 3 || i == 7 || i == 11 || i == 15)<br />            {<br />                jButton.addActionListener(<span style="color: #0000ff;">new</span> ActionListener()<br />                {<br />                    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> actionPerformed(ActionEvent e)<br />                    {<br />                        cal = e.getActionCommand();<br />                        <span style="color: #0000ff;">try</span><br />                        {<br />                            num1 = Double.parseDouble(textField.getText());<br />                            <span style="color: #0000ff;">if</span> (num1 == 0.0)<br />                            {<br />                                textField.setText("");<br />                            }<br />                        }<br />                        <span style="color: #0000ff;">catch</span> (NumberFormatException event)<br />                        {<br />                            textField.setText("");<br />                        }<br />                        textField.setText(e.getActionCommand());<br />                    }<br />                });<br />            }<br />            <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (i == 14)<br />            {<br />                jButton.addActionListener(<span style="color: #0000ff;">new</span> DelEvent(textField));<br />            }<br />            <span style="color: #0000ff;">else</span><br />            {<br />                jButton.addActionListener(<span style="color: #0000ff;">new</span> ActionListener()<br />                {<br />                    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> actionPerformed(ActionEvent e)<br />                    {<br />                        String text = textField.getText();<br />                        String s = e.getActionCommand();<br />                        System.out.println("text:"+text);<br />                        System.out.println("s:"+s);<br />                        <span style="color: #0000ff;">if</span> (isANext == <span style="color: #0000ff;">true</span>)<br />                        {<br />                            text = "";<br />                            isANext = <span style="color: #0000ff;">false</span>;<br />                        }<br />                        <span style="color: #0000ff;">try</span><br />                        {<br />                            <span style="color: #0000ff;">double</span> tmp = Double.parseDouble(text);<br />                            System.out.println("tmp"+tmp);<br />                            <span style="color: #0000ff;">if</span> (tmp == 0.0)<br />                            {<br />                                text = "";<br />                            }<br />                        }<br />                        <span style="color: #0000ff;">catch</span> (NumberFormatException event)<br />                        {<br />                            text = "";<br />                        }<br />                        <span style="color: #0000ff;">if</span> (s.equals("."))<br />                        {<br />                            <span style="color: #0000ff;">if</span> (text.indexOf('.')&gt;=0)<br />                            {<br />                                <span style="color: #0000ff;">return</span>;<br />                            }<br />                            <span style="color: #0000ff;">else</span><br />                            {<br />                                textField.setText(text+s);<br />                                <span style="color: #0000ff;">return</span>;<br />                            }<br />                        }<br />                        textField.setText(text+s);<br />                    }<br />                });<br />            }<br />        }<br />        add(numPanel);<br />        numPanel.setBounds(2,40,2+(buttonSizeX*4),50+buttonSizeY*4);<br />        <br />        JButton jButtonR = <span style="color: #0000ff;">new</span> JButton("=");<br />        add(jButtonR);<br />        jButtonR.setBounds(7+(buttonSizeX*4),80+buttonSizeY*3,buttonSizeX, 5+buttonSizeY);<br />        jButtonR.addActionListener(<span style="color: #0000ff;">new</span> ActionListener()<br />        {<br />            <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> actionPerformed(ActionEvent e)<br />            {<br />                String result;<br />                <span style="color: #0000ff;">double</span> num2=0;<br />                JButton jB = (JButton)e.getSource();<br />                <span style="color: #0000ff;">try</span><br />                {<br />                    num2 = Double.parseDouble(textField.getText());<br />                }<br />                <span style="color: #0000ff;">catch</span> (NumberFormatException event)<br />                {<br />                    textField.setText("");<br />                    System.out.println("num2输入错误");<br />                }<br />                System.out.println(cal);<br />                <span style="color: #0000ff;">if</span> (cal.equals("+"))<br />                {<br />                    result = String.valueOf(num1 + num2);<br />                }<br />                <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (cal.equals("-"))<br />                {<br />                    result = String.valueOf(num1 - num2);<br />                }<br />                <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (cal.equals("x"))<br />                {<br />                    result = String.valueOf(num1 * num2);<br />                }<br />                <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (cal.equals("/"))<br />                {<br />                    result = String.valueOf(num1 / num2);<br />                }<br />                <span style="color: #0000ff;">else</span><br />                {<br />                    result = "";<br />                    System.out.println("计算出错");<br />                }<br />                textField.setText(result);<br />                isANext = <span style="color: #0000ff;">true</span>;<br />            }<br />        });<br />        validate();<br />    }<br />    <br />    <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> windowClosed()<br />    {<br />        <span style="color: #008000;">//</span><span style="color: #008000;"> Exit application.</span><span style="color: #008000;"><br /></span> System.out.println("exited!");<br />        System.exit(0);<br />    }<br />}<br /><br /><span style="color: #0000ff;">class</span> DelEvent <span style="color: #0000ff;">implements</span> ActionListener<br />{<br />    <span style="color: #0000ff;">private</span> JTextField tField;<br />    DelEvent(JTextField textField)<br />    {<br />        tField = textField;<br />    }<br />    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> actionPerformed(ActionEvent e)<br />    {<br />        tField.setText("0");<br />    }<br />}</pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #008000;">/**</span><span style="color: #008000;"><br /> * @(#)Caculator.java<br /> *<br /> * Caculator application<br /> *<br /> * </span><span style="color: #808080;">@author</span><span style="color: #008000;"> huangliangming<br /> * </span><span style="color: #808080;">@version</span><span style="color: #008000;"> 1.00 2012/4/3<br /> </span><span style="color: #008000;">*/</span><br /> <span style="color: #0000ff;">package</span> calculator;<br /><br /><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> Caculator<br />{<br />    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args)<br />    {<br />        CaculatorFrame caculatorFrame = <span style="color: #0000ff;">new</span> CaculatorFrame();<br />        <span style="color: #008000;">//</span><span style="color: #008000;"> TODO, add your application code</span><span style="color: #008000;"><br /></span> System.out.println("Hello World!");<br />    }<br />}</pre>
</div>
<p><br /><br /><br /></p>]]></description></item><item><title>java获取显示器屏幕大小</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/03/2430894.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 03 Apr 2012 05:40:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/03/2430894.html</guid><description><![CDATA[<pre class="reply-text mb10">Dimension   screensize   =   Toolkit.getDefaultToolkit().getScreenSize();
int width = (int)screensize.getWidth();
int height = (int)screensize.getHeight();
//屏幕的物理大小还需要知道屏幕的dpi 意思是说一英寸多少个象素
int dpi = Toolkit.getDefaultToolkit().getScreenResolution();
//然后用象素除以dpi 就可以得到多少英寸了 你要是再不知道英寸怎么转换厘米 那我也不知道怎么帮忙了 </pre>]]></description></item><item><title>win7使用jar打包代码，并实现双击打开jar文件</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/03/2430881.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 03 Apr 2012 05:29:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/03/2430881.html</guid><description><![CDATA[<p>1.使用jar打包代码</p>
<p>&nbsp; &nbsp; jar -cvfm my.jar myframe.config myframe</p>
<p>解释： my.jar是在当前目录下将要生成的jar文件，名字可以自取,但是后缀必须是jar。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;myframe.config是在当前目录下创建的配置文件（需在使用该命令前创建该文件），文件可以使txt文件格式</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;内容如下：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Main-Class: myframe.FrameEvent</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 注意，冒号后面有一空格，最后有一回车换行。myframe是包名（package）。FrameEvent是main方法所在类。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;myframe 是当前目录下的，已经编译好的class文件的集合的文件夹。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 生成myframe文件夹的方法：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;执行：javac -d E: MyFrame.java</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 就会在E盘根目录生成myframe目录，myframe名称取决于包名</p>
<p>2.实现双击打开：右键my.jar &nbsp; 选择打开方式，使用javaw.exe打开，并把默认打开方式的复选框选上，确定</p>
<p>如果不行的话，可能是环境变量和注册表的问题。。。。</p>]]></description></item><item><title>JLabel显示图片，及其它使用方法。。。实现九九乘法表</title><link>http://www.cnblogs.com/hanxi/archive/2012/04/03/2430844.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 03 Apr 2012 04:39:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/04/03/2430844.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">JLabel的使用，显示九九乘法表，并使用JLabel载入背景图片，窗口大小固定</span><span style="color: #008000;"><br /></span><br /><span style="color: #0000ff;">public</span> MyFrame <span style="color: #0000ff;">extends</span> JFrame<br />{<br />    <span style="color: #0000ff;">public</span> MyFrame()<br />    {<br />        String str="";<br />        JLabel jL;<br />        setLayout(<span style="color: #0000ff;">null</span>);<br />        jL = <span style="color: #0000ff;">new</span> JLabel();<br />        jL.setText("九九乘法表");<br />        add(jL);<br />        jL.setBounds(200,0,80,20);<br />        jL = <span style="color: #0000ff;">new</span> JLabel("送给老婆的");<br />        add(jL);<br />        jL.setBounds(250,20,80,20);<br />        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=1; i&lt;=9; i++)<br />        {<br />            <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j=i; j&lt;=9; j++)<br />            {<br />                  jL = <span style="color: #0000ff;">new</span> JLabel();<br />                str = i+"x"+j+"="+i*j;<br />                jL.setText(str);<br />                add(jL);<br />                jL.setBounds((i-1)*50,(j+4)*10,80,10);<br />            }<br />        }<br />        setBounds(200,200,500,200);<br />        setResizable(<span style="color: #0000ff;">false</span>);<br />        ImageIcon icon = <span style="color: #0000ff;">new</span> ImageIcon("xin.jpg");<br />        JLabel j = <span style="color: #0000ff;">new</span> JLabel(icon);<br />        add(j);<br />        j.setBounds(0,0,500,200);<br />    }<br />}</pre>
</div>]]></description></item><item><title>我在图书馆借过的书籍，借同学的卡借的没列出来，其中有些非计算机类的书籍是帮同学借的</title><link>http://www.cnblogs.com/hanxi/archive/2012/03/25/2417245.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 25 Mar 2012 15:39:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/03/25/2417245.html</guid><description><![CDATA[<p>借书列表</p>
<p>&nbsp;</p>
<table style="width: 612px;" border="0" cellspacing="0" cellpadding="0"><colgroup><col width="72" /> <col width="133" /> <col width="197" /> <col width="138" /> <col width="72" /> </colgroup>
<tbody>
<tr>
<td class="xl24" width="72" height="20">序号</td>
<td class="xl25" width="133">索取号</td>
<td class="xl25" width="197">正题名</td>
<td class="xl25" width="138">分配地址</td>
<td class="xl26" width="72">借阅天数</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">1</td>
<td class="xl25" width="133">TP3-33/16</td>
<td class="xl25" width="197">大学计算机基础综合实验教程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">2</td>
<td class="xl25" width="133">TP312C/161</td>
<td class="xl25" width="197">C 语言程序设计基础</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">45</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">3</td>
<td class="xl25" width="133">K837.127/46</td>
<td class="xl25" width="197">改变美国的奥巴马</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">4</td>
<td class="xl25" width="133">K837.127/45</td>
<td class="xl25" width="197">付出</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">5</td>
<td class="xl25" width="133">I235.1/1</td>
<td class="xl25" width="197">真情三人行</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">6</td>
<td class="xl25" width="133">I247.56/57</td>
<td class="xl25" width="197">神秘学园</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">7</td>
<td class="xl25" width="133">TP312C/144</td>
<td class="xl25" width="197">C 语言真题分析与实战训练 (二级)</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">8</td>
<td class="xl25" width="133">F272.9/76</td>
<td class="xl25" width="197">带着兄弟们挣钱</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">9</td>
<td class="xl25" width="133">TP311/88</td>
<td class="xl25" width="197">算法与程序设计</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">7</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">10</td>
<td class="xl25" width="133">I247.53/88:3</td>
<td class="xl25" width="197">雍正皇帝&middot;评注本</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">15</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">11</td>
<td class="xl25" width="133">TP313/38</td>
<td class="xl25" width="197">汇编语言程序设计</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">16</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">12</td>
<td class="xl25" width="133">B848.4/113</td>
<td class="xl25" width="197">决定</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">13</td>
<td class="xl25" width="133">O17/87</td>
<td class="xl25" width="197">数学分析解题指南</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">20</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">14</td>
<td class="xl25" width="133">O15/69=2</td>
<td class="xl25" width="197">高等代数全程学习指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">20</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">15</td>
<td class="xl25" width="133">TP391.1/7</td>
<td class="xl25" width="197">一级 WPS Office</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">20</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="76">16</td>
<td class="xl25" width="133">TP312C-44/11</td>
<td class="xl25" width="197">全国计算机等级考试二级 C 语言典型题汇与解析</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">29</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="61">17</td>
<td class="xl25" width="133">TP312C/296</td>
<td class="xl25" width="197">C 语言程序设计习题集、上机与考试指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">29</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">18</td>
<td class="xl25" width="133">TP393.08/137</td>
<td class="xl25" width="197">计算机网络安全技术</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">15</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">19</td>
<td class="xl25" width="133">TP316.89/57</td>
<td class="xl25" width="197">计算机操作系统原理</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">15</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">20</td>
<td class="xl25" width="133">O4/499</td>
<td class="xl25" width="197">大学物理学学习指导</td>
<td class="xl25" width="138">校本部.基础阅览室</td>
<td class="xl26" width="72">7</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">21</td>
<td class="xl25" width="133">TP301.6/99</td>
<td class="xl25" width="197">算法与程序设计基础教程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">59</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">22</td>
<td class="xl25" width="133">TP393.08/55</td>
<td class="xl25" width="197">黑客密技全报导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">7</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">23</td>
<td class="xl25" width="133">TP312C/201</td>
<td class="xl25" width="197">Linux环境下C编程指南</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">3</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="61">24</td>
<td class="xl25" width="133">TP312BA/251</td>
<td class="xl25" width="197">Visual Basic 程序设计实验与实践指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">69</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">25</td>
<td class="xl25" width="133">TP312C++/306</td>
<td class="xl25" width="197">C++ 程序设计</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">52</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">26</td>
<td class="xl25" width="133">I247.5/1811</td>
<td class="xl25" width="197">绝密行动</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">12</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">27</td>
<td class="xl25" width="133">TP316.89/36</td>
<td class="xl25" width="197">Linux 与 Windows 整合</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">6</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">28</td>
<td class="xl25" width="133">TP313/62</td>
<td class="xl25" width="197">Windows 汇编语言程序案例解析</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">59</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">29</td>
<td class="xl25" width="133">TP316.81/80</td>
<td class="xl25" width="197">Ubuntu 实战技巧精粹</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">3</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">30</td>
<td class="xl25" width="133">TP312C++/303</td>
<td class="xl25" width="197">Visual C++ 编程全能词典</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">2</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">31</td>
<td class="xl25" width="133">TP313/57</td>
<td class="xl25" width="197">汇编语言程序设计</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">4</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">32</td>
<td class="xl25" width="133">TP313/65</td>
<td class="xl25" width="197">IDA Pro 代码破解揭秘</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">100</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="61">33</td>
<td class="xl25" width="133">TP393.08/207</td>
<td class="xl25" width="197">黑客 Web 脚本攻击与防御技术核心剖析</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">44</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">34</td>
<td class="xl25" width="133">H315/364</td>
<td class="xl25" width="197">四级写作背诵模仿范文</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">36</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">35</td>
<td class="xl25" width="133">O13-33/17</td>
<td class="xl25" width="197">数学实验</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">36</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="61">36</td>
<td class="xl25" width="133">TP313/61</td>
<td class="xl25" width="197">Windows 汇编语言程序设计实验指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">57</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">37</td>
<td class="xl25" width="133">TP312MA/17</td>
<td class="xl25" width="197">MATLAB 高效编程技巧与应用</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">56</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">38</td>
<td class="xl25" width="133">TP393.08/91:2</td>
<td class="xl25" width="197">黑客防线 2006 精华奉献本</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">59</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">39</td>
<td class="xl25" width="133">TP311.13/288</td>
<td class="xl25" width="197">数据库系统概念、实验指导与习题</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">49</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">40</td>
<td class="xl25" width="133">TP311.12/150</td>
<td class="xl25" width="197">数据结构实验指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">21</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">41</td>
<td class="xl25" width="133">TP316.89/19</td>
<td class="xl25" width="197">LINUX 集群体系结构</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">4</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">42</td>
<td class="xl25" width="133">TP312C++/121</td>
<td class="xl25" width="197">计算机常用数值算法与程序</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">3</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">43</td>
<td class="xl25" width="133">TP311.12/149</td>
<td class="xl25" width="197">数据结构教程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">18</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">44</td>
<td class="xl25" width="133">TP311.1/41</td>
<td class="xl25" width="197">挑战编程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">61</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">45</td>
<td class="xl25" width="133">I247.53/83</td>
<td class="xl25" width="197">河套王</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">4</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="61">46</td>
<td class="xl25" width="133">TP317.1/16</td>
<td class="xl25" width="197">中文版Office 2003实用教程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">105</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">47</td>
<td class="xl25" width="133">TP312C++/155/Y=2</td>
<td class="xl25" width="197">C++ 数值算法</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">5</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">48</td>
<td class="xl25" width="133">TP312C/329</td>
<td class="xl25" width="197">C 语言常用函数速查手册</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">3</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">49</td>
<td class="xl25" width="133">TP311.12-43/7</td>
<td class="xl25" width="197">数据结构与算法分析</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">24</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">50</td>
<td class="xl25" width="133">TP311.11/46</td>
<td class="xl25" width="197">程序设计方法及在线实践指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">47</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">51</td>
<td class="xl25" width="133">I247.56/61:2</td>
<td class="xl25" width="197">藏地传奇</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">2</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">52</td>
<td class="xl25" width="133">TP311.12/87</td>
<td class="xl25" width="197">数据结构与算法分析</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">127</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">53</td>
<td class="xl25" width="133">K825.38/12</td>
<td class="xl25" width="197">马云如是说</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">15</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">54</td>
<td class="xl25" width="133">TP393.092/310</td>
<td class="xl25" width="197">中文Dreamweaver8</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">23</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">55</td>
<td class="xl25" width="133">TP312C++/287</td>
<td class="xl25" width="197">C++ 语言 99 个常见编程错误</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">117</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">56</td>
<td class="xl25" width="133">TP311.138SQL/15</td>
<td class="xl25" width="197">MYSQL程序设计与数据库管理</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">56</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">57</td>
<td class="xl25" width="133">TP312MA/16</td>
<td class="xl25" width="197">MATLAB 函数速查手册</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">42</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">58</td>
<td class="xl25" width="133">I247.54/39</td>
<td class="xl25" width="197">公务员</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">7</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">59</td>
<td class="xl25" width="133">TP311.12/87</td>
<td class="xl25" width="197">数据结构与算法分析</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">70</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">60</td>
<td class="xl25" width="133">O241/170</td>
<td class="xl25" width="197">数值分析学习指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">117</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">61</td>
<td class="xl25" width="133">TP301.6/15</td>
<td class="xl25" width="197">计算机数学</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">62</td>
<td class="xl25" width="133">TP312JA/20:1</td>
<td class="xl25" width="197">JAVA 程序设计教程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">58</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="76">63</td>
<td class="xl25" width="133">F23/138:2(3)</td>
<td class="xl25" width="197">2010 年度注册会计师全国统一考试梦想成真系列辅导书</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">56</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="61">64</td>
<td class="xl25" width="133">F23/137:3</td>
<td class="xl25" width="197">2010 年度注册会计师全国统一考试应试指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">65</td>
<td class="xl25" width="133">D922.22/32</td>
<td class="xl25" width="197">税法</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">56</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">66</td>
<td class="xl25" width="133">TP3-61/38</td>
<td class="xl25" width="197">简明英汉信息技术词汇</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">25</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">67</td>
<td class="xl25" width="133">O441.4/48</td>
<td class="xl25" width="197">工程电磁场数值计算</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">68</td>
<td class="xl25" width="133">TP316/254</td>
<td class="xl25" width="197">UNIX技术大全</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">2</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">69</td>
<td class="xl25" width="133">TP316.89/44</td>
<td class="xl25" width="197">Linux 编程技术详解</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">3</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">70</td>
<td class="xl25" width="133">TP312C++/272:1</td>
<td class="xl25" width="197">C++ 编程思想</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">7</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">71</td>
<td class="xl25" width="133">TP312C++/322=4</td>
<td class="xl25" width="197">C++ 面向对象程序设计</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">74</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">72</td>
<td class="xl25" width="133">TP311.12/117=2</td>
<td class="xl25" width="197">数据结构学习指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">53</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">73</td>
<td class="xl25" width="133">O158/47</td>
<td class="xl25" width="197">离散数学</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">51</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">74</td>
<td class="xl25" width="133">TP311.5/267</td>
<td class="xl25" width="197">大道至简</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">54</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">75</td>
<td class="xl25" width="133">TP301.6/47=2</td>
<td class="xl25" width="197">算法设计与分析</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">2</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">76</td>
<td class="xl25" width="133">TP311.13/257</td>
<td class="xl25" width="197">数据库系统工程师考试全程指导</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">77</td>
<td class="xl25" width="133">TP393/244</td>
<td class="xl25" width="197">计算机网络导学</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">6</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">78</td>
<td class="xl25" width="133">TP311.11/28</td>
<td class="xl25" width="197">代码阅读方法与实践</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">19</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">79</td>
<td class="xl25" width="133">O22-44/8</td>
<td class="xl25" width="197">运筹学知识精要与真题详解</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">80</td>
<td class="xl25" width="133">O158/93</td>
<td class="xl25" width="197">离散数学导教&middot;导学&middot;导考</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">81</td>
<td class="xl25" width="133">TP312/265-2</td>
<td class="xl25" width="197">设计模式</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">47</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">82</td>
<td class="xl25" width="133">O22-44/2=2</td>
<td class="xl25" width="197">运筹学习题集</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">3</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">83</td>
<td class="xl25" width="133">TP316.81/28</td>
<td class="xl25" width="197">Linux 应用程序开发</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">25</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">84</td>
<td class="xl25" width="133">TP18/22=3</td>
<td class="xl25" width="197">人工智能</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">16</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">85</td>
<td class="xl25" width="133">TP309.7/2</td>
<td class="xl25" width="197">密码编码学与网络安全</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">22</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">86</td>
<td class="xl25" width="133">TP312JA/8</td>
<td class="xl25" width="197">JAVA 2编程详解</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">23</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">87</td>
<td class="xl25" width="133">TP311.5/33</td>
<td class="xl25" width="197">软件工程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">88</td>
<td class="xl25" width="133">TP18/126=2</td>
<td class="xl25" width="197">人工智能基础教程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">89</td>
<td class="xl25" width="133">B82-49/6</td>
<td class="xl25" width="197">幸福的秘诀是学会珍惜</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">90</td>
<td class="xl25" width="133">TP312JA/58</td>
<td class="xl25" width="197">JAVA 软件开发</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">14</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">91</td>
<td class="xl25" width="133">TP312JA/20:1</td>
<td class="xl25" width="197">JAVA 程序设计教程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">92</td>
<td class="xl25" width="133">TN929.53/30=2</td>
<td class="xl25" width="197">Android 2 高级编程</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">4</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">93</td>
<td class="xl25" width="133">Q811.2-53/1</td>
<td class="xl25" width="197">人工生命及应用</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">1</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">94</td>
<td class="xl25" width="133">TP311.11/26/Y-2</td>
<td class="xl25" width="197">重构</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">95</td>
<td class="xl25" width="133">TP312JA/347</td>
<td class="xl25" width="197">Java 开发之道</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">8</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="31">96</td>
<td class="xl25" width="133">TP312C++/161</td>
<td class="xl25" width="197">C++ 并行与分布式编程</td>
<td class="xl25" width="138">校本部.流通总书库</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" align="right" width="72" height="46">97</td>
<td class="xl25" width="133">TP312UML/38=2</td>
<td class="xl25" width="197">UML 面向对象建模与设计</td>
<td class="xl25" width="138">校本部.专业阅览室</td>
<td class="xl26" width="72">0</td>
</tr>
<tr>
<td class="xl24" width="72" height="20">合计</td>
<td class="xl25" width="133">　</td>
<td class="xl25" width="197">　</td>
<td class="xl25" width="138">　</td>
<td class="xl26" width="72">2605</td>
</tr>
</tbody>
</table>
<p><span style="font-size: small;"><span style="line-height: normal;"><br /></span></span></p>]]></description></item><item><title>BOIDS规则的个人见解</title><link>http://www.cnblogs.com/hanxi/archive/2012/03/16/2400878.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 16 Mar 2012 12:43:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/03/16/2400878.html</guid><description><![CDATA[<p style="text-align: center;"><strong>BOIDS规则</strong></p>
<p>　　今天总结了下BOIDS规则，希望对各位有用。不知道boids是什么的可以进这里看看：<a href="http://www.red3d.com/cwr/boids/">http://www.red3d.com/cwr/boids/</a></p>
<p><span style="color: #0000ff;">基本规则：</span></p>
<p>1.靠近<br /> 往圈内其它点的中心靠拢，受到一个牵引力</p>
<p>2.对齐<br /> 与圈内其他点的方向的平均值对齐<br /> <br />3.避免碰撞<br /> 离圈内最近点的距离小于最小可靠近距离则受到一个远离的力</p>
<p>&nbsp;</p>
<p><span style="color: #0000ff;">规则分析：</span></p>
<p>//规则一：靠近<br />//靠近 周围可见区域 的 所有点的中心<br />//即：提供一个 靠近中心 的 加速度<br />//要求：<br />//1.找出区域内的点<br />//2.求出中心<br />//3.设定加速大小方向<br />// 到中心的距离d越大，加速度a越大；<br />// 方向为点到中心的方向</p>
<p>//规则二：对齐方向<br />//调整 方向，使方向尽量靠近 区域内所有点的 平均速度方向<br />//即：提供一个 旋转速度方向 的 加速度<br />//要求：<br />//1.找出区域内的点<br />//2.求出平均速度方向<br />//3.设定加速大小和方向<br />// 当前速度方向和平均速度方向的夹角alpha越大，加速度a越大；<br />// 方向为垂直于当前速度朝着平均速度的方向</p>
<p><br />//规则三：避免碰撞<br />//避免和区域内的点的距离小于最小可靠近距离MINDIS<br />//即：当离区域内某点的距离小于某个值时，开始施加一个加速度<br />//要求：<br />//1.找出区域内的点<br />//2.求出当前点到其他点的距离<br />//3.如果距离小于某个值时，就产生一个加速<br />// 加速度大小随着距离的减小而增大；<br />// 方向为其他点到当前位置点的方向</p>
<p>&nbsp;</p>
<p><span style="color: #0000ff;">外加一个规则</span><br />//规则四：躲避边界<br />//当靠近边界时，施加一个躲避边界的加速度<br />//即：当区域有部分出界时，施加角速度（类似于规则二，但刚好相反），调整方向，使其远离边界<br />//要求：<br />//1.找出出界区域<br />//2.施加一个垂直于相交线的加速度<br />// 大小随着点到线的距离减小而增加<br />// 方向垂直于相交线远离边界线</p>
<p><br /><span style="color: #0000ff;">分析之后的总结：（相当于伪代码吧）</span><br /><span style="color: #0000ff;">1.</span>确定区域；</p>
<p><img src="http://www.red3d.com/cwr/boids/images/neighborhood.gif" alt="邻居图" /></p>
<p><span style="color: #0000ff;">2.</span>判断 其他点 是否在 该点的 可见区域内；<br /> 求 该点 到 其他点 的 距离，并将各个距离保存到一个临时数组d[i]中，本身的i位置设为MAX。<br /> 如果 距离 小于 半径：<br /> 求出 该点 到 其它点 的 距离的方向；<br /> 如果 距离方向 和 该点的方向 的夹角 小于 规定的角度 则判断点在区域内。<br /> 在区域内将isinside[i]设为true；（默认为false，本身默认为true)</p>
<p>//以下的平均值都包括该点本身在内<br /><span style="color: #0000ff;">3.</span>求出区域内各个点的平均位置：sum(x)/n,sum(y)/n;</p>
<p><span style="color: #0000ff;">4. &nbsp; 规则一：</span></p>
<p>求出该点到平均位置的距离和方向。d=...;vx=x-x0;vy=y-y0;</p>
<p>a1 = MAXA*(d初-d)/d初；//d初表示开始产生加速度时的距离，d末表示最小可以靠近的距离为0。</p>
<p>Ax1 = x-x0;<br />Ay1 = y-y0;//x,y为平均位置，x0,y0为该点位置；</p>
<p><br /><span style="color: #0000ff;">5.规则二：</span></p>
<p>&nbsp; &nbsp;求出区域内所有点的平均的平均速度方向：vx=sum(vx)/n;vy=sum(vy)/n;</p>
<p><span style="color: #0000ff;">6.</span>求出平均速度方向vxvy和该点速度方向的夹角，夹角alpha越大，加速度a越大；<br />a2 = MAXA*alpha/pi<br />方向为 垂直于当前速度 朝着平均速度 的方向</p>
<p>求加速方向的方法：求（x-vy,y+vx）到（x+_vx,y+_vy）的距离d,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if d &gt; sqrt(_vx^2+_vy^2)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;A2=(vy,-vx)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else &nbsp; &nbsp;A2=(-vy,vx)</p>
<p><span style="color: #0000ff;">7.规则三：</span></p>
<p><span style="color: #0000ff;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>if d[i] &lt; d初<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a3[i] = MAXA*(d初-d[i])/(d初-d末)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Ax3[i] = x0 - xi;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ay3[i] = y0 - yi;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a3[i] = 0;</p>
<p><span style="color: #0000ff;">8.规则四：</span></p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i=0 -&gt; 边界点的个数（分内外界）<br /> 求相交区域特殊处理（<span style="color: #0000ff;">将区域扩展为一个圆</span>）：<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;先求点到边的距离db[i]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if &nbsp; &nbsp;db[i]小于半径<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 产生加速度ab[i] = a3[i] = MAXA*(d初-db[i])/(d初-d末)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AX,AY垂直于边界，方向由垂点向圆心：即 Ax=x0-ver_x;Ay=y0-ver_y;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else ab[i]=0;</p>]]></description></item><item><title>还在为cximage编译问题而发愁吗？</title><link>http://www.cnblogs.com/hanxi/archive/2012/03/11/2390180.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 11 Mar 2012 12:58:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2012/03/11/2390180.html</guid><description><![CDATA[<p>声明：<strong>本博客的文章可以随意转载，但请注明出处：<a href="http://www.cnblogs.com/hanxi/">http://www.cnblogs.com/hanxi/</a>，谢谢</strong></p>
<p><strong>&nbsp;</strong></p>
<p>　　从网上找了好多资料，都是差不多，编译-&gt;连接-&gt;运行......</p>
<p>网上的资料好像都没说清楚，搞得我弄了一上午才弄出了。下面我就分享下我的步骤吧，希望能让各位网友理解：</p>
<p>&nbsp;</p>
<p>　　1.下载源代码：<a title="http://www.codeproject.com/bitmap/CXImage.asp" href="http://www.codeproject.com/bitmap/CXImage.asp">http://www.codeproject.com/bitmap/CXImage.asp</a></p>
<p>　　2.使用vc6.0打开工程文件：<span style="background-color: #ff0000;">CxImgLib.dsw</span>&nbsp;, 选择菜单栏上的<span style="background-color: #ff0000;">"组建"</span>-&gt;"<span style="background-color: #ff0000;">全部组建</span>"，在弹出的对话框中直接点<span style="background-color: #ff0000;">确定<span style="background-color: #ffffff;">&nbsp;。接下来就是等待（大概十分钟）</span></span></p>
<p><span style="background-color: #ffffff;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;注：由于好多网站都没有说使用全部组建，所以刚开始我使用每一个dsw文件慢慢的组建，最后得到lib文件就有问题。。。建议全部组建，因为lib文件不大。</span></p>
<p><span style="background-color: #ffffff;">　　3.新建一个<span style="background-color: #993300;">cximage</span>文件夹，在cximage下建立<span style="background-color: #993300;">include</span>和<span style="background-color: #993300;">lib</span>子目录。然后把源代码下的每个文件夹下的release里的lib文件拷贝出来到刚刚建立好lib目录下，把里面的头文件都拷贝到include下（可以搜索源代码文件下的"<span style="background-color: #993300;">*.h"</span>）</span></p>
<p><span style="background-color: #ffffff;">　　4.测试例子：</span></p>
<p><span style="background-color: #ffffff;">　　新建基于MFC的对话框程序，拉一个按钮，双击进入事件代码段，拷贝下面代码进去（image.jpg是图片名，弄张图片到工程目录下面然后命名为image.jpg就可以了，test.jpg是生成的图片）</span></p>
<div class="cnblogs_code">
<pre>    CxImage image;<br />    image.Load(_T(<span style="color: #800000;">"</span><span style="color: #800000;">image.jpg</span><span style="color: #800000;">"</span>), CXIMAGE_SUPPORT_JPG);<br /><br />    <span style="color: #0000ff;">if</span>(image.IsValid())<br />    {<br />        image.GrayScale();<br />        image.Save(_T(<span style="color: #800000;">"</span><span style="color: #800000;">test.jpg</span><span style="color: #800000;">"</span>), CXIMAGE_SUPPORT_JPG);<br />    }</pre>
</div>
<p><span style="background-color: #ffffff;">　　5.中间还有个库文件和链接库路径需要设置，以及包含lib也需要设置。最简单的方法就是：在你的工程的头文件下加入：</span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>#include <span style="color: #800000;">"</span><span style="color: #800000;">E:/cximage/include/ximage.h</span><span style="color: #800000;">"</span><br /><br /> <br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/png.lib")<br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/libdcr.lib")<br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/jpeg.lib")<br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/zlib.lib")<br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/tiff.lib")<br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/jasper.lib")<br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/cximage.lib")<br /><span style="color: #0000ff;">#pragma</span> comment(lib, "E:/cximage/lib/mng.lib")<br /> </pre>
</div>
<p><span style="background-color: #ffffff;">　　　　注：我的cximage文件夹建在E盘根目录下，里面的lib文件夹下面的lib文件就是上面列出来的。include目录下还有很多头文件的。不想慢慢找的话可以到下面的连接中下载我编译好的文件和收藏好的头文件：</span><a href="http://115.com/file/be7qqkl1#%20cximage.zip">http://115.com/file/be7qqkl1#cximage.zip</a>。如果找不到可以发邮件联系我：<span style="color: #0000ff;">785446153@qq.com</span></p>
<p>&nbsp;</p>
<p><span style="background-color: #ffffff;">&nbsp;</span></p>
<p><span style="background-color: #ffffff;">最后：可能你的工程Link的时候会出现<span style="background-color: #993300;">"字符集"</span>的问题，那就设置字符为&rdquo;<span style="background-color: #993300;">使用多字节字符集</span>&ldquo;：vs2008的修改步骤：打开属性页-&gt;配置属性-&gt;常规-&gt;字符集。</span></p>
<p><span style="background-color: #ffffff;">如图：<br /></span></p>
<p><img src="http://pic002.cnblogs.com/images/2012/198486/2012031120483178.jpg" alt="" /></p>
<p><span style="background-color: #ffffff;"><br />【结束语】</span></p>
<p><span style="background-color: #ffffff;">各位读者，编译这个玩意的最初目的只是为了给我一个同学使用，我没有真正的用过这个东西。现在我也没有windows开发环境了，你们问的问题我可能帮不了你们了。注意我的工程是在vs2008下面编译的。</span></p>]]></description></item><item><title>《计算机网络》谢希仁第五版考试重点整理</title><link>http://www.cnblogs.com/hanxi/archive/2011/12/24/2300739.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 24 Dec 2011 15:13:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/12/24/2300739.html</guid><description><![CDATA[<p><strong>第一章 概述</strong></p>
<p>&nbsp;</p>
<p>电路交换：整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。</p>
<p>报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。</p>
<p>分组交换：单个分组（这只是整个报文的一部分）传送到相邻结点，存储下来后查找转发表，转发到下一个结点。</p>
<p>计算机网络：一些互相连接的、自治的计算机的集合。</p>
<p>作用范围的不同，可分为：广域网（WAN）、城域网（MAN）、局域网（LAN）、个人区域网（PAN）</p>
<p>计算机网络的性能指标：速率、带宽、时延、利用率（信道利用率、网络利用率） （这里可能会有简答题，计算）</p>
<p>网络协议：为进行网络中心的数据交换而建立的规则、标准或约定。主要由：语法，语义，同步三个要素组成。</p>
<p>体系结构：计算机网络的各层及其协议的集合</p>
<p>OSI的七层协议：物理层，数据链路层，网络层，运输层，会话层，表示层，应用层。</p>
<p>TCP/IP的四层协议：网络接口层，网际层IP，运输层，应用层。</p>
<p>五层协议：物理层，数据链路层，网络层，运输层，应用层。</p>
<p align="center"><strong>第二章 物理层</strong></p>
<p>物理层的主要任务：确定与传输媒体的接口有关的一些特性；即机械特性，电气特性，功能特性，过程特性。</p>
<p>通信的三种方式：单向通信，双向交替通信，双向同时通信</p>
<p>基带信号：来自信源的信号。</p>
<p>带通信号：经过载波调制后的信号</p>
<p>最基本的带通调制方法：调频，调幅，调相。</p>
<p>双绞线的类型：无屏蔽双绞线和屏蔽双绞线</p>
<p>多模光纤：可以存在许多条不同角度入射的光线在一条光纤中传输的光纤</p>
<p>单模光纤：是光线一直向前传播，而不会产生多次反射的光纤</p>
<p>频分复用FDM：用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。所有用户在同样的时间占用不同的带宽资源。</p>
<p>时分复用TDM：将时间划分为一段段等长的时分复用帧（TDM帧），每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙。用户所占用的时隙是周期性的出现。所有用户在不同的时间点用同样的频带宽度。更利于数字信号的传输。</p>
<p>统计时分复用STDM：按需动态分配时隙</p>
<p>波分复用WDM：光的频分复用。一根光纤上复用两路光载波信号的复用方式。</p>
<p>密集波分复用DWDM：一根光纤上复用多路数的光载波信号。</p>
<p>码分复用CDM：共享信道的方法，各用户使用经过特殊挑选的不同码型，因此不会互相干扰。</p>
<p>码分多址CDMA：有很强的抗干扰能力，频谱类似白噪声，不易被敌人发现。 （课后习题，可能会出简答题）</p>
<p align="center"><strong>&nbsp;</strong><strong>第三章 数据链路层 </strong></p>
<p>链路：是一条无源的点到点的物理线路段，中间没有任何其他的交换结点</p>
<p>数据链路：除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路</p>
<p>三个基本问题：封装成帧，透明传输，差错检测。（CRC 循环冗余检测、零比特填充 简答题）</p>
<p>局域网的拓扑:：星形图，环形图，总线图，树形图</p>
<p>CSMA/CD协议：载波监听多点接入/碰撞检测, &ldquo;多点接入&rdquo;表示许多计算机以多点接入的方式连接在一根总线上；&ldquo;载波监听&rdquo;是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞；&ldquo;碰撞检测&rdquo;就是计算机边发送数据边检测信道上的信号电压大小</p>
<p>MAC层的硬件地址：由48位，16进制的数字组成的地址。也就是网卡的物理地址。实际上就是适配器地址或适配器标识符EUI&mdash;48。 MAC(Media Access Control)地址，或称为 MAC位址、硬件位址，用来定义网络设备的位置。在OSI模型中，第三层网络层负责 IP地址，第二层资料链结层则负责 MAC位址。因此一个主机会有一个IP地址，而每个网络位置会有一个专属于它的MAC位址。</p>
<p>碰撞域：又可以说叫冲突域，在以太网中，如果某个一个CSMA/CD网络上的两台计算机在同时通信时会发生冲突，那么这个CSMA/CD网络就是一个冲突域。如果以太网中的各个网段以中继器连接，因为不能避免冲突，所以它们仍然是一个冲突域。</p>
<p>（课后题）透明网桥：</p>
<p>广播风暴：网桥只适合于用户数不太多(不超过几百个)和通信量不太大的局域网，否则有时还会因传播过多的广播信息而产生网络拥塞。这就是所谓的广播风暴</p>
<p align="center"><strong>第四章 网络层 </strong></p>
<p>网络层提供的两种服务：<strong>虚电路服务</strong>和<strong>数据报服</strong>务</p>
<p>应用层：各种应用层协议（HTTP,FTP,SMTP）</p>
<p>运输层：TCP,UDP。在<strong>网络层以上</strong>使用的<strong>中间设备</strong>是<strong>网关</strong>。用网关连接两个不兼容的系统需要在高层进行协议转换。</p>
<p><strong>网络层</strong>：ICMP,IGMP,IP,RARP,ARP。<strong>中间设备</strong>是<strong>路由器</strong></p>
<p>网络接口层：与各种网络接口。</p>
<p><strong>数据链路层</strong>：使用的<strong>中间设备</strong>是<strong>网桥或桥接器</strong></p>
<p><strong>物理层</strong>：物理硬件。 使用的<strong>中间设备是转发器 </strong></p>
<p>分类的IP地址：（简答题）</p>
<p>ARP，即地址解析协议，实现通过IP地址得知其物理地址。</p>
<p>工作流程：1、ARP进程在本局域网上广播发送一个ARP请求分组；</p>
<p>2、在本局域网上所有主机上运行的ARP进程都收到此ARP请求分组；</p>
<p>3、主机B在ARP分组中见到自己的IP地址，就向主机A发送ARP响应分组，并写入自己的硬件地址；</p>
<p>4、主机A收到主机B的ARP响应分组后，就在其ARP高速缓存中写入主机B的IP地址到硬件地址的映射。</p>
<p>RARP：逆地址解析协议，允许局域网的物理机器从网关服务器的 ARP 表或者缓存上请求其 IP 地址。</p>
<p>IP地址通过ARP转变为物理地址；物理地址通过RARP协议转变为IP地址。</p>
<p>子网掩码，掩码（IP 的范围）：课后题</p>
<p>RIP：路由信息协议，是一种分布式的基于距离向量的路由选择协议，是因特网的标准协议，最大优点就是简单。是一种在网关与主机之间交换路由选择信息的标准。</p>
<p>工作原理 必考</p>
<p>IGP 内部网关协议：在一个自治系统内部使用的路由选择协议。</p>
<p>EGP 外部网关协议：若源主机和目的主机处在不同的自治系统中，当数据报传到一个自治系统的边界时，就需要使用一种协议将路由选择信息传递到另一个自治系统中。</p>
<p>距离向量算法 课后题</p>
<p>路由器的构成：路由选择部分（控制部分，核心构件是路由选择处理机）和分组转发部分（交换结构，一组输入端口，一组输出端口）。</p>
<p>IGMP 网际组管理协议：让连接在本地局域网上的多播路由器知道本局域网上是否有主机参加或退出了某个多播组。</p>
<p>VPN 虚拟专用网：通过一个公用网络建立一个临时的、安全的连接，是一条穿过混乱的公用网络的安全、稳定的隧道。</p>
<p>NAT 网络地址转换：将私有(保留)地址转化为合法IP地址的转换技术,被广泛应用于各种类型Internet接入方式和各种类型的网络中。原因很简单，NAT不仅完美地解决了lP地址不足的问题，而且还能够有效地避免来自网络外部的攻击，隐藏并保护网络内部的计算机</p>
<p align="center"><strong>第五章&nbsp; </strong><strong>&nbsp;&nbsp;</strong><strong>运输层</strong></p>
<p>标志进程：因为运输层直接为上层的调用进程提供服务，它需要地址来唯一地标志进程间的通讯。或者说进程通过TSAP（transport service access point）来调用运输层提供的服务</p>
<p>端口号：大致有两种意思：一是物理意义上的端口，比如，ADSL Modem、集线器、交换机、路由器等 用于连接其他网络设备的接口，如RJ-45端口、SC端口等等。二是逻辑意义上的端口，一般是指TCP/IP协议中的端口，端口号的范围从0到65535，</p>
<p>IP地址：就是给每个连接在Internet上的主机分配的一个32bit地址。</p>
<p>UDP 用户数据报协议：是 OSI 参考模型中一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务。</p>
<p>TCP 传输控制协议：是一种面向连接（连接导向）的、可靠的、基于字节流的运输层通信协议</p>
<p>复用：应用层所有的进程都可以通过运输层再传送到IP层</p>
<p>分用：运输层从IP层收到数据后必须交付给指明的应用进程。</p>
<p>TCP可靠传输的实现：以字节为单位的滑动窗口；超时重传时间的选择；选择确认SACK</p>
<p>TCP的流量控制：让发送方的发送速率不要太快，要让接收方来得及接收。 利用滑动窗口实现流量控制；必须考虑传输效率。</p>
<p>TCP的拥塞控制：防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不致过载。</p>
<p>方法：慢开始；拥塞避免；快重传；快恢复</p>
<p>TCP的运输连接管理：运输连接三个阶段：连接建立；数据传送和连接释放。</p>
<p align="center"><strong>第六章&nbsp; </strong><strong>&nbsp;&nbsp;&nbsp;</strong><strong>应用层</strong></p>
<p><strong>DNS </strong><strong>域名系统：</strong>用于命名组织到域层次结构中的计算机和网络服务。是因特网使用的命名系统，用来把便于人们使用的机器名字转换为IP地址。</p>
<p>主域名服务器：为了提高域名服务器的可靠性，DNS域名服务器都把数据复制到几个域名服务器来保存，其中一个是主域名服务器，其余的是辅助域名服务器。</p>
<p>主机向本地域名服务器的查询一般都是采用递归查询；本地域名服务器向跟域名服务器的查询通常都是迭代查询</p>
<p>FTP文件传送协议：是因特网上使用的最广泛的文件传送协议，提供交互式访问，允许客户知名文件的类型与格式，并允许文件具有存取权限。</p>
<p>WWW 万维网：是一个大规模的、联机式的信息储藏所。</p>
<p>URL统一资源定位符：是用于完整地描述Internet上网页和其他资源的地址的一种标识方法</p>
<p>HTTP 超文本传送协议：是一个客户端和服务器端请求和应答的标准，是面向事务的应用层协议，它是万维网上能够可靠的交换文件的重要基础。</p>
<p>HTML 超文本标记语言：是一种制作万维网页面的标准语言，它消除了不同计算机之间信息交流的障碍。万维网的重要基础。</p>
<p>电子邮件系统：由用户代理；邮件服务器；以及邮件发送协议（STMP）和邮件读取协议（POP3）</p>
<p>&nbsp;</p>
<p align="center">填空题：</p>
<p>1计算机网络系统具有丰富的功能，其中最重要的是通信和（资源共享）。</p>
<p>2因特网(Internet)上最基本的通信协议是（TCP/IP）。</p>
<p>3局域网是一种在小区域内使用的网络，其英文缩写为（LAN）</p>
<p>4局域网中以太网采用的通信协议是（CSMA/CD）</p>
<p>5通过网络互连设备将各种广域网和（局域网）互连起来，就形成了全球范围内的Internet网。</p>
<p>6局域网中常用的拓扑结构主要有星型、（环型）、总线型三种。</p>
<p>7计算机网络就是用通信线路和（通信设备）将分布在不同地点的具有独立功能的多个计算机系统相互连接起来，在网络软件的支持下实现彼此之间的数据通信和资源共享的系统。</p>
<p>8在当前的网络系统中，由于网络覆盖面积的大小、技术条件和工作环境不同，通常分为广域网、（局域网）和城域网三种。</p>
<p>9建立计算机网络的基本目的是实现数据通信和（资源共享）</p>
<p>10计算机网络主要有（数据通信）、资源共享、提高计算机的可靠性和安全性、分布式处理等功能。</p>
<p>11局域网的覆盖范围为（0.1~10）km。</p>
<p>12局域网的传输通常可达（10~100）Mb/s。</p>
<p>13以太网的通信协议是一种（有冲突）协议。</p>
<p>14网络（通信介质）决定了网络的传输速率、网络段的最大长度、传输的可靠性及网卡的复杂性。</p>
<p>15常用的通信介质主要有有限介质和（无线）介质两大类。</p>
<p>16网络服务器有文件服务器、异步通信服务器、打印服务器等，其中（文件）是最基本的。</p>
<p>17目前常用的网络连接器主要有中继器、网桥、（路由器）和网关。</p>
<p>18将计算机的输出通过数字信道传输的称为（数字通信）</p>
<p>19以太网的拓扑结构大多采用总线型，允许电缆的最大长度为50m，传输速率为（１0）</p>
<p>20以字符特征为代表的IP地址（又称IP名字地址）中包括计算机名、结构名、（网络分类名）和国家名。</p>
<p>21调制解调器是实现数字信号和（模拟信号）转换的设备。</p>
<p>22在计算机网络中，所谓的资源共享主要是指硬件、软件和（数据）资源。</p>
<p>23令牌型网采用的是一种（无冲突）的介质访问控制协议。</p>
<p>24与Internet相连的每台计算机都必须指定一的（惟一）地址，称为IP地址。</p>
<p>25Internet提供的主要服务有（Ｅ-mail）、文件传输GTP、远程登录Telnet、超文本查询WWW等。</p>
<p>26目前，局域网的传输介质主要有双绞线、（同轴电缆）和光纤。</p>
<p>27局域网的两种工作模式是（对等模式）和客户/服务器模式。</p>
<p>28个人计算机接入的主要方式是采用（PPP拨号）接入方式。</p>
<p>29为了利用邮电系统公用电话网的线路来传输计算机数字信号，必须配置（调制解调器）</p>
<p>30目前，在计算机广域网中主要采用（报文分组交换）技术。</p>
<p>31网卡是组成局域网的（接口）部件。将其插在微机的扩展槽上，实现与计算机总线的通信连接，解释并执行主机的控制命令，并实现物理层和数据链路层的功能。</p>
<p>32用户要想在网上查询WWW信息，必须安装并运行一个被称为（浏览器）的软件。</p>
<p>33在局域网中，为网络提供共享资源并对这些资源进行管理的计算机称为（服务器）。</p>
<p>34电子邮件的格式是由邮件头和邮件体组成，其中邮件头包括受件人的地址（To：）、发件人的地址（From：）和（邮件主体）（Subject）三部分。</p>
<p>35计算机网络是有负责信息处理并向全网提供可用资源的（资源通信）子网和负责信息传输子网组成</p>
<p>36个人和Internet连接需要一台计算机、调制解调器、电话线和（通信软件）。</p>
<p>37Internet称为国际（互连网）。</p>
<p>38信息高速公路的基本特征是高速、（交互）和广域。</p>
<p>39WWW是当前（Internet）上最受欢迎、最流行、最新的信息检索服务程序。</p>
<p>40路径有绝对路径和（相对）路径两种。</p>
<p>41电子邮件的格式是由邮件头和邮件体组成的。其中邮件头包括收件人电子邮件地址（TO：）、发信人电子邮件地址（From：）和（邮件主体）（Sudbject）3部分。</p>
<p>42局域网常用的拓扑结构主要有星型、（环行）和总线型3种。</p>
<p>43局域网中的以太网采用的通信协议是（CSMA/CD）</p>
<p>44.IEEE802.3的物理层规定了3个重要参数：（数据传输速率）、基带或宽带传输、电缆长度。</p>
<p>45为了实现网络互联，需要相应的网络连接器，主要由中继器、网桥、（路由器或交换机）和网关组成。</p>
<p>46电子邮件地址一般由（用户名）和主机域名组成。</p>
<p>47Internet实现了分布在世界各地的各类网络的互联，其通信协议是（TCP/IP）</p>
<p>48在计算机网络中，通信双方必须共同遵守的规则或约定，称为（通信协议）</p>
<p>49因特网（Internet）上最基本的通信协议是（TCP/IP）</p>
<p>50计算机网络的主要功能是（资源共享）,（网络通信）,（分布式数据处理）</p>
<p>51有这样一个域名:yinte.edu.cn其中edu表示（教育网）cn表示（中国）</p>
<p>52局域网一般由服务器，用户工作站，网卡，（传输介质）四部分组成。</p>
<p>53服务器分为文件服务器，（打印），数据库服务器，在Internet网上，还有（服务器</p>
<p>Web），FTP，E&mdash;mail等服务器。</p>
<p>54数据可定义为有意义的实体，它涉及到事物的存在形式，数据可分为（模拟数据）和（数字数据）两大类。</p>
<p>55信号是数据的电子或电磁编码。对应于模拟数据和数字数据，信号也可分为（模拟信号）和（数字信号）两大类。</p>
<p>56通信过程中产生和发送信息的设备或计算机叫做（信源）；接收和处理信息的设备或计算机叫（信宿）；两者之间的通信线路叫做（信道）。</p>
<p>57数字数据可以用模拟信号来表示，此时要利用（调制解调器（MODEM））将数字数据转换成模拟数信号。</p>
<p>58模拟数据可以用数字信号来表示。对于声音数据来说，完成模拟数据和数字信号转换功能的设施是（编码解码器（CODEC））</p>
<p>59数字数据还可以直接用二进制形式的数字脉冲信号来表示，但了为了改善其传播特性，一般先要对二进制数据进行（编码）。</p>
<p>60信号在传输一定距离之后会发生衰减。为了实现长距离传输，模拟传输系统要用（放大器）来增强信号中的能量:数据传输系统则需要使用（中继器）。</p>
<p>61模拟信号传输的数字信号传输是两种传输方式，目前远程通信中，（模拟信号传输）的使用更为广泛，但（数字信号传输）将是今后数据通信的发展方向。</p>
<p>62数据通信系统是以（计算机）为中心，用（通信线路）连接分布在异地的数据终端设备，以实施数据传输的一种系统。</p>
<p>63数据通信技术的指标主要有（数据传输率）、（信道容量）和（误码率）。</p>
<p>64通信有两种基本试,即（串行方式）和（并行方式）。通常情况下，（并行方式）用于近距离通信，（串行方式）用于距离较远的通信。在计算机网络中，（串行方式）方式更具有普通意义。</p>
<p>65串行数据通信的方向性结构有三种,即（单工）、（半双工）和（全双工）。（单工）数据传输只支持数据在一个方向上传输，（半双工）数据传输允许数据在两个方向上非同时传输，（全双工）数据传输则允许数据同时在两个方向上传输。</p>
<p>66数据信号变成音频信号的过程称（调制），音频信号逆变换成对应数字信号的过程称（解调）。把调制和解调功能合做成一个设备，称作（调制解调器）。</p>
<p>67模拟信号传输的基础是载波，载波具有三大要素：即（幅度）、（频率）和（相位）。</p>
<p>68为进行计算机网络中的数据交换而建立的规则、标准或约定的集合称为（网络协议）。</p>
<p>69网络协议主要由（语法）、（语义）和（定时）三要素组成。</p>
<p>70计算机网络各层次及其协议的集合，称为（网络体系结构）。</p>
<p>71开放系统互连OSI包括了（体系结构）、（服务定义）和（协议规范）三级抽象。</p>
<p>72.OSI七层模型从下到上分别为（物理层）、（数据链路层）、（网络层）、（运输层）、（会话层）、（表示层）和应用层。</p>
<p>73整个开放系统环境是由作为信源和信宿的（端开放系统）及若干中继系统通过物理媒体连接构成。</p>
<p>74.OSI七层模型中，（运输层）层是第一个端&mdash;端，也即主机&mdash;主机的层次。（会话层）层是进程&mdash;进程的层次，主要功能是组织和同步不同主机上各种进程间的通信。（也称对话）</p>
<p>75物理层协议规定了建立、维持及断开物理信道有关的四个方面的特性，包括（机械）特性、（电气）特性、（功能）特性和（规程）特性。</p>
<p>76.CCITT在X.25建立书对物理层作了如下定义：利用物理的、电气的、功能的和规程的特性在（DTE）和（DCE）之间实现对物理信道的建立、保持和拆除功能。</p>
<p>77.DTE与DCE接口的各根导线（也称电路）的电气连接方式有（非平衡方式）、采用差动接收器地（非平衡方式）和（平衡方式）三种。</p>
<p>78接口信号线按功能一般可分为（数据信号线）、（控制信号线）、（定时信号线）和（接地线）等四类。</p>
<p>79.DOS级的PC通信中，（MODE）命令可以设置异步串行端口的参数，（COPY）命令允许将异步串行端口作为一个特殊的&ldquo;文件&rdquo;，以对其进行数据传输。</p>
<p>80调制解调器的编程命令中比较常用的AT命令的：（拨号命令）、（应答命令）、（摘机和挂机命令）和调制解调器缺省设置值恢复命令。</p>
<p>81数据链路层的基本功能是向网络层提供（透明的）和（可靠的）数据传送服务。</p>
<p>82常用的帧同步方法有（字节计数法）、（使用字符填充法的首尾定界符法）、（使用比特填充的首尾标志法）和（违法编码法）种。</p>
<p>83数据链路层的主工功能包括（帧同步功能）、（差错控制功能）、（流量控制功能）和（链路管理功能）等。</p>
<p>84数据链路控制协议也称（链路通信规程）。也就是OSI参考模型中的数据链路层协议。链路控制协议可分为（异步协议）和（同步协议）两大类。</p>
<p>85同步协议可以分为面向（字符）和同步协议，面向（比特）的同步协议和面向（字节计数）和同步协议三种。</p>
<p>86网络层的目的是实现两个端系统之间的数据透明传输，具体功能包括（路由选择）、（阻塞控制）和（网际互连）等。</p>
<p>87在数据报方式中，网络节点要为每个分组（路由）做出选择，而在虚电路方式中，只需在（连接建立）时确定路由。确定路由选择的策略称（路由算法）。</p>
<p>88局域网可分成三大类：局域网LAN、（计算机交换机CBX或PBX）和（高速局域网HSLN）。</p>
<p>89局域网的特性主要涉及（拓扑结构）、（传输媒体）和（媒体访问控制（MAC））等三项技术问题，其中最重要的是（媒体访问控制）方法。</p>
<p>90总线网和环形网一般采用（分布式）媒体访问控制方法。星形网往往采用（集中式）媒体访问控制方法。</p>
<p>91总结网的典型实例是（以太网）。环形网的典型实例有（IBM令牌环网）和（剑桥环网），星形网的典型实例是（计算机交换机CBX）。</p>
<p>92.LAN中使用的传输方式有（基带）和（宽带）两种。（基带）用于数字信号传输，常用的传输媒体有（双绞线）或（同轴电缆）。（宽带）用于无线电频率范围内的模拟信号的传输，常用的传输媒体是（同轴电缆）。</p>
<p>93局域网常用的媒体访问控制方法的（具有冲突检测的载波监听多路访问CSMA/CD）、（控制令牌）、（时槽环）等。</p>
<p>94常用的局域网媒体访问控制协议有（载波监听多路访问CSMA/CD）、（令牌环）、（令牌总线）和（光纤分布数据接口FDDI）等。</p>
<p>95具有冲突检测的载波监听多路访问CSMA/CD可用于（总线）拓扑结构网络，控制令令牌的方法可用于（环形）拓扑结构网络和（总线）拓扑结构网络，时槽环可用于（环形）拓扑结构。</p>
<p>96对于基带总线而言，用于检测一个冲突的时间等于任意两个站之间最大传输延迟的（二）倍。而对于宽带而言，冲突检测时间为任意两个站之间最大传播延迟的（四）倍。</p>
<p>97载波监听多路访问CSMA/CD技术中常用的退避算法有（非坚持）、（1-坚持）和（P坚持）</p>
<p>98数据帧从一个站点开始发送，到该数据帧发送完毕所需的时间为（数据传输时延）。</p>
<p>99令牌环局域网协议标准包括四个部分：（逻辑链路控制（LLC））、（媒体访问控制（MAC））物理层和传输媒体。</p>
<p>100在环形网中，一般采用只有一个主时钟的（集中式时钟）方案，但绕环运行时，时钟信号会偏移，为了消除这种时钟偏移，采用（弹性缓冲器）来消除这种偏移。</p>
<p>101网络操作系统可以分为两类：（面向任务型）局域网操作系统和（通用型）局域网操作系统。</p>
<p>102纵观局域网的发展，局域网操作系统经历了从（对等）结构向（非对等）结构演变的过程。</p>
<p>103局域网操作系统的基本服务功能有：（文件服务）、（打印服务）、（数据库服务）、（通信服务）、（信息服务）和（分布式服务）等。</p>
<p>104.NovellNetware由（文件服务器）软件、（工作站）软件和（网桥）软件等组成。其中（文件服务器）和（工作站）是建网不可缺少的软件，安装时需根据硬件的配置生成。</p>
<p>105局域网采用的数据传输方式的（基带）、（宽带）。</p>
<p>106一个独立的局域网的层次结构包括（物理层）（媒体访问控制子层）（逻辑链路控制子层）。</p>
<p>107.LLC子层的帧的种类包括：（信息帧）、（监控帧）、（无编号帧）3种。</p>
<p>108令牌总结的操作主要有（令牌传递算法）、（插入环算法）、（退出环算法）、（环初始化）4种。</p>
<p>109环网上最严重的差错是（令牌丢失）和（数据帧无法撤消）。</p>
<p>110局域网操作系统可以分为（面向任务型）和（通用型）。</p>
<p>111局域网常用的媒体访问控制方法包括（CSMA/CD）、（控制令牌）、（时槽环）3 种。</p>
<p>112在逻辑链路层中包括的链路服务有（无确认连接）、（有确认连接）、（面向连接）3种。</p>
<p>113.FDDI的物理拓扑结构主要有（环形）、（带树形的环）、（带星形的环）3种。</p>
<p>114.FDDI的物理层包括（物理媒体依赖PMD）和（物理层协议PHY）。</p>
<p>115通用型局域网操作系统可以分为（变形级系统）和（基础级系统）。</p>
<p>116产生于80年代的综合业务数据网（ISDN），是基于单一通信网络的能提供包括（语音）、（文字）、（数据）、（图像）等综合业务的数字网。</p>
<p>117.ISDN是在数字网技术的基础上发展进来的，数字网的基本技术包括（数字传输）、（数字交换）、（网同步）和（公共信令）。</p>
<p>118.ISDN所具有的三个基本特性：（端到端的数字连接）、（综合的业务）和（标准的入网接口）。</p>
<p>119数字传输技术可以采用（脉码调制（PCM））、（差分脉码调制（DPCM））、（自适应差分脉码调制（ADPCM））、（增量调制（AM），PCM技术）等多种方式，其中最常用的是8比特的（）。</p>
<p>120数字交换系统由硬件和软件共同组成。硬件包括（控制系统）、（话路系统）、（输入输出系统）等处理机系统；软件包括（操作系统）、（应用程序）、（用户数据）及控制数据。交换网主要由（时分交换）和（空分交换）构成。</p>
<p>121.CCITT定义了两种用户一网络接口的标准，它们是（基本速率接口）和（一次群（基群）速率接口）</p>
<p>122帧中断的常见应用有（局域网的互连）、（语音传输）、（文件传输）。</p>
<p>123帧中断的主要特点包括（低网络时延）、（高传输速率）、有将近的带宽利用率以及在星形和网状网上的高可靠连接等。</p>
<p>124千兆以太网的物理层协议包括（1000BASE-SX）、（1000BASE-LX）、（1000BASE-CX）和（1000BASE-T）等标准。</p>
<p>125千兆以太网的帧结构与标准以太网的帧结构相同，其最大帧长为（1518）字节，最小帧校为（46）字节。</p>
<p>126为了确保最长帧长为64字节，同时维持网络直径为200m，千兆以太网采用了（载波扩展）和（数据包分组）技术。</p>
<p>127.Internet采用了目前最流行的（客户机/服务器）工作模式，凡是使用（TCP/IP协议），并能与Internet的任意主机进行通信的计算机，均可看成是Internet的一部分。</p>
<p>128.ISP的接入方式有（帧中继方式）、（专线方式）和（ISDN方式）。</p>
<p>129用户的接入方式有（防真终端方式）、（拨号IP方式）和（局域网连接方式）。</p>
<p>130有两种方式可以实现局域网与Internet主机的连接。一种方法是通过局域网的服务器，使用（高速MODEM）经电话线路与Intetnet主机连接。另一种方法是通过（路由器）将局域网与Internet主机相连，使整个局域网加入到Internet中成为一个开放式局域网。</p>
<p>131.Internet所提供的三项基本服务是（电子邮件）、（远程登录）和（文件传输）。</p>
<p>132当前最流行和最受欢迎的信息检索服务程序是（WWW）。</p>
<p>133.WWW上每一个网页都有一个独立的地址，这些地址称为（统一资源定位器URL）。</p>
<p>134将两台主机的IP地址分别与它们的子网掩码进行&ldquo;（与）&rdquo;操作，若结果相同，则说明这两台主机在同一子网中。</p>
<p>135.WWW的网页文件是用（超文本标记语言HTML）编写的，并在（超文本传输协议HTTP）的支持下运行。</p>
<p>136为了确保通信时能用相互识别，在Internet上的每台主机都必须有一个唯一的标识，即主机的（IP地址）。</p>
<p>137.IP地址由（网络标识）和（主机标识）两部分组成。常用的IP地址的（A）、（B）、（C）三类。</p>
<p>138（A）类地址一般分配给具有大量主机的网络使用，（B）类地址通常分配给规模中等的网络使用，（C）类地址通常分配给小型局域网使用。</p>
<p>139将主机标识域进一步划分为（子网标识）和（子网主机标识），通过灵活定义子域标识域的位数，可以控制每个子网的规模。</p>
<p>140邮件服务器使用的协议有（简单邮件传输协议）、（电子邮件扩充协议）和（邮局协议）。</p>
<p>141.Intranet通常是指一组沿用（Internet协议）的，采用（客户机服务器）结构的内部网络。考虑到安全性，可以使用（防火墙）将Intranet与internet隔离开来。</p>
<p>142.ISO建立网络管理应包含以下基本功能：（故障管理）、（计费管理）、（配置管理）、（性能管理）和（安全管理）。</p>
<p>143现代计算机网络的管理系统模型主要由以下内部分组成：（1）多个（被管代理），也称管理代理；（2）至少一个（网络管理器），也称管理工作站；（3）一个通用的（网络管理协议）；（4）一个或多个（管理信息库）。</p>
<p>144目前最有影响的网络管理协议有两个：一个是（简单网络管理协议SNMP）；另一个是（公共管理信息服务和公关管理信息协议CMIS/CMIP）。</p>
<p>&nbsp;</p>]]></description></item><item><title>常微分方程初值问题数值解法</title><link>http://www.cnblogs.com/hanxi/archive/2011/12/02/2272597.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 02 Dec 2011 10:58:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/12/02/2272597.html</guid><description><![CDATA[<p>&nbsp;常微分方程初值问题数值解法</p>
<p align="left"><span style="color: #0000ff;"><strong>一、问题提出</strong></span></p>
<p>科学计算中经常遇到微分方程（组）初值问题，需要利用Euler法，改进Euler法，Rung-Kutta方法求其数值解，诸如以下问题：</p>
<p>（1）</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011120218501566.jpg" alt="" /></p>
<p>（3）</p>
<p>&nbsp;</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011120218504948.jpg" alt="" /></p>
<p>（4）利用四阶标准R- K方法求二阶方程初值问题的数值解</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011120218511838.jpg" alt="" /></p>
<p align="left"><strong><span style="color: #0000ff;">二、问题分析</span></strong></p>
<p align="left">&nbsp;&nbsp;&nbsp; 使用Euler法求解，运算程序简单，但是计算结果准确度不高。使用改进的Euler法求解过程相对复杂，但是准确度会更高。准确度最高的是四阶龙格库塔法，求解步骤也是最复杂的。问题（1）使用Euler求解，并与准确解对比。问题（3）使用改进的Euler法求解。问题（4）（I）（IV）使用四届标准龙格库塔法求解。</p>
<p align="left"><strong><span style="color: #0000ff;">三、实验程序及注释</span></strong></p>
<p align="left"><strong>1.Euler</strong><strong>法：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('863667b0-60b6-400d-a71a-be7a25d30c44')"><img id="code_img_closed_863667b0-60b6-400d-a71a-be7a25d30c44" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_863667b0-60b6-400d-a71a-be7a25d30c44" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('863667b0-60b6-400d-a71a-be7a25d30c44',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_863667b0-60b6-400d-a71a-be7a25d30c44" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">differential.cpp</span><span style="color: #008000;"><br /></span>#include &lt;iostream&gt;<br /><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std;<br />#include &lt;math.h&gt;<br /><br /><span style="color: #0000ff;">float</span> h,    <span style="color: #008000;">//</span><span style="color: #008000;">步长</span><span style="color: #008000;"><br /></span>      x00,   <span style="color: #008000;">//</span><span style="color: #008000;">x的取值范围 </span><span style="color: #008000;"><br /></span>      xn,    <span style="color: #008000;">//</span><span style="color: #008000;"> x0&lt; x &lt; xn</span><span style="color: #008000;"><br /></span>      y00;   <span style="color: #008000;">//</span><span style="color: #008000;">初值</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> x[<span style="color: #800080;">21</span>];<span style="color: #008000;">//</span><span style="color: #008000;">结果</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> y[<span style="color: #800080;">21</span>];<br /><br /><span style="color: #0000ff;">void</span> Euler()<br />{<br />    init();<br />    x[<span style="color: #800080;">0</span>] = x00;<br />    y[<span style="color: #800080;">0</span>] = y00;<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;=(xn-x00)/h+<span style="color: #800080;">1</span>; i++)<br />    {<br />        x[i] = x[i-<span style="color: #800080;">1</span>] + h;<br />        y[i] = y[i-<span style="color: #800080;">1</span>] + h * f(x[i-<span style="color: #800080;">1</span>],y[i-<span style="color: #800080;">1</span>]);<br />    }<br />}</pre>
</div>
</div>
<p align="left"><strong><br /><br /></strong></p>
<p align="left"><strong>2.</strong><strong>解问题（1）：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('7098fbe0-a220-4b15-9837-83addc311c8e')"><img id="code_img_closed_7098fbe0-a220-4b15-9837-83addc311c8e" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_7098fbe0-a220-4b15-9837-83addc311c8e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('7098fbe0-a220-4b15-9837-83addc311c8e',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_7098fbe0-a220-4b15-9837-83addc311c8e" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">常微分方程y&rsquo;= f(xn,yn)</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> f(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y)<br />{<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">4</span>*x/y-x*y;<br />    <span style="color: #008000;">//</span><span style="color: #008000;">return y-2*x/y;</span><span style="color: #008000;">//</span><span style="color: #008000;">课本上的例题，由于检测程序的正确性</span><span style="color: #008000;"><br /></span>}<br /><span style="color: #008000;">//</span><span style="color: #008000;">初始化初值和x的范围</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span> init()<br />{<br />    x00=<span style="color: #800080;">0</span>;<br />    xn=<span style="color: #800080;">2</span>;<br />    y00=<span style="color: #800080;">3</span>;<br />}<br /><span style="color: #008000;">//</span><span style="color: #008000;">求常微分方程的标准解</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> pf(<span style="color: #0000ff;">float</span> x)<br />{<br />    <span style="color: #0000ff;">return</span> sqrt(<span style="color: #800080;">4</span>+<span style="color: #800080;">5</span>*exp(-x*x));<br />}<br /><span style="color: #0000ff;">int</span> main()<br />{<br />    h=<span style="color: #800080;">0.1</span>;<br />    Euler();<br />    cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">步长 h = </span><span style="color: #800000;">"</span><br />         &lt;&lt; h &lt;&lt; endl;<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;=(xn-x00)/h+<span style="color: #800080;">1</span>; i++)<br />    {<br />        cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">x</span><span style="color: #800000;">"</span> &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">=</span><span style="color: #800000;">"</span> &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y</span><span style="color: #800000;">"</span> &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">=</span><span style="color: #800000;">"</span> &lt;&lt; y[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span> <br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y(</span><span style="color: #800000;">"</span>&lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; pf(x[i]) &lt;&lt; endl;<br />    }<br />    h=<span style="color: #800080;">0.2</span>;<br />    Euler();<br />    cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">步长 h = </span><span style="color: #800000;">"</span><br />         &lt;&lt; h &lt;&lt; endl;<br />    <span style="color: #0000ff;">for</span> (i=<span style="color: #800080;">1</span>; i&lt;=(xn-x00)/h+<span style="color: #800080;">1</span>; i++)<br />    {<br />        cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">x</span><span style="color: #800000;">"</span> &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">=</span><span style="color: #800000;">"</span> &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y</span><span style="color: #800000;">"</span> &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">=</span><span style="color: #800000;">"</span> &lt;&lt; y[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span> <br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y(</span><span style="color: #800000;">"</span>&lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; pf(x[i]) &lt;&lt; endl;<br />    }<br />    h=<span style="color: #800080;">0.4</span>;<br />    Euler();<br />    cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">步长 h = </span><span style="color: #800000;">"</span><br />         &lt;&lt; h &lt;&lt; endl;<br />    <span style="color: #0000ff;">for</span> (i=<span style="color: #800080;">1</span>; i&lt;=(xn-x00)/h+<span style="color: #800080;">1</span>; i++)<br />    {<br />        cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">x</span><span style="color: #800000;">"</span> &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">=</span><span style="color: #800000;">"</span> &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y</span><span style="color: #800000;">"</span> &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">=</span><span style="color: #800000;">"</span> &lt;&lt; y[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">\t</span><span style="color: #800000;">"</span> <br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y(</span><span style="color: #800000;">"</span>&lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; pf(x[i]) &lt;&lt; endl;<br />    }<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br />}</pre>
</div>
</div>
<p align="left"><strong style="direction: ltr;"><br /><br /></strong></p>
<p align="left"><strong style="direction: ltr;">3.</strong><strong style="direction: ltr;">改进的Euler法：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('5e190d0c-65a8-43a3-8cdf-328ab91ef972')"><img id="code_img_closed_5e190d0c-65a8-43a3-8cdf-328ab91ef972" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_5e190d0c-65a8-43a3-8cdf-328ab91ef972" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('5e190d0c-65a8-43a3-8cdf-328ab91ef972',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_5e190d0c-65a8-43a3-8cdf-328ab91ef972" class="cnblogs_code_hide">
<pre>#include &lt;iostream&gt;<br />#include &lt;iomanip&gt;<br /><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std;<br /><br /><span style="color: #0000ff;">float</span> h,    <span style="color: #008000;">//</span><span style="color: #008000;">步长</span><span style="color: #008000;"><br /></span>      x00,   <span style="color: #008000;">//</span><span style="color: #008000;">x的取值范围 </span><span style="color: #008000;"><br /></span>      xn,    <span style="color: #008000;">//</span><span style="color: #008000;"> x0&lt; x &lt; xn</span><span style="color: #008000;"><br /></span>      y00;   <span style="color: #008000;">//</span><span style="color: #008000;">初值</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> y10,y20,y30;<span style="color: #008000;">//</span><span style="color: #008000;">初值</span><span style="color: #008000;"><br /></span><br /><span style="color: #0000ff;">float</span> x[<span style="color: #800080;">21</span>];<span style="color: #008000;">//</span><span style="color: #008000;">结果</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> y1[<span style="color: #800080;">21</span>],y2[<span style="color: #800080;">21</span>],y3[<span style="color: #800080;">21</span>];<br /><span style="color: #008000;">//</span><span style="color: #008000;">改进的Euler法</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span> newEuler()<br />{<br />    init();<br />    x[<span style="color: #800080;">0</span>] = x00;<br />    y1[<span style="color: #800080;">0</span>] = y10;<br />    y2[<span style="color: #800080;">0</span>] = y20;<br />    y3[<span style="color: #800080;">0</span>] = y30;<br /><br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;=(xn-x00)/h+<span style="color: #800080;">1</span>; i++)<br />    {<br />        x[i] = x[i-<span style="color: #800080;">1</span>] + h;<br />        <span style="color: #0000ff;">float</span> yp=y1[i-<span style="color: #800080;">1</span>]+h*f1(x[i-<span style="color: #800080;">1</span>],y1[i-<span style="color: #800080;">1</span>],y2[i-<span style="color: #800080;">1</span>],y3[i-<span style="color: #800080;">1</span>]);<br />        <span style="color: #0000ff;">float</span> yc=y1[i-<span style="color: #800080;">1</span>]+h*f1(x[i],yp,y2[i-<span style="color: #800080;">1</span>],y3[i-<span style="color: #800080;">1</span>]);<br />        y1[i] = <span style="color: #800080;">0.5</span>*(yp+yc);<br />        yp=y2[i-<span style="color: #800080;">1</span>]+h*f2(x[i-<span style="color: #800080;">1</span>],y1[i-<span style="color: #800080;">1</span>],y2[i-<span style="color: #800080;">1</span>],y3[i-<span style="color: #800080;">1</span>]);<br />        yc=y2[i-<span style="color: #800080;">1</span>]+h*f2(x[i],y1[i-<span style="color: #800080;">1</span>],yp,y3[i-<span style="color: #800080;">1</span>]);<br />        y2[i] = <span style="color: #800080;">0.5</span>*(yp+yc);<br />        yp=y3[i-<span style="color: #800080;">1</span>]+h*f3(x[i-<span style="color: #800080;">1</span>],y1[i-<span style="color: #800080;">1</span>],y2[i-<span style="color: #800080;">1</span>],y3[i-<span style="color: #800080;">1</span>]);<br />        yc=y3[i-<span style="color: #800080;">1</span>]+h*f3(x[i],y1[i-<span style="color: #800080;">1</span>],y2[i-<span style="color: #800080;">1</span>],yp);<br />        y3[i] = <span style="color: #800080;">0.5</span>*(yp+yc);<br />    }<br />}</pre>
</div>
</div>
<p align="left"><strong style="direction: ltr;"><br /><br /></strong></p>
<p align="left"><strong style="direction: ltr;">4.</strong><strong style="direction: ltr;">解问题（3）：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('1497d8cf-958e-4807-a97b-4fe2b87ae3d1')"><img id="code_img_closed_1497d8cf-958e-4807-a97b-4fe2b87ae3d1" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_1497d8cf-958e-4807-a97b-4fe2b87ae3d1" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('1497d8cf-958e-4807-a97b-4fe2b87ae3d1',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_1497d8cf-958e-4807-a97b-4fe2b87ae3d1" class="cnblogs_code_hide">
<pre><span style="color: #0000ff;">float</span> f1(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y1, <span style="color: #0000ff;">float</span> y2, <span style="color: #0000ff;">float</span> y3)<br />{<br />    <span style="color: #0000ff;">return</span> y2;<br />}<br /><span style="color: #0000ff;">float</span> f2(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y1, <span style="color: #0000ff;">float</span> y2, <span style="color: #0000ff;">float</span> y3)<br />{<br />    <span style="color: #0000ff;">return</span> -y1;<br />}<br /><span style="color: #0000ff;">float</span> f3(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y1, <span style="color: #0000ff;">float</span> y2, <span style="color: #0000ff;">float</span> y3)<br />{<br />    <span style="color: #0000ff;">return</span> -y3;<br />}<br /><span style="color: #0000ff;">void</span> init()<br />{<br />    x00=<span style="color: #800080;">0</span>;<br />    xn=<span style="color: #800080;">0.15</span>;<br />    y10=-<span style="color: #800080;">1</span>;<br />    y20=<span style="color: #800080;">0</span>;<br />    y30=<span style="color: #800080;">1</span>;<br />}<br /><span style="color: #0000ff;">int</span> main()<br />{<br />    h=<span style="color: #800080;">0.01</span>;<br />    newEuler();<br />    cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">步长 h = </span><span style="color: #800000;">"</span><br />         &lt;&lt; h &lt;&lt; endl;<br />    cout.precision(<span style="color: #800080;">6</span>);<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;=(xn-x00)/h; i+=<span style="color: #800080;">5</span>)<br />    {<br />        cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">x(</span><span style="color: #800000;">"</span> &lt;&lt; setw(<span style="color: #800080;">2</span>) &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y1(</span><span style="color: #800000;">"</span> &lt;&lt; setw(<span style="color: #800080;">2</span>) &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; y1[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y2(</span><span style="color: #800000;">"</span> &lt;&lt; setw(<span style="color: #800080;">2</span>) &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; y2[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y3(</span><span style="color: #800000;">"</span> &lt;&lt; setw(<span style="color: #800080;">2</span>) &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; y3[i] &lt;&lt; endl;<br />    }<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br />}</pre>
</div>
</div>
<p align="left"><strong style="direction: ltr;"><br /><br /></strong></p>
<p align="left"><strong style="direction: ltr;">5.</strong><strong style="direction: ltr;">龙格库塔法：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('91112880-ef40-4156-b49d-9159fa009731')"><img id="code_img_closed_91112880-ef40-4156-b49d-9159fa009731" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_91112880-ef40-4156-b49d-9159fa009731" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('91112880-ef40-4156-b49d-9159fa009731',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_91112880-ef40-4156-b49d-9159fa009731" class="cnblogs_code_hide">
<pre>#include &lt;iostream&gt;<br />#include &lt;iomanip&gt;<br /><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std;<br /><br /><span style="color: #0000ff;">float</span> h,    <span style="color: #008000;">//</span><span style="color: #008000;">步长</span><span style="color: #008000;"><br /></span>      x00,   <span style="color: #008000;">//</span><span style="color: #008000;">x的取值范围 </span><span style="color: #008000;"><br /></span>      xn;    <span style="color: #008000;">//</span><span style="color: #008000;"> x0&lt; x &lt; xn</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> y10;<br /><span style="color: #0000ff;">float</span> y20;<span style="color: #008000;">//</span><span style="color: #008000;">初值</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> x[<span style="color: #800080;">51</span>];<span style="color: #008000;">//</span><span style="color: #008000;">结果</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> y1[<span style="color: #800080;">51</span>],y2[<span style="color: #800080;">51</span>];<br /><span style="color: #008000;">//</span><span style="color: #008000;">龙格库塔法</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span> L_k()<br />{<br />    <span style="color: #0000ff;">float</span> L[<span style="color: #800080;">5</span>];<br />    init();<br />    x[<span style="color: #800080;">0</span>]=x00;<br />    y1[<span style="color: #800080;">0</span>]=y10;<br />    y2[<span style="color: #800080;">0</span>]=y20;<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>; i&lt;=(xn-x00)/h; i++)<br />    {<br />        x[i] = x[i-<span style="color: #800080;">1</span>] + h;<br />        L[<span style="color: #800080;">1</span>] = f2(x[i-<span style="color: #800080;">1</span>],y1[i-<span style="color: #800080;">1</span>],y2[i-<span style="color: #800080;">1</span>]);<br />        L[<span style="color: #800080;">2</span>] = f2(x[i-<span style="color: #800080;">1</span>]+h/<span style="color: #800080;">2</span>,y1[i-<span style="color: #800080;">1</span>]+h*y2[i-<span style="color: #800080;">1</span>]/<span style="color: #800080;">2</span>,y2[i-<span style="color: #800080;">1</span>]+h*L[<span style="color: #800080;">1</span>]/<span style="color: #800080;">2</span>);<br />        L[<span style="color: #800080;">3</span>] = f2(x[i-<span style="color: #800080;">1</span>]+h/<span style="color: #800080;">2</span>,y1[i-<span style="color: #800080;">1</span>]+h*y2[i-<span style="color: #800080;">1</span>]/<span style="color: #800080;">2</span>+h*h*L[<span style="color: #800080;">1</span>]/<span style="color: #800080;">4</span>,y2[i-<span style="color: #800080;">1</span>]+h*L[<span style="color: #800080;">2</span>]/<span style="color: #800080;">2</span>);<br />        L[<span style="color: #800080;">4</span>] = f2(x[i-<span style="color: #800080;">1</span>]+h,y1[i-<span style="color: #800080;">1</span>]+h*y2[i-<span style="color: #800080;">1</span>]+h*h*L[<span style="color: #800080;">2</span>]/<span style="color: #800080;">2</span>,y2[i-<span style="color: #800080;">1</span>]+h*L[<span style="color: #800080;">3</span>]);<br />        y1[i] = y1[i-<span style="color: #800080;">1</span>] + h*y2[i-<span style="color: #800080;">1</span>] + h*h*(L[<span style="color: #800080;">1</span>]+L[<span style="color: #800080;">2</span>]+L[<span style="color: #800080;">3</span>])/<span style="color: #800080;">6</span>;<br />        y2[i] = y2[i-<span style="color: #800080;">1</span>] + h*(L[<span style="color: #800080;">1</span>]+<span style="color: #800080;">2</span>*L[<span style="color: #800080;">2</span>]+<span style="color: #800080;">2</span>*L[<span style="color: #800080;">3</span>]+L[<span style="color: #800080;">4</span>])/<span style="color: #800080;">6</span>;<br />    }<br />}</pre>
</div>
</div>
<p align="left"><strong style="direction: ltr;"><br /><br /></strong></p>
<p align="left"><strong style="direction: ltr;">6.</strong><strong style="direction: ltr;">解问题（4）（I)：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('b36f942f-2c00-4036-8d0e-fd599fa80b03')"><img id="code_img_closed_b36f942f-2c00-4036-8d0e-fd599fa80b03" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_b36f942f-2c00-4036-8d0e-fd599fa80b03" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b36f942f-2c00-4036-8d0e-fd599fa80b03',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_b36f942f-2c00-4036-8d0e-fd599fa80b03" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">  y1'=y2<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">  y2'=3*y2-*y1</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> f1(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y1, <span style="color: #0000ff;">float</span> y2)<br />{<br />    <span style="color: #0000ff;">return</span> y2;<br />}<br /><span style="color: #0000ff;">float</span> f2(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y1, <span style="color: #0000ff;">float</span> y2)<br />{<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">3</span>*y2-<span style="color: #800080;">2</span>*y1;<br />}<br /><br /><span style="color: #0000ff;">void</span> init()<br />{<br />    x00=<span style="color: #800080;">0</span>;<br />    xn=<span style="color: #800080;">1</span>;<br />    y10=<span style="color: #800080;">0</span>;<br />    y20=<span style="color: #800080;">1</span>;<br />} <br /><br /><span style="color: #0000ff;">int</span> main()<br />{<br />    h=<span style="color: #800080;">0.02</span>;<br />    L_k();<br />    cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">步长 h = </span><span style="color: #800000;">"</span><br />         &lt;&lt; h &lt;&lt; endl;<br />    cout.precision(<span style="color: #800080;">6</span>);<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>; i&lt;=(xn-x00)/h; i++)<br />    {<br />        cout &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">x(</span><span style="color: #800000;">"</span> &lt;&lt; setw(<span style="color: #800080;">2</span>) &lt;&lt; i &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y1(</span><span style="color: #800000;">"</span> &lt;&lt; setw(<span style="color: #800080;">2</span>) &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; y1[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">"</span><br />             &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">y2(</span><span style="color: #800000;">"</span> &lt;&lt; setw(<span style="color: #800080;">2</span>) &lt;&lt; x[i] &lt;&lt; <span style="color: #800000;">"</span><span style="color: #800000;">)=</span><span style="color: #800000;">"</span> &lt;&lt; y2[i] &lt;&lt; endl;<br />    }<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br />}</pre>
</div>
</div>
<p align="left"><strong style="direction: ltr;"><br /><br /></strong></p>
<p align="left"><strong style="direction: ltr;">7.</strong><strong style="direction: ltr;">解问题（4）（IV)：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('5f6d949d-8844-4aae-8bc6-3a3ff64bfba2')"><img id="code_img_closed_5f6d949d-8844-4aae-8bc6-3a3ff64bfba2" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_5f6d949d-8844-4aae-8bc6-3a3ff64bfba2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('5f6d949d-8844-4aae-8bc6-3a3ff64bfba2',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_5f6d949d-8844-4aae-8bc6-3a3ff64bfba2" class="cnblogs_code_hide">
<pre><span style="color: #008000;">//</span><span style="color: #008000;">  y1'=y2<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">  y2'=-sin(y1)</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">float</span> f1(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y1, <span style="color: #0000ff;">float</span> y2)<br />{<br />    <span style="color: #0000ff;">return</span> y2;<br />}<br /><span style="color: #0000ff;">float</span> f2(<span style="color: #0000ff;">float</span> x, <span style="color: #0000ff;">float</span> y1, <span style="color: #0000ff;">float</span> y2)<br />{<br />    <span style="color: #0000ff;">return</span> -sin(y1);<br />}<br /><br /><span style="color: #0000ff;">void</span> init()<br />{<br />    x00=<span style="color: #800080;">0</span>;<br />    xn=<span style="color: #800080;">4</span>;<br />    y10=<span style="color: #800080;">1</span>;<br />    y20=<span style="color: #800080;">0</span>;<br />}<br /><span style="color: #0000ff;">int</span> main()<br />{<br />    h=<span style="color: #800080;">0.2</span>;<br />    L_k();<br />    &hellip;&hellip;<br />&hellip;&hellip;<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br />}</pre>
</div>
</div>
<p align="left"><strong style="direction: ltr;"><br /><br /></strong></p>
<p align="left"><strong style="direction: ltr;"><span style="color: #0000ff;">四、实验数据结果及分析</span></strong></p>
<p align="left"><strong>1.</strong><strong>解问题（1）：</strong></p>
<p align="left">&nbsp; &nbsp; &nbsp;</p>
<div class="cnblogs_code">
<pre>Euler法<br /><br />步长 h = <span style="color: #800080;">0.1</span><br /><br />x1=<span style="color: #800080;">0.1</span>  y1=<span style="color: #800080;">3</span>    y(<span style="color: #800080;">0.1</span>)=<span style="color: #800080;">2.9917</span><br /><br />x2=<span style="color: #800080;">0.2</span>  y2=<span style="color: #800080;">2.98333</span>      y(<span style="color: #800080;">0.2</span>)=<span style="color: #800080;">2.96714</span><br /><br />x3=<span style="color: #800080;">0.3</span>  y3=<span style="color: #800080;">2.95048</span>      y(<span style="color: #800080;">0.3</span>)=<span style="color: #800080;">2.9274</span><br /><br />x4=<span style="color: #800080;">0.4</span>  y4=<span style="color: #800080;">2.90264</span>      y(<span style="color: #800080;">0.4</span>)=<span style="color: #800080;">2.87415</span><br /><br />x5=<span style="color: #800080;">0.5</span>  y5=<span style="color: #800080;">2.84166</span>      y(<span style="color: #800080;">0.5</span>)=<span style="color: #800080;">2.80963</span><br /><br />x6=<span style="color: #800080;">0.6</span>  y6=<span style="color: #800080;">2.76995</span>      y(<span style="color: #800080;">0.6</span>)=<span style="color: #800080;">2.73649</span><br /><br />x7=<span style="color: #800080;">0.7</span>  y7=<span style="color: #800080;">2.6904</span>       y(<span style="color: #800080;">0.7</span>)=<span style="color: #800080;">2.65766</span><br /><br />x8=<span style="color: #800080;">0.8</span>  y8=<span style="color: #800080;">2.60615</span>      y(<span style="color: #800080;">0.8</span>)=<span style="color: #800080;">2.57613</span><br /><br />x9=<span style="color: #800080;">0.9</span>  y9=<span style="color: #800080;">2.52044</span>      y(<span style="color: #800080;">0.9</span>)=<span style="color: #800080;">2.49485</span><br /><br />x10=<span style="color: #800080;">1</span>   y10=<span style="color: #800080;">2.43643</span>     y(<span style="color: #800080;">1</span>)=<span style="color: #800080;">2.41648</span><br /><br />x11=<span style="color: #800080;">1.1</span> y11=<span style="color: #800080;">2.35697</span>     y(<span style="color: #800080;">1.1</span>)=<span style="color: #800080;">2.34329</span><br /><br />x12=<span style="color: #800080;">1.2</span> y12=<span style="color: #800080;">2.28438</span>     y(<span style="color: #800080;">1.2</span>)=<span style="color: #800080;">2.27698</span><br /><br />x13=<span style="color: #800080;">1.3</span> y13=<span style="color: #800080;">2.22038</span>     y(<span style="color: #800080;">1.3</span>)=<span style="color: #800080;">2.21869</span><br /><br />x14=<span style="color: #800080;">1.4</span> y14=<span style="color: #800080;">2.16592</span>     y(<span style="color: #800080;">1.4</span>)=<span style="color: #800080;">2.16894</span><br /><br />x15=<span style="color: #800080;">1.5</span> y15=<span style="color: #800080;">2.12124</span>     y(<span style="color: #800080;">1.5</span>)=<span style="color: #800080;">2.12767</span><br /><br />x16=<span style="color: #800080;">1.6</span> y16=<span style="color: #800080;">2.08591</span>     y(<span style="color: #800080;">1.6</span>)=<span style="color: #800080;">2.0944</span><br /><br />x17=<span style="color: #800080;">1.7</span> y17=<span style="color: #800080;">2.05898</span>     y(<span style="color: #800080;">1.7</span>)=<span style="color: #800080;">2.0683</span><br /><br />x18=<span style="color: #800080;">1.8</span> y18=<span style="color: #800080;">2.03922</span>     y(<span style="color: #800080;">1.8</span>)=<span style="color: #800080;">2.04837</span><br /><br />x19=<span style="color: #800080;">1.9</span> y19=<span style="color: #800080;">2.02523</span>     y(<span style="color: #800080;">1.9</span>)=<span style="color: #800080;">2.03353</span><br /><br />x20=<span style="color: #800080;">2</span>   y20=<span style="color: #800080;">2.01571</span>     y(<span style="color: #800080;">2</span>)=<span style="color: #800080;">2.02276</span><br /><br />步长 h = <span style="color: #800080;">0.2</span><br /><br />x1=<span style="color: #800080;">0.2</span>  y1=<span style="color: #800080;">3</span>    y(<span style="color: #800080;">0.2</span>)=<span style="color: #800080;">2.96714</span><br /><br />x2=<span style="color: #800080;">0.4</span>  y2=<span style="color: #800080;">2.93333</span>      y(<span style="color: #800080;">0.4</span>)=<span style="color: #800080;">2.87415</span><br /><br />x3=<span style="color: #800080;">0.6</span>  y3=<span style="color: #800080;">2.80776</span>      y(<span style="color: #800080;">0.6</span>)=<span style="color: #800080;">2.73649</span><br /><br />x4=<span style="color: #800080;">0.8</span>  y4=<span style="color: #800080;">2.64178</span>      y(<span style="color: #800080;">0.8</span>)=<span style="color: #800080;">2.57613</span><br /><br />x5=<span style="color: #800080;">1</span>    y5=<span style="color: #800080;">2.46136</span>      y(<span style="color: #800080;">1</span>)=<span style="color: #800080;">2.41648</span><br /><br />x6=<span style="color: #800080;">1.2</span>  y6=<span style="color: #800080;">2.29411</span>      y(<span style="color: #800080;">1.2</span>)=<span style="color: #800080;">2.27698</span><br /><br />x7=<span style="color: #800080;">1.4</span>  y7=<span style="color: #800080;">2.16199</span>      y(<span style="color: #800080;">1.4</span>)=<span style="color: #800080;">2.16894</span><br /><br />x8=<span style="color: #800080;">1.6</span>  y8=<span style="color: #800080;">2.07467</span>      y(<span style="color: #800080;">1.6</span>)=<span style="color: #800080;">2.0944</span><br /><br />x9=<span style="color: #800080;">1.8</span>  y9=<span style="color: #800080;">2.02774</span>      y(<span style="color: #800080;">1.8</span>)=<span style="color: #800080;">2.04837</span><br /><br />x10=<span style="color: #800080;">2</span>   y10=<span style="color: #800080;">2.0079</span>      y(<span style="color: #800080;">2</span>)=<span style="color: #800080;">2.02276</span><br /><br />步长 h = <span style="color: #800080;">0.4</span><br /><br />x1=<span style="color: #800080;">0.4</span>  y1=<span style="color: #800080;">3</span>    y(<span style="color: #800080;">0.4</span>)=<span style="color: #800080;">2.87415</span><br /><br />x2=<span style="color: #800080;">0.8</span>  y2=<span style="color: #800080;">2.73333</span>      y(<span style="color: #800080;">0.8</span>)=<span style="color: #800080;">2.57613</span><br /><br />x3=<span style="color: #800080;">1.2</span>  y3=<span style="color: #800080;">2.32696</span>      y(<span style="color: #800080;">1.2</span>)=<span style="color: #800080;">2.27698</span><br /><br />x4=<span style="color: #800080;">1.6</span>  y4=<span style="color: #800080;">2.03513</span>      y(<span style="color: #800080;">1.6</span>)=<span style="color: #800080;">2.0944</span><br /><br />x5=<span style="color: #800080;">2</span>    y5=<span style="color: #800080;">1.99055</span>      y(<span style="color: #800080;">2</span>)=<span style="color: #800080;">2.02276</span></pre>
</div>
<p align="left">&nbsp;</p>
<p align="left"><strong>&nbsp;&nbsp;&nbsp; 2.</strong><strong>解问题(3):</strong></p>
<div class="cnblogs_code">
<pre>步长 h = <span style="color: #800080;">0.01</span><br /><br />x( <span style="color: #800080;">0</span>)=<span style="color: #800080;">0</span>     y1( <span style="color: #800080;">0</span>)=-<span style="color: #800080;">1</span>           y2( <span style="color: #800080;">0</span>)=<span style="color: #800080;">0</span>           y3( <span style="color: #800080;">0</span>)=<span style="color: #800080;">1</span><br /><br />x( <span style="color: #800080;">5</span>)=<span style="color: #800080;">0.05</span>  y1(<span style="color: #800080;">0.05</span>)=-<span style="color: #800080;">0.999</span>     y2(<span style="color: #800080;">0.05</span>)=<span style="color: #800080;">0.04999</span>   y3(<span style="color: #800080;">0.05</span>)=<span style="color: #800080;">0.95123</span><br /><br />x(<span style="color: #800080;">10</span>)=<span style="color: #800080;">0.1</span>   y1(<span style="color: #800080;">0.1</span>)=-<span style="color: #800080;">0.995502</span>   y2(<span style="color: #800080;">0.1</span>)=<span style="color: #800080;">0.09988</span>    y3(<span style="color: #800080;">0.1</span>)=<span style="color: #800080;">0.904839</span><br /><br />x(<span style="color: #800080;">15</span>)=<span style="color: #800080;">0.15</span>  y1(<span style="color: #800080;">0.15</span>)=-<span style="color: #800080;">0.989514</span>  y2(<span style="color: #800080;">0.15</span>)=<span style="color: #800080;">0.149545</span>  y3(<span style="color: #800080;">0.15</span>)=<span style="color: #800080;">0.86071</span></pre>
</div>
<p align="left">参考结果：</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011120218555855.jpg" alt="" /></p>
<p align="left">对比看，结果相差不大，参考结果应该是使用四阶龙格库塔方法求解的。</p>
<p align="left"><strong>3.</strong><strong>解问题（4）（I）：</strong></p>
<div class="cnblogs_code">
<pre>步长 h = <span style="color: #800080;">0.02</span><br /><br />x( <span style="color: #800080;">0</span>)=<span style="color: #800080;">0</span>  y1( <span style="color: #800080;">0</span>)=<span style="color: #800080;">0</span>  y2( <span style="color: #800080;">0</span>)=<span style="color: #800080;">1</span><br /><br />x( <span style="color: #800080;">1</span>)=<span style="color: #800080;">0.02</span>  y1(<span style="color: #800080;">0.02</span>)=<span style="color: #800080;">0.0206094</span>  y2(<span style="color: #800080;">0.02</span>)=<span style="color: #800080;">1.06142</span><br /><br />x( <span style="color: #800080;">2</span>)=<span style="color: #800080;">0.04</span>  y1(<span style="color: #800080;">0.04</span>)=<span style="color: #800080;">0.0424763</span>  y2(<span style="color: #800080;">0.04</span>)=<span style="color: #800080;">1.12576</span><br /><br />x( <span style="color: #800080;">3</span>)=<span style="color: #800080;">0.06</span>  y1(<span style="color: #800080;">0.06</span>)=<span style="color: #800080;">0.0656603</span>  y2(<span style="color: #800080;">0.06</span>)=<span style="color: #800080;">1.19316</span><br /><br />x( <span style="color: #800080;">4</span>)=<span style="color: #800080;">0.08</span>  y1(<span style="color: #800080;">0.08</span>)=<span style="color: #800080;">0.0902238</span>  y2(<span style="color: #800080;">0.08</span>)=<span style="color: #800080;">1.26373</span><br /><br />x( <span style="color: #800080;">5</span>)=<span style="color: #800080;">0.1</span>  y1(<span style="color: #800080;">0.1</span>)=<span style="color: #800080;">0.116232</span>  y2(<span style="color: #800080;">0.1</span>)=<span style="color: #800080;">1.33763</span><br /><br />x( <span style="color: #800080;">6</span>)=<span style="color: #800080;">0.12</span>  y1(<span style="color: #800080;">0.12</span>)=<span style="color: #800080;">0.143752</span>  y2(<span style="color: #800080;">0.12</span>)=<span style="color: #800080;">1.415</span><br /><br />x( <span style="color: #800080;">7</span>)=<span style="color: #800080;">0.14</span>  y1(<span style="color: #800080;">0.14</span>)=<span style="color: #800080;">0.172856</span>  y2(<span style="color: #800080;">0.14</span>)=<span style="color: #800080;">1.49599</span><br /><br />x( <span style="color: #800080;">8</span>)=<span style="color: #800080;">0.16</span>  y1(<span style="color: #800080;">0.16</span>)=<span style="color: #800080;">0.203617</span>  y2(<span style="color: #800080;">0.16</span>)=<span style="color: #800080;">1.58074</span><br /><br />x( <span style="color: #800080;">9</span>)=<span style="color: #800080;">0.18</span>  y1(<span style="color: #800080;">0.18</span>)=<span style="color: #800080;">0.236112</span>  y2(<span style="color: #800080;">0.18</span>)=<span style="color: #800080;">1.66944</span><br /><br />x(<span style="color: #800080;">10</span>)=<span style="color: #800080;">0.2</span>  y1(<span style="color: #800080;">0.2</span>)=<span style="color: #800080;">0.270422</span>  y2(<span style="color: #800080;">0.2</span>)=<span style="color: #800080;">1.76225</span><br /><br />x(<span style="color: #800080;">11</span>)=<span style="color: #800080;">0.22</span>  y1(<span style="color: #800080;">0.22</span>)=<span style="color: #800080;">0.30663</span>  y2(<span style="color: #800080;">0.22</span>)=<span style="color: #800080;">1.85934</span><br /><br />x(<span style="color: #800080;">12</span>)=<span style="color: #800080;">0.24</span>  y1(<span style="color: #800080;">0.24</span>)=<span style="color: #800080;">0.344825</span>  y2(<span style="color: #800080;">0.24</span>)=<span style="color: #800080;">1.9609</span><br /><br />x(<span style="color: #800080;">13</span>)=<span style="color: #800080;">0.26</span>  y1(<span style="color: #800080;">0.26</span>)=<span style="color: #800080;">0.385097</span>  y2(<span style="color: #800080;">0.26</span>)=<span style="color: #800080;">2.06712</span><br /><br />x(<span style="color: #800080;">14</span>)=<span style="color: #800080;">0.28</span>  y1(<span style="color: #800080;">0.28</span>)=<span style="color: #800080;">0.427543</span>  y2(<span style="color: #800080;">0.28</span>)=<span style="color: #800080;">2.17821</span><br /><br />x(<span style="color: #800080;">15</span>)=<span style="color: #800080;">0.3</span>  y1(<span style="color: #800080;">0.3</span>)=<span style="color: #800080;">0.47226</span>  y2(<span style="color: #800080;">0.3</span>)=<span style="color: #800080;">2.29438</span><br /><br />x(<span style="color: #800080;">16</span>)=<span style="color: #800080;">0.32</span>  y1(<span style="color: #800080;">0.32</span>)=<span style="color: #800080;">0.519353</span>  y2(<span style="color: #800080;">0.32</span>)=<span style="color: #800080;">2.41583</span><br /><br />x(<span style="color: #800080;">17</span>)=<span style="color: #800080;">0.34</span>  y1(<span style="color: #800080;">0.34</span>)=<span style="color: #800080;">0.56893</span>  y2(<span style="color: #800080;">0.34</span>)=<span style="color: #800080;">2.54281</span><br /><br />x(<span style="color: #800080;">18</span>)=<span style="color: #800080;">0.36</span>  y1(<span style="color: #800080;">0.36</span>)=<span style="color: #800080;">0.621104</span>  y2(<span style="color: #800080;">0.36</span>)=<span style="color: #800080;">2.67554</span><br /><br />x(<span style="color: #800080;">19</span>)=<span style="color: #800080;">0.38</span>  y1(<span style="color: #800080;">0.38</span>)=<span style="color: #800080;">0.675991</span>  y2(<span style="color: #800080;">0.38</span>)=<span style="color: #800080;">2.81427</span><br /><br />x(<span style="color: #800080;">20</span>)=<span style="color: #800080;">0.4</span>  y1(<span style="color: #800080;">0.4</span>)=<span style="color: #800080;">0.733716</span>  y2(<span style="color: #800080;">0.4</span>)=<span style="color: #800080;">2.95926</span><br /><br />x(<span style="color: #800080;">21</span>)=<span style="color: #800080;">0.42</span>  y1(<span style="color: #800080;">0.42</span>)=<span style="color: #800080;">0.794405</span>  y2(<span style="color: #800080;">0.42</span>)=<span style="color: #800080;">3.11077</span><br /><br />x(<span style="color: #800080;">22</span>)=<span style="color: #800080;">0.44</span>  y1(<span style="color: #800080;">0.44</span>)=<span style="color: #800080;">0.858192</span>  y2(<span style="color: #800080;">0.44</span>)=<span style="color: #800080;">3.26909</span><br /><br />x(<span style="color: #800080;">23</span>)=<span style="color: #800080;">0.46</span>  y1(<span style="color: #800080;">0.46</span>)=<span style="color: #800080;">0.925216</span>  y2(<span style="color: #800080;">0.46</span>)=<span style="color: #800080;">3.43451</span><br /><br />x(<span style="color: #800080;">24</span>)=<span style="color: #800080;">0.48</span>  y1(<span style="color: #800080;">0.48</span>)=<span style="color: #800080;">0.995622</span>  y2(<span style="color: #800080;">0.48</span>)=<span style="color: #800080;">3.60732</span><br /><br />x(<span style="color: #800080;">25</span>)=<span style="color: #800080;">0.5</span>  y1(<span style="color: #800080;">0.5</span>)=<span style="color: #800080;">1.06956</span>  y2(<span style="color: #800080;">0.5</span>)=<span style="color: #800080;">3.78784</span><br /><br />x(<span style="color: #800080;">26</span>)=<span style="color: #800080;">0.52</span>  y1(<span style="color: #800080;">0.52</span>)=<span style="color: #800080;">1.14719</span>  y2(<span style="color: #800080;">0.52</span>)=<span style="color: #800080;">3.97641</span><br /><br />x(<span style="color: #800080;">27</span>)=<span style="color: #800080;">0.54</span>  y1(<span style="color: #800080;">0.54</span>)=<span style="color: #800080;">1.22867</span>  y2(<span style="color: #800080;">0.54</span>)=<span style="color: #800080;">4.17335</span><br /><br />x(<span style="color: #800080;">28</span>)=<span style="color: #800080;">0.56</span>  y1(<span style="color: #800080;">0.56</span>)=<span style="color: #800080;">1.31418</span>  y2(<span style="color: #800080;">0.56</span>)=<span style="color: #800080;">4.37903</span><br /><br />x(<span style="color: #800080;">29</span>)=<span style="color: #800080;">0.58</span>  y1(<span style="color: #800080;">0.58</span>)=<span style="color: #800080;">1.40389</span>  y2(<span style="color: #800080;">0.58</span>)=<span style="color: #800080;">4.59383</span><br /><br />x(<span style="color: #800080;">30</span>)=<span style="color: #800080;">0.6</span>  y1(<span style="color: #800080;">0.6</span>)=<span style="color: #800080;">1.498</span>  y2(<span style="color: #800080;">0.6</span>)=<span style="color: #800080;">4.81811</span><br /><br />x(<span style="color: #800080;">31</span>)=<span style="color: #800080;">0.62</span>  y1(<span style="color: #800080;">0.62</span>)=<span style="color: #800080;">1.59668</span>  y2(<span style="color: #800080;">0.62</span>)=<span style="color: #800080;">5.0523</span><br /><br />x(<span style="color: #800080;">32</span>)=<span style="color: #800080;">0.64</span>  y1(<span style="color: #800080;">0.64</span>)=<span style="color: #800080;">1.70016</span>  y2(<span style="color: #800080;">0.64</span>)=<span style="color: #800080;">5.2968</span><br /><br />x(<span style="color: #800080;">33</span>)=<span style="color: #800080;">0.66</span>  y1(<span style="color: #800080;">0.66</span>)=<span style="color: #800080;">1.80863</span>  y2(<span style="color: #800080;">0.66</span>)=<span style="color: #800080;">5.55205</span><br /><br />x(<span style="color: #800080;">34</span>)=<span style="color: #800080;">0.68</span>  y1(<span style="color: #800080;">0.68</span>)=<span style="color: #800080;">1.92232</span>  y2(<span style="color: #800080;">0.68</span>)=<span style="color: #800080;">5.81851</span><br /><br />x(<span style="color: #800080;">35</span>)=<span style="color: #800080;">0.7</span>  y1(<span style="color: #800080;">0.7</span>)=<span style="color: #800080;">2.04145</span>  y2(<span style="color: #800080;">0.7</span>)=<span style="color: #800080;">6.09665</span><br /><br />x(<span style="color: #800080;">36</span>)=<span style="color: #800080;">0.72</span>  y1(<span style="color: #800080;">0.72</span>)=<span style="color: #800080;">2.16626</span>  y2(<span style="color: #800080;">0.72</span>)=<span style="color: #800080;">6.38696</span><br /><br />x(<span style="color: #800080;">37</span>)=<span style="color: #800080;">0.74</span>  y1(<span style="color: #800080;">0.74</span>)=<span style="color: #800080;">2.29701</span>  y2(<span style="color: #800080;">0.74</span>)=<span style="color: #800080;">6.68996</span><br /><br />x(<span style="color: #800080;">38</span>)=<span style="color: #800080;">0.76</span>  y1(<span style="color: #800080;">0.76</span>)=<span style="color: #800080;">2.43395</span>  y2(<span style="color: #800080;">0.76</span>)=<span style="color: #800080;">7.00617</span><br /><br />x(<span style="color: #800080;">39</span>)=<span style="color: #800080;">0.78</span>  y1(<span style="color: #800080;">0.78</span>)=<span style="color: #800080;">2.57735</span>  y2(<span style="color: #800080;">0.78</span>)=<span style="color: #800080;">7.33617</span><br /><br />x(<span style="color: #800080;">40</span>)=<span style="color: #800080;">0.8</span>  y1(<span style="color: #800080;">0.8</span>)=<span style="color: #800080;">2.72749</span>  y2(<span style="color: #800080;">0.8</span>)=<span style="color: #800080;">7.68052</span><br /><br />x(<span style="color: #800080;">41</span>)=<span style="color: #800080;">0.82</span>  y1(<span style="color: #800080;">0.82</span>)=<span style="color: #800080;">2.88467</span>  y2(<span style="color: #800080;">0.82</span>)=<span style="color: #800080;">8.03984</span><br /><br />x(<span style="color: #800080;">42</span>)=<span style="color: #800080;">0.84</span>  y1(<span style="color: #800080;">0.84</span>)=<span style="color: #800080;">3.04919</span>  y2(<span style="color: #800080;">0.84</span>)=<span style="color: #800080;">8.41474</span><br /><br />x(<span style="color: #800080;">43</span>)=<span style="color: #800080;">0.86</span>  y1(<span style="color: #800080;">0.86</span>)=<span style="color: #800080;">3.22137</span>  y2(<span style="color: #800080;">0.86</span>)=<span style="color: #800080;">8.8059</span><br /><br />x(<span style="color: #800080;">44</span>)=<span style="color: #800080;">0.88</span>  y1(<span style="color: #800080;">0.88</span>)=<span style="color: #800080;">3.40154</span>  y2(<span style="color: #800080;">0.88</span>)=<span style="color: #800080;">9.21397</span><br /><br />x(<span style="color: #800080;">45</span>)=<span style="color: #800080;">0.9</span>  y1(<span style="color: #800080;">0.9</span>)=<span style="color: #800080;">3.59004</span>  y2(<span style="color: #800080;">0.9</span>)=<span style="color: #800080;">9.63969</span><br /><br />x(<span style="color: #800080;">46</span>)=<span style="color: #800080;">0.92</span>  y1(<span style="color: #800080;">0.92</span>)=<span style="color: #800080;">3.78725</span>  y2(<span style="color: #800080;">0.92</span>)=<span style="color: #800080;">10.0838</span><br /><br />x(<span style="color: #800080;">47</span>)=<span style="color: #800080;">0.94</span>  y1(<span style="color: #800080;">0.94</span>)=<span style="color: #800080;">3.99352</span>  y2(<span style="color: #800080;">0.94</span>)=<span style="color: #800080;">10.547</span><br /><br />x(<span style="color: #800080;">48</span>)=<span style="color: #800080;">0.96</span>  y1(<span style="color: #800080;">0.96</span>)=<span style="color: #800080;">4.20926</span>  y2(<span style="color: #800080;">0.96</span>)=<span style="color: #800080;">11.0302</span><br /><br />x(<span style="color: #800080;">49</span>)=<span style="color: #800080;">0.98</span>  y1(<span style="color: #800080;">0.98</span>)=<span style="color: #800080;">4.43487</span>  y2(<span style="color: #800080;">0.98</span>)=<span style="color: #800080;">11.5342</span><br /><br />x(<span style="color: #800080;">50</span>)=<span style="color: #800080;">1</span>  y1( <span style="color: #800080;">1</span>)=<span style="color: #800080;">4.67077</span>  y2( <span style="color: #800080;">1</span>)=<span style="color: #800080;">12.0598</span></pre>
</div>
<p align="left"><br /><br /></p>
<p align="left"><strong>3.</strong><strong>解问题（4）（IV）：</strong></p>
<div class="cnblogs_code">
<pre>步长 h = <span style="color: #800080;">0.2</span><br /><br />x( <span style="color: #800080;">0</span>)=<span style="color: #800080;">0</span>  y1( <span style="color: #800080;">0</span>)=<span style="color: #800080;">1</span>  y2( <span style="color: #800080;">0</span>)=<span style="color: #800080;">0</span><br /><br />x( <span style="color: #800080;">1</span>)=<span style="color: #800080;">0.2</span>  y1(<span style="color: #800080;">0.2</span>)=<span style="color: #800080;">0.983201</span>  y2(<span style="color: #800080;">0.2</span>)=-<span style="color: #800080;">0.167682</span><br /><br />x( <span style="color: #800080;">2</span>)=<span style="color: #800080;">0.4</span>  y1(<span style="color: #800080;">0.4</span>)=<span style="color: #800080;">0.933176</span>  y2(<span style="color: #800080;">0.4</span>)=-<span style="color: #800080;">0.331607</span><br /><br />x( <span style="color: #800080;">3</span>)=<span style="color: #800080;">0.6</span>  y1(<span style="color: #800080;">0.6</span>)=<span style="color: #800080;">0.851087</span>  y2(<span style="color: #800080;">0.6</span>)=-<span style="color: #800080;">0.48757</span><br /><br />x( <span style="color: #800080;">4</span>)=<span style="color: #800080;">0.8</span>  y1(<span style="color: #800080;">0.8</span>)=<span style="color: #800080;">0.739008</span>  y2(<span style="color: #800080;">0.8</span>)=-<span style="color: #800080;">0.630607</span><br /><br />x( <span style="color: #800080;">5</span>)=<span style="color: #800080;">1</span>    y1( <span style="color: #800080;">1</span>)=<span style="color: #800080;">0.60009</span>    y2( <span style="color: #800080;">1</span>)=-<span style="color: #800080;">0.754957</span><br /><br />x( <span style="color: #800080;">6</span>)=<span style="color: #800080;">1.2</span>  y1(<span style="color: #800080;">1.2</span>)=<span style="color: #800080;">0.438688</span>  y2(<span style="color: #800080;">1.2</span>)=-<span style="color: #800080;">0.854407</span><br /><br />x( <span style="color: #800080;">7</span>)=<span style="color: #800080;">1.4</span>  y1(<span style="color: #800080;">1.4</span>)=<span style="color: #800080;">0.260389</span>  y2(<span style="color: #800080;">1.4</span>)=-<span style="color: #800080;">0.923023</span><br /><br />x( <span style="color: #800080;">8</span>)=<span style="color: #800080;">1.6</span>  y1(<span style="color: #800080;">1.6</span>)=<span style="color: #800080;">0.0718545</span>  y2(<span style="color: #800080;">1.6</span>)=-<span style="color: #800080;">0.956155</span><br /><br />x( <span style="color: #800080;">9</span>)=<span style="color: #800080;">1.8</span>  y1(<span style="color: #800080;">1.8</span>)=-<span style="color: #800080;">0.119534</span>  y2(<span style="color: #800080;">1.8</span>)=-<span style="color: #800080;">0.951378</span><br /><br />x(<span style="color: #800080;">10</span>)=<span style="color: #800080;">2</span>    y1( <span style="color: #800080;">2</span>)=-<span style="color: #800080;">0.306182</span>   y2( <span style="color: #800080;">2</span>)=-<span style="color: #800080;">0.90905</span><br /><br />x(<span style="color: #800080;">11</span>)=<span style="color: #800080;">2.2</span>  y1(<span style="color: #800080;">2.2</span>)=-<span style="color: #800080;">0.480844</span>  y2(<span style="color: #800080;">2.2</span>)=-<span style="color: #800080;">0.832224</span><br /><br />x(<span style="color: #800080;">12</span>)=<span style="color: #800080;">2.4</span>  y1(<span style="color: #800080;">2.4</span>)=-<span style="color: #800080;">0.637103</span>  y2(<span style="color: #800080;">2.4</span>)=-<span style="color: #800080;">0.725968</span><br /><br />x(<span style="color: #800080;">13</span>)=<span style="color: #800080;">2.6</span>  y1(<span style="color: #800080;">2.6</span>)=-<span style="color: #800080;">0.769673</span>  y2(<span style="color: #800080;">2.6</span>)=-<span style="color: #800080;">0.596373</span><br /><br />x(<span style="color: #800080;">14</span>)=<span style="color: #800080;">2.8</span>  y1(<span style="color: #800080;">2.8</span>)=-<span style="color: #800080;">0.874507</span>  y2(<span style="color: #800080;">2.8</span>)=-<span style="color: #800080;">0.449594</span><br /><br />x(<span style="color: #800080;">15</span>)=<span style="color: #800080;">3</span>    y1( <span style="color: #800080;">3</span>)=-<span style="color: #800080;">0.948738</span>   y2( <span style="color: #800080;">3</span>)=-<span style="color: #800080;">0.291209</span><br /><br />x(<span style="color: #800080;">16</span>)=<span style="color: #800080;">3.2</span>  y1(<span style="color: #800080;">3.2</span>)=-<span style="color: #800080;">0.990535</span>  y2(<span style="color: #800080;">3.2</span>)=-<span style="color: #800080;">0.125976</span><br /><br />x(<span style="color: #800080;">17</span>)=<span style="color: #800080;">3.4</span>  y1(<span style="color: #800080;">3.4</span>)=-<span style="color: #800080;">0.998943</span>  y2(<span style="color: #800080;">3.4</span>)=<span style="color: #800080;">0.0420493</span><br /><br />x(<span style="color: #800080;">18</span>)=<span style="color: #800080;">3.6</span>  y1(<span style="color: #800080;">3.6</span>)=-<span style="color: #800080;">0.973777</span>  y2(<span style="color: #800080;">3.6</span>)=<span style="color: #800080;">0.209154</span><br /><br />x(<span style="color: #800080;">19</span>)=<span style="color: #800080;">3.8</span>  y1(<span style="color: #800080;">3.8</span>)=-<span style="color: #800080;">0.915597</span>  y2(<span style="color: #800080;">3.8</span>)=<span style="color: #800080;">0.371509</span><br /><br />x(<span style="color: #800080;">20</span>)=<span style="color: #800080;">4</span>  y1( <span style="color: #800080;">4</span>)=-<span style="color: #800080;">0.825779</span>     y2( <span style="color: #800080;">4</span>)=<span style="color: #800080;">0.524739</span></pre>
</div>
<p align="left"><br /><br /></p>
<p align="left">五、实验结论</p>
<p align="left">&nbsp;&nbsp; 使用c语言写代码虽然比Matlab的代码长，但是还是c语言适合用来做练习，因为用c写更有结构。Matlab隐藏了许多细节部分，不适合对方法的深入理解，但是写代码速度快，代码更简练。</p>]]></description></item><item><title>【Matlab】矩阵三角分解法求解方程组</title><link>http://www.cnblogs.com/hanxi/archive/2011/10/28/2227167.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 27 Oct 2011 16:02:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/10/28/2227167.html</guid><description><![CDATA[<div class="cnblogs_Highlighter">
<pre class="brush:cpp;gutter:true;">%直接三角分解法
function my_LU(a, b)
  n = length(a);
  l = zeros(n, n);%初始化
  u = zeros(n, n);
  for i=1:n
      l(i,i) = 1;
  end
  u(1,1:n) = a(1,1:n);
  l(2:n, 1) = a(2:n, 1) ./ u(1,1);
  for r=2:n
     for i=r:n
          u(r, i) = a(r, i) - sum(l(r,1:r-1) .* (u(1:r-1,i))'); 
      end
      for i=r+1:n
          if (r~=n)
              l(i, r) = (a(i, r) - sum(l(i,1:r-1) .* (u(1:r-1,r)))')./u(r,r);
          end
      end
  end
  L=l,U=u%输出LU矩阵
  y(1) = b(1);
  for i=2:n
      y(i) = b(i) - sum(l(i, 1:i-1).*y(1:i-1));
  end
  x(n) = y(n)/u(n,n);
  for i=n-1:-1:1
      x(i) = (y(i) - sum(u(i,i+1:n).*x(i+1:n)))./u(i,i);
  end
  x=x'
end
</pre>
</div>
<p>　　</p>]]></description></item><item><title>win2003下安装Matlab2010a破解版详细步骤</title><link>http://www.cnblogs.com/hanxi/archive/2011/10/20/2219351.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 20 Oct 2011 11:56:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/10/20/2219351.html</guid><description><![CDATA[<p>Matlab2010a下载地址：</p>
<p><a href="http://www.verycd.com/topics/2890764/">http://www.verycd.com/topics/2890764/</a></p>
<p>&nbsp;</p>
<p>安装环境：虚拟机下win2003</p>
<p>&nbsp;</p>
<p>&gt;<span lang="EN-US">win2003</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">下安装</span><span lang="EN-US">Matlab2010a</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">破解版详细步骤</span></p>
<p>&nbsp;</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019525123.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal" style="margin-left: 18.0pt; text-indent: -18.0pt; mso-list: l0 level1 lfo1; tab-stops: list 18.0pt;">&lt;!--[if !supportLists]--&gt;<span lang="EN-US">1.<span style="font: 7.0pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&lt;!--[endif]--&gt;<span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">打开文件夹</span><span lang="EN-US">&nbsp; &hellip;.\Matlab2010a</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">破解版</span><span lang="EN-US">win7\win32\</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，打开</span><span lang="EN-US">setup.exe</span></p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">注明：外面文件夹</span><span lang="EN-US">&hellip;.\Matlab2010a</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">破解版</span><span lang="EN-US">win7\</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">里的</span><span lang="EN-US">setup.exe</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">有可能打开没反应，所以建议打开</span><span lang="EN-US">&hellip;.\Matlab2010a</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">破解版</span><span lang="EN-US">win7\win32\</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的</span><span lang="EN-US">setup.exe</span></p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">显示如下图面：</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019534830.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal" style="margin-left: 18.0pt; text-indent: -18.0pt; mso-list: l0 level1 lfo1; tab-stops: list 18.0pt;">&lt;!--[if !supportLists]--&gt;<span lang="EN-US">2.<span style="font: 7.0pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&lt;!--[endif]--&gt;<span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">然后进入下面的画面：</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019540544.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal" style="margin-left: 18.0pt; text-indent: -18.0pt; mso-list: l0 level1 lfo1; tab-stops: list 18.0pt;">&lt;!--[if !supportLists]--&gt;<span lang="EN-US">3.<span style="font: 7.0pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&lt;!--[endif]--&gt;<span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">进入下面页面：</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019541624.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">注册就是</span><span lang="EN-US">key.txt</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">里面的一串数字：</span></p>
<p class="MsoNormal"><span lang="EN-US">standalone</span></p>
<p class="MsoNormal"><strong><span lang="EN-US">55013-56979-18948-50009-49060</span></strong></p>
<p class="MsoNormal"><span lang="EN-US">network</span></p>
<p class="MsoNormal"><span lang="EN-US">42149-27753-04517-22198-03397</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal"><strong><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">选择上面的一串数字，复制到上图的第一个文本框中（需要选择旁边的单选按钮）</span></strong></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left: 18.0pt; text-indent: -18.0pt; mso-list: l0 level1 lfo1; tab-stops: list 18.0pt;">&lt;!--[if !supportLists]--&gt;<span lang="EN-US">4.<span style="font: 7.0pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&lt;!--[endif]--&gt;<span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">然后进入下面图片：</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019543027.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left: 18.0pt; text-indent: -18.0pt; mso-list: l0 level1 lfo1; tab-stops: list 18.0pt;">&lt;!--[if !supportLists]--&gt;<span lang="EN-US">5.<span style="font: 7.0pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&lt;!--[endif]--&gt;<span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">进入选择安装路径画面：</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019544126.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left: 18.0pt; text-indent: -18.0pt; mso-list: l0 level1 lfo1; tab-stops: list 18.0pt;">&lt;!--[if !supportLists]--&gt;<span lang="EN-US">6.<span style="font: 7.0pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&lt;!--[endif]--&gt;<span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">然后一直点</span><span lang="EN-US">Next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，进入下面图片：</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019545084.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-left: 18.0pt; text-indent: -18.0pt; mso-list: l0 level1 lfo1; tab-stops: list 18.0pt;">&lt;!--[if !supportLists]--&gt;<span lang="EN-US">7.<span style="font: 7.0pt 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>&lt;!--[endif]--&gt;<span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">接下来进入最后一个步骤：</span></p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">破解文件：</span></p>
<p class="MsoNormal"><span lang="EN-US">&hellip;\Matlab2010a</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">破解版</span><span lang="EN-US">win7\crack</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019550557.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011102019551453.png" alt="" /></p>
<p class="MsoNormal"><span lang="EN-US"><br />&lt;!--[endif]--&gt;</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">结束语：如果是</span><span lang="EN-US">win7</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">下，这软件会有一个小毛病，就是在联网的时候很难启动（或启动慢），那么需要百度一下，谷歌一搜，下一个动态链接库文件（</span><span lang="EN-US">*.dll</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）</span><span lang="EN-US">.</span></p>
<p class="MsoNormal"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">在</span><span lang="EN-US">xp</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">下已验证没有这种问题，</span><span lang="EN-US">win2003</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">暂时也没发现这问题。</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>]]></description></item><item><title>KMP字符匹配算法+Romberg数值求积分+Simpson求积分</title><link>http://www.cnblogs.com/hanxi/archive/2011/10/18/2215999.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 17 Oct 2011 16:23:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/10/18/2215999.html</guid><description><![CDATA[<p>KMP字符匹配算法：（具体理论知识参见 严蔚敏的《数据结构（C语言版）》字符串那一章节）</p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">  1</span> <span style="color: #008000;">//</span><span style="color: #008000;">index_kmp.c<br /></span><span style="color: #008080;">  2</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">KPM搜索算法<br /></span><span style="color: #008080;">  3</span> <span style="color: #008000;"></span><span style="color: #008000;">//<br /></span><span style="color: #008080;">  4</span> <span style="color: #008000;"></span>#include &lt;stdio.h&gt;<br /><span style="color: #008080;">  5</span> #include &lt;<span style="color: #0000ff;">string</span>.h&gt;<br /><span style="color: #008080;">  6</span> <br /><span style="color: #008080;">  7</span> <span style="color: #008000;">//</span><span style="color: #008000;">---串的定长顺序存储表示－－－－－</span><span style="color: #008000;"><br /></span><span style="color: #008080;">  8</span> <span style="color: #008000;"></span><span style="color: #0000ff;">#define</span> MAXSTRLEN 255  <span style="color: #008000;">//</span><span style="color: #008000;">用户可在255以内定义最大串长</span><br /><span style="color: #008080;">  9</span> typedef unsigned <span style="color: #0000ff;">char</span> SString[MAXSTRLEN + <span style="color: #800080;">1</span>];<span style="color: #008000;">//</span><span style="color: #008000;">0号单元存放串的长度</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 10</span> <span style="color: #008000;"></span><br /><span style="color: #008080;"> 11</span> <span style="color: #0000ff;">int</span> index_KMP(SString S, SString T, <span style="color: #0000ff;">int</span> pos);<br /><span style="color: #008080;"> 12</span> <span style="color: #0000ff;">void</span> get_next(SString T, <span style="color: #0000ff;">int</span> next[]);<br /><span style="color: #008080;"> 13</span> <span style="color: #008000;">//</span><span style="color: #008000;">接收char * 类型的字符串，以便测试</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 14</span> <span style="color: #008000;"></span><span style="color: #0000ff;">int</span> get_index(<span style="color: #0000ff;">char</span> * Sstr, <span style="color: #0000ff;">char</span> * Tstr, <span style="color: #0000ff;">int</span> pos);<br /><span style="color: #008080;"> 15</span> <br /><span style="color: #008080;"> 16</span> <span style="color: #0000ff;">int</span> main()<br /><span style="color: #008080;"> 17</span> {<br /><span style="color: #008080;"> 18</span>     SString S = <span style="color: #800000;">"</span><span style="color: #800000;">xabcdefghijklmn</span><span style="color: #800000;">"</span>,<br /><span style="color: #008080;"> 19</span>             T = <span style="color: #800000;">"</span><span style="color: #800000;">xghi</span><span style="color: #800000;">"</span>;<br /><span style="color: #008080;"> 20</span>     <span style="color: #0000ff;">char</span> a[<span style="color: #800080;">2</span>] = <span style="color: #800000;">"</span><span style="color: #800000;">12</span><span style="color: #800000;">"</span>;<br /><span style="color: #008080;"> 21</span>     sprintf(a,<span style="color: #800000;">"</span><span style="color: #800000;">%c%c</span><span style="color: #800000;">"</span>,<span style="color: #800080;">15</span>,<span style="color: #800080;">3</span>);<br /><span style="color: #008080;"> 22</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">%c\n%c\n</span><span style="color: #800000;">"</span>,T[<span style="color: #800080;">0</span>],T[<span style="color: #800080;">1</span>]);<br /><span style="color: #008080;"> 23</span>     S[<span style="color: #800080;">0</span>] = a[<span style="color: #800080;">0</span>];<br /><span style="color: #008080;"> 24</span>     T[<span style="color: #800080;">0</span>] = a[<span style="color: #800080;">1</span>];<br /><span style="color: #008080;"> 25</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">S = %s\n</span><span style="color: #800000;">"</span>,&amp;S[<span style="color: #800080;">1</span>]);<br /><span style="color: #008080;"> 26</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">T = %s\n</span><span style="color: #800000;">"</span>,&amp;T[<span style="color: #800080;">1</span>]);<br /><span style="color: #008080;"> 27</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">S[0] = %d\n</span><span style="color: #800000;">"</span>,S[<span style="color: #800080;">0</span>]);<br /><span style="color: #008080;"> 28</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">T[0] = %d\n</span><span style="color: #800000;">"</span>,T[<span style="color: #800080;">0</span>]);<br /><span style="color: #008080;"> 29</span>     <span style="color: #0000ff;">int</span> index = index_KMP(S, T, <span style="color: #800080;">1</span>);<br /><span style="color: #008080;"> 30</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">k1 = %d\n</span><span style="color: #800000;">"</span>, index);<br /><span style="color: #008080;"> 31</span>     <span style="color: #0000ff;">char</span> * Sstr = <span style="color: #800000;">"</span><span style="color: #800000;">abcdefghijklmn</span><span style="color: #800000;">"</span>,<br /><span style="color: #008080;"> 32</span>          * Tstr = <span style="color: #800000;">"</span><span style="color: #800000;">ghi</span><span style="color: #800000;">"</span>;<br /><span style="color: #008080;"> 33</span>     index = get_index(Sstr, Tstr, <span style="color: #800080;">1</span>);<br /><span style="color: #008080;"> 34</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">k2 = %d\n</span><span style="color: #800000;">"</span>, index);<br /><span style="color: #008080;"> 35</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br /><span style="color: #008080;"> 36</span> }<br /><span style="color: #008080;"> 37</span> <br /><span style="color: #008080;"> 38</span> <span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 39</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">接收char * 类型的字符串，以便测试</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 40</span> <span style="color: #008000;"></span><span style="color: #0000ff;">int</span> get_index(<span style="color: #0000ff;">char</span> * Sstr, <span style="color: #0000ff;">char</span> * Tstr, <span style="color: #0000ff;">int</span> pos)<br /><span style="color: #008080;"> 41</span> {<br /><span style="color: #008080;"> 42</span>     SString S,T;<br /><span style="color: #008080;"> 43</span>     sprintf(S,<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>,strlen(S),Sstr);<br /><span style="color: #008080;"> 44</span>     sprintf(T,<span style="color: #800000;">"</span><span style="color: #800000;">%c%s</span><span style="color: #800000;">"</span>,strlen(T),Tstr);    <br /><span style="color: #008080;"> 45</span>     <span style="color: #0000ff;">return</span> index_KMP(S, T, <span style="color: #800080;">1</span>);<br /><span style="color: #008080;"> 46</span> }<br /><span style="color: #008080;"> 47</span> <br /><span style="color: #008080;"> 48</span> <span style="color: #0000ff;">int</span> index_KMP(SString S, SString T, <span style="color: #0000ff;">int</span> pos)<br /><span style="color: #008080;"> 49</span> {<br /><span style="color: #008080;"> 50</span>     <span style="color: #0000ff;">int</span> i = pos,<br /><span style="color: #008080;"> 51</span>         j = <span style="color: #800080;">1</span>;<br /><span style="color: #008080;"> 52</span>     <span style="color: #0000ff;">int</span> next[MAXSTRLEN + <span style="color: #800080;">1</span>];<br /><span style="color: #008080;"> 53</span>     get_next(T, next);<br /><span style="color: #008080;"> 54</span>     <span style="color: #0000ff;">while</span> (i &lt;= S[<span style="color: #800080;">0</span>] &amp;&amp; j &lt;= T[<span style="color: #800080;">0</span>])<br /><span style="color: #008080;"> 55</span>     {<br /><span style="color: #008080;"> 56</span>         <span style="color: #0000ff;">if</span> (j == <span style="color: #800080;">0</span> || S[i] == T[j])<br /><span style="color: #008080;"> 57</span>         {<br /><span style="color: #008080;"> 58</span>             ++i;<br /><span style="color: #008080;"> 59</span>             ++j;<br /><span style="color: #008080;"> 60</span>         }<br /><span style="color: #008080;"> 61</span>         <span style="color: #0000ff;">else</span><br /><span style="color: #008080;"> 62</span>         {<br /><span style="color: #008080;"> 63</span>             j = next[j];<span style="color: #008000;">//</span><span style="color: #008000;">不匹配，j回溯</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 64</span> <span style="color: #008000;"></span>        }<br /><span style="color: #008080;"> 65</span>     }<br /><span style="color: #008080;"> 66</span>     <span style="color: #0000ff;">if</span> (i &lt;= S[<span style="color: #800080;">0</span>])<br /><span style="color: #008080;"> 67</span>     {<br /><span style="color: #008080;"> 68</span>         <span style="color: #0000ff;">return</span> i-T[<span style="color: #800080;">0</span>];<br /><span style="color: #008080;"> 69</span>     }<br /><span style="color: #008080;"> 70</span>     <span style="color: #0000ff;">else</span><br /><span style="color: #008080;"> 71</span>     {<br /><span style="color: #008080;"> 72</span>         <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br /><span style="color: #008080;"> 73</span>     }<br /><span style="color: #008080;"> 74</span> }<br /><span style="color: #008080;"> 75</span> <span style="color: #0000ff;">void</span> get_next(SString T, <span style="color: #0000ff;">int</span> next[])<br /><span style="color: #008080;"> 76</span> {<br /><span style="color: #008080;"> 77</span>     <span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>,<br /><span style="color: #008080;"> 78</span>         j = <span style="color: #800080;">0</span>;<br /><span style="color: #008080;"> 79</span>     next[<span style="color: #800080;">1</span>] = <span style="color: #800080;">0</span>;<br /><span style="color: #008080;"> 80</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">T[0] = %d\n</span><span style="color: #800000;">"</span>,T[<span style="color: #800080;">0</span>]);<br /><span style="color: #008080;"> 81</span>     <span style="color: #0000ff;">while</span> (i &lt; T[<span style="color: #800080;">0</span>])<br /><span style="color: #008080;"> 82</span>     {<br /><span style="color: #008080;"> 83</span>         <span style="color: #0000ff;">if</span> (j == <span style="color: #800080;">0</span> || T[i] == T[j])<br /><span style="color: #008080;"> 84</span>         {<br /><span style="color: #008080;"> 85</span>             ++i;<br /><span style="color: #008080;"> 86</span>             ++j;<br /><span style="color: #008080;"> 87</span>             <span style="color: #0000ff;">if</span> (T[i] != T[j])<br /><span style="color: #008080;"> 88</span>             {<br /><span style="color: #008080;"> 89</span>                 next[i] = j;<br /><span style="color: #008080;"> 90</span>             }<br /><span style="color: #008080;"> 91</span>             <span style="color: #0000ff;">else</span><br /><span style="color: #008080;"> 92</span>             {<br /><span style="color: #008080;"> 93</span>                 next[i] = next[j];<br /><span style="color: #008080;"> 94</span>             }<br /><span style="color: #008080;"> 95</span>             printf(<span style="color: #800000;">"</span><span style="color: #800000;">%d : %d </span><span style="color: #800000;">"</span>,i,next[i]);<br /><span style="color: #008080;"> 96</span>         }<br /><span style="color: #008080;"> 97</span>         <span style="color: #0000ff;">else</span><br /><span style="color: #008080;"> 98</span>         {<br /><span style="color: #008080;"> 99</span>             j = next[j];<span style="color: #008000;">//</span><span style="color: #008000;">回溯查找匹配个数</span><span style="color: #008000;"><br /></span><span style="color: #008080;">100</span> <span style="color: #008000;"></span>        }<br /><span style="color: #008080;">101</span>     }<br /><span style="color: #008080;">102</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span>);<br /><span style="color: #008080;">103</span> }</pre>
</div>
<p>我是在Linux下平台完成的，所以写了个简单的makefile</p>
<div class="cnblogs_code">
<pre>obj = index_kmp.o<br /><br />index:$(obj)<br />    cc -o index $(obj)<br /><br />$(obj):index_kmp.c<br />    cc -c index_kmp.c<br /><br />clean:<br />    rm index index_kmp.o</pre>
</div>
<p></p>
<p>下面的两个代码是《数值分析》的内容，具体理论知识详见 求积分的那一章节</p>
<p><br class="Apple-interchange-newline" />Simpson求积分 <!--En--></p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #008000;">//</span><span style="color: #008000;">simpsom.c<br /></span><span style="color: #008080;"> 2</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">使用辛普森求积公式<br /></span><span style="color: #008080;"> 3</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">区间[a,b]分为n等分<br /></span><span style="color: #008080;"> 4</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">h=(b-a)/n;<br /></span><span style="color: #008080;"> 5</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">x(k)=a+k*h;<br /></span><span style="color: #008080;"> 6</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">x(k+1/2)=x(k)+h/2;<br /></span><span style="color: #008080;"> 7</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">Sn=(h/6)*( f(a) + 4*sum(f(x(k)＋1/2)) + 2*sum(f(x(k))) + f(b) );<br /></span><span style="color: #008080;"> 8</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">Rn =(-(b-a)/180 ) * (h/2)^4 * f''''(n)<br /></span><span style="color: #008080;"> 9</span> <span style="color: #008000;"></span><span style="color: #008000;">//<br /></span><span style="color: #008080;">10</span> <span style="color: #008000;"></span><br /><span style="color: #008080;">11</span> #include &lt;stdio.h&gt;<br /><span style="color: #008080;">12</span> #include &lt;math.h&gt;<br /><span style="color: #008080;">13</span> <br /><span style="color: #008080;">14</span> <span style="color: #0000ff;">float</span> simpson(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span> b, <span style="color: #0000ff;">int</span> n);<br /><span style="color: #008080;">15</span> <span style="color: #0000ff;">float</span> f(<span style="color: #0000ff;">float</span> x);<br /><span style="color: #008080;">16</span> <br /><span style="color: #008080;">17</span> <span style="color: #0000ff;">int</span> main()<br /><span style="color: #008080;">18</span> {<br /><span style="color: #008080;">19</span>     <span style="color: #0000ff;">float</span> a=<span style="color: #800080;">1</span>,b=<span style="color: #800080;">10</span>,n=<span style="color: #800080;">10</span>;<br /><span style="color: #008080;">20</span>     <span style="color: #0000ff;">float</span> Sn = simpson(a,b,n);<br /><span style="color: #008080;">21</span>     printf(<span style="color: #800000;">"</span><span style="color: #800000;">%f\n</span><span style="color: #800000;">"</span>, Sn);<br /><span style="color: #008080;">22</span> }<br /><span style="color: #008080;">23</span> <br /><span style="color: #008080;">24</span> <span style="color: #0000ff;">float</span> simpson(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span> b, <span style="color: #0000ff;">int</span> n)<br /><span style="color: #008080;">25</span> {<br /><span style="color: #008080;">26</span>     <span style="color: #0000ff;">float</span> h = (b-a)/n;<br /><span style="color: #008080;">27</span>     <span style="color: #0000ff;">float</span> sum4 = <span style="color: #800080;">0</span>,<span style="color: #008000;">//</span><span style="color: #008000;">序数为4的求和项</span><span style="color: #008000;"><br /></span><span style="color: #008080;">28</span> <span style="color: #008000;"></span>          sum2 = <span style="color: #800080;">0</span>;<span style="color: #008000;">//</span><span style="color: #008000;">序数为2的求和项</span><span style="color: #008000;"><br /></span><span style="color: #008080;">29</span> <span style="color: #008000;"></span>    <span style="color: #0000ff;">float</span> xk = a,<br /><span style="color: #008080;">30</span>           xk2 = xk + h/<span style="color: #800080;">2</span>;<br /><span style="color: #008080;">31</span>     sum4 = f(xk2);<br /><span style="color: #008080;">32</span>     <span style="color: #0000ff;">int</span> k;<br /><span style="color: #008080;">33</span>     <span style="color: #0000ff;">for</span> (k=<span style="color: #800080;">1</span>; k &lt;= n-<span style="color: #800080;">1</span>; k++)<br /><span style="color: #008080;">34</span>     {<br /><span style="color: #008080;">35</span>         xk = a + k*h;<br /><span style="color: #008080;">36</span>         xk2 = xk + h/<span style="color: #800080;">2</span>;<br /><span style="color: #008080;">37</span>         sum4 += f(xk2);<br /><span style="color: #008080;">38</span>         sum2 += f(xk);<br /><span style="color: #008080;">39</span>     }<br /><span style="color: #008080;">40</span>     sum4 *= <span style="color: #800080;">4</span>;<br /><span style="color: #008080;">41</span>     sum2 *= <span style="color: #800080;">2</span>;<br /><span style="color: #008080;">42</span>     <span style="color: #0000ff;">float</span> Sn = (h/<span style="color: #800080;">6</span>) * (f(a) + sum4 + sum2 + f(b));<br /><span style="color: #008080;">43</span>     <span style="color: #0000ff;">return</span> Sn;<br /><span style="color: #008080;">44</span> }<br /><span style="color: #008080;">45</span> <br /><span style="color: #008080;">46</span> <span style="color: #008000;">//</span><span style="color: #008000;">被积函数</span><span style="color: #008000;"><br /></span><span style="color: #008080;">47</span> <span style="color: #008000;"></span><span style="color: #0000ff;">float</span> f(<span style="color: #0000ff;">float</span> x)<br /><span style="color: #008080;">48</span> {<br /><span style="color: #008080;">49</span>   <span style="color: #0000ff;">return</span> x*x*x;<br /><span style="color: #008080;">50</span> }</pre>
</div>
<p></p>
<p>Romberg数值求积分</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span>//<span style="direction: ltr;">Romberg.c</span></pre>
<pre><span style="color: #008080;"> 2</span> <span style="color: #008000;">//</span><span style="color: #008000;">使用龙贝格算法求积分<br /></span><span style="color: #008080;"> 3</span> <span style="color: #008000;"></span><span style="color: #008000;">//<br /></span><span style="color: #008080;"> 4</span> <span style="color: #008000;"></span><br /><span style="color: #008080;"> 5</span> #include &lt;stdio.h&gt;<br /><span style="color: #008080;"> 6</span> #include &lt;math.h&gt;<br /><span style="color: #008080;"> 7</span> #include &lt;stdlib.h&gt;<br /><span style="color: #008080;"> 8</span> <br /><span style="color: #008080;"> 9</span> <span style="color: #008000;">//</span><span style="color: #008000;">T[k][m]表示积分表</span><span style="color: #008000;"><br /></span><span style="color: #008080;">10</span> <span style="color: #008000;"></span><span style="color: #0000ff;">float</span> * romberg(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span> b, <span style="color: #0000ff;">int</span> k, <span style="color: #0000ff;">int</span> m, <span style="color: #0000ff;">float</span> (* f)(<span style="color: #0000ff;">float</span> x));<br /><span style="color: #008080;">11</span> <span style="color: #008000;">//</span><span style="color: #008000;">测试函数</span><span style="color: #008000;"><br /></span><span style="color: #008080;">12</span> <span style="color: #008000;"></span><span style="color: #0000ff;">float</span> f(<span style="color: #0000ff;">float</span> x);<br /><span style="color: #008080;">13</span> <br /><span style="color: #008080;">14</span> <span style="color: #008000;">//</span><span style="color: #008000;">测试函数</span><span style="color: #008000;"><br /></span><span style="color: #008080;">15</span> <span style="color: #008000;"></span><span style="color: #0000ff;">float</span> f(<span style="color: #0000ff;">float</span> x)<br /><span style="color: #008080;">16</span> {<br /><span style="color: #008080;">17</span>     <span style="color: #0000ff;">return</span> pow(x,<span style="color: #800080;">1.5</span>);<br /><span style="color: #008080;">18</span> }<br /><span style="color: #008080;">19</span> <br /><span style="color: #008080;">20</span> <br /><span style="color: #008080;">21</span> <span style="color: #0000ff;">int</span> main()<br /><span style="color: #008080;">22</span> {<br /><span style="color: #008080;">23</span>     <span style="color: #0000ff;">float</span> a = <span style="color: #800080;">0</span>, b = <span style="color: #800080;">1</span>;<br /><span style="color: #008080;">24</span>     <span style="color: #0000ff;">int</span> k = <span style="color: #800080;">6</span>, m = <span style="color: #800080;">6</span>;<br /><span style="color: #008080;">25</span>     <span style="color: #0000ff;">float</span> * T = romberg(a,b,k,m,f);<br /><span style="color: #008080;">26</span>     <span style="color: #0000ff;">int</span> i,j;<br /><span style="color: #008080;">27</span>     <span style="color: #0000ff;">for</span> (i = <span style="color: #800080;">0</span>; i&lt;k; i++)<br /><span style="color: #008080;">28</span>     {<br /><span style="color: #008080;">29</span>         printf(<span style="color: #800000;">"</span><span style="color: #800000;">k=</span><span style="color: #800000;">"</span>);<br /><span style="color: #008080;">30</span>         <span style="color: #0000ff;">for</span> (j = <span style="color: #800080;">0</span>; j&lt;=i; j++)<br /><span style="color: #008080;">31</span>         {<br /><span style="color: #008080;">32</span>             printf(<span style="color: #800000;">"</span><span style="color: #800000;">%d  %f  </span><span style="color: #800000;">"</span>,i,T[i*m+j]);<br /><span style="color: #008080;">33</span>         }<br /><span style="color: #008080;">34</span>         printf(<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span>);        <br /><span style="color: #008080;">35</span>     }<br /><span style="color: #008080;">36</span>     free(T);<br /><span style="color: #008080;">37</span>     T = NULL;<br /><span style="color: #008080;">38</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br /><span style="color: #008080;">39</span> }<br /><span style="color: #008080;">40</span> <br /><span style="color: #008080;">41</span> <span style="color: #008000;">//</span><span style="color: #008000;">T[k][m]表示积分表</span><span style="color: #008000;"><br /></span><span style="color: #008080;">42</span> <span style="color: #008000;"></span><span style="color: #0000ff;">float</span> * romberg(<span style="color: #0000ff;">float</span> a, <span style="color: #0000ff;">float</span> b, <span style="color: #0000ff;">int</span> k, <span style="color: #0000ff;">int</span> m, <span style="color: #0000ff;">float</span> (* f)(<span style="color: #0000ff;">float</span> x))<br /><span style="color: #008080;">43</span> {<br /><span style="color: #008080;">44</span>     <span style="color: #0000ff;">float</span> * T;<br /><span style="color: #008080;">45</span>     T = (<span style="color: #0000ff;">float</span> *)malloc(k*m*<span style="color: #0000ff;">sizeof</span>(<span style="color: #0000ff;">float</span>));<br /><span style="color: #008080;">46</span>     T[<span style="color: #800080;">0</span>] = (b-a)*(f(a) + f(b))/<span style="color: #800080;">2</span>;<br /><span style="color: #008080;">47</span>     <span style="color: #0000ff;">int</span> kk;<br /><span style="color: #008080;">48</span>     <span style="color: #0000ff;">for</span> (kk = <span style="color: #800080;">1</span>; kk &lt;= k; kk++)<br /><span style="color: #008080;">49</span>     {<br /><span style="color: #008080;">50</span>         <span style="color: #0000ff;">int</span> j;<br /><span style="color: #008080;">51</span>         <span style="color: #0000ff;">float</span> sum = <span style="color: #800080;">0</span>;        <br /><span style="color: #008080;">52</span>         <span style="color: #0000ff;">for</span> (j = <span style="color: #800080;">0</span>; j &lt;= pow(<span style="color: #800080;">2.0</span>,kk-<span style="color: #800080;">1</span>) - <span style="color: #800080;">1</span>; j++)<br /><span style="color: #008080;">53</span>         {<br /><span style="color: #008080;">54</span>             sum += f(a + (<span style="color: #800080;">2</span>*j+<span style="color: #800080;">1</span>)*(b-a)/pow(<span style="color: #800080;">2.0</span>,kk));<br /><span style="color: #008080;">55</span>         }<br /><span style="color: #008080;">56</span>         sum *= (b-a)/pow(<span style="color: #800080;">2.0</span>,kk);<br /><span style="color: #008080;">57</span>         <span style="color: #008000;">//</span><span style="color: #008000;">printf("%f\n", sum);</span><span style="color: #008000;"><br /></span><span style="color: #008080;">58</span> <span style="color: #008000;"></span>        T[kk*m+<span style="color: #800080;">0</span>] = T[(kk-<span style="color: #800080;">1</span>)*m+<span style="color: #800080;">0</span>]/<span style="color: #800080;">2</span> + sum;<br /><span style="color: #008080;">59</span>         <span style="color: #0000ff;">int</span> mm;<br /><span style="color: #008080;">60</span>         <span style="color: #0000ff;">for</span> (mm = <span style="color: #800080;">1</span>; mm &lt;= m; mm++)<br /><span style="color: #008080;">61</span>         {<br /><span style="color: #008080;">62</span>             T[kk*m+mm] = (pow(<span style="color: #800080;">4.0</span>,mm)*T[kk*m+mm-<span style="color: #800080;">1</span>] - T[(kk-<span style="color: #800080;">1</span>)*m+mm-<span style="color: #800080;">1</span>]) / (pow(<span style="color: #800080;">4.0</span>,mm) - <span style="color: #800080;">1</span>);<br /><span style="color: #008080;">63</span>         }<br /><span style="color: #008080;">64</span> <br /><span style="color: #008080;">65</span>     }<br /><span style="color: #008080;">66</span>     <span style="color: #0000ff;">return</span> T;<br /><span style="color: #008080;">67</span> }</pre>
</div>
<p>makefile 还是很好用的</p>
<div class="cnblogs_code">
<pre>Romberg: Romberg.o<br />    cc -lm -o Romberg<br />Romberg.o: Romberg.c<br />    cc -c Romberg.c<br />clean:<br />    rm *.o Romberg</pre>
</div>
<p><br /><br /></p>
<p>以上代码均在GCC下编译运行通过。<br /><br /></p>]]></description></item><item><title>打印菱形的笨方法</title><link>http://www.cnblogs.com/hanxi/archive/2011/09/07/2170244.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 07 Sep 2011 12:30:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/09/07/2170244.html</guid><description><![CDATA[<p>算法：</p>
<p>1.x=3，y=1；</p>
<p>2.打印第一行，x个空格，y个星；</p>
<p>3.x=x-1;y=y+2;</p>
<p>4.while 未到第五行 goto 2；否则goto 5；</p>
<p>5.x=x+1;y=y-2；</p>
<p>6.打印到最后；</p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n</span><span style="color: #000000;">=</span><span style="color: #800080;">7</span><span style="color: #000000;">;<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x</span><span style="color: #000000;">=</span><span style="color: #800080;">3</span><span style="color: #000000;">, y</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j,k;<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">4</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;=</span><span style="color: #000000;">x; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />      cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;"> </span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; k</span><span style="color: #000000;">&lt;=</span><span style="color: #000000;">y; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />      cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">*</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    }<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    x</span><span style="color: #000000;">-=</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    y</span><span style="color: #000000;">+=</span><span style="color: #800080;">2</span><span style="color: #000000;">;<br />  }<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">4</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    x</span><span style="color: #000000;">+=</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    y</span><span style="color: #000000;">-=</span><span style="color: #800080;">2</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;=</span><span style="color: #000000;">x; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />      cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;"> </span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; k</span><span style="color: #000000;">&lt;=</span><span style="color: #000000;">y; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />      cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">*</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    }<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />  }<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></pre>
</div>
<p>　　运行结果：</p>
<p>&nbsp; *</p>
<p>&nbsp;***</p>
<p>*****</p>
<p>*****</p>
<p>&nbsp;***</p>
<p>&nbsp; *</p>
<p></p>
<p></p>]]></description></item><item><title>dos命令集--江南技术联盟</title><link>http://www.cnblogs.com/hanxi/archive/2011/08/19/2145264.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 19 Aug 2011 00:59:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/08/19/2145264.html</guid><description><![CDATA[<p>&nbsp; &nbsp; 前言：你想成为黑客？与其苦思冥想，与其天天研究盗号、刷钻做一些没有意义的事情，到不如学习真本事。虽然DOS命令没有鼠标点击那么有简单，但是它却比你使用鼠标更加专业，更加便捷。试想一下用鼠标3分钟操作某项功能，而用DOS命令或许仅仅10秒钟。学不学看自己了。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;--------------------JN.鸟人</p>
<p><span style="color: #0000ff;">声明：此文由 &ldquo;JN.鸟人&rdquo;撰写，转载请注明出处。</span></p>
<p><span style="color: #0000ff;">QQ交流群：85685188（三群）</span></p>
<p><span style="color: #0000ff;">yy交流频道：268593</span></p>
<p>&nbsp;</p>
<p>一）MD&mdash;&mdash;建立子目录 　</p>
<p>1．功能：创建新的子目录　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：MD[盘符：][路径名]〈子目录名〉　</p>
<p>4．使用说明：　</p>
<p>（1）&ldquo;盘符&rdquo;：指定要建立子目录的磁盘驱动器字母，若省略，则为当前驱动器；　</p>
<p>（2）&ldquo;路径名&rdquo;：要建立的子目录的上级目录名，若缺省则建在当前目录下。　</p>
<p>例：（1）在C盘的根目录下创建名为niaoren的子目录；（2）在niaoren子目录下再创建USER子目录。　</p>
<p>C：、＞MD niaoren （在当前驱动器C盘下创建子目录niaoren）　</p>
<p>C：、＞MD niaoren\USER （在niaoren 子目录下再创建USER子目录）　</p>
<p>（二）CD&mdash;&mdash;改变当前目录　</p>
<p>1．功能：显示当前目录　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：CD[盘符：][路径名][子目录名]　</p>
<p>4．使用说明：　</p>
<p>（1）如果省略路径和子目录名则显示当前目录；　</p>
<p>（2）如采用&ldquo;CD \&rdquo;格式，则退回到根目录；　</p>
<p>（3）如采用&ldquo;CD ..&rdquo;格式则退回到上一级目录。　</p>
<p>例：（1）进入到USER子目录；（2）从USER子目录退回到子目录；（3）返回到根目录。　</p>
<p>C:、＞CD niaoren 、USER（进入niaoren子目录下的USER子目录）　</p>
<p>C:、niaoren、USER＞CD.。 （退回上一级根目录）　</p>
<p>C：、niaoren＞CD、 （返回到根目录）　</p>
<p>C：、＞　</p>
<p>（三）RD&mdash;&mdash;删除子目录命令　</p>
<p>1．功能：从指定的磁盘删除了目录。　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：RD[盘符：][路径名][子目录名]　</p>
<p>4．使用说明：　</p>
<p>（1）子目录在删除前必须是空的，也就是说需要先进入该子目录，使用DEL（删除文件的命令）将其子目录下的文件删空，然后再退回到上一级目录，用RD命令删除该了目录本身；　</p>
<p>（2）不能删除根目录和当前目录。　</p>
<p>例：要求把C盘niaoren子目录下的USER子目录删除，操作如下：　</p>
<p>第一步：先将USER子目录下的文件删空；　</p>
<p>C、＞DEL C：、niaoren、USER、*。*　</p>
<p>第二步，删除USER子目录。　</p>
<p>C、＞RD C:\niaoren\USER　</p>
<p>（四）DIR&mdash;&mdash;显示磁盘目录命令　</p>
<p>1．功能：显示磁盘目录的内容。　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：DIR [盘符][路径][/P][/W]　</p>
<p>4．</p>
<p>使用说明：/P的使用；当欲查看的目录太多，无法在一屏显示完屏幕会一直往上卷，不容易看清，加上/P参数后，屏幕上会分面一次显示23行的文件信息，然后暂停，并提示；Press</p>
<p>any key to continue　</p>
<p>/W的使用：加上/W只显示文件名，至于文件大小及建立的日期和时间则都省略。加上参数后，每行可以显示五个文件名。　</p>
<p>PATH&mdash;&mdash;路径设置命令　</p>
<p>1．功能：设备可执行文件的搜索路径，只对文件有效。　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：PATH[盘符1]目录[路径名1]{[；盘符2：]，〈目录路径名2〉&hellip;}　</p>
<p>4．使用说明：　</p>
<p>（1）当运行一个可执行文件时，DOS会先在当前目录中搜索该文件，若找到则运行之；若找不到该文件，则根据PATH命令所设置的路径，顺序逐条地到目录中搜索该文件；　</p>
<p>（2）PATH命令中的路径，若有两条以上，各路径之间以一个分号&ldquo;；&rdquo;隔开；　</p>
<p>（3）PATH命令有三种使用方法：　</p>
<p>PATH[盘符1：][路径1][盘符2：][路径2]&hellip;（设定可执行文件的搜索路径）　 PATH：（取消所有路径）　</p>
<p>PATH：（显示目前所设的路径）　</p>
<p>（六）TREE&mdash;&mdash;显示磁盘目录结构命令　</p>
<p>1．功能：显示指定驱动器上所有目录路径和这些目录下的所有文件名。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：TREE[盘符：][/F][&gt;PRN]　</p>
<p>4．使用说明：　</p>
<p>（1）使用/F参数时显示所有目录及目录下的所有文件，省略时，只显示目录，不显示目录下的文件；　</p>
<p>（2）选用＞PRN参数时，则把所列目录及目录中的文件名打印输出。　</p>
<p>（七）DELTREE&mdash;&mdash;删除整个目录命令　</p>
<p>1．功能：将整个目录及其下属子目录和文件删除。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：DELTREE[盘符：]〈路径名〉　</p>
<p>4．使用说明：该命令可以一步就将目录及其下的所有文件、子目录、更下层的子目录一并删除，而且不管文件的属性为隐藏、系统或只读，只要该文件位于删除的目录之下，DELTREE都一视同仁，照删不误。使用时务必小心！！！　</p>
<p>五、磁盘操作类命令　</p>
<p>（一）formAT&mdash;&mdash;磁盘格式化命令　</p>
<p>1．功能：对磁盘进行格式化，划分磁道和扇区；同时检查出整个磁盘上有无带缺陷的磁道，对坏道加注标记；建立目录区和文件分配表，使磁盘作好接收DOS的准备。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：formAT〈盘符：〉[/S][/4][/Q]　</p>
<p>4．使用说明：　</p>
<p>（1）命令后的盘符不可缺省，若对硬盘进行格式化，则会如下列提示：WARNING:ALL DATA ON NON</p>
<p>&mdash;&mdash;REMOVABLE DISK　</p>
<p>DRIVE C:WILL BE LOST ！　</p>
<p>Proceed with format (Y/N)？　</p>
<p>（警告：所有数据在C盘上，将会丢失，确实要继续格式化吗？）　</p>
<p>（2）若是对软盘进行格式化，则会如下提示：Insert mew diskette for drive A;　</p>
<p>and press ENTER when ready&hellip;　</p>
<p>（在A驱中插入新盘，准备好后按回车键）。　</p>
<p>（3）选用[/S]参数，将把DOS系统文件IO.SYS</p>
<p>、MSDOS.SYS及COMMAND.COM复制到磁盘上，使该磁盘可以做为DOS启动盘。若不选用/S参数，则格式化后的磙盘只能读写信息，而不能做为启动盘；　</p>
<p>（4）选用[/4]参数，在1.2MB的高密度软驱中格式化360KB的低密度盘；　</p>
<p>（5）选用[/Q]参数，快速格式化，这个参数并不会重新划分磁盘的磁道貌岸然和扇区，只能将磁盘根目录、文件分配表以及引导扇区清成空白，因此，格式化的速度较快。　</p>
<p>（6）选用[/U]参数，表示无条件格式化，即破坏原来磁盘上所有数据。不加/U，则为安全格式化，这时先建立一个镜象文件保存原来的FAT表和根目录，必要时可用UNFORRMAT恢复原来的数据。　</p>
<p>（二）UNformAT恢复格式化命令　</p>
<p>1．功能：对进行过格式化误操作丢失数据的磁盘进行恢复。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：UNformAT〈盘符〉[/L][/U][/P][/TEST]　</p>
<p>4．使用说明：用于将被&ldquo;非破坏性&rdquo;格式化的磁盘恢复。根目录下被删除的文件或子目录及磁盘的系统扇区（包括FAT、根目录、BOOT扇区及硬盘分区表）受损时，也可以用UNformAT来抢救。　</p>
<p>（1）选用/L参数列出找到的子目录名称、文件名称、大孝日期等信息，但不会真的做formAT工作。　</p>
<p>（2）选用/P参数将显示于屏幕的报告（包含/L参数所产生的信息）同时也送到打印机。运行时屏幕会显示：&ldquo;Print out will</p>
<p>be sent to LPT1&rdquo;　</p>
<p>（3）选用/TEST参数只做模拟试验（TEST）不做真正的写入动作。使用此参数屏幕会显示：&ldquo;Simulation only&rdquo;　</p>
<p>（4）选用/U参数不使用MIRROR映像文件的数据，直接根据磁盘现状进行UNformAT。　</p>
<p>（5）选用/PSRTN；修复硬盘分区表。　</p>
<p>若在盘符之后加上/P、/L、/TEST之一，都相当于使用了/U参数，UNformAT会&ldquo;假设&rdquo;此时磁盘没有MIRROR映像文件。　</p>
<p>注意：UNformAT对于刚formAT的磁盘，可以完全恢复，但formAT后若做了其它数据的写入，则UNformAT就不能完整的救回数据了。UNformAT并非是万能的，由于使用UNformAT会重建FAT与根目录，所以它也具有较高的危险性，操作不当可能会扩大损失，如果仅误删了几个文件或子目录，只需要利用UNDELETE就够了。</p>
<p>三） CHKDSK&mdash;&mdash;检查磁盘当前状态命令　</p>
<p>1．功能：显示磁盘状态、内存状态和指定路径下指定文件的不连续数目。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：CHKDSK [盘符：][路径][文件名][/F][/V]　</p>
<p>4．使用说明：　</p>
<p>（1）选用[文件名]参数，则显示该文件占用磁盘的情况；　</p>
<p>（2）选[/F]参数，纠正在指定磁盘上发现的逻辑错误；　</p>
<p>（3）选用[/V]参数，显示盘上的所有文件和路径。　</p>
<p>（四）DISKCOPY&mdash;&mdash;整盘复制命令　</p>
<p>1．功能：复制格式和内容完全相同的软盘。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：DISKCOPY[盘符1：][盘符2：]　</p>
<p>4．使用说明：　</p>
<p>（1）如果目标软盘没有格式化，则复制时系统自动选进行格式化。　</p>
<p>（2）如果目标软盘上原有文件，则复制后将全部丢失。　</p>
<p>（3）如果是单驱动器复制，系统会提示适时更换源盘和目标盘，请操作时注意分清源盘和目标盘。　</p>
<p>（五）LABEL&mdash;&mdash;建立磁盘卷标命令　</p>
<p>1．功能：建立、更改、删除磁盘卷标。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：LABEL[盘符：][卷标名]　</p>
<p>4．使用说明：　</p>
<p>（1）卷标名为要建立的卷标名，若缺省此参数，则系统提示键入卷标名或询问是否删除原有的卷标名；　</p>
<p>（2）卷标名由1至11个字符组成。　</p>
<p>（六）VOL&mdash;&mdash;显示磁盘卷标命令　</p>
<p>1．功能：查看磁盘卷标号。　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：VOL[盘符：]　</p>
<p>4．使用说明：省略盘符，显示当前驱动器卷标。　</p>
<p>（七）SCANDISK&mdash;&mdash;检测、修复磁盘命令　</p>
<p>1．功能：检测磁盘的FAT表、目录结构、文件系统等是否有问题，并可将检测出的问题加以修复。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：SCANDISK[盘符1：]{[盘符2：]&hellip;}[/ALL]　</p>
<p>4．使用说明：　</p>
<p>（1）CCANDISK适用于硬盘和软盘，可以一次指定多个磁盘或选用[/ALL]参数指定所有的磁盘；　</p>
<p>（2）可自动检测出磁盘中所发生的交叉连接、丢失簇和目录结构等逻辑上的错误，并加以修复。　</p>
<p>（八）DEFRAG&mdash;&mdash;重整磁盘命令　</p>
<p>1．。功能：整理磁盘，消除磁盘碎块。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：DEFRAG[盘符：][/F]　</p>
<p>4．使用说明：选用/F参数，将文件中存在盘上的碎片消除，并调整磁盘文件的安排，确保文件之间毫无空隙。从而加快读盘速度和节省磁盘空间。　</p>
<p>（九）SYS&mdash;&mdash;系统复制命令　</p>
<p>1．功能：将当前驱动器上的DOS系统文件IO.SYS,MSDOS.SYS和COMMAND.COM 传送到指定的驱动器上。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：SYS[盘符：]　</p>
<p>*使用说明：如果磁盘剩余空间不足以存放系统文件，则提示：No roomfor on destination disk.　</p>
<p>&nbsp;</p>
<p>文件操作类命令　</p>
<p>（一） COPY文件复制命令　</p>
<p>1．功能：拷贝一个或多个文件到指定盘上。　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：COPY [源盘][路径]〈源文件名〉[目标盘][路径][目标文件名]　</p>
<p>4．使用说明：　</p>
<p>（1）COPY是文件对文件的方式复制数据，复制前目标盘必须已经格式化；　</p>
<p>（2）复制过程中，目标盘上相同文件名称的旧文件会被源文件取代；　</p>
<p>（3）复制文件时，必须先确定目标般有足够的空间，否则会出现；insufficient的错误信息，提示磁盘空间不够；　</p>
<p>（4）文件名中允许使用通配举&ldquo;*&rdquo;&ldquo;？&rdquo;，可同时复制多个文件；　</p>
<p>（5）COPY命令中源文件名必须指出，不可以省略。　</p>
<p>（6）复制时，目标文件名可以与源文件名相同，称作&ldquo;同名拷贝&rdquo;此时目标文件名可以省略；　</p>
<p>（7）复制时，目标文件名也可以与源文件名不相同，称作&ldquo;异名拷贝&rdquo;，此时，目标文件名不能省略；　</p>
<p>（8）复制时，还可以将几个文件合并为一个文件，称为&ldquo;合并拷贝&rdquo;，格式如下：COPY；[源盘][路径]〈源文件名1〉〈源文件名2〉&hellip;[目标盘][路径]〈目标文件名〉；　</p>
<p>（9）利用COPY命令，还可以从键盘上输入数据建立文件，格式如下：COPY CON [盘符：][路径]〈文件名〉；　</p>
<p>（10）注意：COPY命令的使用格式，源文件名与目标文件名之间必须有空格！　</p>
<p>（二）XCOPY&mdash;&mdash;目录复制命令　</p>
<p>1．功能：复制指定的目录和目录下的所有文件连同目录结构。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：XCOPY [源盘：]〈源路径名〉[目标盘符：][目标路径名][/S][/V][/E]　</p>
<p>4．使用说明：　</p>
<p>（1）XCOPY是COPY的扩展，可以把指定的目录连文件和目录结构一并拷贝，但不能拷贝隐藏文件和系统文件；　</p>
<p>（2）使用时源盘符、源目标路径名、源文件名至少指定一个；　</p>
<p>（3）选用/S时对源目录下及其子目录下的所有文件进行COPY。除非指定/E参数，否则/S不会拷贝空目录，若不指定/S参数，则XCOPY只拷贝源目录本身的文件，而不涉及其下的子目录；　</p>
<p>（4）选用/V参数时，对的拷贝的扇区都进行较验，但速度会降低。　</p>
<p>（三）TYPE&mdash;&mdash;显示文件内容命令　</p>
<p>1．功能：显示ASCII码文件的内容。　</p>
<p>2．类型：内部命令。　</p>
<p>3．格式：TYPE[盘符：][路径]〈文件名〉　</p>
<p>4．使用说明：　</p>
<p>（1）显示由ASCII码组成的文本文件，对。EXE.COM等为扩展名的文件，其显示的内容是无法阅读的，没有实际意义2；　</p>
<p>（2）该命令一次只可以显示一个文件的内容，不能使用通配符；　</p>
<p>（3）如果文件有扩展名，则必须将扩展名写上；　</p>
<p>（4）当文件较长，一屏显示不下时，可以按以下格式显示；TYPE[盘符：][路径]〈文件名〉|MORE，MORE为分屏显示命令，使用些参数后当满屏时会暂停，按任意键会继续显示。　</p>
<p>（5）若需将文件内容打印出来，可用如下格式：　</p>
<p>TYPE[盘符：][路径]〈文件名〉，＞PRN　</p>
<p>此时，打印机应处于联机状态。　</p>
<p>（四） REN&mdash;&mdash;文件改名命令　</p>
<p>1．功能：更改文件名称　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：REN[盘符：][路径]〈旧文件名〉〈新文件名〉　</p>
<p>4．使用说明：　</p>
<p>（1）新文件名前不可以加上盘符和路径，因为该命令只能对同一盘上的文件更换文件名；　</p>
<p>（2）允许使用通配符更改一组文件名或扩展名。　</p>
<p>（五）FC&mdash;&mdash;文件比较命令　</p>
<p>1．功能：比较文件的异同，并列出差异处。　</p>
<p>2．类型：外部命令　</p>
<p>3．格式：FC[盘符：][路径名]〈文件名〉[盘符：][路径名][文件名][/A][/B][/C][/N]　</p>
<p>4．使用说明：　</p>
<p>（1）选用/A参数，为ASCII码比较模式；　</p>
<p>（2）选用/B参数，为二进制比较模式；　</p>
<p>（3）选用/C参数，将大小写字符看成是相同的字符。　</p>
<p>（4）选用/N参数，在ASCII码比较方式下，显示相异处的行号。　</p>
<p>（六）ATTRIB&mdash;&mdash;修改文件属性命令　</p>
<p>1．功能：修改指定文件的属性。（文件属性参见2.5.4（二）文件属性一节）　</p>
<p>2．类型：外部命令。　</p>
<p>3．格式：ATTRIB[文件名][R][&mdash;&mdash;R][A][&mdash;&mdash;A][H][&mdash;&mdash;H][&mdash;&mdash;S]　</p>
<p>4．使用说明：　</p>
<p>（1）选用R参数，将指定文件设为只读属性，使得该文件只能读取，无法写入数据或删除；选用&mdash;&mdash;R参数，去除只读属性；　</p>
<p>（2）选用A参数，将文件设置为档案属性；选用&mdash;&mdash;A参数，去除档案属性；　 （3）选用H参数，将文件调协为隐含属性；选用&mdash;&mdash;H参数，去隐含属性；　</p>
<p>（4）选用S参数，将文件设置为系统属性；选用&mdash;&mdash;S参数，去除系统属性；　 （5）选用/S参数，对当前目录下的所有子目录及作设置。　</p>
<p>七） DEL&mdash;&mdash;删除文件命令　</p>
<p>1．功能：删除指定的文件。　</p>
<p>2．类型：内部命令　</p>
<p>3．格式：DEL[盘符：][路径]〈文件名〉[/P]　</p>
<p>4．使用说明：　</p>
<p>（1）选用/P参数，系统在删除前询问是否真要删除该文件，若不使用这个参数，则自动删除；　</p>
<p>（2）该命令不能删除属性为隐含或只读的文件；</p>
<p>（3）在文件名称中可以使用通配符；</p>
<p>（4）若要删除磁盘上的所有文件（DEL*&middot;*或DEL&middot;），则会提示：(Arey ou sure？）（你确定吗？）若回答Y，则进行删除，回答N，则取消此次删除作业。</p>
<p>&nbsp; （八） UNDELETE&mdash;&mdash;恢复删除命令</p>
<p>&nbsp; 1．功能：恢复被误删除命令</p>
<p>&nbsp; 2．类型：外部命令。</p>
<p>&nbsp; 3．格式：UNDELETE[盘符：][路径名]〈文件名〉[/DOS]/LIST][/ALL]</p>
<p>&nbsp; 4．使用说明：使用UNDELETE可以使用&ldquo;*&rdquo;和&ldquo;？&rdquo;通配符。</p>
<p>&nbsp; （1）选用/DOS参数根据目录里残留的记录来恢复文件。由于文件被删除时，目录所记载斩文件名第一个字符会被改为E5，DOS即依据文件开头的E5和其后续的字符来找到欲恢复的文件，所以，UNDELETE会要求用户输入一个字符，以便将文件名字补齐。但此字符不必和原来的一样，只需符合DOS的文件名规则即可。</p>
<p>&nbsp; （2）选用/LIST只&ldquo;列出&rdquo;符合指定条件的文件而不做恢复，所以对磁盘内容完全不会有影响。</p>
<p>&nbsp; （3）选用/ALL自动将可完全恢复的文件完全恢复，而不一一地询问用户，使用此参数时，若UNDELTE利用目录里残留的记录来将文件恢复，则会自动选一个字符将文件名补齐，并且使其不与现存文件名相同，选用字符的优选顺序为：#%&mdash;&mdash;0000123456789A~Z。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp; &nbsp; UNDELETE还具有建立文件的防护措施的功能，已超出本课程授课范围，请读者在使用些功能时查阅有关DOS手册。</p>
<p>&nbsp;</p>
<p>&nbsp; 七、其它命令</p>
<p>&nbsp; （一）CLS&mdash;&mdash;清屏幕命令</p>
<p>&nbsp; 1功能：清除屏幕上的所有显示，光标置于屏幕左上角。</p>
<p>&nbsp; 2类型：内部命令</p>
<p>&nbsp; 3格式：CLS</p>
<p>&nbsp; （二） VER查看系统版本号命令</p>
<p>&nbsp; 1功能：显示当前系统版本号</p>
<p>&nbsp; 2类型：内部命令</p>
<p>&nbsp; 3格式：VER</p>
<p>&nbsp; （三） DATA日期设置命令</p>
<p>&nbsp; 1功能：设置或显示系统日期。</p>
<p>&nbsp; 2类型：内部命令</p>
<p>&nbsp; 3格式：DATE[mm&mdash;&mdash;dd&mdash;&mdash;yy]</p>
<p>&nbsp; 4使用说明：</p>
<p>&nbsp; （1）省略[mm&mdash;&mdash;dd&mdash;&mdash;yy]显示系统日期并提示输入新的日期，不修改则可直接按回车键，[mm&mdash;&mdash;dd&mdash;&mdash;yy]为&ldquo;月月&mdash;&mdash;日日&mdash;&mdash;年年&rdquo;格式；</p>
<p>&nbsp; （2）当机器开始启动时，有自动处理文件（AUTOEXEC.BAT）被执行，则系统不提示输入系统日期。否则，提示输入新日期和时间。</p>
<p>&nbsp; （四） TIME系统时钟设置命令</p>
<p>&nbsp; 1功能：设置或显示系统时期。</p>
<p>&nbsp; 2类型：内部命令</p>
<p>&nbsp; 3格式：TIME[hh：mm：ss：xx]</p>
<p>&nbsp; 4使用说明：</p>
<p>&nbsp; （1）省略[hh：mm：ss：xx]，显示系统时间并提示输入新的时间，不修改则可直接按回车键，[hh：mm：ss：xx]为&ldquo;小时：分钟：秒：百分之几秒&rdquo;格式；</p>
<p>&nbsp; （2）当机器开始启动时，有自动处理文件（AUTOEXEC.BAT）被执行，则系统不提示输入系统日期。否则，提示输入新日期和时间。</p>
<p>&nbsp; （五）MEM查看当前内存状况命令</p>
<p>&nbsp; 1功能：显示当前内存使用的情况</p>
<p>&nbsp; 2类型：外部命令</p>
<p>&nbsp; 3格式：MEM[/C][/F][/M][/P]</p>
<p>&nbsp; 4使用说明：</p>
<p>&nbsp; （1）选用/C参数列出装入常规内存和CMB的各文件的长度，同时也显示内存空间的使用状况和最大的可用空间；</p>
<p>&nbsp; （2）选用/F参数分别列出当前常规内存剩余的字节大小和UMB可用的区域及大小；&nbsp;</p>
<p>&nbsp; （3）选用/M参数显示该模块使用内存地地址、大小及模块性质；</p>
<p>&nbsp; （4）选用/P参数指定当输出超过一屏时，暂停供用户查看。</p>
<p>&nbsp; （六） MSD显示系统信息命令</p>
<p>&nbsp; 1功能：显示系统的硬件和操作系统的状况。</p>
<p>&nbsp; 2类型：外部命令</p>
<p>&nbsp; 3格式：MSD[/I][/B][/S]</p>
<p>&nbsp; 4使用说明：</p>
<p>&nbsp; （1）选用/I参数时，不检测硬件；</p>
<p>&nbsp; （2）选用/B参数时，以黑白方式启动MSD；</p>
<p>&nbsp; （3）选用/S参数时，显示出简明的系统报告。</p>
<p>ping命令详解</p>
<p>&nbsp;</p>
<p>对于Windows下ping命令相信大家已经再熟悉不过了，但是能把ping的功能发挥到最大的人却并不是很多，当然我也并不是说我可以让ping发挥最大的功能，我也只不过经常用ping这个工具，也总结了一些小经验，现在和大家分享一下。&nbsp;</p>
<p>现在我就参照ping命令的帮助说明来给大家说说我使用ping时会用到的技巧，ping只有在安装了TCP/IP协议以后才可以使用：&nbsp;</p>
<p>ping [-t] [-a] [-n count] [-l length] [-f] [-i ttl] [-v tos] [-r count] [-s count] [[-j computer-list] | [-k computer-list]] [-wz timeout] destination-list&nbsp;</p>
<p>Options:&nbsp;</p>
<p>-t Ping the specified host until stopped.To see statistics and continue - type Control-Break;To stop - type Control-C.&nbsp;</p>
<p>不停的ping地方主机，直到你按下Control-C。&nbsp;</p>
<p>此功能没有什么特别的技巧，不过可以配合其他参数使用，将在下面提到。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-a Resolve addresses to hostnames.&nbsp;</p>
<p>解析计算机NetBios名。&nbsp;</p>
<p>示例：C:＼&gt;ping -a 192.168.1.21&nbsp;</p>
<p>Pinging iceblood.yofor.com [192.168.1.21] with 32 bytes of data:&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Ping statistics for 192.168.1.21:&nbsp;</p>
<p>Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),Approximate round trip times in milli-seconds:&nbsp;</p>
<p>Minimum = 0ms, Maximum = 0ms, Average = 0ms&nbsp;</p>
<p>从上面就可以知道IP为192.168.1.21的计算机NetBios名为iceblood.yofor.com。&nbsp;</p>
<p>&nbsp;</p>
<p>-n count Number of echo requests to send.&nbsp;</p>
<p>发送count指定的Echo数据包数。&nbsp;</p>
<p>在默认情况下，一般都只发送四个数据包，通过这个命令可以自己定义发送的个数，对衡量网络速度很有帮助，比如我想测试发送50个数据包的返回的平均时间为多少，最快时间为多少，最慢时间为多少就可以通过以下获知：&nbsp;</p>
<p>C:＼&gt;ping -n 50 202.103.96.68&nbsp;</p>
<p>Pinging 202.103.96.68 with 32 bytes of data:&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Request timed out.&nbsp;</p>
<p>&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Ping statistics for 202.103.96.68:&nbsp;</p>
<p>Packets: Sent = 50, Received = 48, Lost = 2 (4% loss),Approximate round trip times in milli-seconds:&nbsp;</p>
<p>Minimum = 40ms, Maximum = 51ms, Average = 46ms&nbsp;</p>
<p>从以上我就可以知道在给202.103.96.68发送50个数据包的过程当中，返回了48个，其中有两个由于未知原因丢失，这48个数据包当中返回速度最快为40ms，最慢为51ms，平均速度为46ms。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-l size Send buffer size.&nbsp;</p>
<p>定义echo数据包大小。&nbsp;</p>
<p>在默认的情况下windows的ping发送的数据包大小为32byt，我们也可以自己定义它的大小，但有一个大小的限制，就是最大只能发送65500byt，也许有人会问为什么要限制到65500byt，因为Windows系列的系统都有一个安全漏洞（也许还包括其他系统）就是当向对方一次发送的数据包大于或等于65532时，对方就很有可能挡机，所以微软公司为了解决这一安全漏洞于是限制了ping的数据包大小。虽然微软公司已经做了此限制，但这个参数配合其他参数以后危害依然非常强大，比如我们就可以通过配合-t参数来实现一个带有攻击性的命令：（以下介绍带有危险性，仅用于试验，请勿轻易施于别人机器上，否则后果自负）&nbsp;</p>
<p>C:＼&gt;ping -l 65500 -t 192.168.1.21&nbsp;</p>
<p>Pinging 192.168.1.21 with 65500 bytes of data:&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=65500 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=65500 time&lt;10ms TTL=254&nbsp;</p>
<p>&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&nbsp;</p>
<p>这样它就会不停的向192.168.1.21计算机发送大小为65500byt的数据包，如果你只有一台计算机也许没有什么效果，但如果有很多计算机那么就可以使对方完全瘫痪，我曾经就做过这样的试验，当我同时使用10台以上计算机ping一台Win2000Pro系统的计算机时，不到5分钟对方的网络就已经完全瘫痪，网络严重堵塞，HTTP和FTP服务完全停止，由此可见威力非同小可。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-f Set Don't Fragment flag in packet.&nbsp;</p>
<p>在数据包中发送&ldquo;不要分段&rdquo;标志。&nbsp;</p>
<p>在一般你所发送的数据包都会通过路由分段再发送给对方，加上此参数以后路由就不会再分段处理。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-i TTL Time To Live.&nbsp;</p>
<p>指定TTL值在对方的系统里停留的时间。&nbsp;</p>
<p>此参数同样是帮助你检查网络运转情况的。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-v TOS Type Of Service.&nbsp;</p>
<p>将&ldquo;服务类型&rdquo;字段设置为 tos 指定的值。&nbsp;</p>
<p>&nbsp;</p>
<p>-r count Record route for count hops.&nbsp;</p>
<p>在&ldquo;记录路由&rdquo;字段中记录传出和返回数据包的路由。&nbsp;</p>
<p>在一般情况下你发送的数据包是通过一个个路由才到达对方的，但到底是经过了哪些路由呢？通过此参数就可以设定你想探测经过的路由的个数，不过限制在了9个，也就是说你只能跟踪到9个路由，如果想探测更多，可以通过其他命令实现，我将在以后的文章中给大家讲解。以下为示例：&nbsp;</p>
<p>C:＼&gt;ping -n 1 -r 9 202.96.105.101 （发送一个数据包，最多记录9个路由）&nbsp;</p>
<p>&nbsp;</p>
<p>Pinging 202.96.105.101 with 32 bytes of data:&nbsp;</p>
<p>&nbsp;</p>
<p>Reply from 202.96.105.101: bytes=32 time=10ms TTL=249&nbsp;</p>
<p>Route: 202.107.208.187 -&gt;&nbsp;</p>
<p>202.107.210.214 -&gt;&nbsp;</p>
<p>61.153.112.70 -&gt;&nbsp;</p>
<p>61.153.112.89 -&gt;&nbsp;</p>
<p>202.96.105.149 -&gt;&nbsp;</p>
<p>202.96.105.97 -&gt;&nbsp;</p>
<p>202.96.105.101 -&gt;&nbsp;</p>
<p>202.96.105.150 -&gt;&nbsp;</p>
<p>61.153.112.90&nbsp;</p>
<p>&nbsp;</p>
<p>Ping statistics for 202.96.105.101:&nbsp;</p>
<p>Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),&nbsp;</p>
<p>Approximate round trip times in milli-seconds:&nbsp;</p>
<p>Minimum = 10ms, Maximum = 10ms, Average = 10ms&nbsp;</p>
<p>从上面我就可以知道从我的计算机到202.96.105.101一共通过了202.107.208.187 ，202.107.210.214 , 61.153.112.70 , 61.153.112.89 , 202.96.105.149 , 202.96.105.97这几个路由。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-s count Timestamp for count hops.&nbsp;</p>
<p>指定 count 指定的跃点数的时间戳。&nbsp;</p>
<p>此参数和-r差不多，只是这个参数不记录数据包返回所经过的路由，最多也只记录4个。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-j host-list Loose source route along host-list.&nbsp;</p>
<p>利用 computer-list 指定的计算机列表路由数据包。连续计算机可以被中间网关分隔（路由稀疏源）IP 允许的最大数量为 9。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-k host-list Strict source route along host-list.&nbsp;</p>
<p>利用 computer-list 指定的计算机列表路由数据包。连续计算机不能被中间网关分隔（路由严格源）IP 允许的最大数量为 9。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-w timeout Timeout in milliseconds to wait for each reply.&nbsp;</p>
<p>指定超时间隔，单位为毫秒。&nbsp;</p>
<p>此参数没有什么其他技巧。&nbsp;</p>
<p>&nbsp;</p>
<p>ping命令的其他技巧：在一般情况下还可以通过ping对方让对方返回给你的TTL值大小，粗略的判断目标主机的系统类型是Windows系列还是UNIX/Linux系列，一般情况下Windows系列的系统返回的TTL值在100-130之间，而UNIX/Linux系列的系统返回的TTL值在240-255之间，当然TTL的值在对方的主机里是可以修改的，Windows系列的系统可以通过修改注册表以下键值实现：&nbsp;</p>
<p>[HKEY_LOCAL_MACHINE＼SYSTEM＼CurrentControlSet＼Services＼Tcpip＼Parameters]&nbsp;</p>
<p>"DefaultTTL"=dword:000000ff&nbsp;</p>
<p>255---FF&nbsp;</p>
<p>　 128---80&nbsp;</p>
<p>　 64----40&nbsp;</p>
<p>　 32----20&nbsp;</p>
<p>好了，ping命令也基本上完全讲解完了，其中还有-j,-k参数我还没有详细说明，由于某些原因也包括我自己所收集的资料过少这里也没有向大家详细介绍，请大家见谅，如果在看了这篇文章的朋友当中有知道得比我更多的，以及其他使用技巧的也希望您能告诉我，并在此先谢过。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>对于Windows下ping命令相信大家已经再熟悉不过了，但是能把ping的功能发挥到最大的人却并不是很多，当然我也并不是说我可以让ping发挥最大的功能，我也只不过经常用ping这个工具，也总结了一些小经验，现在和大家分享一下。&nbsp;</p>
<p>现在我就参照ping命令的帮助说明来给大家说说我使用ping时会用到的技巧，ping只有在安装了TCP/IP协议以后才可以使用：&nbsp;</p>
<p>ping [-t] [-a] [-n count] [-l length] [-f] [-i ttl] [-v tos] [-r count] [-s count] [[-j computer-list] | [-k computer-list]] [-w timeout] destination-list&nbsp;</p>
<p>Options:&nbsp;</p>
<p>-t Ping the specified host until stopped.To see statistics and continue - type Control-Break;To stop - type Control-C.&nbsp;</p>
<p>不停的ping地方主机，直到你按下Control-C。&nbsp;</p>
<p>此功能没有什么特别的技巧，不过可以配合其他参数使用，将在下面提到。&nbsp;</p>
<p>&nbsp;</p>
<p>-a Resolve addresses to hostnames.&nbsp;</p>
<p>解析计算机NetBios名。&nbsp;</p>
<p>示例：C:＼&gt;ping -a 192.168.1.21&nbsp;</p>
<p>Pinging iceblood.yofor.com [192.168.1.21] with 32 bytes of data:&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=32 time&lt;10ms TTL=254&nbsp;</p>
<p>Ping statistics for 192.168.1.21:&nbsp;</p>
<p>Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),Approximate round trip times in milli-seconds:&nbsp;</p>
<p>Minimum = 0ms, Maximum = 0ms, Average = 0ms&nbsp;</p>
<p>从上面就可以知道IP为192.168.1.21的计算机NetBios名为iceblood.yofor.com。&nbsp;</p>
<p>&nbsp;</p>
<p>-n count Number of echo requests to send.&nbsp;</p>
<p>发送count指定的Echo数据包数。&nbsp;</p>
<p>在默认情况下，一般都只发送四个数据包，通过这个命令可以自己定义发送的个数，对衡量网络速度很有帮助，比如我想测试发送50个数据包的返回的平均时间为多少，最快时间为多少，最慢时间为多少就可以通过以下获知：&nbsp;</p>
<p>C:＼&gt;ping -n 50 202.103.96.68&nbsp;</p>
<p>Pinging 202.103.96.68 with 32 bytes of data:&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Request timed out.&nbsp;</p>
<p>&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Reply from 202.103.96.68: bytes=32 time=50ms TTL=241&nbsp;</p>
<p>Ping statistics for 202.103.96.68:&nbsp;</p>
<p>Packets: Sent = 50, Received = 48, Lost = 2 (4% loss),Approximate round trip times in milli-seconds:&nbsp;</p>
<p>Minimum = 40ms, Maximum = 51ms, Average = 46ms&nbsp;</p>
<p>从以上我就可以知道在给202.103.96.68发送50个数据包的过程当中，返回了48个，其中有两个由于未知原因丢失，这48个数据包当中返回速度最快为40ms，最慢为51ms，平均速度为46ms。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-l size Send buffer size.&nbsp;</p>
<p>定义echo数据包大小。&nbsp;</p>
<p>在默认的情况下windows的ping发送的数据包大小为32byt，我们也可以自己定义它的大小，但有一个大小的限制，就是最大只能发送65500byt，也许有人会问为什么要限制到65500byt，因为Windows系列的系统都有一个安全漏洞（也许还包括其他系统）就是当向对方一次发送的数据包大于或等于65532时，对方就很有可能挡机，所以微软公司为了解决这一安全漏洞于是限制了ping的数据包大小。虽然微软公司已经做了此限制，但这个参数配合其他参数以后危害依然非常强大，比如我们就可以通过配合-t参数来实现一个带有攻击性的命令：（以下介绍带有危险性，仅用于试验，请勿轻易施于别人机器上，否则后果自负）&nbsp;</p>
<p>C:＼&gt;ping -l 65500 -t 192.168.1.21&nbsp;</p>
<p>Pinging 192.168.1.21 with 65500 bytes of data:&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=65500 time&lt;10ms TTL=254&nbsp;</p>
<p>Reply from 192.168.1.21: bytes=65500 time&lt;10ms TTL=254&nbsp;</p>
<p>&hellip;&hellip;&hellip;&hellip;&hellip;&hellip;&nbsp;</p>
<p>这样它就会不停的向192.168.1.21计算机发送大小为65500byt的数据包，如果你只有一台计算机也许没有什么效果，但如果有很多计算机那么就可以使对方完全瘫痪，我曾经就做过这样的试验，当我同时使用10台以上计算机ping一台Win2000Pro系统的计算机时，不到5分钟对方的网络就已经完全瘫痪，网络严重堵塞，HTTP和FTP服务完全停止，由此可见威力非同小可。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-f Set Don't Fragment flag in packet.&nbsp;</p>
<p>在数据包中发送&ldquo;不要分段&rdquo;标志。&nbsp;</p>
<p>在一般你所发送的数据包都会通过路由分段再发送给对方，加上此参数以后路由就不会再分段处理。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-i TTL Time To Live.&nbsp;</p>
<p>指定TTL值在对方的系统里停留的时间。&nbsp;</p>
<p>此参数同样是帮助你检查网络运转情况的。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-v TOS Type Of Service.&nbsp;</p>
<p>将&ldquo;服务类型&rdquo;字段设置为 tos 指定的值。&nbsp;</p>
<p>&nbsp;</p>
<p>-r count Record route for count hops.&nbsp;</p>
<p>在&ldquo;记录路由&rdquo;字段中记录传出和返回数据包的路由。&nbsp;</p>
<p>在一般情况下你发送的数据包是通过一个个路由才到达对方的，但到底是经过了哪些路由呢？通过此参数就可以设定你想探测经过的路由的个数，不过限制在了9个，也就是说你只能跟踪到9个路由，如果想探测更多，可以通过其他命令实现，我将在以后的文章中给大家讲解。以下为示例：&nbsp;</p>
<p>C:＼&gt;ping -n 1 -r 9 202.96.105.101 （发送一个数据包，最多记录9个路由）&nbsp;</p>
<p>&nbsp;</p>
<p>Pinging 202.96.105.101 with 32 bytes of data:&nbsp;</p>
<p>&nbsp;</p>
<p>Reply from 202.96.105.101: bytes=32 time=10ms TTL=249&nbsp;</p>
<p>Route: 202.107.208.187 -&gt;&nbsp;</p>
<p>202.107.210.214 -&gt;&nbsp;</p>
<p>61.153.112.70 -&gt;&nbsp;</p>
<p>61.153.112.89 -&gt;&nbsp;</p>
<p>202.96.105.149 -&gt;&nbsp;</p>
<p>202.96.105.97 -&gt;&nbsp;</p>
<p>202.96.105.101 -&gt;&nbsp;</p>
<p>202.96.105.150 -&gt;&nbsp;</p>
<p>61.153.112.90&nbsp;</p>
<p>&nbsp;</p>
<p>Ping statistics for 202.96.105.101:&nbsp;</p>
<p>Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),&nbsp;</p>
<p>Approximate round trip times in milli-seconds:&nbsp;</p>
<p>Minimum = 10ms, Maximum = 10ms, Average = 10ms&nbsp;</p>
<p>从上面我就可以知道从我的计算机到202.96.105.101一共通过了202.107.208.187 ，202.107.210.214 , 61.153.112.70 , 61.153.112.89 , 202.96.105.149 , 202.96.105.97这几个路由。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-s count Timestamp for count hops.&nbsp;</p>
<p>指定 count 指定的跃点数的时间戳。&nbsp;</p>
<p>此参数和-r差不多，只是这个参数不记录数据包返回所经过的路由，最多也只记录4个。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-j host-list Loose source route along host-list.&nbsp;</p>
<p>利用 computer-list 指定的计算机列表路由数据包。连续计算机可以被中间网关分隔（路由稀疏源）IP 允许的最大数量为 9。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-k host-list Strict source route along host-list.&nbsp;</p>
<p>利用 computer-list 指定的计算机列表路由数据包。连续计算机不能被中间网关分隔（路由严格源）IP 允许的最大数量为 9。&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>-w timeout Timeout in milliseconds to wait for each reply.&nbsp;</p>
<p>指定超时间隔，单位为毫秒。&nbsp;</p>
<p>此参数没有什么其他技巧。&nbsp;</p>
<p>&nbsp;</p>
<p>ping命令的其他技巧：在一般情况下还可以通过ping对方让对方返回给你的TTL值大小，粗略的判断目标主机的系统类型是Windows系列还是UNIX/Linux系列，一般情况下Windows系列的系统返回的TTL值在100-130之间，而UNIX/Linux系列的系统返回的TTL值在240-255之间，当然TTL的值在对方的主机里是可以修改的，Windows系列的系统可以通过修改注册表以下键值实现：&nbsp;</p>
<p>[HKEY_LOCAL_MACHINE＼SYSTEM＼CurrentControlSet＼Services＼Tcpip＼Parameters]&nbsp;</p>
<p>"DefaultTTL"=dword:000000ff&nbsp;</p>
<p>255---FF&nbsp;</p>
<p>　 128---80&nbsp;</p>
<p>　 64----40&nbsp;</p>
<p>　 32----20&nbsp;</p>
<p>好了，ping命令也基本上完全讲解完了，其中还有-j,-k参数我还没有详细说明，由于某些原因也包括我自己所收集的资料过少这里也没有向大家详细介绍，请大家见谅，如果在看了这篇文章的朋友当中有知道得比我更多的，以及其他使用技巧的也希望您能告诉我，并在此先谢过。&nbsp;</p>
<p>&nbsp;</p>
<p>FTP命令大全</p>
<p>&nbsp;</p>
<p>FTP:文件传输协议。先说说他的功能吧，主要就是从运行FTP服务器的计算机传输文件。可以交互使用。这里要注意，只有安装了tcp/ip协议的机器才能使用ftp命令。&nbsp;</p>
<p>命令格式：ftp [-v][-d][-i][-n][-g][-s:filename][-a][-w:windowsize][computer]&nbsp;</p>
<p>&nbsp;</p>
<p>说说他们的含义吧。&nbsp;</p>
<p>-v 不显示远程服务器响应&nbsp;</p>
<p>-n 禁止第一次连接的时候自动登陆&nbsp;</p>
<p>-i 在多个文件传输期间关闭交互提示&nbsp;</p>
<p>-d 允许调试、显示客户机和服务器之间传递的全部ftp命令&nbsp;</p>
<p>-g 不允许使用文件名通配符，文件名通配符的意思是说允许在本地文件以及路径名中使用通配字符&nbsp;</p>
<p>-s:filename 指定包含ftp命令的文本文件。在ftp命令启动后将自动运行这些命令。在加的参数里不能有空格。&nbsp;</p>
<p>-a 绑定数据连接时，使用任何的本地端口&nbsp;</p>
<p>-w:windowsize 忽略默认的4096传输缓冲区&nbsp;</p>
<p>computer 指定要连接的远程计算机的ip地址&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>呵呵，理解了上面的，就说说一些具体的命令，我个人觉得虽然现在工具用起来很方便了，但懂这些命令在很多地方还是很有用的，就像现在nt下的命令提示符</p>
<p>1） ?&nbsp;</p>
<p>说明：显示ftp命令的说明。后面可以加参数，是加需要解释的命令名，不加则显示包含所有命令列表。&nbsp;</p>
<p>&nbsp;</p>
<p>2） append&nbsp;</p>
<p>说明：使用当前文件类型设置，将本地文件附加到远程计算机中。大概格式是&nbsp;</p>
<p>append local-file [remote-file] 其中local-file是说指定要添加的本地文件。&nbsp;</p>
<p>remote-file是说指定要将local-file附加到远程计算机文件，要是省了这个，则是使用本地文件名做远程文件名。&nbsp;</p>
<p>&nbsp;</p>
<p>3)ascii&nbsp;</p>
<p>说明:默认情况下，将文件传输类型设置为ASCII&nbsp;</p>
<p>&nbsp;</p>
<p>4)bell&nbsp;</p>
<p>说明：响玲开关，意思是文件传输完成后是否有玲声提醒。默认是关闭的。&nbsp;</p>
<p>&nbsp;</p>
<p>5)binary&nbsp;</p>
<p>说明：将文件传输类型设置为二进制。&nbsp;</p>
<p>&nbsp;</p>
<p>6)bye&nbsp;</p>
<p>说明:结束和远程计算机的ftp会话，也就是安全断开，退出ftp.&nbsp;</p>
<p>&nbsp;</p>
<p>7)cd&nbsp;</p>
<p>说明：更改远程计算机上的工作目录。如cd data 其中data是要进入的远程计算机的目录。&nbsp;</p>
<p>&nbsp;</p>
<p>8)close&nbsp;</p>
<p>说明:结束与远程服务器的ftp会话，并返回命令解释程序。&nbsp;</p>
<p>&nbsp;</p>
<p>9)dir&nbsp;</p>
<p>说明:显示远程的文件以及子目录列表。如dir data local-file&nbsp;</p>
<p>其中data是指定要查看列表的目录，没指定的话就是当前目录。local-file是指定要保存列表的本地文件，不指定的话就在屏幕输出。&nbsp;</p>
<p>&nbsp;</p>
<p>10)debug&nbsp;</p>
<p>说明：调试开关，打开的时候打印每个发送到远程计算机的命令，命令前有&mdash;&mdash;&gt;&nbsp;</p>
<p>默认情况是关闭的。&nbsp;</p>
<p>&nbsp;</p>
<p>11)disconnnect&nbsp;</p>
<p>说明：与远程计算机断开连接，但还保持着ftp命令提示符。&nbsp;</p>
<p>&nbsp;</p>
<p>12)get&nbsp;</p>
<p>说明：使用当前文件传输类型，把远程的文件拷贝到本地计算机上。&nbsp;</p>
<p>如get remote-file local-file&nbsp;</p>
<p>remote-file是指定要复制的文件，local-file是指定本地计算机上的文件名，&nbsp;</p>
<p>没有指定的话则个remote-file同名。&nbsp;</p>
<p>&nbsp;</p>
<p>13)glob&nbsp;</p>
<p>说明：文件名通配开关&nbsp;</p>
<p>&nbsp;</p>
<p>14)hash&nbsp;</p>
<p>说明：转换每个传输数据快的散列标记打印(#).数据快的大小是2048字节。默认情况下是关闭的，&nbsp;</p>
<p>&nbsp;</p>
<p>15)help&nbsp;</p>
<p>说明：显示ftp命令的解释，如help commmand 其中command就是你要解释的命令，如果不加command这个参数的话就会显示所有命令的列表&nbsp;</p>
<p>&nbsp;</p>
<p>16)!&nbsp;</p>
<p>说明:这个命令差点忘记了:)功能是在本地计算机上运行指定命令。如! command 其中command就是你要运行的命令，如果不加command这个参数的话，则显示本地命令提示， 这时你输入exit命令就能返回到ftp了。&nbsp;</p>
<p>&nbsp;</p>
<p>17)lcd&nbsp;</p>
<p>说明:更改本地计算机的本地目录,在默认的时候是启动ftp的目录.这个不要觉得没用啊，在你使用ftp的时候为了传递文件不是常改变本地和远程计算机的目录吗?:)&nbsp;</p>
<p>如lcd [directory] 其中[directory]是指定要进入的本地计算机的目录,如果你不加这个参数,就会显示出本地计算机的工作目录.&nbsp;</p>
<p>&nbsp;</p>
<p>18)literal&nbsp;</p>
<p>说明:向远程ftp服务器发送协商参数,报告.&nbsp;</p>
<p>如lireral argument [...] 其中argument是指定要发送给远程服务器的协商参数。&nbsp;</p>
<p>&nbsp;</p>
<p>19)ls&nbsp;</p>
<p>说明:显示远程目录的文件和字目录.&nbsp;</p>
<p>如ls remote-directory local-file&nbsp;</p>
<p>其中remote-directory是指要查看的列表的目录,不指定的话显示的是当前工作目录。local-file是指定要保存列表的本地文件.不指定的话是在屏幕上输出.&nbsp;</p>
<p>&nbsp;</p>
<p>20)mdelete&nbsp;</p>
<p>说明:删除远程计算机上的文件.如mdelete remote-file ...&nbsp;</p>
<p>remote-file肯定是要删的文件啊，可以删除多个.&nbsp;</p>
<p>&nbsp;</p>
<p>21)mdir&nbsp;</p>
<p>说明:显示远程目录的文件和子目录列表,他允许指定多个文件.&nbsp;</p>
<p>如mdir remote-file ... local-file&nbsp;</p>
<p>参数我想大家应该明白什么意思吧?不明白就看看前面的类似命令吧.&nbsp;</p>
<p>&nbsp;</p>
<p>22)mget&nbsp;</p>
<p>说明:使用当前文件传输类型将多个远程文件复制到本地计算机.&nbsp;</p>
<p>如mget remote-files ...&nbsp;</p>
<p>其实remote-files可以指定多个，他就是指定要复制到本地计算机的远程文件.&nbsp;</p>
<p>&nbsp;</p>
<p>23)mkdir&nbsp;</p>
<p>说明:创建远程目录.&nbsp;</p>
<p>如mkdir directory 这个命令和nt下的命令提示符中的md directory一样，不多说了.&nbsp;</p>
<p>&nbsp;</p>
<p>24)mls&nbsp;</p>
<p>说明:显示远程目录的文件和目录简表&nbsp;</p>
<p>如mls remote-file ... local-file&nbsp;</p>
<p>其中remote-file这个参数是必须要加的，&rsquo;&rsquo;-&rsquo;&rsquo;是使用远程计算机的当前工作目录.&nbsp;</p>
<p>&nbsp;</p>
<p>25)mput&nbsp;</p>
<p>说明:使用当前文件传输类型,将本地文件复制到远程计算机.&nbsp;</p>
<p>如mput local-files ...&nbsp;</p>
<p>&nbsp;</p>
<p>26)open&nbsp;</p>
<p>说明:连接到指定ftp服务器上，&nbsp;</p>
<p>如open computer port 其中computer一般是远程计算机的ip地址,port不用说就是指定端口了。&nbsp;</p>
<p>&nbsp;</p>
<p>27)prompt&nbsp;</p>
<p>说明:转换提示,在多个文件传输的时候,ftp提示可以有选择的检索或保存文件，如果关闭提示,则mget和mput命令传输所有文件,在默认情况下是打开的.&nbsp;</p>
<p>&nbsp;</p>
<p>28)put&nbsp;</p>
<p>说明:使用当前文件传输类型将本地文件复制到远程计算机中，&nbsp;</p>
<p>如put local-file remote-file&nbsp;</p>
<p>其中local-file是指定要复制的本地文件，&nbsp;</p>
<p>remote-file是指定要复制的远程计算机上的文件名，不指定的话是和本地计算机上的文件名同名.&nbsp;</p>
<p>&nbsp;</p>
<p>29)pwd&nbsp;</p>
<p>说明:显示远程呢感计算机上的当前目录.&nbsp;</p>
<p>&nbsp;</p>
<p>30)quit&nbsp;</p>
<p>说明:结束与远程计算机的ftp会话,并退出ftp.&nbsp;</p>
<p>&nbsp;</p>
<p>31)quote&nbsp;</p>
<p>说明:向远程ftp服务器发送协议,报告.期待ftp单码应答,这个命令的功能和literal相同.&nbsp;</p>
<p>&nbsp;</p>
<p>32)recv&nbsp;</p>
<p>说明:使用当前文件传输类型将远程文件复制到本地计算机,他与get命令作用相同。&nbsp;</p>
<p>&nbsp;</p>
<p>33)remotehelp&nbsp;</p>
<p>说明:显示远程命令的帮助.这个命令的用法和help,!一样可以参考他的用法.&nbsp;</p>
<p>&nbsp;</p>
<p>34)rename&nbsp;</p>
<p>说明:更改远程计算机上的文件名。&nbsp;</p>
<p>这个命令和nt的命令提示符的ren一样，如rename filename newfilename&nbsp;</p>
<p>&nbsp;</p>
<p>35)rmdir&nbsp;</p>
<p>说明:删除远程目录.&nbsp;</p>
<p>这个命令和nt的命令提示符的rm一样，如rmdir directory&nbsp;</p>
<p>&nbsp;</p>
<p>36)send&nbsp;</p>
<p>说明:使用当前文件传输类型将本地文件复制到远程计算机.send和put命令的功能一样。&nbsp;</p>
<p>如send local-file remote-file&nbsp;</p>
<p>&nbsp;</p>
<p>37)status&nbsp;</p>
<p>说明:显示ftp连接和转换的当前状态&nbsp;</p>
<p>&nbsp;</p>
<p>38)trace&nbsp;</p>
<p>说明:转换报文跟踪,运行ftp的命令时,trace将显示没个报文的理由。&nbsp;</p>
<p>&nbsp;</p>
<p>39)type&nbsp;</p>
<p>说明:设置或显示文件传输类型.&nbsp;</p>
<p>如type [type-name]&nbsp;</p>
<p>其中type-name 的意思是文件传输的类型，默认是ASCII,没加这个参数就是显示当前的传输类型.&nbsp;</p>
<p>&nbsp;</p>
<p>40)user&nbsp;</p>
<p>说明:指定连接到远程计算机的用户.&nbsp;</p>
<p>如user user-name [passwd] [account]</p>
<p>其中user-name不用说都是用来登陆计算机的用户名了，&nbsp;</p>
<p>passwd是指定user-name的密码,不指定的话ftp会提示输入密码。&nbsp;</p>
<p>account是指定用来登陆计算机的帐号,如不指定,ftp会提示输入帐号.&nbsp;</p>
<p>&nbsp;</p>
<p>41)verbose&nbsp;</p>
<p>说明:转换冗余模式。这里如果打开,会显示所有ftp响应,文件传输结束的时候会显示传输的效率和统计信息,默认的情况是打开的.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp;至于如何让使用命令进行入侵或者进行一些攻击，自己研究吧。</p>
<p>&nbsp;</p>]]></description></item><item><title>win7系统在联网是时候matlab2010a启动不了的解决办法</title><link>http://www.cnblogs.com/hanxi/archive/2011/08/18/2144304.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 18 Aug 2011 05:21:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/08/18/2144304.html</guid><description><![CDATA[<p>方法一：断网后启动matlab2010a在联网；</p>
<p>方法二：下载一个名为：iphlpapi.dll的文件放到&lt;你的matlab安装目录&gt;\bin\win32；亲自测试成功，方法来自：<a href="http://zhidao.baidu.com/question/243651377.html?fr=qrl&amp;cid=983&amp;index=5">http://zhidao.baidu.com/question/243651377.html?fr=qrl&amp;cid=983&amp;index=5</a>，感谢这位网友的帮助。</p>
<p>文件iphlpapi.dll的下载地址：<a href="http://download.pchome.net/dll/i/download-167405.html">http://download.pchome.net/dll/i/download-167405.html</a></p>]]></description></item><item><title>求n个数的最大公约数</title><link>http://www.cnblogs.com/hanxi/archive/2011/07/09/2101537.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 08 Jul 2011 16:33:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/07/09/2101537.html</guid><description><![CDATA[<p>求两个数的最大公约数的方法很多，如下面的递归法：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> gcd(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">m)<br />    {<br />        n</span><span style="color: #000000;">=</span><span style="color: #000000;">m</span><span style="color: #000000;">+</span><span style="color: #000000;">n;<br />        m</span><span style="color: #000000;">=</span><span style="color: #000000;">n</span><span style="color: #000000;">-</span><span style="color: #000000;">m;<br />        n</span><span style="color: #000000;">=</span><span style="color: #000000;">n</span><span style="color: #000000;">-</span><span style="color: #000000;">m;<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (m</span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">) </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> n;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> gcd(m,n</span><span style="color: #000000;">%</span><span style="color: #000000;">m);<br />}</span></div></pre>
</div>
</p>
<p>下面我使用数组写了个计算n个数的最大公约数的代码：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> max_common_divisor(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> several[], </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a</span><span style="color: #000000;">=</span><span style="color: #000000;">several[</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> b</span><span style="color: #000000;">=</span><span style="color: #000000;">several[</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> c</span><span style="color: #000000;">=</span><span style="color: #000000;">gcd(a,b);<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        c</span><span style="color: #000000;">=</span><span style="color: #000000;">gcd(c,several[i]);<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c;<br />}</span></div></pre>
</div>
</p>
<p>写个主函数来测试下：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdlib.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> gcd(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> b);</span><span style="color: #008000;">//</span><span style="color: #008000;">求两个数的最大公约数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> max_common_divisor(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> several[], </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n);</span><span style="color: #008000;">//</span><span style="color: #008000;">求n个数的最大公约数</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a[</span><span style="color: #800080;">4</span><span style="color: #000000;">];<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x,y;<br />    a[</span><span style="color: #800080;">0</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">147</span><span style="color: #000000;">;<br />    a[</span><span style="color: #800080;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">210</span><span style="color: #000000;">;<br />    a[</span><span style="color: #800080;">2</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">315</span><span style="color: #000000;">;<br />    a[</span><span style="color: #800080;">3</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">84</span><span style="color: #000000;">;<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">最大公约数为：%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,max_common_divisor(a,</span><span style="color: #800080;">4</span><span style="color: #000000;">));<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
</p>
<p>测试结果如下：</p>
<p>﻿<img src="http://pic002.cnblogs.com/images/2011/198486/2011070900311463.png" /></p>]]></description></item><item><title>c语言小程序集锦</title><link>http://www.cnblogs.com/hanxi/archive/2011/07/02/2096171.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 02 Jul 2011 06:22:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/07/02/2096171.html</guid><description><![CDATA[<p><span style="color: #0000ff;"><strong>程序1：已知y=2*x^2 - 3*x^4 + 6*x^5 - 4*x + 50,求x=0 到 x=2 以步长为0.2递增时y的最小值和最大值。</strong></span></p>
<p><strong>知识点：</strong></p>
<p>pow（计算次方值）&nbsp;&nbsp;&nbsp;<br />相关函数&nbsp;&nbsp; exp，log，log10&nbsp;<br />表头文件&nbsp;&nbsp; #include&lt;math.h&gt;&nbsp;<br />定义函数&nbsp;&nbsp; double pow(double x,double y);&nbsp;<br />函数说明&nbsp;&nbsp; pow()用来计算以x为底的y次方值，即xy值，然后将结果返回。&nbsp;<br />返回值&nbsp;&nbsp; 返回x的y次方计算结果。&nbsp;<br />错误代码&nbsp;&nbsp; EDOM 参数x为负数且参数y不是整数。&nbsp;<br /><strong>附加说明&nbsp;&nbsp; 使用GCC编译时请加入-lm。</strong>&nbsp;<br />代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序1；</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdlib.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">math.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y(</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x);<br /><br /></span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y(</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x)<br />{<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">x</span><span style="color: #000000;">*</span><span style="color: #000000;">x </span><span style="color: #000000;">-</span><span style="color: #000000;"> </span><span style="color: #800080;">3</span><span style="color: #000000;">*</span><span style="color: #000000;">pow(x,</span><span style="color: #800080;">4</span><span style="color: #000000;">.) </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800080;">6</span><span style="color: #000000;">*</span><span style="color: #000000;">pow(x,</span><span style="color: #800080;">5</span><span style="color: #000000;">.) </span><span style="color: #000000;">-</span><span style="color: #000000;"> </span><span style="color: #800080;">4</span><span style="color: #000000;">*</span><span style="color: #000000;">x </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800080;">50</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x;<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> miny;<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> maxy;<br />  x</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />  miny </span><span style="color: #000000;">=</span><span style="color: #000000;"> y(x);<br />  maxy </span><span style="color: #000000;">=</span><span style="color: #000000;"> y(x);<br />  </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (x</span><span style="color: #000000;">&lt;=</span><span style="color: #800080;">2</span><span style="color: #000000;">)<br />  {<br />    x </span><span style="color: #000000;">+=</span><span style="color: #000000;"> </span><span style="color: #800080;">0.2</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (miny </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> y(x))<br />    {<br />      miny </span><span style="color: #000000;">=</span><span style="color: #000000;"> y(x);<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (maxy </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> y(x))<br />    {<br />      maxy </span><span style="color: #000000;">=</span><span style="color: #000000;"> y(x);<br />    }<br />  }<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">y的最小值为：%f\ny的最大值为：%f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, miny, maxy);<br />  return 1;</span></div><div><span style="color: #000000;">}</span></div><div></div><div></div><div></div></pre>
</div>
<p>运行结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code1.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />y的最小值为：</span><span style="color: #800080;">48.397758</span><span style="color: #000000;"><br />y的最大值为：</span><span style="color: #800080;">194.000092</span></div></pre>
</div>
<p>
<strong><span style="color: #0000ff;">程序2：画y=sin(x)和y=x/3在[-pi/2,pi/2]的图像</span></strong></p>
<p><b>没有画出坐标，直接画图像的形状，采用坐标描点。分y&gt;0和y&lt;0两种情况，y&gt;0时，y=x/3在y=sin(x)后面。y&lt;0时相反</b></p>
<p><span style="color: #0000ff;" color="#0000ff">代码：</span></p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序2；</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">math.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> y;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x,m,k;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(y</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">;y</span><span style="color: #000000;">&gt;=-</span><span style="color: #800080;">1</span><span style="color: #000000;">;y</span><span style="color: #000000;">-=</span><span style="color: #800080;">0.1</span><span style="color: #000000;">) </span><span style="color: #008000;">//</span><span style="color: #008000;">y为列方向，值从1到-1，步长为0.1</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    {<br />        m</span><span style="color: #000000;">=</span><span style="color: #000000;">asin(y)</span><span style="color: #000000;">*</span><span style="color: #800080;">10</span><span style="color: #000000;">; </span><span style="color: #008000;">//</span><span style="color: #008000;">计算出y对应的弧度m，乘以10为图形放大倍数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        k</span><span style="color: #000000;">=</span><span style="color: #800080;">3</span><span style="color: #000000;">*</span><span style="color: #000000;">y</span><span style="color: #000000;">*</span><span style="color: #800080;">10</span><span style="color: #000000;">; </span><span style="color: #008000;">//</span><span style="color: #008000;">计算y=x/3对应的x，同样将图形放大10倍</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (y</span><span style="color: #000000;">&gt;</span><span style="color: #800080;">0</span><span style="color: #000000;">)</span><span style="color: #008000;">//</span><span style="color: #008000;">[0,PI/2]</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(x</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">;x</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">31</span><span style="color: #000000;">+</span><span style="color: #000000;">m;x</span><span style="color: #000000;">++</span><span style="color: #000000;">) printf(</span><span style="color: #800000;">"</span><span style="color: #800000;"> </span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">*</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />            </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(;x</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">31</span><span style="color: #000000;">+</span><span style="color: #000000;">k; x</span><span style="color: #000000;">++</span><span style="color: #000000;">) printf(</span><span style="color: #800000;">"</span><span style="color: #800000;"> </span><span style="color: #800000;">"</span><span style="color: #000000;">);    <br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">*\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">[-PI/2,0]</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (x</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; x </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">31</span><span style="color: #000000;">+</span><span style="color: #000000;">k;x</span><span style="color: #000000;">++</span><span style="color: #000000;">) printf(</span><span style="color: #800000;">"</span><span style="color: #800000;"> </span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">*</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />            </span><span style="color: #0000ff;">for</span><span style="color: #000000;">(;x</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">31</span><span style="color: #000000;">+</span><span style="color: #000000;">m;x</span><span style="color: #000000;">++</span><span style="color: #000000;">) printf(</span><span style="color: #800000;">"</span><span style="color: #800000;"> </span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">*\n</span><span style="color: #800000;">"</span><span style="color: #000000;">); <br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
<p>运行结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code2.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />                                             </span><span style="color: #000000;">*</span><span style="color: #000000;">               </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                         </span><span style="color: #000000;">*</span><span style="color: #000000;">                </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                       </span><span style="color: #000000;">*</span><span style="color: #000000;">               </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                     </span><span style="color: #000000;">*</span><span style="color: #000000;">              </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                    </span><span style="color: #000000;">*</span><span style="color: #000000;">            </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                   </span><span style="color: #000000;">*</span><span style="color: #000000;">          </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                  </span><span style="color: #000000;">*</span><span style="color: #000000;">        </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                 </span><span style="color: #000000;">*</span><span style="color: #000000;">      </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                                </span><span style="color: #000000;">*</span><span style="color: #000000;">    </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                               </span><span style="color: #000000;">*</span><span style="color: #000000;">  </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                              </span><span style="color: #000000;">**</span><span style="color: #000000;"><br />                            </span><span style="color: #000000;">*</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                         </span><span style="color: #000000;">*</span><span style="color: #000000;">   </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                      </span><span style="color: #000000;">*</span><span style="color: #000000;">     </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                   </span><span style="color: #000000;">*</span><span style="color: #000000;">       </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />                </span><span style="color: #000000;">*</span><span style="color: #000000;">         </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />             </span><span style="color: #000000;">*</span><span style="color: #000000;">           </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />          </span><span style="color: #000000;">*</span><span style="color: #000000;">             </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />       </span><span style="color: #000000;">*</span><span style="color: #000000;">              </span><span style="color: #000000;">*</span><span style="color: #000000;"><br />    </span><span style="color: #000000;">*</span><span style="color: #000000;">               </span><span style="color: #000000;">*</span><span style="color: #000000;"><br /> </span><span style="color: #000000;">*</span><span style="color: #000000;">              </span><span style="color: #000000;">*</span></div></pre>
</div>
<p><span style="color: #0000ff;"><strong>程序3：求一个方阵对角线上最小值</strong></span></p>
<p>思想：将矩阵存在二维数组a[m][n]中，比较对角线上的元素就是在下标i=j时比较，从而选出最小值</p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序3：求一个方阵对角线上最小值</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a[</span><span style="color: #800080;">5</span><span style="color: #000000;">][</span><span style="color: #800080;">5</span><span style="color: #000000;">];<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j,min;<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">5</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">5</span><span style="color: #000000;">; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />      printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">a[%d][%d]=</span><span style="color: #800000;">"</span><span style="color: #000000;">,i,j);<br />      scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a[i][j]);<br />    }<br />  }<br />  min</span><span style="color: #000000;">=</span><span style="color: #000000;">a[</span><span style="color: #800080;">0</span><span style="color: #000000;">][</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">5</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (min</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">a[i][i])<br />    {<br />      min</span><span style="color: #000000;">=</span><span style="color: #000000;">a[i][i];<br />    }<br />  }<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">对角线最小值为：%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, min);<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
<p>测试结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code3.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">0</span><span style="color: #000000;">][</span><span style="color: #800080;">0</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">0</span><span style="color: #000000;">][</span><span style="color: #800080;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">3</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">0</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">6</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">0</span><span style="color: #000000;">][</span><span style="color: #800080;">3</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">0</span><span style="color: #000000;">][</span><span style="color: #800080;">4</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">9</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">1</span><span style="color: #000000;">][</span><span style="color: #800080;">0</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">6</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">1</span><span style="color: #000000;">][</span><span style="color: #800080;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">3</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">1</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">1</span><span style="color: #000000;">][</span><span style="color: #800080;">3</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">1</span><span style="color: #000000;">][</span><span style="color: #800080;">4</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">2</span><span style="color: #000000;">][</span><span style="color: #800080;">0</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">4</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">2</span><span style="color: #000000;">][</span><span style="color: #800080;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">2</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">9</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">2</span><span style="color: #000000;">][</span><span style="color: #800080;">3</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">8</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">2</span><span style="color: #000000;">][</span><span style="color: #800080;">4</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">3</span><span style="color: #000000;">][</span><span style="color: #800080;">0</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">7</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">3</span><span style="color: #000000;">][</span><span style="color: #800080;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">3</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">3</span><span style="color: #000000;">][</span><span style="color: #800080;">3</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">3</span><span style="color: #000000;">][</span><span style="color: #800080;">4</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">3</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">4</span><span style="color: #000000;">][</span><span style="color: #800080;">0</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">6</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">4</span><span style="color: #000000;">][</span><span style="color: #800080;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">8</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">4</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">4</span><span style="color: #000000;">][</span><span style="color: #800080;">3</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">4</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">4</span><span style="color: #000000;">][</span><span style="color: #800080;">4</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">9</span><span style="color: #000000;"><br />对角线最小值为：</span><span style="color: #800080;">1</span></div></pre>
</div>
<p><strong><span style="color: #0000ff;">程序4：设计一个函数，使用递归法求x^n，并在住函数中调用</span></strong></p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序4：设计一个函数，使用递归法求x^n，并在住函数中调用</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">float</span><span style="color: #000000;"> fun(</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />  </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n</span><span style="color: #000000;">!=</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />  {<br />      </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> x</span><span style="color: #000000;">*</span><span style="color: #000000;">fun(x,n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />  }<br />  </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />  {<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> x;<br />  }<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x;<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n;<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入数据\nx=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f</span><span style="color: #800000;">"</span><span style="color: #000000;">,</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x);<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">n=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n);<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">x^n=%f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">,fun(x,n));<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
<p>测试结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />请输入数据<br />x</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />n</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />x</span><span style="color: #000000;">^</span><span style="color: #000000;">n</span><span style="color: #000000;">=</span><span style="color: #800080;">25.000000</span><span style="color: #000000;"><br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />请输入数据<br />x</span><span style="color: #000000;">=</span><span style="color: #800080;">6.2</span><span style="color: #000000;"><br />n</span><span style="color: #000000;">=</span><span style="color: #800080;">6</span><span style="color: #000000;"><br />x</span><span style="color: #000000;">^</span><span style="color: #000000;">n</span><span style="color: #000000;">=</span><span style="color: #800080;">56800.225100</span></div></pre>
</div>
<p><span style="color: #0000ff;"><strong>程序5：设计一个函数void sear(int a[], int n);n为数组a的长度。 通过使用全局变量的方法求：tave(数组a中正数的平均值)，nave(数组a中负数的平均值)</strong></span></p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序5：设计一个函数void sear(int a[], int n);n为数组a的长度。 通过使用全局变量的方法求：tave(数组a中正数的平均值)，nave(数组a中负数的平均值)</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tave</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">,nave</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> sear(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a[], </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tsum</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">,t_n</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">,nsum</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">,n_n</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">n;i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a[i]</span><span style="color: #000000;">&gt;</span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />    {<br />      tsum </span><span style="color: #000000;">+=</span><span style="color: #000000;"> a[i];<br />      t_n</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />    {<br />      nsum </span><span style="color: #000000;">+=</span><span style="color: #000000;"> a[i];<br />      n_n</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    }<br />  }<br />  </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (t_n</span><span style="color: #000000;">!=</span><span style="color: #800080;">0</span><span style="color: #000000;">)  tave</span><span style="color: #000000;">=</span><span style="color: #000000;">tsum</span><span style="color: #000000;">/</span><span style="color: #000000;">t_n;<br />  </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n_n</span><span style="color: #000000;">!=</span><span style="color: #800080;">0</span><span style="color: #000000;">)  nave</span><span style="color: #000000;">=</span><span style="color: #000000;">nsum</span><span style="color: #000000;">/</span><span style="color: #000000;">n_n;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a[</span><span style="color: #800080;">10</span><span style="color: #000000;">];<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">输入数据\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">10</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">a[%d]=</span><span style="color: #800000;">"</span><span style="color: #000000;">,i);<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a[i]);<br />  }<br />  sear(a,</span><span style="color: #800080;">10</span><span style="color: #000000;">);<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">结果： \n tave=%d \n nave=%d \n</span><span style="color: #800000;">"</span><span style="color: #000000;">,tave,nave);<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
<p>测试结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />输入数据<br />a[</span><span style="color: #800080;">0</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">2</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">3</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">25</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">4</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">5</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">6</span><span style="color: #000000;">]</span><span style="color: #000000;">=-</span><span style="color: #800080;">6</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">7</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">8</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />a[</span><span style="color: #800080;">9</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;"><br />结果： <br /> tave</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"> <br /> nave</span><span style="color: #000000;">=-</span><span style="color: #800080;">6</span><span style="color: #000000;"> </span></div></pre>
</div>
<p><span style="color: #0000ff;"><strong>程序6：求a*x^2+b*x+c=0的根</strong></span></p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">求a*x^2+b*x+c=0的根</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">math.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> a,b,c;<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> tmp;<br />  <br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">输入数据\na=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f</span><span style="color: #800000;">"</span><span style="color: #000000;">,</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a);<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">b=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">b);<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">c=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">c);<br />  <br />  tmp</span><span style="color: #000000;">=</span><span style="color: #000000;">b</span><span style="color: #000000;">*</span><span style="color: #000000;">b</span><span style="color: #000000;">-</span><span style="color: #800080;">4</span><span style="color: #000000;">*</span><span style="color: #000000;">a</span><span style="color: #000000;">*</span><span style="color: #000000;">c;<br />  <br />  </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp</span><span style="color: #000000;">&gt;</span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />  {<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">方程的根为：%f和%f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, (</span><span style="color: #000000;">-</span><span style="color: #000000;">b</span><span style="color: #000000;">+</span><span style="color: #000000;">sqrt(tmp))</span><span style="color: #000000;">/</span><span style="color: #800080;">2</span><span style="color: #000000;">,(</span><span style="color: #000000;">-</span><span style="color: #000000;">b</span><span style="color: #000000;">-</span><span style="color: #000000;">sqrt(tmp))</span><span style="color: #000000;">/</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br />  }<br />  </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp</span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />  {<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">方程的根为：%f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">-</span><span style="color: #000000;">b</span><span style="color: #000000;">/</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br />  }<br />  </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />  {<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">方程无解\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  }<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
<p>测试结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code6.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />输入数据<br />a</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />b</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />c</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />方程无解<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />输入数据<br />a</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;"><br />b</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;"><br />c</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;"><br />方程的根为：</span><span style="color: #000000;">-</span><span style="color: #800080;">0.000000</span><span style="color: #000000;"><br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />输入数据<br />a</span><span style="color: #000000;">=</span><span style="color: #800080;">58</span><span style="color: #000000;"><br />b</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;"><br />c</span><span style="color: #000000;">=</span><span style="color: #800080;">4</span><span style="color: #000000;"><br />方程无解<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />输入数据<br />a</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;"><br />b</span><span style="color: #000000;">=</span><span style="color: #800080;">56</span><span style="color: #000000;"><br />c</span><span style="color: #000000;">=</span><span style="color: #800080;">169</span><span style="color: #000000;"><br />方程的根为：</span><span style="color: #000000;">-</span><span style="color: #800080;">6</span><span style="color: #000000;">.881288和</span><span style="color: #000000;">-</span><span style="color: #800080;">49.118712</span></div></pre>
</div>
<p><span style="color: #0000ff;"><strong>程序7：设计函数output()和函数input();使功能和puts()和gets()相同</strong></span></p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序7：设计函数output()和函数input();使功能和puts()和gets()相同</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdlib.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> output(</span><span style="color: #0000ff;">char</span><span style="color: #000000;"> a[])<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">strlen(a); i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    putchar(a[i]);<br />  }<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;<br />  </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> a[</span><span style="color: #800080;">256</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800000;">"</span><span style="color: #800000;">als;ajasdlkfweiondvlj阿斯疯狂疯狂sdfdjf</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />  output(a);<br />}</span></div></pre>
</div>
<p>测试结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code7.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />als;ajasdlkfweiondvlj阿斯疯狂疯狂sdfdjf</span></div></pre>
</div>
<p><span style="color: #0000ff;"><strong>程序8：求二维数组中每行元素的平均值</strong></span></p>
<p>代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序8：求二维数组中每行元素的平均值</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> a[</span><span style="color: #800080;">10</span><span style="color: #000000;">][</span><span style="color: #800080;">10</span><span style="color: #000000;">],sum;<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">10</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)</span><span style="color: #008000;">//</span><span style="color: #008000;">传入数据</span><span style="color: #008000;"><br /></span><span style="color: #000000;">  {<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">10</span><span style="color: #000000;">; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />      a[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> (i</span><span style="color: #000000;">+</span><span style="color: #800080;">2</span><span style="color: #000000;">)</span><span style="color: #000000;">*</span><span style="color: #000000;">(j</span><span style="color: #000000;">+</span><span style="color: #000000;">rand())</span><span style="color: #000000;">*</span><span style="color: #000000;">rand();</span><span style="color: #008000;">//</span><span style="color: #008000;">随便赋值</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />  }<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">10</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)</span><span style="color: #008000;">//</span><span style="color: #008000;">求平均值</span><span style="color: #008000;"><br /></span><span style="color: #000000;">  {<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">10</span><span style="color: #000000;">; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />      sum </span><span style="color: #000000;">+=</span><span style="color: #000000;"> a[i][j];<br />    }<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">第%d行的平均值：%f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, i, sum</span><span style="color: #000000;">/</span><span style="color: #800080;">10</span><span style="color: #000000;">);<br />  }<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;  <br />}</span></div></pre>
</div>
<p>测试结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code8.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />第0行的平均值：</span><span style="color: #800080;">733531699.200000</span><span style="color: #000000;"><br />第1行的平均值：</span><span style="color: #800080;">455155609.600000</span><span style="color: #000000;"><br />第2行的平均值：</span><span style="color: #800080;">625712537.600000</span><span style="color: #000000;"><br />第3行的平均值：</span><span style="color: #800080;">36360051.200000</span><span style="color: #000000;"><br />第4行的平均值：</span><span style="color: #000000;">-</span><span style="color: #800080;">482607616.000000</span><span style="color: #000000;"><br />第5行的平均值：</span><span style="color: #000000;">-</span><span style="color: #800080;">487296256.000000</span><span style="color: #000000;"><br />第6行的平均值：</span><span style="color: #000000;">-</span><span style="color: #800080;">608275507.200000</span><span style="color: #000000;"><br />第7行的平均值：</span><span style="color: #000000;">-</span><span style="color: #800080;">720682086.400000</span><span style="color: #000000;"><br />第8行的平均值：</span><span style="color: #000000;">-</span><span style="color: #800080;">1062218342.400000</span><span style="color: #000000;"><br />第9行的平均值：</span><span style="color: #000000;">-</span><span style="color: #800080;">780733542.400000</span></div></pre>
</div>
<p><span style="color: #0000ff;"><strong>程序9：已知 char a[10],设计函数使下标从6开始的元素全部设为&lsquo;#&rsquo;，并保持前6个元素的内容不变。</strong></span></p>
<p>代码：</p>

<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序9：已知 char a[10],设计函数使下标从6开始的元素全部设为&lsquo;#&rsquo;，并保持前6个元素的内容不变。</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> a[</span><span style="color: #800080;">10</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800000;">"</span><span style="color: #800000;">123456789a</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">6</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">10</span><span style="color: #000000;">;i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    a[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">#</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />  }<br />  puts(a);<br />}</span></div></pre>
</div>

<p>结果：</p>

<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code9.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br /></span><span style="color: #800080;">123456</span><span style="color: #000000;">####</span></div></pre>
</div>

<p><span style="color: #0000ff;"><strong>程序10：设计一个函数，功能为：删除字符串中所有个空格。</strong></span></p>
<p>代码：</p>

<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序10：设计一个函数，功能为：删除字符串中所有个空格。</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> fun(</span><span style="color: #0000ff;">char</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;">a)<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">,j</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> len</span><span style="color: #000000;">=</span><span style="color: #000000;">strlen(a);<br />  </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">len; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />  {<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (a[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;"> </span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />      </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j</span><span style="color: #000000;">=</span><span style="color: #000000;">i; j</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">len; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />      {<br />        a[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> a[j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />      }<br />    }<br />  }<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> a[</span><span style="color: #800080;">256</span><span style="color: #000000;">]</span><span style="color: #000000;">=</span><span style="color: #800000;">"</span><span style="color: #800000;">as;ldfj s a  s kdl  jfl;k sadjf</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />  puts(a);<br />  fun(a);<br />  puts(a);<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>

<p>测试结果：</p>

<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ gcc </span><span style="color: #000000;">-</span><span style="color: #000000;">lm code10.c<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">as</span><span style="color: #000000;">;ldfj s a  s kdl  jfl;k sadjf<br /></span><span style="color: #0000ff;">as</span><span style="color: #000000;">;ldfjsaskdljfl;ksadjf</span></div></pre>
</div>

<p><span style="color: #0000ff;"><strong>程序11：输入三条线段的长度，判定它能否组成一个三角形。如果可以构成三角形，打印它所构成的三角形所构成的类型：等边/等腰/直角/任意三角形。</strong></span></p>
<p><span color="#0000ff" style="color: #0000ff;">代码：</span></p>
<p><span color="#0000ff" style="color: #0000ff;">
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">程序11：输入三条线段的长度，判定它能否组成一个三角形。如果可以构成三角形，打印它所构成的三角形所构成的类型：等边/等腰/直角/任意三角形。</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> fun(</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> a, </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> b, </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> c)<br />{<br />  </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />  </span><span style="color: #008000;">//</span><span style="color: #008000;">n=0代表任意三角形<br />  </span><span style="color: #008000;">//</span><span style="color: #008000;">n=1代表等边三角形<br />  </span><span style="color: #008000;">//</span><span style="color: #008000;">n=2代表等腰三角形<br />  </span><span style="color: #008000;">//</span><span style="color: #008000;">n=3代表直角三角形<br />  </span><span style="color: #008000;">//</span><span style="color: #008000;">n=4代表不能构成三角形<br />  </span><span style="color: #008000;">//</span><span style="color: #008000;">n=5代表等要直角三角形</span><span style="color: #008000;"><br /></span><span style="color: #000000;">  <br />  </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a</span><span style="color: #000000;">+</span><span style="color: #000000;">b</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">c </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> abs(a</span><span style="color: #000000;">-</span><span style="color: #000000;">b)</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">c)<br />  {<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a</span><span style="color: #000000;">*</span><span style="color: #000000;">a</span><span style="color: #000000;">+</span><span style="color: #000000;">b</span><span style="color: #000000;">*</span><span style="color: #000000;">b</span><span style="color: #000000;">==</span><span style="color: #000000;">c</span><span style="color: #000000;">*</span><span style="color: #000000;">c </span><span style="color: #000000;">||</span><span style="color: #000000;"> a</span><span style="color: #000000;">*</span><span style="color: #000000;">a</span><span style="color: #000000;">+</span><span style="color: #000000;">c</span><span style="color: #000000;">*</span><span style="color: #000000;">c</span><span style="color: #000000;">==</span><span style="color: #000000;">b</span><span style="color: #000000;">*</span><span style="color: #000000;">b </span><span style="color: #000000;">||</span><span style="color: #000000;"> b</span><span style="color: #000000;">*</span><span style="color: #000000;">b</span><span style="color: #000000;">+</span><span style="color: #000000;">c</span><span style="color: #000000;">*</span><span style="color: #000000;">c</span><span style="color: #000000;">==</span><span style="color: #000000;">a</span><span style="color: #000000;">*</span><span style="color: #000000;">a)<br />    {<br />      n</span><span style="color: #000000;">=</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a</span><span style="color: #000000;">==</span><span style="color: #000000;">b </span><span style="color: #000000;">||</span><span style="color: #000000;"> a</span><span style="color: #000000;">==</span><span style="color: #000000;">c </span><span style="color: #000000;">||</span><span style="color: #000000;"> b</span><span style="color: #000000;">==</span><span style="color: #000000;">c)<br />    {<br />      n</span><span style="color: #000000;">=</span><span style="color: #800080;">2</span><span style="color: #000000;">;<br />      </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a</span><span style="color: #000000;">*</span><span style="color: #000000;">a</span><span style="color: #000000;">+</span><span style="color: #000000;">b</span><span style="color: #000000;">*</span><span style="color: #000000;">b</span><span style="color: #000000;">==</span><span style="color: #000000;">c</span><span style="color: #000000;">*</span><span style="color: #000000;">c </span><span style="color: #000000;">||</span><span style="color: #000000;"> a</span><span style="color: #000000;">*</span><span style="color: #000000;">a</span><span style="color: #000000;">+</span><span style="color: #000000;">c</span><span style="color: #000000;">*</span><span style="color: #000000;">c</span><span style="color: #000000;">==</span><span style="color: #000000;">b</span><span style="color: #000000;">*</span><span style="color: #000000;">b </span><span style="color: #000000;">||</span><span style="color: #000000;"> b</span><span style="color: #000000;">*</span><span style="color: #000000;">b</span><span style="color: #000000;">+</span><span style="color: #000000;">c</span><span style="color: #000000;">*</span><span style="color: #000000;">c</span><span style="color: #000000;">==</span><span style="color: #000000;">a</span><span style="color: #000000;">*</span><span style="color: #000000;">a)<br />      {<br />        n</span><span style="color: #000000;">=</span><span style="color: #800080;">5</span><span style="color: #000000;">;<br />      }<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a</span><span style="color: #000000;">==</span><span style="color: #000000;">b </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> a</span><span style="color: #000000;">==</span><span style="color: #000000;">c)<br />    {<br />      n</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    }<br />  }<br />  </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />  {<br />    n</span><span style="color: #000000;">=</span><span style="color: #800080;">4</span><span style="color: #000000;">;<br />  }<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> n;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />  </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> a,b,c;<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">输入数据\na=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f</span><span style="color: #800000;">"</span><span style="color: #000000;">,</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a);<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">b=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">b);<br />  printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">c=</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />  scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">c);<br />  </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (fun(a,b,c))<br />  {<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">:<br />      printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">三角形为任意三角形\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />      </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">:<br />      printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">三角形为等边三角形\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />      </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">:<br />      printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">三角形为等腰三角形\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />      </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">3</span><span style="color: #000000;">:<br />      printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">三角形为直角三角形\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />      </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">4</span><span style="color: #000000;">:<br />      printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">不能构成三角形\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />      </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">5</span><span style="color: #000000;">:<br />      printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">三角形为等腰直角三角形\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />      </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />  }<br />  </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
<br /></span></p>
<p><span color="#0000ff" style="color: #0000ff;">测试结果：</span></p>
<p><span color="#0000ff" style="color: #0000ff;">
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />输入数据<br />a</span><span style="color: #000000;">=</span><span style="color: #800080;">12</span><span style="color: #000000;"><br />b</span><span style="color: #000000;">=</span><span style="color: #800080;">12</span><span style="color: #000000;"><br />c</span><span style="color: #000000;">=</span><span style="color: #800080;">25</span><span style="color: #000000;"><br />不能构成三角形<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">a.</span><span style="color: #0000ff;">out</span><span style="color: #000000;"><br />输入数据<br />a</span><span style="color: #000000;">=</span><span style="color: #800080;">12</span><span style="color: #000000;"><br />b</span><span style="color: #000000;">=</span><span style="color: #800080;">12</span><span style="color: #000000;"><br />c</span><span style="color: #000000;">=</span><span style="color: #800080;">23</span><span style="color: #000000;"><br />三角形为等腰三角形</span></div></pre>
</div>
<br /></span></p>]]></description></item><item><title>VB连数据库conn.open的参数</title><link>http://www.cnblogs.com/hanxi/archive/2011/06/30/2094983.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 30 Jun 2011 12:36:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/06/30/2094983.html</guid><description><![CDATA[<table>
<tbody>
<tr>
<td>
<div id="blog_text" class="cnt">conn.open mysql,conn,A,B&nbsp;<br />参数A为设定游标的类型，其取值为：&nbsp;<br />0 仅向前游标，只能向前浏览记录，不支持分页、Recordset、BookMark&nbsp;<br />1 键集游标，其他用户对记录说做的修改将反映到记录集中，但其他用户增加或删除记录不会反映到记录集中。支持分页、Recordset、BookMark&nbsp;<br />2 动态游标功能最强，但耗资源也最多。用户对记录说做的修改，增加或删除记录都将反映到记录集中。支持全功能浏览。&nbsp;<br />3 静态游标，只是数据的一个快照，用户对记录说做的修改，增加或删除记录都不会反映到记录集中。支持向前或向后移动&nbsp;<br /><br />参数B为记录集的锁定类型，其取值为：&nbsp;<br />1 锁定类型，默认的，只读，不能作任何修改&nbsp;<br />2 当编辑时立即锁定记录，最安全的方式&nbsp;<br />3 只有在调用Update方法时才锁定记录集，而在此前的其他操作仍可对当前记录进行更改、插入和删除等&nbsp;<br />4 当编辑时记录不会被锁定，而更改、插入和删除是在批处理方式下完成的</div>

</td>

</tr>

</tbody>

</table>]]></description></item><item><title>VB使用ADO对象链接数据库</title><link>http://www.cnblogs.com/hanxi/archive/2011/06/30/2094256.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 30 Jun 2011 03:07:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/06/30/2094256.html</guid><description><![CDATA[<p>　1． 定义连接对象</p>
<p>　　Global DBconnect As New ADODB.Connection</p>
<p>　　2． 执行连接语句</p>
<p>　　If DBconnect.State = adStateOpen And Not IsEmpty(adStateOpen) Then DBconnect.Close</p>
<p>　　连接ODBC</p>
<p>　　DBconnect.ConnectionString = "dsn=DataAliasName;uid=UserID;pwd=Passwd;"</p>
<p>　　直接连接<a class="common" href="http://www.soidc.net/search_article.shtml?wo=Access" target="_blank">Access</a>为</p>
<p>　　Dbconnect.Provider = "Microsoft.jet.OLEDB.4.0"　// Access 97为3.51</p>
<p>　　DBconnect.ConnectionString = "FilePathFileName.mdb"</p>
<p>　　连接<a class="common" href="http://www.soidc.net/search_article.shtml?wo=Oracle" target="_blank">Oracle</a></p>
<p>　　DBconnect.Provider = "MSADORA"</p>
<p>　　DBconnect.ConnectionString = "user/mypass@servicename</p>
<p>　　连接<a class="common" href="http://www.soidc.net/search_article.shtml?wo=SQL+Server" target="_blank">SQL Server</a></p>
<p>　　DBconnect.Provider = "SQLOLEDB.1"</p>
<p>　　DBconnect.ConnectionString = "DATABASE= ;SERVER= ;UID= ;PWD= ;"</p>
<p>　　或者可以使用 DBconnect.Open "SERVER" , "USERID" , "PASSWORD"</p>
<p>　　DBConnect.Open</p>
<p>　　3． 取查询结果集</p>
<p><code>Global RS As New ADODB.Recordset<br />Global PS As New ADODB.Recordset<br />If RS.State = adStateOpen And Not IsEmpty(adStateOpen) Then RS.Close<br />　　 RS.Open SQLStr, DBconnect, adOpenKeyset</code></p>
<p>　　4． 执行<a class="common" href="http://www.soidc.net/search_article.shtml?wo=SQL%D3%EF%BE%E4" target="_blank">SQL语句</a></p>
<p>　　DBconn.Execute SQLStr</p>
<p>　　5． 关闭<a class="common" href="http://www.soidc.net/search_article.shtml?wo=%CA%FD%BE%DD%BF%E2" target="_blank">数据库</a></p>
<p>　　DBconnect.Close</p>]]></description></item><item><title>[转载]linux 出现： Starting MySQL.Manager of pid-file quit without updating file.[FAILED] 已解决</title><link>http://www.cnblogs.com/hanxi/archive/2011/06/16/2082276.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 15 Jun 2011 22:08:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/06/16/2082276.html</guid><description><![CDATA[<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<p>声明：此文章转载自：
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<a href="http://blog.csdn.net/shuicaohui5/archive/2009/12/16/5015218.aspx">http://blog.csdn.net/shuicaohui5/archive/2009/12/16/5015218.aspx</a></p>
<p>安装mysql 版本： mysql-5.1.41-linux-i686-icc-glibc23.tar.gz</p>

<p>第一步：</p>
<p>mysql5.1.30&nbsp;&nbsp; 初次启动会出现Manager of pid-file quit without updating fi[FAILED]的报错，需要注释/etc/my.cnf里的skip-federated注释掉即#skip-federated就OK了！</p>
<p>但还不好用。错误依旧。</p>

<p>第二步：</p>

<p>杀掉已经启动的进程</p>

<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<p>CODE:</p>
<p>[root@localhost mysql]# ps -A|grep mysql</p>
<p>8016 pts/2 00:00:00 mysqld_safe</p>
<p>8037 pts/2 00:00:00 mysqld</p>
</td>
</tr>
</tbody>
</table>
<p>果然有两个顽固分子</p>
<p>杀之！！！</p>
<p>kill -9 8037（杀掉这个8016那个就自动被杀了！）</p>
<p>kill -9 8016</p>
<p>开心的时刻终于到来了</p>

<p>CODE:</p>
<p>[root@localhost mysql]# /etc/init.d/mysql restart</p>
<p>MySQL manager or server PID file could not be found! [FAILED]</p>
<p>Starting MySQL [ OK ]</p>]]></description></item><item><title>[转载]解决mysql“Access denied for user 'root'@'localhost'”</title><link>http://www.cnblogs.com/hanxi/archive/2011/06/16/2082275.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 15 Jun 2011 21:46:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/06/16/2082275.html</guid><description><![CDATA[<p><strong><span style="font-size: 16px; color: #0000ff;">声明：此文转载自：</span></strong>
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<strong><span style="font-size: 16px; color: #0000ff;">
<a href="http://blogold.chinaunix.net/u1/35320/showart_305024.html">http://blogold.chinaunix.net/u1/35320/showart_305024.html</a></span></strong></p>
<p>我的系统是ubuntu6.06，最近新装好的mysql在进入mysql工具时，总是有错误提示:<br /># mysql -uroot -p<br />Enter password:<br />ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)<br /><br />使用网上介绍的方法修改root用户的密码：<br /># mysqladmin -uroot -p password 'newpassword'<br />Enter password:<br />mysqladmin: connect to server at 'localhost' failed<br />error: 'Access denied for user 'root'@'localhost' (using password: YES)'<br /><br />现在终于被我找到了解决方法，如下（请先测试方法三，谢谢！）：<br />方法一：<br /># /etc/init.d/mysql stop<br /># mysqld_safe --user=mysql --skip-grant-tables --skip-networking &amp;<br /># mysql -u root mysql<br />mysql&gt; UPDATE user SET Password=PASSWORD('newpassword') where USER='root';<br />mysql&gt; FLUSH PRIVILEGES;<br />mysql&gt; quit<br /><br /># /etc/init.d/mysql restart<br /># mysql -uroot -p<br />Enter password: &lt;输入新设的密码newpassword&gt;<br /><br />mysql&gt;<br /><br /><br />方法二：<br />直接使用/etc/mysql/debian.cnf文件中[client]节提供的用户名和密码:<br /># mysql -udebian-sys-maint -p<br />Enter password: &lt;输入[client]节的密码&gt;<br />mysql&gt; UPDATE user SET Password=PASSWORD('newpassword') where USER='root';<br />mysql&gt; FLUSH PRIVILEGES;<br />mysql&gt; quit<br /><br /># mysql -uroot -p<br />Enter password: &lt;输入新设的密码newpassword&gt;<br /><br />mysql&gt;<br /><br /><br />方法三：<br />这种方法我没有进行过测试，因为我的root用户默认密码已经被我修改过了，那位有空测试一下，把结果告诉我，谢谢！！<br /># mysql -uroot -p<br />Enter password: &lt;输入/etc/mysql/debian.cnf文件中[client]节提供的密码&gt;<br /><br />至此，困惑多时的问题解决了！</p>
<p><span style="color: #0000ff; font-size: 14pt;"><strong>我试用了第一种方法，ok了，跟博友们分享下。。。。。。。。。</strong></span></p>]]></description></item><item><title>标准C++输入输出和字符串类学习小程序集锦</title><link>http://www.cnblogs.com/hanxi/archive/2011/06/12/2078649.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 11 Jun 2011 17:28:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/06/12/2078649.html</guid><description><![CDATA[<p><span style="color: #0000ff;">【声明】本博客内容可以随意转载，但请您注明出处：
</span>
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<a href="http://www.cnblogs.com/hanxi/"><span style="color: #0000ff;">http://www.cnblogs.com/hanxi/</span></a></p>
<p>代码可能有很多不足之处或有错误，还望各路朋友们指点指点。</p>
<p><strong>1.计算一个字符串在另一个字符串中出现的次数</strong></p>
<p>程序思想：调用find函数查找子串，找到一个就记录一次，并接着往下找，直到找不到为止。</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">/*</span><span style="color: #008000;">函数作用：用来计算一个字符串在另一个字符串中出现的次数</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::</span><span style="color: #0000ff;">string</span><span style="color: #000000;">; <br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> count_str(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> maxstr, </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> minstr)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> count </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> ((i </span><span style="color: #000000;">=</span><span style="color: #000000;"> maxstr.find(minstr,i)) </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">string</span><span style="color: #000000;">::npos)<br />    {<br />        count</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        i </span><span style="color: #000000;">+=</span><span style="color: #000000;"> minstr.size();<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> count;<br />}</span></div></pre>
</div>
<p>下面是一个测试程序：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> count_str(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> maxstr, </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> minstr);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> maxstr </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">desdfdesdfdefgd</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> minstr </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">de</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #000000;"> count_str(maxstr, minstr);<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">出现了</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> num </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">次</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />}</span></div></pre>
</div>
<p>编译过程和结果：</p>
<p>&nbsp;$&nbsp;g++ findstr.cpp main.cpp -o main</p>
<p>&nbsp;$ ./main</p>
<p>出现了3次</p>
<p><strong>2.接受月份的数字，返回这个月份的名字：</strong></p>
<p>程序思想：使用字符串s存放1到12月的英文单词，每个单词用逗号隔开，首尾也加逗号，然后进入一个循环判断该月是那一个月，判断过程中，</p>
<p>j存储月份名字开始字母的位置，i存放该月份名字后面的逗号的位置，找到月份的单词后就退出循环，最后返回字串。</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">/*</span><span style="color: #008000;">数字转月份的名字</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std; <br /><br /></span><span style="color: #0000ff;">string</span><span style="color: #000000;"> monthname(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> monthnum)<br />{<br />    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> s</span><span style="color: #000000;">=</span><span style="color: #800000;">"</span><span style="color: #800000;">,January,February,March,April,May,June,July,August,Spetember,October,November,December,</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> count </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">,j</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">do</span><span style="color: #000000;"><br />    {<br />        j </span><span style="color: #000000;">=</span><span style="color: #000000;"> i;</span><span style="color: #008000;">//</span><span style="color: #008000;">j存储月份名字开始字母的位置，i存放该月份名字后面的逗号的位置</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        i </span><span style="color: #000000;">=</span><span style="color: #000000;"> s.find(</span><span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">,i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />        count</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    }</span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (count </span><span style="color: #000000;">!=</span><span style="color: #000000;"> monthnum);<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> s.substr(j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">,i</span><span style="color: #000000;">-</span><span style="color: #000000;">j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />}</span></div></pre>
</div>
<p>测试程序代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">monthnametext.cpp</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /></span><span style="color: #0000ff;">string</span><span style="color: #000000;"> monthname(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> monthnum);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (;num</span><span style="color: #000000;">&lt;=</span><span style="color: #800080;">12</span><span style="color: #000000;">;num</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthname(num) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    }<br />}</span></div></pre>
</div>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<p>编译过程和结果：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;"> $  g</span><span style="color: #000000;">++</span><span style="color: #000000;"> monthname.cpp monthnametext.cpp </span><span style="color: #000000;">-</span><span style="color: #000000;">o m<br /> $ .</span><span style="color: #000000;">/</span><span style="color: #000000;">m<br /><br />January<br />February<br />March<br />April<br />May<br />June<br />July<br />August<br />Spetember<br />October<br />November<br />December</span></div></pre>
</div>
<p><strong>3.接受月份的名字，返回这个月份的数字</strong></p>
<p>程序思想：
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
使用字符串s存放1到12月的英文单词，每个单词用逗号隔开，首加逗号。然后在s中查找monthname，找到后记录第一个字母的位置。</p>
<p>再调用刚开始写的第一个函数count_str。</p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">/*</span><span style="color: #008000;">月份的名字转数字</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std; <br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> count_str(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> maxstr, </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> minstr);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> monthnum(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> monthname)<br />{<br />    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> s</span><span style="color: #000000;">=</span><span style="color: #800000;">"</span><span style="color: #800000;">,January,February,March,April,May,June,July,August,Spetember,October,November,December</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    i </span><span style="color: #000000;">=</span><span style="color: #000000;"> s.find(monthname);<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> count_str(s.substr(</span><span style="color: #800080;">0</span><span style="color: #000000;">,i), </span><span style="color: #800000;">"</span><span style="color: #800000;">,</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />}</span></div></pre>
</div>
<p>测试程序的代码：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">/</span><span style="color: #000000;">monthnumtext.cpp<br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> monthnum(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> monthname);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">January</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">February</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">March</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">April</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">May</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">June</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">July</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">August</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">Spetember</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">October</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">November</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> monthnum(</span><span style="color: #800000;">"</span><span style="color: #800000;">December</span><span style="color: #800000;">"</span><span style="color: #000000;">) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />}</span></div></pre>
</div>
<p>编译过程和结果：</p>
<p>
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ g</span><span style="color: #000000;">++</span><span style="color: #000000;"> findstr.cpp monthnum.cpp monthnumtext.cpp </span><span style="color: #000000;">-</span><span style="color: #000000;">o mo<br />[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">mo<br /></span><span style="color: #800080;">1</span><span style="color: #000000;"><br /></span><span style="color: #800080;">2</span><span style="color: #000000;"><br /></span><span style="color: #800080;">3</span><span style="color: #000000;"><br /></span><span style="color: #800080;">4</span><span style="color: #000000;"><br /></span><span style="color: #800080;">5</span><span style="color: #000000;"><br /></span><span style="color: #800080;">6</span><span style="color: #000000;"><br /></span><span style="color: #800080;">7</span><span style="color: #000000;"><br /></span><span style="color: #800080;">8</span><span style="color: #000000;"><br /></span><span style="color: #800080;">9</span><span style="color: #000000;"><br /></span><span style="color: #800080;">10</span><span style="color: #000000;"><br /></span><span style="color: #800080;">11</span><span style="color: #000000;"><br /></span><span style="color: #800080;">12</span></div></pre>
</div>

<p>
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<strong>4.接受含有大写和小写字母的字符串，返回这个字符串的全部是小写字母的拷贝或全是大写字母的拷贝</strong></p>
<p>程序思想：若要得到小写字母，找出大写字母并将其改为小写字母。若要得到大写字母则相反。</p>

<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> tolower_or_toupper(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">str, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> option)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (option </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">l</span><span style="color: #800000;">'</span><span style="color: #000000;"> </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> option </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">u</span><span style="color: #800000;">'</span><span style="color: #000000;">) //使用字符'l'和'u'判断是转换为小写还是大写字母<br />    {<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> option </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">The option is error! It must be 'l' or 'u'</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">str.length();i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (isupper(str.at(i)) </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> option </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">l</span><span style="color: #800000;">'</span><span style="color: #000000;">)//转换为小写的<br />        {<br />            str.at(i) </span><span style="color: #000000;">=</span><span style="color: #000000;"> str.at(i) </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span><span style="color: #000000;">-</span><span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">;//ascii码记不住没关系，临时转换就是了<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (islower(str.at(i)) </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> option </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">u</span><span style="color: #800000;">'</span><span style="color: #000000;">)//转换为大写的<br />        {<br />            str.at(i) </span><span style="color: #000000;">=</span><span style="color: #000000;"> str.at(i) </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">-</span><span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>

<p>下面是一个测试程序：</p>

<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> tolower_or_toupper(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">str, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> option);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> str </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">aFkFHkKFNDJHDNFkfksdjjek</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    tolower_or_toupper(str, </span><span style="color: #800000;">'</span><span style="color: #800000;">l</span><span style="color: #800000;">'</span><span style="color: #000000;">);//全部转换为小写的<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">The loer letters is : </span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> str </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    tolower_or_toupper(str, </span><span style="color: #800000;">'</span><span style="color: #800000;">u</span><span style="color: #800000;">'</span><span style="color: #000000;">);//全部转换为大写的<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">The upper letters is : </span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> str </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>

<p>下面的也是一个测试程序，只不过嫁了个文件操作：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">fstream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> tolower_or_toupper(</span><span style="color: #0000ff;">string</span><span style="color: #000000;"> </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">str, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> option);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> str </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">aFkFHkKFNDJHDNFkfksdjjek</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    tolower_or_toupper(str, </span><span style="color: #800000;">'</span><span style="color: #800000;">l</span><span style="color: #800000;">'</span><span style="color: #000000;">);<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">The loer letters is : </span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> str </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    str </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">aFkFHkKFNDJHDNFkfksdjjek</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    tolower_or_toupper(str, </span><span style="color: #800000;">'</span><span style="color: #800000;">u</span><span style="color: #800000;">'</span><span style="color: #000000;">);<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">The upper letters is : </span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> str </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    <br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">测试一个文件的更改</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> buffer[</span><span style="color: #800080;">256</span><span style="color: #000000;">];<br />    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> delim;<br />    fstream file;<br />    file.open(</span><span style="color: #800000;">"</span><span style="color: #800000;">tmp</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (file.is_open()) <br />    {<br />        file.</span><span style="color: #0000ff;">get</span><span style="color: #000000;">(buffer,</span><span style="color: #800080;">256</span><span style="color: #000000;">, delim</span><span style="color: #000000;">=</span><span style="color: #000000;">EOF);<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> buffer </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />        file.close();<br />    }<br />    str.assign(buffer);<br />    tolower_or_toupper(str, </span><span style="color: #800000;">'</span><span style="color: #800000;">u</span><span style="color: #800000;">'</span><span style="color: #000000;">);<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">The upper letters is : </span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> str </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
</p>
<p>编译和运行：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[hanxi@hanxi-workstation Documents]$ g++ letter.cpp testletter.cpp -o strtest<br /></span></div><div><span style="color: #000000;">[hanxi@hanxi</span><span style="color: #000000;">-</span><span style="color: #000000;">workstation Documents]$ .</span><span style="color: #000000;">/</span><span style="color: #000000;">strtest<br />The loer letters </span><span style="color: #0000ff;">is</span><span style="color: #000000;"> : afkfhkkfndjhdnfkfksdjjek<br />The upper letters </span><span style="color: #0000ff;">is</span><span style="color: #000000;"> : AFKFHKKFNDJHDNFKFKSDJJEK<br />Walter</span><span style="color: #800000;">'</span><span style="color: #800000;">s goal in life was to become a successful surgeon. First, though, he had to get through high school, so he concentrated all his efforts on his studies &mdash;&mdash; in particular, biology, chemistry, and math. Because he worked constantly on these subject</span><span style="color: #800000;"><br /></span><span style="color: #000000;">The upper letters </span><span style="color: #0000ff;">is</span><span style="color: #000000;"> : WALTER</span><span style="color: #800000;">'</span><span style="color: #800000;">S GOAL IN LIFE WAS TO BECOME A SUCCESSFUL SURGEON. FIRST, THOUGH, HE HAD TO GET THROUGH HIGH SCHOOL, SO HE CONCENTRATED ALL HIS EFFORTS ON HIS STUDIES &mdash;&mdash; IN PARTICULAR, BIOLOGY, CHEMISTRY, AND MATH. BECAUSE HE WORKED CONSTANTLY ON THESE SUBJECT</span></div></pre>
</div>
</p>






<p>&lt;还会继续更新&gt;</p>]]></description></item><item><title>Oracle Enterprise Linux 6.0配置本地yum</title><link>http://www.cnblogs.com/hanxi/archive/2011/06/01/2065694.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 01 Jun 2011 05:43:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/06/01/2065694.html</guid><description><![CDATA[<p>【声明】：本文可随意转载，但请注明出处：<a href="http://www.cnblogs.com/hanxi/">http://www.cnblogs.com/hanxi/</a></p>

<p>我安装的linux系统是Oracle Linux，其全称为Oracle Enterprise Linux。是从电驴网下载的：<a href="Oracle Linux，其全称为Oracle Enterprise Linux">http://www.verycd.com/topics/2888648/</a></p>
<p>下面的方法是我自己实验成功了的。</p>
<p><span style="font-size: 18pt;">1.<strong>创建一个存放iso镜像或光盘内容的目录</strong></span></p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]# </span><span style="color: #0000ff;">mkdir /home/hanxi/yum</span></p>
<p>并从光盘介质或iso镜像文件中的所有文件拷贝到刚创建的目录里(<span style="color: #0000ff;">/home/hanxi/yum</span>)。</p>
<p>如果是光盘可以使用命令：</p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]# </span><span style="color: #0000ff;">cp -r &nbsp;/media/cdrom&nbsp; /home/hanxi/yum</span></p>
<p>ps:<span style="color: #0000ff;">/media/cdrom</span>是mount光驱的目录。</p>
<p>我用的是iso镜像文件，我就直接使用鼠标把文件复制到<span style="color: #0000ff;"> /home/hanxi/yum</span></p>
<p>ps:注意是iso文件里的所有文件，不是iso文件。</p>
<p><strong>复制完成后是这个样的，如下图</strong></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011060113141312.png" /></p>
<p><span style="font-size: 18pt;">2.<strong>安装createrepo</strong></span></p>
<p><span>
</span></p>
<p>createrepo是配置YUM源的配置工具，检查当前是否已经安装createrepo包的安装情况：</p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]#</span> <span style="color: #0000ff;">rpm&nbsp; -qa |grep&nbsp; createrepo &nbsp;</span></p>
<p>如果显示为尚未安装，则需要执行如下的命令完成安装：</p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]#</span><span style="color: #0000ff;"> rpm&nbsp; -ivh&nbsp; 
/home/hanxi/yum/Packages/createrepo-0.9.8-4.el6.noarch.rpm</span></p>
<p>ps：版本因操作系统的版本有所区别，请查找当前系统的createrepo版本rpm包进行安装,可以到<span style="color: #0000ff;">/home/hanxi/yum/Packages/</span>文件夹下查找，如下图：</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011060113195978.png" /></p>
<p><span style="font-size: 18pt;">3.<strong>创建yum repository的xml-rpm-metadata</strong></span></p>
<p>执行如下命令：</p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]#</span><span style="color: #0000ff;"> createrepo&nbsp; -g&nbsp;
/home/hanxi/yum/Server/repodata/repomd.xml&nbsp;
/home/hanxi/yum/Server/</span></p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]#</span><span style="color: #0000ff;"> createrepo&nbsp; -g&nbsp;
/home/hanxi/yum/HighAvailability/repodata/repomd.xml&nbsp;
/home/hanxi/yum/HighAvailability/</span></p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]#</span><span style="color: #0000ff;"> createrepo&nbsp; -g&nbsp;
/home/hanxi/yum/LoadBalancer/repodata/repomd.xml&nbsp;
/home/hanxi/yum/LoadBalancer/</span></p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]#</span><span style="color: #0000ff;"> createrepo&nbsp; -g&nbsp;
/home/hanxi/yum/ResilientStorage/repodata/repomd.xml&nbsp;
/home/hanxi/yum/ResilientStorage/</span></p>
<p>ps:上面每条命令可能都有段处理时间,注意要等待，如下图：</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011060113285022.png" /></p>
<p>执行createrepo命令后系统会自动扫描相关目录，将rpm包加入到YUM源的数据库中。</p>
<p><span style="font-size: 18pt;">4.<strong>创建本地yum客户端的repo文件</strong></span></p>
<p>配置使用本地yum repository：</p>
<p><span style="color: #800000;">[root@hanxi-workstation hanxi]#</span><span style="color: #0000ff;"> cd&nbsp; /etc/yum.repos.d/</span></p>
<p><span style="color: #800000;">[root@hanxi-workstation yum.repos.d]#</span> <span style="color: #0000ff;">gedit local.repo&nbsp; </span></p>
<p>ps：名字可以随便起，但是要以<span style="color: #0000ff;">.repo</span>为后缀</p>
<p>接下来在文件中添加如<strong>下内容后保存：</strong></p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">[HighAvailability]<br />name= HighAvailability<br />baseurl=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/HighAvailability<br />enabled=</span><span style="color: #800080;">1</span><span style="color: #000000;"><br />gpgcheck=</span><span style="color: #800080;">0</span><span style="color: #000000;"><br />gpgkey=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/RPM-GPG-KEY-oracle<br /><br />[LoadBalancer]<br />name= LoadBalance<br />baseurl=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/LoadBalancer<br />enabled=</span><span style="color: #800080;">1</span><span style="color: #000000;"> <br />gpgcheck=</span><span style="color: #800080;">0</span><span style="color: #000000;"><br />gpgkey=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/RPM-GPG-KEY-oracle<br /><br />[ResilientStorage]<br />name=ResilientStorage<br />baseurl=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/ResilientStorage<br />enabled=</span><span style="color: #800080;">1</span><span style="color: #000000;"> <br />gpgcheck=</span><span style="color: #800080;">0</span><span style="color: #000000;"><br />gpgkey=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/RPM-GPG-KEY-oracle<br /><br />[Server]                          <br />name=Server                   <br />baseurl=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/Server    <br />gpgcheck=</span><span style="color: #800080;">0</span><span style="color: #000000;">    <br />enabled=</span><span style="color: #800080;">1</span><span style="color: #000000;">      <br />gpgkey=</span><span style="color: #008080;">file:</span><span style="color: #000000;">/home/hanxi/yum/RPM-GPG-KEY-oracle</span></div></pre>
</div>
</p>
<p>如下图：</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011060113360449.png" /></p>
<p><span style="font-size: 18pt;"><strong>5.测试使用yum来安装软件包</strong></span></p>
<p>可以按下面的菜单路径打开<strong><span style="color: #0000ff;">添加/删除软件</span></strong>：系统--&gt;管理--&gt;<strong><span style="color: #0000ff;">添加/删除软件</span></strong></p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011060113391160.png" /></p>
<p>现在可以在搜索框里搜索到软件了。。。</p>

<p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p>
<p>-----------------------------------------------------------------------------------------------------------------</p>
<p>++++++++++++++++++++++++++++++++++++++++++++++++++++++</p>
<p>-------------------------------------------------------------</p>
<p>+++++++++++++++++++++++++<br /><span style="color: #0000ff; font-size: 18pt;"><strong>小小经验，一起分享，分享快乐</strong></span></p>
<p>!!!!!!!!!!!!!!!!!!</p>]]></description></item><item><title>[Linux网络编程学习笔记]套接字地址结构</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/26/2059307.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 26 May 2011 14:49:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/26/2059307.html</guid><description><![CDATA[<p>好久没有看那Linux网络编程这本书了，今天看到了重点部分—TCP套接字。下面先来看看套接字的地址结构</p>  <p>Linux系统的套接字可以支持多种协议，每种不同的协议都是用不同的地址结构。在头文件&lt;linux/socket.h&gt;中有一个这样的老式结构（现在一般不使用这个结够了）。</p>  <div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper"> <div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">struct</span> sockaddr</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">{</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">short</span>  sa_family;  <span style="color: #008000">//套接字的协议簇地址类型，TCP/IP协议对于IPv4地址类型为AF_INET</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">char</span>            sa_data[14];<span style="color: #008000">//存储具体的协议地址</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">};</pre><!--CRLF--></div></div>
<p>现在一般使用下面这个sockaddr_in结构（用来设置/获取地址信息）：</p>

<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; height: 115px; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">struct</span> sockaddr_in</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">{</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">short</span> sin_len;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //IPv4地址长度</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">short</span> <span style="color: #0000ff">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sin_family;&nbsp;&nbsp; //指代协议簇，在TCP套接字编程只能是AF_INET</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">short</span> sin_port;&nbsp;&nbsp;&nbsp;&nbsp; //存储端口号（使用网络字节顺序），数据类型是一个16为的无符号整形类型</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">struct</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; in_addr sin_addr;//存储IP地址，IP地址是一个in_add结构体（结构在下面）</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">char</span>&nbsp; sin_zero[8];&nbsp;&nbsp;&nbsp;&nbsp; //为了让sockaddr与sockaddr_in两个数据结构保持大小相同而保留的空字节</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">};</pre><!--CRLF--></div></div>
<p>其中，in_addr这个数据结构：</p>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">struct</span> in_addr</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">{</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">long</span> s_addr;&nbsp;&nbsp; //按照网络字节顺序存储IP地址</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">};</pre><!--CRLF--></div></div>
<p><strong>在现在很火的IPv6中套接字地址结构使用了下面这个结构体(结构中的成员是有序排列的)：</strong></p>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">#DEFINE SIN6_LEN</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">struct</span> sockaddr_in6</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">{</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">short</span> <span style="color: #0000ff">int</span>       sin6_len;&nbsp;&nbsp; //IPv6结构长度，是一个无符号的8为整数，表示128为IPv6地址长度</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><p>    <span style="color: #0000ff">short</span> <span style="color: #0000ff">int</span>                sin6_family; //地址类型AF_INET6</p><p>    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">short</span> <span style="color: #0000ff">int       sin6_port;   //存储端口号，按网络字节顺序</span></p></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">short</span> <span style="color: #0000ff">int</span>       sin6_flowinfo;&nbsp; //低24位是流量标号，然后是4位的优先级标志，剩下四位保留</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">    <span style="color: #0000ff">struct</span> in6_addr          sin6_addr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //IPv6地址，网络字节顺序</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">};</pre><!--CRLF--></div>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">struct</span> in6_addr</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">{</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">     <span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">long</span> s6_addr;&nbsp; //128位的IPv6地址，网络字节顺序</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">};</pre><!--CRLF--></div></div>
</div>
<p><strong>好了，看个例子更好说明这些结构体的应用，下面以IPv4为例：</strong></p>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">struct</span> sockaddr_in mysock;</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">mysock.sin_family = AF_INET;  <span style="color: #008000">//TCP地址结构</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">mysock.sin_port = htons(3490); <span style="color: #008000">//字节顺序转换函数（后面我会介绍的）</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">mysock.sin_addr.s_addr = inet_addr(<span style="color: #006080">"166.111.160.10"</span>);<span style="color: #008000">//设置IP地址</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">bzero(&amp;(mysock.sin_zero),8);<span style="color: #008000">//设置sin_zero为8位保留字节</span></pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px">//如果mysock.sin_addr.s_addr = INADDR_ANY,则不指定IP地址（用于server程序）</pre><!--CRLF--></div></div>
<p><strong>一些基本的函数：</strong></p>
<p>IP地址转换函数：inet_addr()和inet_ntoa()</p>
<p>格式：</p>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: 'Courier New', courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px" id="codeSnippetWrapper">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px" id="codeSnippet"><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: white; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">unsigned</span> <span style="color: #0000ff">long</span> inet_addr(<span style="color: #0000ff">const</span> <span style="color: #0000ff">char</span> *cp);</pre><!--CRLF--><pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; background-color: #f4f4f4; margin: 0em; border-left-style: none; padding-left: 0px; width: 100%; padding-right: 0px; font-family: 'Courier New', courier, monospace; direction: ltr; border-top-style: none; color: black; border-right-style: none; font-size: 8pt; overflow: visible; padding-top: 0px"><span style="color: #0000ff">char</span>* inet_ntoa(<span style="color: #0000ff">struct</span> in_addr in);</pre><!--CRLF--></div></div>]]></description></item><item><title>[Linux网络编程笔记]传输协议TCP和UDP简介</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/26/2058121.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 26 May 2011 05:47:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/26/2058121.html</guid><description><![CDATA[<p>由于这一章主要是介绍性的东西，我就不多说了。下面摘抄下网上的介绍吧！</p> <p>【<strong>注明</strong>】转载地址：<a href="http://www.cnblogs.com/hill/archive/2006/10/12/527499.html">http://www.cnblogs.com/hill/archive/2006/10/12/527499.html</a></p> <p>中国移动、中国联通推行的GPRS网络、CDMA网络已覆盖大量的区域，通过无线网络实现数据传输成为可能。无线Modem采用GPRS、CDMA模块通过中国移动、中国联通的GPRS、CDMA网络进行数据传输，并通TCP/IP协议进行数据封包，可灵活地实现多种设备接入，工程安装简单，在工业现场数据传输的应用中，能很好的解决偏远无网络无电话线路地区的数据传输的难题。同传统的数传电台想比较，更具有简便性、灵活性、易操作性，同时还降低了成本，无线Modem传输方案是现代化工业现场数据传输最好的选择方案。<br>&nbsp;&nbsp;&nbsp;&nbsp; 目前中国移动、中国联通提供的GPRS网络、CDMA网络的数据传输带宽在40Kbps左右，且受带宽的限制，数据采集方案最好采用于主动告警、数据轮巡采集、告警主动回叫等对传输带宽占用较少的采集方式。同时考虑对前置机实时采集方案的支持，无线Modem传输方案只能作为目前传输方案的补充。<br>&nbsp;&nbsp;&nbsp; 随着无线通讯技术的不断发展，无线传输数据带宽将不断提高，采用3G无线网络，数据传输带宽将达到2M，无线传输方案将逐渐成为监控传输组网的主要应用方案。<br>&nbsp;&nbsp;&nbsp;&nbsp; 目前，由于GPRS和CDMA固有的特性，在各个领域中GPRS和CDMA的应用也越来越广泛，但是关于传输中使用TCP/IP协议还是UDP协议，却争论很多。 <p>这里先简单的说一下TCP与UDP的区别：<br>&nbsp; 1。基于连接与无连接<br>&nbsp; 2。对系统资源的要求（TCP较多，UDP少）<br>&nbsp; 3。UDP程序结构较简单<br>&nbsp; 4。流模式与数据报模式<br>&nbsp; 5。TCP保证数据正确性，UDP可能丢包，TCP保证数据顺序，UDP不保证<br>另外结合GPRS网络的情况具体的谈一下他们的区别：<br> 1。TCP传输存在一定的延时，大概是1600MS（移动提供），UDP响应速度稍微快一些。<br> 2。TCP包头结构<br>　　源端口16位<br>　　目标端口 16位<br>　　序列号 32位<br>　　回应序号 32位<br>　　TCP头长度 4位<br>　　reserved 6位<br>　　控制代码6位<br>　　窗口大小16位<br>　　偏移量16位<br>　　校验和16位<br>　　选项 32位(可选)<br>　　这样我们得出了TCP包头的最小大小.就是20字节. <p>　　UDP包头结构<br>　　源端口16位<br>　　目的端口16位<br>　　长度 16位<br>　　校验和 16位<br>　　UDP的包小很多.确实如此.因为UDP是非可靠连接.设计初衷就是尽可能快的将数据包发送出去.所以UDP协 <p>议显得非常精简. <p> 3。GPRS网络端口资源，UDP十分紧缺，变化很快；而TCP采用可靠链路传输，不存在端口变化的问题工业场合的应用一般都有以下特点， <p> 1。要求时时传输，但也有一些场合是定时传输，总的来说在整个传输过程中要求服务器中心端和GPRS终端设备能相互的、时时的传输数据。<br>TCP本身就是可靠链路传输，提供一个时时的双向的传输通道，能很好的满足工业现场传输的要求。但是GPRS网络对TCP链路也存在一个限制：此条链路在长时间（大概20分钟左右，视具体情况而定）没有数据流量，会自动降低此链路的优先级直至强制断开此链路。所以在实际使用中也会采用心跳包（一般是一个字节的数据）来维持此链路。<br>UDP由于自身特点，以及GPRS网络UDP端口资源的有限性，在一段时间没有数据流量后，端口容易改变，产生的影响就是从服务器中心端向GPRS终端发送数据，GPRS终端接收不到。具体的原因就是移动网关从中作了中转，需要隔一定时间给主机发UDP包来维持这个IP和端口号,这样主机就能主动给GPRS发UDP包了并且我在测试中发现,这个间隔时间很短,我在1多分钟发一次UDP包才能够维持,但是再长可能移动网关那边就要丢失这个端口了,此时如果主机想主动发数据给GPRS,那肯定是不行的了,只有GPRS终端设备再发一个UDP包过去,移动重新给你分配一个中转IP和端口,才能够进行双向通讯。 <p> 2。要求数据的丢包率较小。有些工业场合，例如电力、水务抄表，环保监测等等，不容许传输过程中的数据丢失或者最大限度的要求数据的可靠性。从这一点来看，很显然在无线数据传输过程中，TCP比UDP更能保证数据的完整性、可靠性，存在更小的丢包率。在实际测试中也是如此。以厦门桑荣科技有限公司提供的GPRS终端设备为例：TCP的在千分之9，UDP的在千分之17左右。 <p>3。要求降低费用。目前有很大部分GPRS设备的应用都是取代前期无线数传电台，除了使用范围外，其考虑的主要问题就是费用。能降低费用当然都是大家最愿意接受的。和费用直接相关的就是流量了，流量低，费用就低了。虽然TCP本身的包头要比UDP多，但是UDP在实际应用中往往需要维护双向通道，就必须要通过大量的心跳包数据来维护端口资源。总的比较起来，UDP的实际流量要比TCP还要大。很多使用者在初期的时候并不了解UDP需要大量心跳包来维持端口资源这个问题，往往都认为UDP要比TCP更节省流量，实际上这里存在着一个误区。 <p>4。在某些特定的应用场合，例如一些银行的时时交互系统，对响应速度要求很高，此时数据传输频率较快，不需要大量心跳包维持UDP端口资源，采用UDP就比较有利了。 <p>5。在目前的1：N的传输模式中，既有多个GPRS终端设备往一个服务器中心传输数据，此时采用UDP会比TCP要好的多，因为UDP耗用更少的系统资源。但是在实际应用中却发现，很多用户还是采用TCP的传输方式，建立二级中心1：A（1：N），即每一个分中心对应N/A台设备，独立处理数据，再统一将数据传送到主中心。这样既能保证了传输过程中采用了TCP的传输协议，又能很好处理了中心服务器的多链路的系统耗用的问题。<br>&nbsp;&nbsp;&nbsp;&nbsp; 总的来说，我认为TCP/IP协议更能满足目前各行业对远程数据传输的要求，它提供更稳定更便利的传输通道，很好的满足了远程数据传输的要求。</p>]]></description></item><item><title>vmware卸载不干净 重装装不上？方法在这里</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/22/2053827.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 22 May 2011 13:18:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/22/2053827.html</guid><description><![CDATA[<pre class="reply-text mb10"><span style="color: #0000ff;"><strong>1)   用注册表编辑命令regedit打开注册表
2）找到目录HKEY_LOCAL_MACHINE\SOFTWARE\VMware .Inc
3）删除其文件内容和vMware.Inc目录，在重新安装即可 </strong></span></pre>
<h1 id="question-title">&nbsp;</h1>]]></description></item><item><title>用于主题检测的临时日志(0589cf47-1c93-433b-b50a-4cf195d0484a - 3bfe001a-32de-4114-a6b4-4005b770f6d7)</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/22/2053660.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 22 May 2011 08:49:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/22/2053660.html</guid><description><![CDATA[<p>这是一个未删除的临时日志。请手动删除它。(f1b5f29c-f21c-48a5-8223-e6dc61f6bde8 - 3bfe001a-32de-4114-a6b4-4005b770f6d7)</p>]]></description></item><item><title>【网摘】GTK中文显示解决方案</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/19/2051518.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 19 May 2011 14:41:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/19/2051518.html</guid><description><![CDATA[<p>来自:<a href="http://www.cnblogs.com/hanxi/admin/【网摘】GTK中文显示解决方案">http://erisenxu.bokee.com/viewdiary.13391975.html </a></p>
<p>在GTK+中，必须使用UTF-8的编码来显示中文。但我们平时在国内使用的是GB码。所以，由于编码不同会造成中文乱码的。解决的关键就是将中文转换成UTF-8再传给GTK显示就可以了。 GTK+提供了一个函数g_locale_to_utf8()，这个函数是GTK将系统默认编码转换成UTF-8的一个函数。但是，这个函数每次调用都要传入 5 个参数，太多又麻烦。所以，可以用一个函数来封装一下： char* _T(char* str) { return g_locale_to_utf8(str, -1, 0, 0, 0); } 如果需要调用时，就用 _T("中文")就可以了成功显示中文了。 这个方式在Redhat Linux 9和Windows XP下测试都成功了。</p>
<p>我在win7下VS2008测试成功</p>]]></description></item><item><title>【转载】C++著名程序库的比较和学习经验</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/17/2049136.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 17 May 2011 09:53:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/17/2049136.html</guid><description><![CDATA[<p><strong>来自：</strong>&nbsp;&nbsp; <a href="http://my.oschina.net/kaixindewo/blog/16267">http://my.oschina.net/kaixindewo/blog/16267</a> <p>1、C++各大有名库的介绍——C++标准库<br>2、C++各大有名库的介绍——准标准库Boost<br>3、C++各大有名库的介绍——GUI<br>4、C++各大有名库的介绍——网络通信<br>5、C++各大有名库的介绍——XML<br>6、C++各大有名库的介绍——科学计算<br>7、C++各大有名库的介绍——游戏开发<br>8、C++各大有名库的介绍——线程<br>9、C++各大有名库的介绍——序列化<br>10、C++各大有名库的介绍——字符串<br>11、C++各大有名库的介绍——综合<br>12、C++各大有名库的介绍——其他库<br>13、C++名人的网站<br>在 C++中，库的地位是非常高的。C++之父 Bjarne Stroustrup先生多次表示了设计库来扩充功能要好过设计更多的语法的言论。现实中，C++的库门类繁多，解决的问题也是极其广泛，库从轻量级到重 量级的都有。不少都是让人眼界大开，亦或是望而生叹的思维杰作。由于库的数量非常庞大，而且限于笔者水平，其中很多并不了解。所以文中所提的一些库都是比 较著名的大型库。<br>1、C++各大有名库的介绍——C++标准库 <p>标准库中提供了C++程序的基本设施。虽然C++标准库随着C++标准折腾了许多年，直到标准的出台才正式定型，但是在标准库的实现上却很令人欣慰得看到多种实现，并且已被实践证明为有工业级别强度的佳作。&nbsp; <p>1.1、Dinkumware C++ Library <p>参考站点：<a href="http://www.dinkumware.com/">http://www.dinkumware.com/</a> <p>P.J. Plauger编写的高品质的标准库。P.J. Plauger博士是Dr. Dobb's程序设计杰出奖的获得者。其编写的库长期被Microsoft采用，并且最近Borland也取得了其OEM的license，在其 C/C++的产品中采用Dinkumware的库。 <p>1.2、RogueWave Standard C++ Library <p>参考站点：<a href="http://www.roguewave.com/">http://www.roguewave.com/</a> <p>这个库在Borland C++ Builder的早期版本中曾经被采用，后来被其他的库给替换了。笔者不推荐使用。 <p>1.3、SGI STL <p>参考站点：<a href="http://www.roguewave.com/">http://www.roguewave.com/</a> <p>SGI公司的C++标准模版库。 <p>1.4、STLport <p>参考站点：<a href="http://www.stlport.org/">http://www.stlport.org/</a> <p>SGI STL库的跨平台可移植版本。 <p>2、C++各大有名库的介绍——准标准库Boost <p>Boost库是一个经过千锤百炼、可移植、提供源代码的C++库，作为标准库的后备，是C++标准化进程的发动机之一。 Boost库由C++标准委员会库工作组成员发起，在C++社区中影响甚大，其成员已近2000人。 Boost库为我们带来了最新、最酷、最实用的技术，是不折不扣的“准”标准库。  <p>Boost中比较有名气的有这么几个库： <p>2.1 Regex&nbsp; 正则表达式库 <p>2.2 Spirit&nbsp;&nbsp; LL parser framework，用C++代码直接表达EBNF <p>2.3 Graph&nbsp; 图组件和算法 <p>2.4 Lambda&nbsp; 在调用的地方定义短小匿名的函数对象，很实用的functional功能 <p>2.5 concept check&nbsp;&nbsp; 检查泛型编程中的concept <p>2.6 Mpl&nbsp;&nbsp; 用模板实现的元编程框架 <p>2.7 Thread&nbsp;&nbsp; 可移植的C++多线程库 <p>2.8 Python&nbsp;&nbsp; 把C++类和函数映射到Python之中 <p>2.9 Pool&nbsp;&nbsp;&nbsp; 内存池管理 <p>2.10 smart_ptr&nbsp;&nbsp; 5个智能指针，学习智能指针必读，一份不错的参考是来自CUJ的文章： <p>Smart Pointers in Boost,哦，这篇文章可以查到，CUJ是提供在线浏览的。中文版见笔者在《Dr.Dobb's Journal软件研发杂志》第7辑上的译文。 <p>Boost总体来说是实用价值很高，质量很高的库。并且由于其对跨平台的强调，对标准C++的强调，是编写平台无关，现代C++的开发者必备的 工具。但是Boost中也有很多是实验性质的东西，在实际的开发中实用需要谨慎。并且很多Boost中的库功能堪称对语言功能的扩展，其构造用尽精巧的手 法，不要贸然的花费时间研读。Boost另外一面，比如Graph这样的库则是具有工业强度，结构良好，非常值得研读的精品代码，并且也可以放心的在产品 代码中多多利用。 <p>参考站点：<a href="http://www.boost.org/">http://www.boost.org</a> <p>3、C++各大有名库的介绍——GUI <p>在众多C++的库中，GUI部分的库算是比较繁荣，也比较引人注目的。在实际开发中，GUI库的选择也是非常重要的一件事情，下面我们综述一下可选择的GUI库，各自的特点以及相关工具的支持。  <p>3.1、MFC <p>大名鼎鼎的微软基础类库（Microsoft Foundation Class）。大凡学过VC++的人都应该知道这个库。虽然从技术角度讲，MFC是不大漂亮的，但是它构建于Windows API 之上，能够使程序员的工作更容易,编程效率高，减少了大量在建立 Windows 程序时必须编写的代码，同时它还提供了所有一般 C++ 编程的优点，例如继承和封装。MFC 编写的程序在各个版本的Windows操作系统上是可移植的，例如，在Windows 3.1下编写的代码可以很容易地移植到 Windows NT 或 Windows 95 上。但是在最近发展以及官方支持上日渐势微。 <p>3.2、QT <p>参考网站：<a href="http://www.trolltech.com/">http://www.trolltech.com</a> <p>Qt是Trolltech公司的一个多平台的C++图形用户界面应用程序框架。它提供给应用程序开发者建立艺术级的图形用户界面所需的所用功 能。Qt是完全面向对象的很容易扩展，并且允许真正地组件编程。自从1996年早些时候，Qt进入商业领域，它已经成为全世界范围内数千种成功的应用程序 的基础。Qt也是流行的Linux桌面环境KDE 的基础，同时它还支持Windows、Macintosh、Unix/X11等多种平台。[<a href="http://wangxinus.cublog.cn/">wangxinus</a>注:QT目前已经是Nokia旗下的产品，原官方网站已经失效，目前为<a href="http://qt.nokia.com/">http://qt.nokia.com</a>.2009年初发布的Qt4.5版本开始使用LGPL协议，诺基亚希望以此来吸引更多的开发人员使用Qt库] <p>3.3、WxWindows <p>参考网站：<a href="http://www.wxwindows.org/">http://www.wxwindows.org</a> <p>跨平台的GUI库。因为其类层次极像MFC，所以有文章介绍从MFC到WxWindows的代码移植以实现跨平台的功能。通过多年的开发也是一个日趋完善的GUI库，支持同样不弱于前面两个库。并且是完全开放源代码的。新近的C++ Builder X的GUI设计器就是基于这个库的。[<a href="http://wangxinus.cublog.cn/">wangxinus</a>注:迫于微软的施压，已经由WxWindows更名为wxWidgets] <p>3.4、Fox <p>参考网站：<a href="http://www.fox-toolkit.org/">http://www.fox-toolkit.org/</a> <p>开放源代码的GUI库。作者从自己亲身的开发经验中得出了一个理想的GUI库应该是什么样子的感受出发，从而开始了对这个库的开发。有兴趣的可以尝试一下。 <p>3.5、WTL <p>基于ATL的一个库。因为使用了大量ATL的轻量级手法，模板等技术，在代码尺寸，以及速度优化方面做得非常到位。主要面向的使用群体是开发COM轻量级供网络下载的可视化控件的开发者。 <p>3.6、GTK <p>参考网站：<a href="http://gtkmm.sourceforge.net/">http://gtkmm.sourceforge.net/</a> <p>GTK是一个大名鼎鼎的C的开源GUI库。在Linux世界中有Gnome这样的杀手应用。而Qt就是这个库的C++封装版本。[<a href="http://wangxinus.cublog.cn/">wangxinus</a>注:“Qt 就是这个库的C++封装版本”是错误的。Qt早于GTK，最初Qt由于协议的原因引起社区的不满，另外开发了一个基于C语言的GTK库，后面的扩展版本为 GTK＋。GTK+的Gnome和Qt的KDE是目前linux桌面的两大阵营，曾有水火不容之势。目前双方都以及开源社区的精神，已经和解。] <p>4、C++各大有名库的介绍——网络通信 <p>4.１、ACE <p>参考网站：<a href="http://www.cs.wustl.edu/~schmidt/ACE.html">http://www.cs.wustl.edu/~schmidt/ACE.html</a> <p>C++库的代表，超重量级的网络通信开发框架。ACE自适配通信环境（Adaptive Communication Environment）是可以自由使用、开放源代码的面向对象框架，在其中实现了许多用于并发通信软件的核心模式。ACE提供了一组丰富的可复用C++ 包装外观（Wrapper Facade）和框架组件，可跨越多种平台完成通用的通信软件任务，其中包括：事件多路分离和事件处理器分派、信号处理、服务初始化、进程间通信、共享内存管理、消息路由、分布式服务动态（重）配置、并发执行和同步，等等。 <p>4.２、StreamModule <p>参考网站：<a href="http://www.omnifarious.org/StrMod">http://www.omnifarious.org/StrMod</a> <p>设计用于简化编写分布式程序的库。尝试着使得编写处理异步行为的程序更容易，而不是用同步的外壳包起异步的本质。 <p>4.３、SimpleSocket <p>参考网站：<a href="http://home.hetnet.nl/~lcbokkers/simsock.htm">http://home.hetnet.nl/~lcbokkers/simsock.htm</a> <p>这个类库让编写基于socket的客户/服务器程序更加容易。 <p>4.４、A Stream Socket API for C++ <p>参考网站：<a href="http://www.pcs.cnu.edu/~dgame/sockets/socketsC++/sockets.html">http://www.pcs.cnu.edu/~dgame/sockets/socketsC++/sockets.html</a> <p>又一个对Socket的封装库。 <p>5、C++各大有名库的介绍——XML <p>5.１、Xerces <p>参考网站：<a href="http://xml.apache.org/xerces-c/">http://xml.apache.org/xerces-c/</a> <p>Xerces-C++ 是一个非常健壮的XML解析器，它提供了验证，以及SAX和DOM API。XML验证在文档类型定义(Document Type Definition，DTD)方面有很好的支持，并且在2001年12月增加了支持W3C XMLSchema 的基本完整的开放标准。 <p>5.２、XMLBooster <p>参考网站：<a href="http://www.xmlbooster.com/">http://www.xmlbooster.com/</a> <p>这个库通过产生特制的parser的办法极大的提高了XML解析的速度，并且能够产生相应的GUI程序来修改这个parser。在DOM和SAX两大主流XML解析办法之外提供了另外一个可行的解决方案。 <p>5.３、Pull Parser <p>参考网站：<a href="http://www.extreme.indiana.edu/xgws/xsoap/xpp">http://www.extreme.indiana.edu/xgws/xsoap/xpp</a> <p>这个库采用pull方法的parser。在每个SAX的parser底层都有一个pull的parser，这个xpp把这层暴露出来直接给大家使用。在要充分考虑速度的时候值得尝试。 <p>5.４、Xalan <p>参考网站：<a href="http://xml.apache.org/xalan-c/">http://xml.apache.org/xalan-c/</a> <p>Xalan是一个用于把XML文档转换为HTML，纯文本或者其他XML类型文档的XSLT处理器。 <p>5.５、CMarkup <p>参考网站：<a href="http://www.firstobject.com/xml.htm">http://www.firstobject.com/xml.htm</a> <p>这是一种使用EDOM的XML解析器。在很多思路上面非常灵活实用。值得大家在DOM和SAX之外寻求一点灵感。 <p>5.６、libxml++ <p><a href="http://libxmlplusplus.sourceforge.net/">http://libxmlplusplus.sourceforge.net/</a> <p>libxml++是对著名的libxml XML解析器的C++封装版本。 <p>5.7. TinyXML [<a href="http://wangxinus.cublog.cn/">wangxinus</a>注:一个非常小巧的XML解析库，基于DOM的。] <p>6、C++各大有名库的介绍——科学计算 <p>6.１、Blitz++ <p>参考网站：<a href="http://www.oonumerics.org/blitz">http://www.oonumerics.org/blitz</a> <p>Blitz++ 是一个高效率的数值计算函数库，它的设计目的是希望建立一套既具像C++ 一样方便，同时又比Fortran速度更快的数值计算环境。通常，用C++所写出的数值程序，比 Fortran慢20%左右，因此Blitz++正是要改掉这个缺点。方法是利用C++的template技术，程序执行甚至可以比Fortran更快。 <p>Blitz++目前仍在发展中，对于常见的SVD，FFTs，QMRES等常见的线性代数方法并不提供，不过使用者可以很容易地利用Blitz++所提供的函数来构建。 <p>6.２、POOMA <p>参考网站：<a href="http://www.oonumerics.org/blitz">http://www.codesourcery.com/pooma/pooma</a> <p>POOMA是一个免费的高性能的C++库，用于处理并行式科学计算。POOMA的面向对象设计方便了快速的程序开发，对并行机器进行了优化以达到最高的效率，方便在工业和研究环境中使用。 <p>6.３、MTL <p>参考网站：<a href="http://www.osl.iu.edu/research/mtl">http://www.osl.iu.edu/research/mtl</a> <p>Matrix Template Library(MTL)是一个高性能的泛型组件库，提供了各种格式矩阵的大量线性代数方面的功能。在某些应用使用高性能编译器的情况下，比如Intel的编译器，从产生的汇编代码可以看出其与手写几乎没有两样的效能。 <p>6.４、CGAL <p>参考网站：<a href="http://www.cgal.org/">www.cgal.org</a> <p>Computational Geometry Algorithms Library的目的是把在计算几何方面的大部分重要的解决方案和方法以C++库的形式提供给工业和学术界的用户。 <p>7、C++各大有名库的介绍——游戏开发 <p>7.１、Audio/Video 3D C++ Programming Library <p>参考网站：<a href="http://www.galacticasoftware.com/products/av/">http://www.galacticasoftware.com/products/av/</a><br>AV3D是一个跨平台，高性能的C++库。主要的特性是提供3D图形，声效支持（SB,以及S3M），控制接口（键盘，鼠标和遥感），XMS。 <p>7.２、KlayGE <p>参考网站：<a href="http://home.g365.net/enginedev/">http://home.g365.net/enginedev/</a> <p>国内游戏开发高手自己用C++开发的游戏引擎。KlayGE是一个开放源代码、跨平台的游戏引擎，并使用Python作脚本语言。KlayGE在LGPL协议下发行。感谢龚敏敏先生为中国游戏开发事业所做出的贡献。 <p>[<a href="http://wangxinus.cublog.cn/">wangxinus</a>注:这个库国人了解很少，百度百科的<a href="http://baike.baidu.com/view/2592444.htm">KlayGE词条</a>还是本人创建的。一个人开发一个游戏引擎库，是在让笔者汗颜，对作者表示钦佩！] <p>7.３、OGRE <p>参考网站：<a href="http://www.ogre3d.org/">http://www.ogre3d.org</a> <p>OGRE（面向对象的图形渲染引擎）是用C++开发的，使用灵活的面向对象3D引擎。它的目的是让开发者能更方便和直接地开发基于3D硬件设备 的应用程序或游戏。引擎中的类库对更底层的系统库（如：Direct3D和OpenGL）的全部使用细节进行了抽象，并提供了基于现实世界对象的接口和其 它类。 <p>8、C++各大有名库的介绍——线程 <p>8.１、C++ Threads <p>参考网站：<a href="http://threads.sourceforge.net/">http://threads.sourceforge.net/</a> <p>这个库的目标是给程序员提供易于使用的类，这些类被继承以提供在Linux环境中很难看到的大量的线程方面的功能。 <p>8.２、ZThreads <p>参考网站：<a href="http://zthread.sourceforge.net/">http://zthread.sourceforge.net/</a> <p>一个先进的面向对象，跨平台的C++线程和同步库。 <p>9、C++各大有名库的介绍——序列化 <p>9.１、s11n <p>参考网站：<a href="http://s11n.net/">http://s11n.net/</a> <p>一个基于STL的C++库，用于序列化POD，STL容器以及用户定义的类型。 <p>9.２、Simple XML Persistence Library <p>参考网站：<a href="http://sxp.sourceforge.net/">http://sxp.sourceforge.net/</a> <p>这是一个把对象序列化为XML的轻量级的C++库。 <p>10、C++各大有名库的介绍——字符串 <p>10.１、C++ Str Library <p>参考网站：<a href="http://www.utilitycode.com/str/">http://www.utilitycode.com/str/</a> <p>操作字符串和字符的库，支持Windows和支持gcc的多种平台。提供高度优化的代码，并且支持多线程环境和Unicode，同时还有正则表达式的支持。 <p>10.２、Common Text Transformation Library <p>参考网站：<a href="http://cttl.sourceforge.net/">http://cttl.sourceforge.net/</a> <p>这是一个解析和修改STL字符串的库。CTTL substring类可以用来比较，插入，替换以及用EBNF的语法进行解析。 <p>10.３、GRETA <p>参考网站：<a href="http://research.microsoft.com/projects/greta/">http://research.microsoft.com/projects/greta/</a> <p>这是由微软研究院的研究人员开发的处理正则表达式的库。在小型匹配的情况下有非常优秀的表现。 <p>11、C++各大有名库的介绍——综合 <p>11.１、P::Classes <p>参考网站：<a href="http://pclasses.com/">http://pclasses.com/</a> <p>一个高度可移植的C++应用程序框架。当前关注类型和线程安全的signal/slot机制，i/o系统包括基于插件的网络协议透明的i/o架构，基于插件的应用程序消息日志框架，访问sql数据库的类等等。 <p>11.２、ACDK - Artefaktur Component Development Kit <p>参考网站：<a href="http://acdk.sourceforge.net/">http://acdk.sourceforge.net/</a> <p>这是一个平台无关的C++组件框架，类似于Java或者.NET中的框架（反射机制，线程，Unicode，废料收集，I/O，网络，实用工具，XML，等等），以及对Java, Perl, Python, TCL, Lisp, COM 和 CORBA的集成。 <p>11.３、dlib C++ library <p>参考网站：<a href="http://www.cis.ohio-state.edu/~kingd/dlib/">http://www.cis.ohio-state.edu/~kingd/dlib/</a> <p>各种各样的类的一个综合。大整数，Socket，线程，GUI，容器类,以及浏览目录的API等等。 <p>11.４、Chilkat C++ Libraries <p>参考网站：<a href="http://www.chilkatsoft.com/cpp_libraries.asp">http://www.chilkatsoft.com/cpp_libraries.asp</a> <p>这是提供zip，e-mail，编码，S/MIME，XML等方面的库。 <p>11.５、C++ Portable Types Library (PTypes) <p>参考网站：<a href="http://www.melikyan.com/ptypes/">http://www.melikyan.com/ptypes/</a> <p>这是STL的比较简单的替代品，以及可移植的多线程和网络库。 <p>11.６、LFC <p>参考网站：<a href="http://lfc.sourceforge.net/">http://lfc.sourceforge.net/</a> <p>哦，这又是一个尝试提供一切的C++库 <p>12、C++各大有名库的介绍——其他库 <p>12.１、Loki <p>参考网站：<a href="http://www.moderncppdesign.com/">http://www.moderncppdesign.com/</a> <p>哦，你可能抱怨我早该和Boost一起介绍它，一个实验性质的库。作者在loki中把C++模板的功能发挥到了极致。并且尝试把类似设计模式这样思想层面的东西通过库来提供。同时还提供了智能指针这样比较实用的功能。 <p>12.２、ATL <p>ATL(Active Template Library)是一组小巧、高效、灵活的类，这些类为创建可互操作的COM组件提供了基本的设施。 <p>12.３、FC++: The Functional C++ Library <p>这个库提供了一些函数式语言中才有的要素。属于用库来扩充语言的一个代表作。如果想要在OOP之外寻找另一分的乐趣，可以去看看函数式程序设计的世界。大师Peter Norvig在 “Teach Yourself Programming in Ten Years”一文中就将函数式语言列为至少应当学习的6类编程语言之一。 <p>12.４、FACT! <p>参考网站：<a href="http://www.kfa-juelich.de/zam/FACT/start/index.html">http://www.kfa-juelich.de/zam/FACT/start/index.html</a> <p>另外一个实现函数式语言特性的库 <p>12.５、Crypto++ <p>提供处理密码，消息验证，单向hash，公匙加密系统等功能的免费库。 <p>还有很多非常激动人心或者是极其实用的C++库，限于我们的水平以及文章的篇幅不能包括进来。在对于这些已经包含近来的库的介绍中，由于并不是每一个我们都使用过，所以难免有偏颇之处，请读者见谅。 <p>13、C++名人的网站<br>正如我们可以通过计算机历史上的重要人物了解计算机史的发展，C++相关人物的网站也可以使我们得到最有价值的参考与借鉴，下面的人物我们认为没 有介绍的必要，只因下面的人物在C++领域的地位众所周知，我们只将相关的资源进行罗列以供读者学习，他们有的工作于贝尔实验室，有的工作于知名编译器厂 商，有的在不断推进语言的标准化，有的为读者撰写了多部千古奇作…… <p>１、Bjarne Stroustrup <p><a href="http://www.research.att.com/~bs/">http://www.research.att.com/~bs/</a> <p>２、Stanley B. Lippman <p><a href="http://blogs.msdn.com/slippman/">http://blogs.msdn.com/slippman/ </a>(中文版) <p><a href="http://www.zengyihome.net/slippman/index.htm">http://www.zengyihome.net/slippman/index.htm</a> <p>３、Scott Meyers <p><a href="http://www.aristeia.com/">http://www.aristeia.com/</a> <p>４、David Musser <p><a href="http://www.cs.rpi.edu/~musser/">http://www.cs.rpi.edu/~musser/</a> <p>５、Bruce Eckel <p><a href="http://www.bruceeckel.com/">http://www.bruceeckel.com</a> <p><a href="http://blog.csdn.net/beckel">http://blog.csdn.net/beckel</a> Bruce Eckel 博客中文版 <p>６、Nicolai M. Josuttis <p><a href="http://www.josuttis.com/">http://www.josuttis.com/</a> <p>７、Herb Sutter <p><a href="http://www.gotw.ca/">http://www.gotw.ca/</a> <p><a href="http://blog.csdn.net/hsutter/">http://blog.csdn.net/hsutter/</a> Herb Sutter 中文博客 <p>８、Andrei Alexandrescu <p><a href="http://www.moderncppdesign.com/">http://www.moderncppdesign.com</a></p>]]></description></item><item><title>【Linux网络编程学习笔记】消息队列</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/16/2047783.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 16 May 2011 08:03:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/16/2047783.html</guid><description><![CDATA[<p>消息队列是有内核创建并维护的一个数据结构，它是有标识的。不同的进程通过访问相同的消息队列便可以实现进程间通信。</p>
<p align="left"><b>消息结构(msg)</b></p>
<p align="left">内核把每一条消息存储在以msg结构为框架的队列中，它在include/ linux/msg.h中定义如下：</p>
<p align="left">
<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;">struct</span><span style="color: #000000;"> msg<br /> {<br />    </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> msg </span><span style="color: #000000;">*</span><span style="color: #000000;">msg_next;   </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 队列上的下一条消息 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">long</span><span style="color: #000000;">  msg_type;          </span><span style="color: #008000;">/*</span><span style="color: #008000;">消息类型</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;">msg_spot;         </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 消息正文的地址 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">short</span><span style="color: #000000;"> msg_ts;           </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 消息正文的大小 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />};</span></div></pre>
</div>
</p>
<p align="left">注意：msg_next是指向下一条消息的指针，它们在内核地址空间形成一个单链表。</p>
<p><strong>消息队列的数据结构</strong></p>
<p>对于每一个消息队列，内核都维护一个定义在&lt;sys/msg.h&gt;中结构：</p>

<div class="cnblogs_code">
<pre><div><span style="color: #008000;">/*</span><span style="color: #008000;"> 在系统中的每一个消息队列对应一个msqid_ds 结构 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> msqid_ds {<br />    </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> ipc_perm  msg_perm;<br />    </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> msg       </span><span style="color: #000000;">*</span><span style="color: #000000;">msg_first;     </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 队列上第一条消息，即链表头</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> msg       </span><span style="color: #000000;">*</span><span style="color: #000000;">msg_last;      </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 队列中的最后一条消息，即链表尾 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    time_t           msg_stime;      </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 发送给队列的最后一条消息的时间 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    time_t           msg_rtime;      </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 从消息队列接收到的最后一条消息的时间 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    time_t           msg_ctime;      </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 最后修改队列的时间</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">ushort</span><span style="color: #000000;">           msg_cbytes;     </span><span style="color: #008000;">/*</span><span style="color: #008000;">队列上所有消息总的字节数 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">ushort</span><span style="color: #000000;">           msg_qnum;       </span><span style="color: #008000;">/*</span><span style="color: #008000;">在当前队列上消息的个数 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">ushort</span><span style="color: #000000;">           msg_qbytes;     </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 队列最大的字节数 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">ushort</span><span style="color: #000000;">           msg_lspid;      </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 发送最后一条消息的进程的pid </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">ushort          </span><span style="color: #000000;"> msg_lrpid;      </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 接收最后一条消息的进程的pid </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />};</span></div></pre>
</div>

<p>其中两个指针分别指向msg-first和msg-last分别指向相应消息在内核中的存放位置。</p>
<p><strong>消息队列的创建</strong></p>
<p align="left">为了创建一个新的消息队列，或存取一个已经存在的队列，要使用msgget()系统调用。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p align="left">原型:</p>
<p align="left">
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">sys</span><span style="color: #000000;">/</span><span style="color: #000000;">types.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">sys</span><span style="color: #000000;">/</span><span style="color: #000000;">ipc.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#inlcude </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">sys</span><span style="color: #000000;">/</span><span style="color: #000000;">msg.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgget ( key_t key, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgflg );   </span></div></pre>
</div>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>
<p align="left">返回:&nbsp;成功，则返回消息队列识别号，失败，则返回-1，</p>
<p align="left"><span style="font-size: 13px;">semget()中的第一个参数是键，&nbsp;&nbsp;这个键值要与现有的键值进行比较，现有的键值指在内核中已存在的其它消息队列的键值。对消息队列的打开或存取操作依赖于msgflg参数的取值：</span></p>
<p align="left"><span style="font-size: 13px;">IPC_CREAT&nbsp;： 如果这个队列在内核中不存在，则创建它。</span></p>
<p align="left"><span style="font-size: 13px;">IPC_EXCL&nbsp;：当与IPC_CREAT一起使用时，如果这个队列已存在，则创建失败。</span></p>
<p align="left"><span style="font-size: 13px;">如果IPC_CREAT单独使用，semget()为一个新创建的消息队列返回标识号，或者返回具有相同键值的已存在队列的标识号。如果IPC_EXCL与IPC_CREAT一起使用，要么创建一个新的队列，要么对已存在的队列返回-1。IPC_EXCL单独是没有用的，当与IPC_CREAT结合起来使用时，可以保证新创建队列的打开和存取。</span></p>
<p align="left"><span style="font-size: 13px;">与文件系统的存取权限一样，每一个IPC对象也具有存取权限，因此，可以把一个八进制与掩码或，形成对消息队列的存取权限。</span></p>
<p align="left">下面是创建一个打开或创建消息队列的函数：</p>
<p align="left">
<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> open_queue( key_t keyval )<br />{<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;">     qid;<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">((qid </span><span style="color: #000000;">=</span><span style="color: #000000;"> msgget( keyval, IPC_CREAT </span><span style="color: #000000;">|</span><span style="color: #000000;"> </span><span style="color: #800080;">0660</span><span style="color: #000000;"> )) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />                </span><span style="color: #0000ff;">return</span><span style="color: #000000;">(</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />        }<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">(qid);<br />}</span></div></pre>
</div>
</p>
<p align="left"><strong>消息队列的操作</strong></p>
<p align="left">一旦我们有了队列识别号，我们就可以在这个队列上执行操作。要把一条消息传递给一个队列，你必须用msgsnd()系统调用。&nbsp;</p>
<p align="left">&nbsp;&nbsp;原型：</p>
<p align="left">
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">sys</span><span style="color: #000000;"><span>/</span><span>types.h</span><span>&gt;</span><span><br />#include </span><span>&lt;</span><span>sys</span><span>/</span><span>ipc.h</span><span>&gt;</span><span><br />#inlcude </span><span>&lt;</span><span>sys</span><span>/</span><span>msg.h</span><span>&gt;</span></span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgsnd ( </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msqid, </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> msgbuf </span><span style="color: #000000;">*</span><span style="color: #000000;">msgp, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgsz, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgflg );</span></div></pre>
</div>
</p>
<p align="left">&nbsp;返回：成功为0， 失败为-1。&nbsp;</p>
<p align="left">上面第二个参数是消息缓冲区(msgbuf)</p>
<p align="left">它在include/linux/msg.h中声明，描述如下：</p>
<p align="left">
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;gutter:false;">/* msgsnd 和msgrcv 系统调用使用的消息缓冲区*/
struct msgbuf</pre>
<pre class="brush:cpp;gutter:false;"> {</pre>
<pre class="brush:cpp;gutter:false;">    long mtype;         /* 消息的类型，必须为正数 */</pre>
<pre class="brush:cpp;gutter:false;">    char mtext[1];      /* 消息正文 */</pre>
<pre class="brush:cpp;gutter:false;">};</pre>
</div>
</p>
<p align="left"><span style="font-size: 12px;">msgsnd()的第一个参数是队列识别号，由msgget()调用返回。第二个参数msgp是一个指针，指向我们重新声明和装载的消息缓冲区。msgsz参数包含了消息以字节为单位的长度，其中包括了消息类型的4个字节。</span></p>
<p align="left"><span style="font-size: 12px;">msgflg参数可以设置成0(忽略)，或者：</span></p>
<p align="left"><span style="font-size: 12px;">IPC_NOWAIT&nbsp;：如果消息队列满，消息不写到队列中，并且控制权返回给调用进程(继续执行)。如果不指定IPC_NOWAIT，调用进程将挂起(阻塞)直到消息被写到队列中。&nbsp;</span></p>
<p align="left">让我们来看一个发送消息的简单函数：&nbsp;</p>
<p align="left">
<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> send_message( </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> qid, </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> mymsgbuf </span><span style="color: #000000;">*</span><span style="color: #000000;">qbuf )<br />{<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;">     result, length;<br />        </span><span style="color: #008000;">/*</span><span style="color: #008000;"> mymsgbuf结构的实际长度 </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />        length </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> ) </span><span style="color: #000000;">-</span><span style="color: #000000;"> </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(</span><span style="color: #0000ff;">long</span><span style="color: #000000;">);       <br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">((result </span><span style="color: #000000;">=</span><span style="color: #000000;"> msgsnd( qid, qbuf, length, </span><span style="color: #800080;">0</span><span style="color: #000000;">)) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />                </span><span style="color: #0000ff;">return</span><span style="color: #000000;">(</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />        }<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">(result);<br />}</span></div></pre>
</div>
</p>
<p align="left">这个小函数试图把缓冲区qbuf中的消息，发送给队列识别号为qid的消息队列。</p>
<p align="left">现在，我们在消息队列里有了一条消息，可以用ipcs命令来看你队列的状态。</p>
<p align="left">如何从消息队列检索消息，可以用msgrcv()系统调用。&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>
<p align="left">&nbsp;原型：</p>
<p align="left">
<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;"><span>#include </span><span>&lt;</span><span>sys</span><span><span>/</span><span>types.h</span><span>&gt;</span><span><br />#include </span><span>&lt;</span><span>sys</span><span>/</span><span>ipc.h</span><span>&gt;</span><span><br />#inlcude </span><span>&lt;</span><span>sys</span><span>/</span><span>msg.h</span><span>&gt;</span></span><br /></span></div><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgrcv ( </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msqid, </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> msgbuf </span><span style="color: #000000;">*</span><span style="color: #000000;">msgp, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgsz, </span><span style="color: #0000ff;">long</span><span style="color: #000000;"> mtype, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> msgflg );</span></div></pre>
</div>
</p>
<p align="left">&nbsp; &nbsp;返回值：成功，则为拷贝到消息缓冲区的字节数，失败为-1。</p>
<p align="left"><span style="font-size: 12px;">第一个参数用来指定要检索的队列(必须由msgget()调用返回)，第二个参数(msgp)是存放检索到消息的缓冲区的地址，第三个参数(msgsz)是消息缓冲区的大小，包括消息类型的长度(4字节)。</span></p>
<p align="left"><span style="font-size: 12px;">第四个参数(mtype)指定了消息的类型。内核将搜索队列中相匹配类型的最早的消息，并且返回这个消息的一个拷贝，返回的消息放在由msgp参数指向的地址。这里存在一个特殊的情况，如果传递给mytype参数的值为0，就可以不管类型，只返回队列中最早的消息。</span></p>
<p align="left"><span style="font-size: 12px;">如果传递给参数msgflg的值为IPC_NOWAIT，并且没有可取的消息，那么给调用进程返回ENOMSG错误消息，否则，调用进程阻塞，直到一条消息到达队列并且满足msgrcv()的参数。如果一个客户正在等待消息，而队列被删除，则返回EIDRM。如果当进程正在阻塞，并且等待一条消息到达但捕获到了一个信号，则返回EINTR。</span></p>
<p align="left">让我们来看一个从我们已建的消息队列中检索消息的例子</p>
<p align="left">
<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> read_message( </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> qid, </span><span style="color: #0000ff;">long</span><span style="color: #000000;"> type, </span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> mymsgbuf </span><span style="color: #000000;">*</span><span style="color: #000000;">qbuf )<br />{<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;">     result, length;<br />        </span><span style="color: #008000;">/*</span><span style="color: #008000;"> 计算mymsgbuf结构的实际大小</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />        length </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(</span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> mymsgbuf) </span><span style="color: #000000;">-</span><span style="color: #000000;"> </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(</span><span style="color: #0000ff;">long</span><span style="color: #000000;">);       <br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">((result </span><span style="color: #000000;">=</span><span style="color: #000000;"> msgrcv( qid, qbuf, length, type,  </span><span style="color: #800080;">0</span><span style="color: #000000;">)) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />                </span><span style="color: #0000ff;">return</span><span style="color: #000000;">(</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />        }<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">(result);<br />}</span></div></pre>
</div>
</p>
<p align="left">函数功能：当从队列中成功地检索到消息后，这个消息将从队列删除。</p>
<p align="left">。。。</p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>
<p align="left">&nbsp;</p>]]></description></item><item><title>[Linux网络编程学习笔记]FIFO的创建和使用</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/10/2041768.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 09 May 2011 23:51:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/10/2041768.html</guid><description><![CDATA[<p><font size="4" face="华文楷体">管道只能用于在同一祖父进程创建的进程间进行通信，FIFO（先进先出）类似于管道，也只能单向传递数据流。不过每个FIFO都有一个路径名与之关联，这就允许无亲缘关系的进程间可以实现通信。FIFO也称有名管道。</font></p> <p><font size="4" face="华文楷体">FIFO由mkfifo函数创建。</font></p><pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;sys/types.h&gt;

#include &lt;sys/stat.h&gt;

int mkfifo(const char *pathname, mode_t mode);

</pre>
<p><font size="4" face="华文楷体">如果只是打开一个FIFO而不是创建新的FIFO，那么就可以调用open()函数实现。</font></p>
<p><font size="4" face="华文楷体">FIFO是先进先出模式，对它的读总是从开头来读，写总是被添加到末尾。且不能对它进行lseek操作。</font></p>
<p><font size="4" face="华文楷体">1.用FIFO实现多客户服务</font></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105100750543657.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105100750545576.png" width="924" height="330"></a> </p>
<p><font size="4" face="华文楷体">2.系统对管道和FIFO的限制</font></p>
<p><font size="4" face="华文楷体">（1）一个进程在同一时刻所能打开的描述符的最大数目为OPEN_MAX</font></p>
<p><font size="4" face="华文楷体">（2）可写进管道或FIFO的最大数据量PIPE_BUF</font></p>
<p><font size="4" face="华文楷体">通过sysconf函数可以获得OPEN_MAX的值（在shell中通过limit命令可以修改它的值），而PIPE_BUF的值定义在limits.h头文件中，它的值在运行中通过调用pathconf或fpathconf取得。 </font></p>]]></description></item><item><title>[Linux网络编程学习笔记]管道的创建和使用</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/06/2039440.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 06 May 2011 14:21:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/06/2039440.html</guid><description><![CDATA[<p><strong>一、管道由函数pipe创建，只能提供单向的数据传递的数据传送。</strong></p> <p>格式：</p> <p>#include &lt;unistd.h&gt;</p> <p>int pipe(int fd[2]);</p> <p>fd为两个文件描述符：fd[0]用来读，fd[1]用来写。</p> <p>1.父子进程的单向通信方式如下图：</p> <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105062221227061.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105062221226156.png" width="591" height="182"></a> </p> <p>一个进程创建一个管道——&gt;派生一个自身的拷贝——&gt;父进程关闭管道的读出端，子进程的写入端关闭（上图中的虚线）——&gt;父子进程就建立了单向通信了。</p> <p>2.父子进程的双向通信方式如下图：</p> <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105062221225043.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105062221233930.png" width="593" height="218"></a> </p> <p>创建管道1（fd1[0],fd1[1]）和管道2（fd2[0],fd2[1]）——&gt;派生出一个子进程——&gt;</p> <blockquote> <p>父进程关闭管道1的读出端（fd1[0]）和管道2的写入端（fd2[1]）;</p></blockquote> <blockquote> <p>子进程关闭管道1的写入端（fd1[1]）和管道2的读入端（fd2[0]）。</p></blockquote> <p><strong>【实例】：</strong></p> <p>&nbsp;</p> <p><strong>二、popen和pclose函数</strong></p> <p>popen函数用来创建一个管道并启动另外一个进程，该进程可以向管道中写入，也可以向管道中读出。</p> <p>格式：</p> <p>#include &lt;stdio.h&gt;</p> <p>PLE *popen(const char *command, const char *type);</p> <p>int pclose(FILE *stream);</p> <p>poen函数会在调用进程和所指定的命令之间创建一个管道。</p> <p>pclose函数关闭popen创建的标准I/O流，等待其中的命令终止，然后返回shell的终止状态。</p>]]></description></item><item><title>[Linux网络编程学习笔记]索引</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/04/2036107.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 04 May 2011 01:17:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/04/2036107.html</guid><description><![CDATA[<p><strong><span size="4" style="font-size: medium;">一、Linux基本知识</span></strong>  </p>
<h5><a href="http://www.cnblogs.com/hanxi/archive/2011/05/01/2033744.html">【学习笔记】Linux平台的文件I/O操作</a></h5>
<h5><a href="http://www.cnblogs.com/hanxi/archive/2011/05/01/2033784.html">【学习笔记】Linux平台的文件，目录及操作</a></h5>
<h5><a href="http://www.cnblogs.com/hanxi/archive/2011/05/02/2034343.html">[Linux学习笔记]标准输入输出</a></h5>
<h5><a href="http://www.cnblogs.com/hanxi/archive/2011/05/03/2035386.html">[Linux学习笔记]进程概念及控制</a></h5>
<h5><a href="http://www.cnblogs.com/hanxi/archive/2011/05/04/2036076.html">[Linux学习笔记]信号处理</a></h5>
<p><strong><span size="4" style="font-size: medium;">二、进程间通信</span></strong></p>
<h3><a href="http://www.cnblogs.com/hanxi/archive/2011/05/06/2039440.html">[Linux网络编程学习笔记]管道的创建和使用</a></h3>
<h3><a href="http://www.cnblogs.com/hanxi/archive/2011/05/10/2041768.html">[Linux网络编程学习笔记]FIFO的创建和使用</a></h3>
<p><strong><span size="4" style="font-size: medium;">三、传输层协议TCP和UDP</span></strong></p>
<h1><span style="font-size: 16px;"><a href="http://www.cnblogs.com/hanxi/archive/2011/05/26/2058121.html" class="postTitle2" id="ctl02_TitleUrl">[Linux网络编程笔记]传输协议TCP和UDP简介</a></span></h1>
<p><strong><span size="4" style="font-size: medium;">四、TCP套接字</span></strong></p>
<h1><span style="font-size: 16px;"><a id="ctl02_TitleUrl" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/05/26/2059307.html">[Linux网络编程学习笔记]套接字地址结构</a></span></h1>
<p><strong><span size="4" style="font-size: medium;">五、UDP数据报</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">六、套接字中的I/O模型</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">七、套接字属性控制</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">八、进程间通讯的同步</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">九、多路复用和信号驱动I/O</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">十、高级套接字I/O操作</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">十一、多线程编程及网络应用</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">十二、IP协议及其属性</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">十三、网络编程的安全性问题</span></strong></p>
<p><strong><span size="4" style="font-size: medium;">附录、网络编程实例</span></strong></p>]]></description></item><item><title>[Linux学习笔记]信号处理</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/04/2036076.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 04 May 2011 00:42:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/04/2036076.html</guid><description><![CDATA[<p><span style="font-size: medium;" size="4">信号的作用：通知进程异步事件的发生。</span></p>
<p><span style="font-size: medium;" size="4">在Linux中可以识别29中不同的信号，进程可以显示的用kill或killpg系统调用来向另一个进程发信号。信号发生时，内核中断当前进程，进程执行处理函数来响应信号，信号结束后恢复正常的进程处理。</span></p>
<pre>信号　　　 值　　处理动作　发出信号的原因
----------------------------------------------------------------------
SIGHUP    1　　　 　A　　终端挂起或者控制进程终止
SIGINT    2　　　 　A　　键盘中断（如break键被按下）
SIGQUIT   3　　 　  C　　键盘的退出键被按下
SIGILL    4　　 　　C　　非法指令
SIGABRT   6　　　　 C　　由abort(3)发出的退出指令
SIGFPE    8　　　　 C　　浮点异常
SIGKILL   9　　  　 AEF　 Kill信号
SIGSEGV   11　　 　 C　　无效的内存引用
SIGPIPE   13　　 　 A　　管道破裂: 写一个没有读端口的管道
SIGALRM   14　　　  A　　由alarm(2)发出的信号
SIGTERM   15　　　  A　　终止信号
SIGUSR1   30,10,16  A　　用户自定义信号1
SIGUSR2   31,12,17  A　　用户自定义信号2
SIGCHLD   20,17,18  B　　子进程结束信号
SIGCONT   19,18,25 　　　进程继续（曾被停止的进程）
SIGSTOP   17,19,23  DEF　终止进程
SIGTSTP   18,20,24  D　　控制终端（tty）上按下停止键
SIGTTIN   21,21,26  D　　后台进程企图从控制终端读
SIGTTOU   22,22,27  D　　后台进程企图从控制终端写</pre>
<pre>SIGBUS     10,7,10     C      总线错误(错误的内存访问)
SIGPOLL                A      Sys V定义的Pollable事件，与SIGIO同义
SIGPROF    27,27,29    A      Profiling定时器到
SIGSYS     12,-,12     C      无效的系统调用 (SVID)
SIGTRAP    5           C      跟踪/断点捕获
SIGURG     16,23,21    B      Socket出现紧急条件(4.2 BSD)
SIGVTALRM  26,26,28    A      实际时间报警时钟信号(4.2 BSD)
SIGXCPU    24,24,30    C      超出设定的CPU时间限制(4.2 BSD)
SIGXFSZ    25,25,31    C      超出设定的文件大小限制(4.2 BSD)</pre>
<p><span style="font-size: medium;" size="4">相关函数：</span></p>
<p><span style="font-size: medium;" size="4"><strong>1.捕捉信号：signal</strong></span></p>
<p><span style="font-size: medium;" size="4">用于决定系统信号的响应。</span></p>
<p><span style="font-size: medium;" size="4">格式：</span></p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;signal.h&gt;
void (*signal(int signo, void (*func)(int)))(int);
//func为SIG_IGN表示内核忽略此信号</pre>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">//func为SIG_DFL表示接到此信号的动作时默认动作</pre>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">//func为函数地址时为捕捉信号</pre>
<p><span style="font-size: medium;" size="4"><strong>2.发送信号：kill和raise、alarm、getitimer和setitimer、pause</strong></span></p>
<p><span style="font-size: medium;" size="4">kill：向其他进程发信号</span></p>
<p><span style="font-size: medium;" size="4">raise：向当前进程发信号</span></p>
<p><span style="font-size: medium;" size="4">alarm：设置一个时间值（闹钟时间），当所设置被超过产生SIGLRM信号，默认动作时终止进程</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 14pt;">getitimer和setitimer：获取和设置间隔定时器的函数</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 14pt;">pause：使进程挂起，直到捕捉到一个信号</span></p>
<p>格式：</p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;sys/types.h&gt;
#include &lt;signal.h&gt;
int kill(pid_t pid, int sig);
int raise(int sig);
//raise等价于kill(getpid(),sig)
//
#include &lt;unist.h&gt;
unsigned int alarm(unsigned int seconds);
//
#include &lt;sys/time.h&gt;
int getitimer(int which, struct itimerval *value);
intsetitimer(int which, const struct itimerval *value,struct itimerval *ovalue);
//
#include &lt;unistd.h&gt;
int pause(void);</pre>
<p><span style="font-size: 14pt;">下面说说</span></p>
<p><span style="font-size: 14pt;"><strong>【信号屏蔽字】：</strong></span></p>
<p><span style="font-size: 14pt;">每个进程都有一个屏蔽字，它规定了当前要阻塞递送到该进程的信号集。</span></p>
<p><span style="font-size: 14pt;">1.设置</span></p>
<p><span style="font-size: 14pt;"><strong>函数：sigpromask、sigpending</strong></span></p>
<p><span style="font-size: 14pt;">sigpromask：检测或更改进程的信号屏蔽字</span></p>
<p><span style="font-size: 14pt;">sigpending：返回对于调用进程被阻塞不能递送和当前未决定的信号集</span></p>
<p><span style="font-size: 14pt;">格式：</span></p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;signal.h&gt;
int sigpromask(int how, const sigset_t *set, sigset_t *oset);
int sigpending(sigset_t *set);</pre>
<p><span style="font-size: 14pt;">2.实现</span></p>
<p><span style="font-size: 14pt;"><strong>函数：sigaction</strong></span></p>
<p><span style="font-size: 14pt;">sigaction:检查或修改与指定信号相关联的处理动作。</span></p>
<p><span style="font-size: 14pt;">格式：</span></p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;signal.h&gt;
int sigaction(int signo, const struct sigaction *act, struct sigaction *oact);
//结构体原型如下
struct sigaction
{
    void (*sa_handler)();//addr of signal handler, or SIG_IGN, or SIG_DFL
    sigset_t sa_mask;//additional to block
    int sa_flag;//signal options
};</pre>
<p><span style="font-size: 14pt;"><strong>【相关操作】：</strong></span></p>
<p><span style="font-size: 14pt;"><strong>函数：sigsetjmp和siglongjmp、sigsuspend、abort、system、sleep</strong></span></p>
<p><span style="font-size: 14pt;"><span style="font-size: medium;" size="4">&nbsp;</span> sigsetjmp和siglongjmp：非局部转移信号处理</span></p>
<p><span style="font-size: 14pt;">sigsuspend：在一个原子操作中实现恢复信号屏蔽字，然后使进程睡眠。</span></p>
<p><span style="font-size: 14pt;">abort：使程序异常终止</span></p>
<p><span style="font-size: 14pt;">system：执行系统命令</span></p>
<p><span style="font-size: 14pt;">sleep：挂起调用中的进程，直到过了预定时间或收到一个信号并从信号处理程序返回。可以由alarm函数实现。</span></p>
<p><span style="font-size: 14pt;">格式：</span></p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;setjmp.h&gt;
int sigsetjmp(sigjmp_buf env, int savemask);
void siglongjmp(sigjmp_buf env, int val);
//
#include &lt;signal.h&gt;
int sigsuspend(const sigset_t *sigmask);
//
#include &lt;stdlib.h&gt;
void abort(void);
int system(const char *string);
//
#include &lt;unistd.h&gt;
unsigned int sleep(unsigned int second);</pre>
<p><span style="font-size: medium;" size="4"></span></p>]]></description></item><item><title>在windows 7下为VS安装和配置Gtkmm</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/03/2035587.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 03 May 2011 10:43:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/03/2035587.html</guid><description><![CDATA[<p>为了能在VS中使用Gtk+库，今天忙乎了一下午，走了弯路，把Gtk+库加到VS2010我实在是弄不出来。最后还是选择VS2008了，结果成功了。现在分享下我是怎么给VS2008加入Gtk+库的。为什么想在VS中使用Gtk+就不多说了，个人爱好问题。</p>
<p>那为什么选择Gtkmm而不选择Gtk+呢？这个应该都知道，Gtkmm是封装好了类，支持C++，同样也支持C。</p>
<p>步骤：</p>
<p>1.先下载Gtkmm安装包，<a href="http://ftp.gnome.org/pub/GNOME/binaries/win32/gtkmm/2.22/gtkmm-win32-devel-2.22.0-2.exe" target="_blank">下载地址</a>。安装好Gtkmm（怎么安装不说了，一键式的安装）；</p>
<p>2.打开VS2008，新建一个控制台项目，我建的项目是gtk_test，保存在文件夹：E:\vc++2008\gtk_test</p>
<p>如下图：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842524225.jpg"><img style="display: inline; border: 0px;" title="1" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842527780.jpg" alt="1" width="599" height="480" border="0" /></a></p>
<p>3.项目建好后，打开属性管理器，找不到属性管理器在哪？打开路径如下图：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842535795.jpg"><img style="display: inline; border: 0px;" title="2" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842534093.jpg" alt="2" width="608" height="524" border="0" /></a></p>
<p>4.下面进入安装Gtkmm的文件夹，我安装在C盘：C:\gtkmm\MSVC&nbsp; ，进入MSVC文件夹，把下面两个文件复制到工程目录下：E:\vc++2008\gtk_test\gtk_test&nbsp; 下。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/20110503184253713.jpg"><img style="display: inline; border: 0px;" title="3" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842532108.jpg" alt="3" width="184" height="51" border="0" /></a></p>
<p>5.进入属性管理器，右键&ldquo;Debug|Win32&rdquo;，选择&ldquo;添加现有属性表&rdquo;</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842548171.jpg"><img style="display: inline; border: 0px;" title="4" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842547059.jpg" alt="4" width="379" height="309" border="0" /></a></p>
<p>再选择刚才赋值的文件&ldquo;gtkmm-vc90-d-2_4&rdquo;。再右键&ldquo;Release|Win32&rdquo;,同上面一样，但选择文件&ldquo;gtkmm-vc90-2_4&rdquo;。</p>
<p>6.好了，基本完成了，现在来修改stdafx.h文件：</p>
<p>如下：</p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">gtk_test.cpp// stdafx.h : 标准系统包含文件的包含文件，
// 或是经常使用但不常更改的
// 特定于项目的包含文件
//

#pragma once

#include "targetver.h"

#include &lt;stdio.h&gt;
#include &lt;gtkmm.h&gt;



// TODO: 在此处引用程序需要的其他头文件
</pre>
<p>修改gtk_test.cpp文件如下：</p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">// gtk_test.cpp : 定义控制台应用程序的入口点。
//

#include "stdafx.h"


int main(int argc, char* argv[])
{
  Gtk::Main kit(argc, argv);

  Gtk::Window window;

  Gtk::Main::run(window);

  return EXIT_SUCCESS;
}
</pre>
<p>5.现在如果编译已经可以执行了，可能由于VS2008的一个bug，debug版本会跳出</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842549534.png"><img style="display: inline; border: 0px;" title="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842545597.png" alt="image" width="450" height="168" border="0" /></a> 这个问题这里不解释（解决办法去谷歌上搜吧）。</p>
<p>执行编译release版，如下图，但是在Gtk窗口后面有个控制台窗口。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/2011050318425524.png"><img style="display: inline; border: 0px;" title="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842552499.png" alt="image" width="520" height="342" border="0" /></a></p>
<p>6.如何去掉后面的控制台呢？建议debug版保留这个控制台窗口。去掉控制台方法如下：</p>
<p>右键&ldquo;gtk_test&rdquo;，进入属性设置</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031842573697.png"><img style="display: inline; border: 0px;" title="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031843014314.png" alt="image" width="327" height="423" border="0" /></a></p>
<p>进入属性设置窗口，修改：链接器-&gt;系统-&gt;子系统设为Windows(/SUBSYSTEM:WINDOWS)</p>
<p>&nbsp;<a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031843021773.png"><img style="border: 0px;" title="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031843042622.png" alt="image" width="540" height="395" border="0" /></a></p>
<p>再修改：链接器-&gt;高级-&gt;入口点设为mainCRTStartup</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031843078703.png"><img style="display: inline; border: 0px;" title="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031843097077.png" alt="image" width="548" height="401" border="0" /></a></p>
<p>再次建议只修改release的配置。</p>
<p>7.运行结果如下：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031843116846.png"><img style="display: inline; border: 0px;" title="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201105/201105031843122145.png" alt="image" width="622" height="290" border="0" /></a></p>
<p>关于gtkmm库的使用可以<a href="http://developer.gnome.org/gtkmm-tutorial/unstable/index.html.zh_CN" target="_blank">点此进入</a></p>
<p>如果你想学习Gtk+编程的话可以<a href="http://www.huzheng.org/ebook/gtk2-tut/book1.html" target="_blank">点此进入</a></p>
<p>其他的不多说了，我是初学者，在这只是分享下我知道的。接下来我就要开始学习Gkt了。</p>]]></description></item><item><title>[Linux学习笔记]进程概念及控制</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/03/2035386.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 03 May 2011 07:57:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/03/2035386.html</guid><description><![CDATA[<p><span style="font-size: 14pt;">内容：进程的标识、运行、终止、进程间竞争和进程操作</span></p>
<p><span style="font-size: 14pt;">1.进程的运行和终止</span></p>
<p><span style="font-size: 14pt;">每个进程都有唯一的ID，ID为0 的系统进程swapper称作交换进程，是一个系统调度进程；ID为1的进程init是一个用户进程，负责读与系统有关的初始化文件；ID为2的进程是pagedaemon页精灵进程，是系统进程。这些进程是特殊的进程，是不能被中止的。</span></p>
<p><span style="font-size: 14pt;">关于进程的运行和终止的一些函数：fork、vfork、exec、exit。</span></p>
<p><span style="font-size: 14pt;">fork函数是Linux系统创建新进程的惟一方法。fork函数可以创建除交换进程、init进程和页精灵进程之外的用户进程。</span></p>
<p><span style="font-size: 14pt;">vfork函数用来创建一个新进程，进程建立以后马上执行exec一执行一个新程序。</span></p>
<p><span style="font-size: 14pt;">exec本身不能建立新进程，因为执行exec前后原父进程和子进程的ID并没有改变。</span></p>
<p><span style="font-size: 14pt;">exit函数调用由atexit注册的清除的函数，并关闭所有的标准I/O流。进程的退出状态很重要，一般以0值表示正常退出。</span></p>
<p><span style="font-size: 14pt;">函数的原型为：</span></p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;"><span style="font-size: 14pt;">#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
pid_t fork(void);
pid_t vfork(void);

//
#include &lt;unistd.h&gt;
int execl(const char *pathname, const char arg0,...);
int execv(const char *pathname, char *const argv[]);
int execle(const char *pathname, const char *arg0,...);
int execve(const char *pathname, char *const argv[], char *const envp[]);
int excelp(const *filename, const char *arg0,...);
int execvp(const char *filename, char *const argv[]);

//
#inlcude &lt;stdlib.h&gt;
void exit(int status);

#inlcude &lt;unistd.h&gt;
void _exit(int status);</span></pre>
<p><span style="font-size: 14pt;">2.wait操作</span></p>
<p><span style="font-size: 14pt;">当调用wait或者waitpid系统调用，进程可能出现3种状态：阻塞（当其所有子进程还在运行）、子进程处于终止状态（立即返回）和出错立即返回（没有子进程）。</span></p>
<p><span style="font-size: 14pt;">wait函数的格式：</span></p>
<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;"><span style="font-size: 14pt;">#include &lt;sys/types.h&gt;
#include &lt;sys/wait.h&gt;
pid_t wait(int *statloc);
pid_t waitpid(pid_t pid, int statloc, int options);</span></pre>
<p><span style="font-size: 14pt;">//成功返回进程ID，失败返回-1</span></p>]]></description></item><item><title>综合素质测评系统</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/02/2034707.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 02 May 2011 15:45:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/02/2034707.html</guid><description><![CDATA[<p>背景：综合素质测评搞起来很麻烦，得弄个系统来实现</p>
<p>过程:</p>
<p>召集人员</p>
<p>开发工具：VB和sqlsever2000</p>
<p>我负责总策划</p>
<p>其他人员在作安排</p>
]]></description></item><item><title>[好软件和好网站推荐]</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/02/2034558.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 02 May 2011 12:46:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/02/2034558.html</guid><description><![CDATA[<p><span style="font-size: 16px;"><strong>[软件]</strong></span></p>
<p>1.<a href="http://www.yunduan.cn/">云端软件平台</a></p>
<p>　　云端是软件和操作系统的中间载体，能解决您以往使用软件时：软件安装繁琐费时、软件安装使用引起的系统脏乱崩溃、重装系统后重装软件等烦恼，帮您更快、更简单、更舒适的使用和管理软件。</p>
<p>　　云端软件库拥有近万款的软件资源，都无需安装，一键使用，不写注册表、不写系统；无用软件可以一键删除，快速干净不残留。</p>
<p>下载地址：<a href="http://dlc2.sdo.com/FTP/CloudPK/20110316/1/CloudSetup1.0beta4_0903.exe">官网下载</a></p>
<p>2.思维导图（<a href="http://mindmanager.huaxlee.com/">MindManager</a>）</p>
<p>MindManager是一个创造、管理和交流思想的通用标准，其可视化的绘图软件有着直观、友好的用户界面和丰富的功能，这将帮助您有序地组织您的思维、资源和项目进程。</p>
<p>MindManager也是一个易于使用的项目管理软件，能很好提高项目组的工作效率和小组成员之间的协作性。它作为一个组织资源和管理项目的方法，可从脑图的核心分枝派生出各种关联的想法和信息。</p>
<p>下载地址：<a href="ed2k://|file|Mindmanager_9.1.157_HH.zip|96403576|6910f8cdc233bdcecfca2b851f67cfcf|h=pzxgl5tkqsqc3v72v7exupfnra27qxdy|/" target="_blank">安装版</a>、<a href="ed2k://|file|Mindjet.MindManager.v9.1.157.%E6%B1%89%E5%8C%96%E7%89%88.%28Win32.%E4%BA%91%E7%AB%AF%E7%89%88%29.exe|78295053|79070a43992d951745d7495b4514a040|h=sbaugwvogykx5yvyu2dcn37intsveset|/" target="_blank">云端版</a></p>
<p>3.<a href="http://aserver.yunduan.cn/bbs/viewthread.php?tid=32770&amp;extra=&amp;page=1" target="_blank">Visual Assist X</a></p>
<p>Visual Assist X具有强大的编辑特色，提高了生产效率，可以完全集成到您的Microsoft开发环境中，升级了您的IDE，在不改变编程习惯的同时就可以感受到Visual Assist X为您带来的好处。</p>
<p>Visual Assist X是一款非常好的Microsoft Visual Studio 2005和Visual Studio .NET插件，支持C/C＋＋，C＃，ASP，Visual Basic，Java和HTML等语言，能自动识别各种关键字、系统函数、成员变量、自动给出输入提示、自动更正大小写错误、自动标示错误等，有助于提高 开发过程的自动化和开发效率。</p>
<p>下载地址：<a href="http://visualstudiogallery.msdn.microsoft.com/D6678A1F-C700-4532-8C5E-A799D875063D/file/4784/8/VA_X_Setup1845.vsix" target="_blank">安装版</a>、<a href="thunder://QUFodHRwOi8vdGVsZG93bjEuOTlwYW4uY29tLzQvMTU0OTA0MTIzOTMzMjMwMTgzNDg/MVpa" target="_blank">云端版</a></p>
<p><span style="font-size: 16px;"><strong>[网站]</strong></span></p>
<p>1.<a href="http://oss.org.cn/kernel-book/index.htm"><strong><span>深入分析</span></strong><strong><span lang="EN-US">Linux</span></strong><strong><span>内核源码</span></strong></a></p>
<p>这是一本电子书，</p>
<p style="text-align: left; display: inline !important;" align="center">作者是陈莉君。</p>
<p style="display: inline !important;">摘</p>
<p style="display: inline !important;">抄下这本书的前言：</p>
<p align="left">Linux内核全部源代码是一个庞大的世界，大约有200多万行，占60MB左右的空间。因此，如何在这庞大而复杂的世界中抓住主要内容，如何找到进入Linux内部的突破口，又如何能把Linux的源代码变为自己的需要，这就是本书要探讨的内容。</p>
<p align="left">首先，本书的第一章领你走入Linux的大门，让你对Linux内核的结构有一个整体的了解。然后，第二章介绍了分析Linux源代码应具备的基本硬件知识，这是继续向Linux内核迈进的必备条件。中断作为操作系统中发生最频繁的一个活动，本书用一章的内容详细描述了中断在操作系统中的具体实现机制。</p>
<p align="left">大家知道，操作系统中最核心的内容就是进程管理、内存管理和文件管理。本书用大量的篇幅描述了这三部分内容，尤其对最复杂的虚拟内存管理进行了详细的分析，其中对内存初始化部分的详细描述将对嵌入式系统的开发者有所帮助。</p>
<p align="left">在对Linux内核有一定了解后，读者可能希望能够利用内核函数进行内核级程序的开发，例如开发一个设备驱动程序。Linux的模块机制就是支持一般用户进行内核级编程。另外，读者在进行内核级编程时还可以快速查阅本书附录部分提供的Linux内核API函数。</p>
<p align="left">网络也是Linux中最复杂的部分之一，这部分内容足可以写一本书。本书仅以面向对象的思想为核心，分别对网络部分中的四个主要对象：协议、套接字、套接字缓冲区及网络设备接口进行了分析。有了对这四个对象的分析，再结合文件系统、设备驱动程序的内容，读者就可以具体分析自己感兴趣的相关内容。</p>
<p align="left">&nbsp;&nbsp;&nbsp;&nbsp;Linux在不断地发展，本书锁定版本为Linux2.4.16......</p>
<p align="left">2.</p>
<p style="display: inline !important;" align="left">&nbsp;</p>
<div id="csdnblog_midwrap" style="display: inline !important;">
<div id="csdnblog_content" style="display: inline !important;">
<div class="gutter" style="display: inline !important;">
<div class="default_contents" style="display: inline !important;">
<div class="user_article" style="display: inline !important;">
<div class="blogstory" style="display: inline !important;">
<div style="display: inline !important;"><strong><a href="http://www.xiyoulinux.org">西邮Linux兴趣小组网站</a></strong></div>
<div style="display: inline !important;"><span>&nbsp;</span></div>

</div>

</div>

</div>

</div>

</div>

</div>
<p style="font-family: Simsun; line-height: normal; font-size: medium;">&nbsp;</p>
<p style="text-align: left;" align="center">3.<strong><a href="http://lxr.linux.no/">Linux源代码</a></strong></p>
<p style="text-align: left;" align="center">可以阅读源代码哦，结构很清晰的。手机阅读源代码建议登入：<a href="http://www.oldlinux.org/lxr/http/source/">http://www.oldlinux.org/lxr/http/source/</a></p>
<p style="text-align: left;" align="center">4.<strong><a href="http://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5">维基百科</a></strong></p>
<p style="text-align: left;" align="center">维基百科是一个自由的网上百科全书，任何人均可以参与条目的撰写。维基百科是全球最大的资料来源网站之一，并开放给所有人编辑、修订，无论是任何年龄、来自何种文化或社会背景的人都可以撰写维基百科条目。维基百科亦设有多个不同语言版本，而成立之目的为提供自由的信息。维基百科与传统百科的分别：（一）更新速度较快，可即时更新；（二）只要能接上互联网即可连上维基百科。</p>
<p style="text-align: left;" align="center">5.<strong><a href="http://www.verycd.com/">电驴资源分享网</a></strong></p>
<p style="text-align: left;" align="center">好多资源，可能下载速度有点慢。</p>
<p style="text-align: left;" align="center">&nbsp;</p>
<p style="display: inline !important;"><strong><span style="font-size: large;">【未完待续】......</span></strong></p>]]></description></item><item><title>[Linux学习笔记]标准输入输出</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/02/2034343.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 02 May 2011 05:34:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/02/2034343.html</guid><description><![CDATA[<p>（一）关于流和缓存操作的函数：在头文件&lt;stdio.h&gt;中定义了三个预定义指针，分别是stdin、stdout、和stderr，它们分别代表进程的标准输入、标准输出和标准出错流。</p> <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 缓存有三种方式：全缓存、行缓存和不带缓存。UNIX的默认缓存类别：标准错误无缓存，终端设备流为行缓存，其他为全缓存。</p> <p><strong>1.打开操作</strong></p> <p>（1）fopen、freopen和fdopen函数</p> <p>作用：打开一个标准I/O流。freopen函数主要用于将一个指定的文件打开为一个预定义的流：stdin、stdout和stderr。fdopen函数常用于由创建管道和网络通信通道函数获得的描述符。</p> <p>格式：</p><pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
FILE *fopen(const char *file, const char *type);
FILE *freopen(const char *file, constchar *type, FILE *fp);
FILE *fdopen(int filedes, const char *type);</pre>
<p>返回值：成功则返回文件指针，失败返回NULL。<br>（2）fclose函数：用于关闭一个流。 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
int fclose(FILE *fp);</pre>
<p>返回值：成功为0，失败为EOF为文件结束符标志。 
<p><strong>2.读操作</strong> 
<p>3种度操作：每次读写一个字符的I/O、每次读写一行I/O（使用fgets和fputs函数）和直接I/O（使用fread和fwrite函数） 
<p>（1）getc、fgetc和getchat函数 
<p>作用：用于一次读取一个字符 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
int getc(FILE *fp);
int fgetc(FILE *fp);
int getchar(void);</pre>
<p>（2）ferror、feof和clearerr函数 
<p>作用：用于流的错误处理，为了区分溢出或者是出错 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
int ferrpr(FILE *fp);
int feof(FILE *fp);
void clesrerr(FILE *fp);</pre>
<p>（3）ungetc函数：用于从一个流读出的字符再送回流中。 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
int ungetc(int c, FILE *fp);</pre>
<p><strong>3.写操作</strong> 
<p>putc、fputc和putchar函数 
<p>作用：对应于上面的输入函数 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
int putc(int c, FILE *fp);
int fputc(int c, FILE *fp);
int putchar(int c);</pre>
<p>（二）I/O类型 
<p><strong>1.一行操作I/O</strong> 
<p>（1）gets和fgets函数 
<p>作用：给指定的缓冲区每次输入一行 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
char *fgets(char *buf, int n, FILE *fp);
char *gets(char *buf);</pre>
<p>（2）fputs和puts函数 
<p>作用：每次输出一行到指定的流 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
int fput(const cahr *string, FILE *fp);
int put(const char *string);</pre>
<p><strong>2.二进制I/O</strong> 
<p>fread和fwrite 
<p>这是对整个结构的一次读写 
<p>格式：<pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
size_t fread(void *ptr, size_t size, size_t nobj,FILE *fp);
size_t fwrite(const void *ptr, size_t size, size_t nobj,FILE *fp);</pre>
<p><strong>3.缓冲区I/O</strong> 
<p>read和write函数 
<p>[<a href="http://www.cnblogs.com/hanxi/archive/2011/05/01/2033744.html" target="_blank">格式参见此文章</a>] 
<p><strong>4.格式化I/O</strong> 
<p>scanf和printf函数 
<p>[不做介绍]</p>]]></description></item><item><title>【学习笔记】Linux平台的文件，目录及操作</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/01/2033784.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 01 May 2011 02:44:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/01/2033784.html</guid><description><![CDATA[<p><span style="color: #0000ff;"><strong>下面介绍关于文件和目录操作的函数</strong></span></p>
<p><strong>1.文件类型</strong></p>
<p><span style="color: #0000ff;">stat</span>(),<span style="color: #0000ff;">fstat</span>()和<span style="color: #0000ff;">lstat</span>()函数</p>
<p>fstat功能和stat类似，只是不以文件的路径称作为标识，而是用文件描述符标识目标文件，获得该文件的有关信息。lstat形式和功能都与stat类似，但是当目标文件是符号链接文件时，lstat返回该符号连接的有关信息。</p>
<p>格式：</p>
<p>#inlcude &lt;sys/stat.h&gt;</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int stat(const chat *name, struct stat *buf);</p>
<p>int fstat(int filedes, struct stat *buf);</p>
<p>int lstat(const char *file, stuct stat *buf);</p>
<p>与此命名文件有关的信息结构放在buf中。成功则函数返回0，否则返回-1。</p>
<p><strong>2.文件权限</strong></p>
<p>(1)<span style="color: #0000ff;">access</span></p>
<p>用来检查指定文件的属性，可以检查文件爱你是否可读，可写，可执行。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int access(const char *file, int mode);</p>
<p>成功返回0，失败返回-1 。</p>
<p>(3)<span style="color: #0000ff;">umask</span></p>
<p>为 进程设置创建文件的许可掩码。</p>
<p>格式：</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>#include &lt;sys/stat.h&gt;</p>
<p>mode_t umask(mode_t mode);</p>
<p>返回以前文的文件方式创建屏蔽字。无错误返回。</p>
<p>(4)<span style="color: #0000ff;">chmod</span>和
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<span style="color: #0000ff;">fchmod</span></p>
<p>改变文件的操作权限</p>
<p>格式：</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>#include &lt;sys/stat.h&gt;</p>
<p>chmod[OPTION]MODE[,MODE...] FILE;</p>
<p>int chmod(const char &nbsp;*path, mode_t mode);</p>
<p>int fchmode(int fileds, mode_t mode);</p>
<p>(5)<span style="color: #0000ff;">chown</span>,<span style="color: #0000ff;">fchown</span>和<span style="color: #0000ff;">lchown</span></p>
<p>更改文件的用户ID和组ID。</p>
<p>格式：</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int chown(condt char *name, uid_t owner, gid_t group);</p>
<p>int fchown(int filedes, uid_t owner, gid_t group);</p>
<p>int lchown(const char *nam, uid_t owner, gid_t group);</p>
<p><strong>3.文件操作</strong></p>
<p>(1)<span style="color: #0000ff;">link</span>,<span style="color: #0000ff;">unlink</span>和
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<span style="color: #0000ff;">remove</span></p>
<p>link函数建立指向文件的新目录项。</p>
<p>unlink函数删除目录项或文件（仅作用于非目录文件）。</p>
<p>remove函数和unlink功能相同，只是remove可以删除目录文件</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int link(const char *old, const char *new);</p>
<p>int unlink(const char *old);</p>
<p>#include &lt;stdio.h&gt;</p>
<p>int remove(const char *file);</p>
<p>成功返回0，失败返回-1 。</p>
<p>(2)<span style="color: #0000ff;">rename</span></p>
<p>此函数可以实现对一个文件或目录的更名。</p>
<p>格式：</p>
<p>#include &lt;stdio.h&gt;</p>
<p>int rename(const char *old, const char *new);</p>
<p>(3)<span style="color: #0000ff;">symlink</span></p>
<p>创建一个符号连接。</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int symlink(const char *realpath, const char *charpath);</p>
<p>(4)<span style="color: #0000ff;">realink</span></p>
<p>打开符号连接文件本身以读取连接中的文件名。</p>
<p>格式:</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int reslink(const char *file, const char *buf, int bufsize);</p>
<p><strong>4.文件时间</strong></p>
<p><span style="color: #0000ff;">utime</span>和<span style="color: #0000ff;">utimes</span></p>
<p>格式：</p>
<p>#include &lt;sys.types.h&gt;</p>
<p>#inlcude &lt;utime.h&gt;</p>
<p>int utime(const char *filename, const struct utimebuf *time);</p>
<p>int utimes(char *filename, struct timeval *tvp);</p>
<p><strong>5.目录操作</strong></p>
<p>(1)<span style="color: #0000ff;">mkdir</span></p>
<p>创建一个新目录。</p>
<p>格式：</p>
<p>#include &lt;sys/types.h&gt;<br />#include &lt;sys/stat.h&gt;</p>
<p>int mkdir(const char *dname, mode_t mode);</p>
<p>(2)<span style="color: #0000ff;">rmdir</span></p>
<p>删除一个目录。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int rmdir(const char *dname);</p>
<p>(3)<span style="color: #0000ff;">chdir</span>和<span style="color: #0000ff;">fchdir</span></p>
<p>这两个函数的任务是搜索相对路径名的起点并可以更改当前工作目录。它们的区别是chdir用路径名来标识目标目录，而fchdir用文件描述符来标识目标目录。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int chdir(const char *path);</p>
<p>int fchdir(int filedes);</p>
<p>(4)<span style="color: #0000ff;">gecwd</span></p>
<p>获取当前工作目录的绝对路径名。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>char *getcwd(char *buf, size_t bufsize);</p>
<p><strong>6.特殊设备文件</strong></p>
<p><span style="color: #0000ff;">sync</span>和<span style="color: #0000ff;">fsync</span></p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
清空文件系统缓冲区</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>void sync(void);</p>
<p>int fsync(int filedes);</p>]]></description></item><item><title>【学习笔记】Linux平台的文件I/O操作</title><link>http://www.cnblogs.com/hanxi/archive/2011/05/01/2033744.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 01 May 2011 01:01:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/05/01/2033744.html</guid><description><![CDATA[<p><span style="color: #0000ff;"><strong>以下函数为不带缓存的I/O（unbuffered I/O）函数</strong></span></p>
<p>对于内核而言，所有打开的文件都由一个非负整数描述（称为文件描述符）。</p>
<p>下面介绍下文件I/O函数：</p>
<p><strong>(1)open</strong></p>
<p>此函数为打开或创建一个文件。成功则返回文件描述符;失败则返回-1。</p>
<p>格式：</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>#include &lt;sys/stat.h&gt;</p>
<p>#include &lt;fcntl.h&gt;</p>
<p>int open(const char *name, int oflag[|optional parameter][,mode]);</p>
<p><strong>(2)creat</strong></p>
<p>此函数为创建一个新文件。成功则返回文件描述符;失败则返回-1。</p>
<p>格式：</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>#include &lt;sys/stat.h&gt;</p>
<p>#include &lt;fcntl.h&gt;</p>
<p>int creat(const char *name, mode_t mode);</p>
<p><strong>(3)close</strong></p>
<p>此函数为关闭一个已经打来的文件。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int close(int file);</p>
<p>成功返回0，否则返回-1。</p>
<p><strong>(4)lseek</strong></p>
<p>此函数为制定一个当前文件位移量。这个位移量是一个非负整数，用来说明从文件开始处计算的字节数。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>#include &lt;sys/types.h&gt;</p>
<p>off_t lseek(int file, off_t offset, int whence);</p>
<p>成功返回文件位移；出错返回-1。</p>
<p><strong>(5)reed</strong></p>
<p>此函数为从文件中读入数据。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>size_t read(int file, void *buf, size_t bytes);</p>
<p>返回读到的字节书，若已读到尾部则返回0，若出错返回-1。</p>
<p><strong>(6)write</strong></p>
<p>此函数为向文件中写入数据。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>size_t write(int file, void *buff, size_t bytes);</p>
<p>返回写入文件的字节总数，大小一定小于缓冲区容量。出错返回-1。</p>
<p><strong>(7)dup</strong></p>
<p>此函数可以用来复制一个现存的文件描述符。</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>int dup(int oldfile);</p>
<p>int duo2(int oldfile, int newfile);//可以指定新文件的描述符</p>
<p>成功返回次新文件的文件描述符；失败返回-1 。</p>
<p><strong>(8)fcntl</strong></p>
<p>用途1：复制描述符（cmd=F_DUPED）</p>
<p>用途2：获取/设置文件爱你描述符标志</p>
<p>用途3：获取文件状态标志</p>
<p>用途4：获取/设置记录锁</p>
<p>用途5：获取/设置异步I/O</p>
<p>格式：</p>
<p>#include &lt;unistd.h&gt;</p>
<p>#include &lt;fcntl.h&gt;</p>
<p>int fcntl(int fd, int cmd);</p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
int fcntl(int fd, int cmd, long arg);</p>
<p>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
int fcntl(
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
int fd, int cmd, struct flock *lock);</p>
<p><strong>(9)ioctl</strong></p>
<p>此函数是input/output control 的缩写，即输入输出控制。它可以通过一个文件描述符来控制字符设备。</p>
<p>格式：</p>
<p>#include &lt;sys/ioctl.h&gt;</p>
<p>int ioctl(int file, int request, char *argp|struct termios st);</p>
<p>成功返回0，出错返回-1 。</p>]]></description></item><item><title>一步一步实现扫雷游戏（C语言实现）(四)</title><link>http://www.cnblogs.com/hanxi/archive/2011/04/28/demining.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 27 Apr 2011 23:31:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/04/28/demining.html</guid><description><![CDATA[<p><span style="color: #ff0000;"><strong>此项目相关博文链接</strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html">一步一步实现扫雷游戏（C语言实现）(一）</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/28/1997660.html">一步一步实现扫雷游戏（C语言实现）(二)</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/31/2000616.html">一步一步实现扫雷游戏（C语言实现）(三)</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/04/28/demining.html">一步一步实现扫雷游戏（C语言实现）(四)</a></strong></span></p>
<p>&nbsp;</p>
<p style="display: inline !important;">　　唉！说来就惭愧啊!几星期前我就开始使用win32写着个程序，但是到了中途碰到了许多钉子。以前我写了几篇博客记录以前写的代码，但是那是不成功的代码。今天我把扫雷游戏的基本过程实现了，下面一一介绍：</p>
<p style="display: inline !important;">&nbsp;</p>
<p style="display: inline !important;"><span style="color: #0000ff;"><strong>思维导图：</strong></span></p>
<p style="display: inline !important;"><span style="color: #0000ff;"><strong><br /><img src="http://pic002.cnblogs.com/images/2011/198486/2011042807450248.jpg" alt="" /><br /></strong></span></p>
<p><strong>　　1.首先说说初始状态时后台随机载入地雷分布的部分，</strong>我把这部分用类封装了：</p>
<div class="cnblogs_code">
<div><span style="color: #0000ff;">class</span><span style="color: #000000;"> RandMap<br />{<br /></span><span style="color: #0000ff;">private</span><span style="color: #000000;">:<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num_mines;<br /></span><span style="color: #0000ff;">public</span><span style="color: #000000;">:<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">函数声明</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    RandMap();<br />    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_data(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> in_m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> in_n, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> in_num_mines);//使用函数参数改变类内部数据的接口<br />    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> get_map(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> out_map[MAX_X][MAX_Y]);//获取随机地雷分布图<br />    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);//分布地雷位置<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j);//计算周围地雷个数<br />    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> rand_map(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);//生成随机分布地雷图<br />};</span></div>



</div>
<p>　　基本过程是：由主函数调用RandMap类中函数，获取地雷分布图map[i][j]。</p>
<p>　　主函数实现着过程的代码：</p>
<div class="cnblogs_code">
<div><span style="color: #808080;">///////////////////////////////////////<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">生成随机地雷分布图map[i][j]</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    RandMap RMap;<br />    RMap.set_data(m, n, num_mines);<br />    RMap.rand_map();<br />    RMap.get_map(map);<br />    </span><span style="color: #808080;">///////////////////////////////////////</span></div>



</div>
<p>　　这样就获得了随机分布地雷的数组map[i][j]。</p>
<p>　　类的实现（不做介绍，请看注释）:</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('dcea40df-a155-49f7-bfbf-c3c91e886520')"><img id="code_img_closed_dcea40df-a155-49f7-bfbf-c3c91e886520" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_dcea40df-a155-49f7-bfbf-c3c91e886520" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('dcea40df-a155-49f7-bfbf-c3c91e886520',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_dcea40df-a155-49f7-bfbf-c3c91e886520" class="cnblogs_code_hide">
<div><span style="color: #008000;">//</span><span style="color: #008000;">randmap.cpp</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #800000;">"</span><span style="color: #800000;">randmap.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">构造函数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">RandMap::RandMap()<br />{<br />    memset(map, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(map));<br />}<br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">********************************************************************<br />初始化地雷分布位置和个数<br />函数功能：根据设置的地雷个数和分布地图（map，数组）给出分布好了地雷的数组<br />函数原型：void set_mines(void)<br />********************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> RandMap::set_mines(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br />    srand((unsigned)time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> num_mines)<br />    {<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">rand()%n 取(0，n-1)的随机数    </span><span style="color: #008000;"><br /></span><span style="color: #000000;">        i </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> m </span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        j </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> n </span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果出现相同的情况呢？，没事，再循环几次，直到有了足够的地雷为止</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">1</span><span style="color: #000000;">||</span><span style="color: #000000;"> i</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">m </span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">1</span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">n </span><span style="color: #000000;">||</span><span style="color: #000000;"> map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINE)<br />        {<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> MINE;<br />        num</span><span style="color: #000000;">++</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />}<br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">***************************************************************************<br />返回周围地雷个数的函数<br />函数原型：   int round_num_mines(int i,int j);<br /> 参 数：     int i, int j为当前的坐标<br />返回值类型： int  返回该坐标处周围的地雷数<br />返回值情况：（1）返回1-8代表周围有1-8个地雷；<br />            （2）返回0代表周围没有地雷；<br />            （3）返回MINE代表此坐标时地雷；<br />*****************************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> RandMap::round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dir[</span><span style="color: #800080;">8</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">] </span><span style="color: #000000;">=</span><span style="color: #000000;"> {{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">},{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">}};<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">, mines </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;  </span><span style="color: #008000;">//</span><span style="color: #008000;"> round_num_mines 为周围地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINE)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> MINE;<br />    }<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; k </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">8</span><span style="color: #000000;">; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">0</span><span style="color: #000000;">]][j</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">1</span><span style="color: #000000;">]] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINE)<br />        {<br />            mines</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> mines;<br />}<br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">*****************************************************************************<br />随机生成地图<br />函数原型： void rand_map(void)<br />*****************************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> RandMap::rand_map(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    set_mines();<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> round_num_mines(i, j);<br />        }<br />    }<br />}<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />设置m，n，num_mines<br />+++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> RandMap::set_data(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> in_m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> in_n, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> in_num_mines)<br />{<br />    m </span><span style="color: #000000;">=</span><span style="color: #000000;"> in_m;<br />    n </span><span style="color: #000000;">=</span><span style="color: #000000;"> in_n;<br />    num_mines </span><span style="color: #000000;">=</span><span style="color: #000000;"> in_num_mines;<br />}<br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br />获取地图<br />+++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> RandMap::get_map(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> out_map[MAX_X][MAX_Y])<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            out_map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> map[i][j];<br />        }<br />    }<br />}</span></div>



</div>



</div>
<p><strong>　　2.画地图前的准备</strong>，确定窗口位置和地图中重要位置的像素点的坐标，先看确定窗口位置和大小的函数：</p>
<p>这个函数使用的是用指针做参数来改变变量的值，在C++中也可以使用指针的引用的。</p>
<div class="cnblogs_code">
<div><span style="color: #808080;">/////////////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置窗口位置和大小</span><span style="color: #008000;"><br /></span><span style="color: #808080;">/////////////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_position_size(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size, </span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXFULLSCREEN);</span><span style="color: #008000;">//</span><span style="color: #008000;">读取屏幕大小</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> heigh </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYFULLSCREEN);<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position </span><span style="color: #000000;">=</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)heigh</span><span style="color: #000000;">/</span><span style="color: #800080;">5</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />}</span></div>



</div>
<p>int * p_x_position, int * p_y_position;确定窗口位置（左上角相对于屏幕的x,y坐标）</p>
<p>int * p_x_size, int * p_y_size;窗口大小</p>
<p>再来看看怎么将地图中每个格子的像素点的位置存储到数组&nbsp;int pixel_x[MAX_X]和int pixel_y[MAX_Y]中：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ea7b6fb5-6b84-41ca-bce4-94013d4ce52c')"><img id="code_img_closed_ea7b6fb5-6b84-41ca-bce4-94013d4ce52c" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_ea7b6fb5-6b84-41ca-bce4-94013d4ce52c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ea7b6fb5-6b84-41ca-bce4-94013d4ce52c',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_ea7b6fb5-6b84-41ca-bce4-94013d4ce52c" class="cnblogs_code_hide">
<div><span style="color: #808080;">//////////////////////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">获取画格子的像素点并存储到pixel_x[i],pixel_y[j]中</span><span style="color: #008000;"><br /></span><span style="color: #808080;">//////////////////////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> get_pixel(HWND hwnd)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1, y1, x2, y2;</span><span style="color: #008000;">//</span><span style="color: #008000;">(x1,y1),(x2,y2)为窗口位置坐标</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x_position, y_position, x_size, y_size;<br />    set_position_size(</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_size, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_size);<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> frame_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXSIZEFRAME);  </span><span style="color: #008000;">//</span><span style="color: #008000;">边框宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYCAPTION); </span><span style="color: #008000;">//</span><span style="color: #008000;">标题栏宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> menu_high </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYMENU); </span><span style="color: #008000;">//</span><span style="color: #008000;">菜单高度</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    x2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x_size </span><span style="color: #000000;">-</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br />    y2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y_size </span><span style="color: #000000;">-</span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x </span><span style="color: #000000;">=</span><span style="color: #000000;"> x1;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_y </span><span style="color: #000000;">=</span><span style="color: #000000;"> y1;<br />    <br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">将画竖向格子线的像素点位置存储到pixel_x[i]中</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        pixel_x[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x;<br />        tmp_x </span><span style="color: #000000;">+=</span><span style="color: #000000;"> (x2</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m;<br />    }<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">将画横向格子线的像素点位置存储到pixel_y[j]中</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        pixel_y[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y;<br />        tmp_y </span><span style="color: #000000;">+=</span><span style="color: #000000;"> (y2</span><span style="color: #000000;">-</span><span style="color: #000000;">y1)</span><span style="color: #000000;">/</span><span style="color: #000000;">n;<br />    }<br />}</span></div>



</div>



</div>
<p>代码中有注释，不在作解说。</p>
<p>有了地图中每个格子的像素点坐标，下面作图也就方便了</p>
<p><strong>　　3.现在来看看消息的响应</strong>：</p>
<div class="cnblogs_code">
<div><span style="color: #000000;">LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x</span><span style="color: #000000;">=</span><span style="color: #000000;">LOWORD(lParam);</span><span style="color: #008000;">//</span><span style="color: #008000;">x，y为鼠标当前的位置坐标</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y</span><span style="color: #000000;">=</span><span style="color: #000000;">HIWORD(lParam);<br />    </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (message)<br />    {          <br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_PAINT:       </span><span style="color: #008000;">//</span><span style="color: #008000;">画图消息</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        paint_map(hwnd);<br />        </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_LBUTTONDOWN: </span><span style="color: #008000;">//</span><span style="color: #008000;">单击鼠标左键消息</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        left_key(hwnd, x, y);<br />        </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_RBUTTONDOWN: </span><span style="color: #008000;">//</span><span style="color: #008000;">单击右键<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">    right_key(hwnd, x, y);</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_DESTROY:<br />        PostQuitMessage (</span><span style="color: #800080;">0</span><span style="color: #000000;">);<br />        </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> DefWindowProc (hwnd, message, wParam, lParam) ;<br />}</span></div>



</div>
<p>WM_PAINT消息是用来载入初始状态下的格子图的（如下图）</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011042806440214.jpg" alt="" /></p>
<p>paint_map(hwnd)这个函数是实现初始化载入地图（方格子）的函数，函数使用了</p>
<div class="cnblogs_code">
<div><span style="color: #808080;">////////////////////////////////////////////////////////////<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">画格子图</span><span style="color: #008000;"><br /></span><span style="color: #808080;">////////////////////////////////////////////////////////////<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> paint_map(HWND hwnd)<br />{<br />    HDC         hdc;<br />    PAINTSTRUCT ps;<br /><br />    hdc </span><span style="color: #000000;">=</span><span style="color: #000000;"> BeginPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps);<br />    DrawGrid(hdc);</span><span style="color: #008000;">//</span><span style="color: #008000;">使用直线画格子的</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    EndPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps);<br />}</span></div>



</div>
<p>　　初始态载入图我使用的是BeginPaint ()和BeginPaint ()</p>
<p>DrawGrid函数的实现使用的是API函数MoveToEx()和LineTo()。实现代码如下：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d3988404-5c49-4bb1-8c54-3db0f6c21543')"><img id="code_img_closed_d3988404-5c49-4bb1-8c54-3db0f6c21543" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_d3988404-5c49-4bb1-8c54-3db0f6c21543" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d3988404-5c49-4bb1-8c54-3db0f6c21543',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_d3988404-5c49-4bb1-8c54-3db0f6c21543" class="cnblogs_code_hide">
<div><span style="color: #808080;">//////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">画格子<br /></span><span style="color: #008000;">//<br /></span><span style="color: #808080;">//////////////////////////////<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> DrawGrid(HDC hdc)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    POINT ptLeftTop;<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">画横线</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_x[i];<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_y[</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />        MoveToEx(hdc,ptLeftTop.x,ptLeftTop.y,NULL);            <br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_x[i];<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_y[n];<br />        LineTo(hdc,ptLeftTop.x,ptLeftTop.y);<br />    }<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">画竖线</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_x[</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_y[j];<br />        MoveToEx(hdc,ptLeftTop.x,ptLeftTop.y,NULL);            <br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_x[m];<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_y[j];<br />        LineTo(hdc,ptLeftTop.x,ptLeftTop.y);<br />    }<br />}</span></div>



</div>



</div>
<p>WM_LBUTTONDOWN 是单击鼠标左键消息，单击左键说明点开此位置。</p>
<p><strong>　　4.下面介绍响应左键事件部分</strong>（右键标记地雷部分还没实现，但是实现比左键简单，等下次实现了再发上来）</p>
<p>我定义看一个数组int user_map[MAX_X][MAX_Y] = {0};来存放某位置是否点开，user_map[i][j]等于1就说明点开。left_key()函数中画图的实现是使用了API函数GetDC ()和ReleaseDC ()</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('94717c3e-c68d-4b4e-9318-3cedc0c4feaf')"><img id="code_img_closed_94717c3e-c68d-4b4e-9318-3cedc0c4feaf" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_94717c3e-c68d-4b4e-9318-3cedc0c4feaf" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('94717c3e-c68d-4b4e-9318-3cedc0c4feaf',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_94717c3e-c68d-4b4e-9318-3cedc0c4feaf" class="cnblogs_code_hide">
<div><span style="color: #808080;">///////////////////////////////////////<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">响应左键事件<br /></span><span style="color: #008000;">//<br /></span><span style="color: #808080;">////////////////////////////////////</span><span style="color: #008000;">//</span><span style="color: #808080;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> left_key(HWND hwnd, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y)</span><span style="color: #008000;">//</span><span style="color: #008000;">x，y为鼠标当前的位置坐标</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x </span><span style="color: #000000;">=</span><span style="color: #000000;"> x, tmp_y </span><span style="color: #000000;">=</span><span style="color: #000000;"> y, i, j;<br />    POINT lpPoint;<br />    PAINTSTRUCT ps;<br />    HDC         hdc;<br />    RECT        rect;<br />    <br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp_x </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> pixel_x[i] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> tmp_x </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> pixel_x[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">])    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp_y </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> pixel_y[j] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> tmp_y </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> pixel_y[j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">])    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    }<br /><br />    hdc </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetDC (hwnd);<br /><br />    i</span><span style="color: #000000;">=</span><span style="color: #000000;">i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    j</span><span style="color: #000000;">=</span><span style="color: #000000;">j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINE)<br />    {<br />        GetClientRect(hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect);<br />        DrawText (hdc, TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">GAME OVER!</span><span style="color: #800000;">"</span><span style="color: #000000;">), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />        DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER);<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> user_map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> UNOPEN)<br />    {<br />        search0(i, j);<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />    {<br />        user_map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> OPEN;<br />    }<br />    print_user_map(hdc);<br />    ReleaseDC (hwnd, hdc);<br />}</span></div>



</div>



</div>
<p><span style="font-family: Simsun; line-height: normal; font-size: medium;">&nbsp;</span></p>
<p style="display: inline !important;"><span style="font-family: Simsun; line-height: normal; font-size: medium;">&nbsp;</span></p>
<p style="display: inline !important;">left_key()函数中出先了下面两个函数。</p>
<p style="display: inline !important;">&nbsp;</p>
<p style="display: inline !important;">void print_user_map(HDC hdc);//打印用户点击之后的地图</p>
<p><span style="font-family: Simsun; line-height: normal; font-size: medium;">&nbsp;</span></p>
<p style="display: inline !important;">void search0(int i, int j);//如果用户点开的位置上地雷的个数为0，则程序自动点开一片区域</p>
<p>函数实现分别如下：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('aeb6aa32-21c7-4534-b85f-e5ab25523ad7')"><img id="code_img_closed_aeb6aa32-21c7-4534-b85f-e5ab25523ad7" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_aeb6aa32-21c7-4534-b85f-e5ab25523ad7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('aeb6aa32-21c7-4534-b85f-e5ab25523ad7',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_aeb6aa32-21c7-4534-b85f-e5ab25523ad7" class="cnblogs_code_hide">
<div><span style="color: #808080;">////////////////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">打印用户点击之后的地图</span><span style="color: #008000;"><br /></span><span style="color: #808080;">////////////////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> print_user_map(HDC hdc)<br />{<br />    RECT        rect;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />        <br />            </span><span style="color: #008000;">/*</span><span style="color: #008000;">**************************************************<br />            left ： 指定矩形框左上角的x坐标<br />            top：   指定矩形框左上角的y坐标<br />            right： 指定矩形框右下角的x坐标<br />        　　bottom：指定矩形框右下角的y坐标<br />            ***************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />            rect.left </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_x[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />            rect.top </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_y[j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />            rect.right </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_x[i];<br />            rect.bottom </span><span style="color: #000000;">=</span><span style="color: #000000;"> pixel_y[j];<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (user_map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> OPEN)<br />            {<br />                TCHAR str_tmp[</span><span style="color: #800080;">10</span><span style="color: #000000;">];<br />                sprintf(str_tmp,</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,map[i][j]);<br />                DrawText (hdc, TEXT (str_tmp), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />                        DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER);<br />            }<br />        }<br />    }<br />}</span></div>



</div>



</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('f721e8e0-c051-4781-bd4e-e26d24a96ffe')"><img id="code_img_closed_f721e8e0-c051-4781-bd4e-e26d24a96ffe" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_f721e8e0-c051-4781-bd4e-e26d24a96ffe" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f721e8e0-c051-4781-bd4e-e26d24a96ffe',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_f721e8e0-c051-4781-bd4e-e26d24a96ffe" class="cnblogs_code_hide">
<div><span style="color: #808080;">////////////////////////////////////////////////////////////////////////</span><span style="color: #008000;">//</span><span style="color: #808080;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">如果用户点开的位置上地雷的个数为0，则程序自动点开一片区域</span><span style="color: #008000;"><br /></span><span style="color: #808080;">////////////////////////////////////////////////////////////////////////</span><span style="color: #008000;">//</span><span style="color: #808080;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> search0(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    user_map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> OPEN; </span><span style="color: #008000;">//</span><span style="color: #008000;">点开(i,j)位置</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> di, dj, k;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; k </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">8</span><span style="color: #000000;">; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        di </span><span style="color: #000000;">=</span><span style="color: #000000;"> i </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[k][</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />        dj </span><span style="color: #000000;">=</span><span style="color: #000000;"> j </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[k][</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (di </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">1</span><span style="color: #000000;">||</span><span style="color: #000000;"> di </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> m </span><span style="color: #000000;">||</span><span style="color: #000000;"> dj </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">1</span><span style="color: #000000;">||</span><span style="color: #000000;"> dj </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> n)<br />        {<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[di][dj] </span><span style="color: #000000;">!=</span><span style="color: #800080;">0</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> map[i][j] </span><span style="color: #000000;">!=</span><span style="color: #000000;"> MINE)<br />        {<br />            user_map[di][dj] </span><span style="color: #000000;">=</span><span style="color: #000000;"> OPEN;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; k </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">8</span><span style="color: #000000;">; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        di </span><span style="color: #000000;">=</span><span style="color: #000000;"> i </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[k][</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />        dj </span><span style="color: #000000;">=</span><span style="color: #000000;"> j </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[k][</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (di </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">1</span><span style="color: #000000;">||</span><span style="color: #000000;"> di </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> m </span><span style="color: #000000;">||</span><span style="color: #000000;"> dj </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">1</span><span style="color: #000000;">||</span><span style="color: #000000;"> dj </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> n)<br />        {<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[di][dj] </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> user_map[di][dj] </span><span style="color: #000000;">==</span><span style="color: #000000;"> UNOPEN)<br />        {<br />            search0(di, dj);<br />        }<br />    }<br />}</span></div>



</div>



</div>
<p>print_user_map()函数是根据user_map的值来判断是否点开某位置。</p>
<p>search0()函数使用了搜索算法实现点开的位置是0就会点开一片区域。</p>
<p><strong>　　最后</strong>，基本说完了，说这个是C/C++混合编程的原因是，我封装了载入随机地雷分布图部分，而没有封装画图那部分，不知道合理不。下面是某些量的预定义</p>
<div class="cnblogs_code">
<div><span style="color: #008000;">//</span><span style="color: #008000;">DEF.H</span><span style="color: #008000;"><br />/*</span><span style="color: #008000;">++++++++++++++++++++++++++++++++++++++<br />              预定义<br />+++++++++++++++++++++++++++++++++++++++</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /><br /><br />#ifndef _DEF_<br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> _DEF_</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> DEF_M    </span><span style="color: #008000;">//</span><span style="color: #008000;">默认行坐标</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> DEF_N    </span><span style="color: #008000;">//</span><span style="color: #008000;">默认列坐标</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MINE -1  </span><span style="color: #008000;">//</span><span style="color: #008000;">表示地雷</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_X 22 </span><span style="color: #008000;">//</span><span style="color: #008000;">最大x方向的格子数</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_Y 22 </span><span style="color: #008000;">//</span><span style="color: #008000;">最大y方向的格子数</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> UNOPEN 0 </span><span style="color: #008000;">//</span><span style="color: #008000;">没有点开</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> OPEN 1   </span><span style="color: #008000;">//</span><span style="color: #008000;">点开地雷</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MARK 2   </span><span style="color: #008000;">//</span><span style="color: #008000;">标记地雷</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">#endif</span><span style="color: #000000;"> /* _DEF_ */</span></div>



</div>]]></description></item><item><title>C++ 基础语法学习（一）</title><link>http://www.cnblogs.com/hanxi/archive/2011/04/21/Cplusprimer.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 21 Apr 2011 12:43:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/04/21/Cplusprimer.html</guid><description><![CDATA[<p><strong><span style="background-color: #ffffff; color: #0000ff;">（一）using的使用：</span></strong></p>
<p>　　　最常见的是：　　　　</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;</span></div></pre>
</div>
<p>　　还有更普通的：</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::</span><span style="color: #0000ff;">string</span><span style="color: #000000;">;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cin;    //这三个是iostream里的<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::boolalpha; //解释下这个：输出bool类型的字符串类型的名字true或false<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::getline;   //<tt>getline</tt> 读取整行文本</span></div><div><span style="color: #000000;"><br /></span></div><div><span face="'Courier New'" style="font-family: 'Courier New';">//关于getline ：只要 <tt>getline</tt> 遇到换行符，即便它是输入的第一个字符，<tt>getline</tt> 也将停止读入并返回。</span></div><div><span face="'Courier New'" style="font-family: 'Courier New';">//如果第一个字符就是换行符，则 <tt>string</tt> 参数将被置为空 <tt>string</tt>。</span></div></pre>
</div>
<p><strong><span style="color: #0000ff;">（二）<tt>string</tt> 对象的操作：</span></strong></p>
<p class="docText"><tt>s.empty() &nbsp; &nbsp; &nbsp;</tt>如果 <tt>s</tt> 为空串，则返回 <tt>true</tt>，否则返回 <tt>false</tt>。</p>
<p class="docText"><tt>s.size() &nbsp; &nbsp; &nbsp;&nbsp;</tt>返回 <tt>s</tt> 中字符的个数</p>
<p class="docText"><tt>s[n] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</tt>返回 <tt>s</tt> 中位置为 <tt>n</tt> 的字符，位置从 0 开始计数</p>
<p class="docText"><tt>s1 + s2 &nbsp; &nbsp; &nbsp; &nbsp;</tt>把 <tt>s1</tt> 和<tt>s2</tt> 连接成一个新字符串，返回新生成的字符串</p>
<p class="docText"><tt>s1 = s2 &nbsp; &nbsp; &nbsp; &nbsp;</tt>把 <tt>s1</tt> 内容替换为 <tt>s2</tt> 的副本</p>
<p class="docText"><tt>v1 == v2 &nbsp; &nbsp; &nbsp;&nbsp;</tt>比较 <tt>v1</tt> 与 <tt>v2</tt>的内容，相等则返回 <tt>true</tt>，否则返回 <tt>false</tt></p>
<p class="docText">下面来看个使用上面功能的例子：</p>
<p class="docText">&nbsp;</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::</span><span style="color: #0000ff;">string</span><span style="color: #000000;">;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cin;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::boolalpha;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::getline;<br /> </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br /> {<br />     </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> line;<br />     </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> strtmp;<br />     </span><span style="color: #008000;">//</span><span style="color: #008000;"> read line at time until end-of-file</span><span style="color: #008000;"><br /></span><span style="color: #000000;">     cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入line：</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />     </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (getline(cin, line))          <br />     {<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> line </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">line的长度：</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">line.size()</span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> line.empty();<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">字符串里的第六个字符:</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">line[</span><span style="color: #800080;">5</span><span style="color: #000000;">] </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;  </span><span style="color: #008000;">//</span><span style="color: #008000;">输出字符串里的第六个字符（从0开始的）</span><span style="color: #008000;"><br /></span><span style="color: #000000;">         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入strtmp：</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />         cin </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;"> strtmp;<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">strtmp + line :</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> strtmp </span><span style="color: #000000;">+</span><span style="color: #000000;"> line </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />         strtmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> line;<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> strtmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">strtmp 和 line相等吗？</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> (strtmp </span><span style="color: #000000;">==</span><span style="color: #000000;"> line) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入line：</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />     }<br />     </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /> }</span></div></pre>
</div>
<br />
<p class="docText"><strong><span style="color: #0000ff;">（三）<tt>string</tt> 对象中字符的处理：</span></strong></p>
<p class="docText"><tt>isalnum(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是字母或数字，则为 <tt>True</tt>。</p>
<p class="docText"><tt>isalpha(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是字母，则为 <tt>true</tt>。</p>
<p class="docText"><tt>iscntrl(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是控制字符，则为 <tt>true</tt></p>
<p class="docText"><tt>isdigit(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是数字，则为 <tt>true</tt>。</p>
<p class="docText"><tt>isgraph(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 不是空格，但可打印，则为 <tt>true</tt>。</p>
<p class="docText"><tt>islower(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是小写字母，则为 <tt>true</tt>。</p>
<p class="docText"><tt>isprint(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是可打印的字符，则为 <tt>true</tt>。</p>
<p class="docText"><tt>ispunct(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是标点符号，则 <tt>true</tt>。</p>
<p class="docText"><tt>isspace(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是空白字符，则为 <tt>true</tt>。</p>
<p class="docText"><tt>isupper(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是大写字母，则 <tt>true</tt>。</p>
<p class="docText"><tt>isxdigit(c) &nbsp; &nbsp;&nbsp;</tt>如果是 <tt>c</tt> 十六进制数，则为 <tt>true</tt>。</p>
<p class="docText"><tt>tolower(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 大写字母，返回其小写字母形式，否则直接返回 <tt>c</tt>。</p>
<p class="docText"><tt>toupper(c) &nbsp; &nbsp; &nbsp;</tt>如果 <tt>c</tt> 是小写字母，则返回其大写字母形式，否则直接返回 <tt>c</tt>。</p>
<p class="docText">同样的，咱们来看个使用上面功能的例子：</p>
<p class="docText">&nbsp;</p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::</span><span style="color: #0000ff;">string</span><span style="color: #000000;">;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cin;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::endl;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::cout;<br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> std::boolalpha;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />     </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> line;<br />     cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入line：</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />     </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (cin </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;"> line)          <br />     {<br />         </span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> tmp;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> isalnum(line[</span><span style="color: #800080;">0</span><span style="color: #000000;">]);  //功能都对应着上面的<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> isalpha(line[</span><span style="color: #800080;">1</span><span style="color: #000000;">]);<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> iscntrl(line[</span><span style="color: #800080;">2</span><span style="color: #000000;">]);<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> isdigit(line[</span><span style="color: #800080;">3</span><span style="color: #000000;">]);<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> islower(line[</span><span style="color: #800080;">4</span><span style="color: #000000;">]);<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> isprint(line[</span><span style="color: #800080;">5</span><span style="color: #000000;">]);<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> ispunct(line[</span><span style="color: #800080;">6</span><span style="color: #000000;">]);<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> isspace(line[</span><span style="color: #800080;">8</span><span style="color: #000000;">]);<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boolalpha </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> strtmp;<br />         </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">10</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />         {<br />            strtmp[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> toupper(line[i]);<br />            cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> strtmp[i];<br />         }<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />         cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入line：</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />     }<br />     </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;</span></div><div><span style="color: #000000;">}</span></div><div></div><div></div></pre>
</div>
<p class="docText"><strong><span style="color: #0000ff;">未完待续...................</span></strong></p>]]></description></item><item><title>模拟公交报站</title><link>http://www.cnblogs.com/hanxi/archive/2011/04/17/2019170.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 17 Apr 2011 14:30:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/04/17/2019170.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdlib.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> GetAddressMessage();</span><span style="color: #008000;">//</span><span style="color: #008000;">获取公交地址消息</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SetAddress();</span><span style="color: #008000;">//</span><span style="color: #008000;">设置公交地址</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> Output();</span><span style="color: #008000;">//</span><span style="color: #008000;">输出公交地点</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SetMessage(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> busmessge);<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> NumBusAddress;</span><span style="color: #008000;">//</span><span style="color: #008000;">公交地点编号:1/2/3/4/5/6/7/8/9</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> c_BusAddress;</span><span style="color: #008000;">//</span><span style="color: #008000;">地点名<br /><br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">报站类的实现</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> GetAddressMessage()<br />{<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> NumBusAddress;<br />}<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SetMessage(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> busmessge)<br />{<br />    NumBusAddress </span><span style="color: #000000;">=</span><span style="color: #000000;"> busmessge;<br />}<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> SetAddress()<br />{<br />    </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (NumBusAddress)<br />    {<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">:<br />        c_BusAddress </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">到了第一个站</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">:<br />        c_BusAddress </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">到了第二个站</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">3</span><span style="color: #000000;">:<br />        c_BusAddress </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">到了第三个站</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">4</span><span style="color: #000000;">:<br />        c_BusAddress </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">到了第四个站</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">5</span><span style="color: #000000;">:<br />        c_BusAddress </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">到了第五个站</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> </span><span style="color: #800080;">6</span><span style="color: #000000;">:<br />        c_BusAddress </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">到了第六个站</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    }<br />}<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> Output()<br />{<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> c_BusAddress </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> busmessage </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (busmessage </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; busmessage </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> </span><span style="color: #800080;">6</span><span style="color: #000000;">; busmessage</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        SetMessage(busmessage);<br />        SetAddress();<br />        Output();<br />        _sleep(</span><span style="color: #800080;">1000</span><span style="color: #000000;">);<br />    }<br />}</span></div></pre>
</div>]]></description></item><item><title>根据公式计算e</title><link>http://www.cnblogs.com/hanxi/archive/2011/04/04/2005376.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 04 Apr 2011 12:27:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/04/04/2005376.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">根据公式计算e<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">e = sum(i!); i= 0-&gt;n;<br /></span><span style="color: #008000;">//<br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> Factorial(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> n</span><span style="color: #000000;">*</span><span style="color: #000000;">Factorial(n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />}<br /><br /></span><span style="color: #0000ff;">double</span><span style="color: #000000;"> Calculate_e(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> sum </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        sum </span><span style="color: #000000;">+=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">/</span><span style="color: #000000;">(</span><span style="color: #0000ff;">double</span><span style="color: #000000;">)Factorial(i);<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> sum;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">n  e\n------------------------\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">10</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i</span><span style="color: #000000;">&lt;=</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d  %.0f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, i, Calculate_e(i));<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d  %.1f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, i, Calculate_e(i));<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d  %f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, i, Calculate_e(i));<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>]]></description></item><item><title>求三角形外接圆周长</title><link>http://www.cnblogs.com/hanxi/archive/2011/04/04/2005361.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 04 Apr 2011 11:55:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/04/04/2005361.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><div><span style="color: #0000ff;">#define</span><span style="color: #000000;"> PAI 3.1415926</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">math.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">求三角形外接圆周长<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">三角形三边a,b,c,半周长p（p=(a+b+c)/2） <br /></span><span style="color: #008000;">//</span><span style="color: #008000;">面积：S= &radic;[p(p - a)(p - b)(p - c)]<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">外接圆半径 R=abc/4S <br /></span><span style="color: #008000;">//</span><span style="color: #008000;">外接圆半径 R=abc/4&radic;[p(p - a)(p - b)(p - c)] <br /></span><span style="color: #008000;">//</span><span style="color: #008000;">外接圆周长C=2*PAI*R</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">float</span><span style="color: #000000;"> S(</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x1,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y1,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x2,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y2,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x3,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y3){<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ((x1</span><span style="color: #000000;">-</span><span style="color: #000000;">x3)</span><span style="color: #000000;">*</span><span style="color: #000000;">(y2</span><span style="color: #000000;">-</span><span style="color: #000000;">y3)   </span><span style="color: #000000;">-</span><span style="color: #000000;">   (y1</span><span style="color: #000000;">-</span><span style="color: #000000;">y3)</span><span style="color: #000000;">*</span><span style="color: #000000;">(x2</span><span style="color: #000000;">-</span><span style="color: #000000;">x3) );<br />}<br /><br /></span><span style="color: #0000ff;">float</span><span style="color: #000000;"> cal_center_x(</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x1,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y1,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x2,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y2,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x3,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y3){<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> (S(x1</span><span style="color: #000000;">*</span><span style="color: #000000;">x1</span><span style="color: #000000;">+</span><span style="color: #000000;">y1</span><span style="color: #000000;">*</span><span style="color: #000000;">y1,y1, x2</span><span style="color: #000000;">*</span><span style="color: #000000;">x2</span><span style="color: #000000;">+</span><span style="color: #000000;">y2</span><span style="color: #000000;">*</span><span style="color: #000000;">y2, y2,x3</span><span style="color: #000000;">*</span><span style="color: #000000;">x3</span><span style="color: #000000;">+</span><span style="color: #000000;">y3</span><span style="color: #000000;">*</span><span style="color: #000000;">y3,y3)</span><span style="color: #000000;">/</span><span style="color: #000000;">(</span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">S(x1,y1,x2,y2,x3,y3)) );<br />}<br /><br /></span><span style="color: #0000ff;">float</span><span style="color: #000000;"> cal_center_y(</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x1,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y1,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x2,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y2,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x3,</span><span style="color: #0000ff;">float</span><span style="color: #000000;"> y3){<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> (S(x1, x1</span><span style="color: #000000;">*</span><span style="color: #000000;">x1</span><span style="color: #000000;">+</span><span style="color: #000000;">y1</span><span style="color: #000000;">*</span><span style="color: #000000;">y1, x2, x2</span><span style="color: #000000;">*</span><span style="color: #000000;">x2</span><span style="color: #000000;">+</span><span style="color: #000000;">y2</span><span style="color: #000000;">*</span><span style="color: #000000;">y2, x3, x3</span><span style="color: #000000;">*</span><span style="color: #000000;">x3</span><span style="color: #000000;">+</span><span style="color: #000000;">y3</span><span style="color: #000000;">*</span><span style="color: #000000;">y3) </span><span style="color: #000000;">/</span><span style="color: #000000;"> (</span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">S(x1,y1,x2,y2,x3,y3)));<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> x1, y1, x2, y2, x3, y3, x, y;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;">(scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%f %f %f %f %f %f</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x1, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y1, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x2, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y2, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x3, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y3) </span><span style="color: #000000;">!=</span><span style="color: #000000;"> EOF)<br />    {<br />        x </span><span style="color: #000000;">=</span><span style="color: #000000;"> cal_center_x(x1, y1, x2, y2, x3, y3);<br />        y </span><span style="color: #000000;">=</span><span style="color: #000000;"> cal_center_y(x1, y1, x2, y2, x3, y3);<br />        </span><span style="color: #0000ff;">float</span><span style="color: #000000;"> C </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">PAI</span><span style="color: #000000;">*</span><span style="color: #000000;">sqrt((x</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">*</span><span style="color: #000000;">(x</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">+</span><span style="color: #000000;">(y</span><span style="color: #000000;">-</span><span style="color: #000000;">y1)</span><span style="color: #000000;">*</span><span style="color: #000000;">(y</span><span style="color: #000000;">-</span><span style="color: #000000;">y1));<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%.2f\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, C);<br />    }    <br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>]]></description></item><item><title>[最新]制作u盘引导安装ubuntu11.04</title><link>http://www.cnblogs.com/hanxi/archive/2011/04/04/2005177.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 04 Apr 2011 06:06:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/04/04/2005177.html</guid><description><![CDATA[<p><span style="color: #0000ff;"><strong>本博客的文章可以随意转载，但请注明出处：<a href="http://www.cnblogs.com/hanxi/">http://www.cnblogs.com/hanxi/</a></strong></span></p>
<p>今天弄了好久终于把一套最简单的制作u盘引导安装系统，下面先说说步骤吧。(此步骤值是成功引导进入安装系统界面)</p>
<p><strong><span style="color: #0000ff;">（步骤一）.使用bootice.exe</span></strong></p>
<p>　　1、打开bootice，目标磁盘会自动选择存在的U盘（看清容量大小，一定要选择u盘），一般插上U盘以后，打开bootice。exe会自动识别U盘。</p>
<p>　　　　bootice下载地址：<a href="http://u.115.com/?ac=my#ct=file&amp;ac=userfile&amp;aid=1&amp;cid=0">http://u.115.com/file/clgn4s8g</a></p>
<p>　　2、选在【主引导记录】会出现主引导记录选项擦单，选择第二项【GRUB for DOS】就是灵活而强大的引导程序，具有多种引导方式，可引导多种操作系统或硬件文件.(占用18个扇区）。</p>
<p>　　3、选择【GRUB for DOS】以后，开始选择【安装/配置】，一般一些选项不用选择，如果为了便于运行速度快的话，可以在【禁止软盘上的GRLDR文件】上打钩，【禁止按C无条件进入命令行控制台】也打钩。</p>
<p>　　4、选在【写入磁盘】，至此引导U盘自启动安装完毕。</p>
<p><strong><span style="color: #0000ff;">（步骤二）.复制文件</span></strong></p>
<p>　　1.使用grub4dos，只需用到其中的grldr文件（<strong>注意这个文件一般不显示后缀名，不是grldr.mbr</strong>），将其复制到u盘根目录</p>
<p>　　　　grub4dos软件下载地址：<a href="http://u.115.com/file/dn6g7iax#\r\ngrub4dos-0.4.4-2009-01-11.zip">http://u.115.com/file/dn6g7iax</a></p>
<p>　　2.把Ubuntu11.04镜像拷贝到U盘，并且把镜像里面casper文件夹下的vmlinuz和initrd.lz两个文件提取到U盘复制到根目录。</p>
<p><span style="color: #0000ff;"><strong>（步骤三）.建立menu.lst</strong></span></p>
<p>新建文本，将下面的的复制到里面，保存为menu.lst</p>
<div class="cnblogs_code">
<div><span style="color: #0000ff;">default</span><span style="color: #800080;">0</span><span style="color: #000000;"><br />timeout </span><span style="color: #800080;">10</span><span style="color: #000000;"><br /><br />title     Ubuntu </span><span style="color: #800080;">11.04</span><span style="color: #000000;"> <br />root (hd0,</span><span style="color: #800080;">3</span><span style="color: #000000;">)<br />kernel (hd0,</span><span style="color: #800080;">3</span><span style="color: #000000;">)</span><span style="color: #000000;">/</span><span style="color: #000000;">vmlinuz boot</span><span style="color: #000000;">=</span><span style="color: #000000;">casper iso</span><span style="color: #000000;">-</span><span style="color: #000000;">scan</span><span style="color: #000000;">/</span><span style="color: #000000;">filename</span><span style="color: #000000;">=/</span><span style="color: #000000;">ubuntu11.04.iso ro quiet splash<br /><br />locale</span><span style="color: #000000;">=</span><span style="color: #000000;">zh_CN.UTF</span><span style="color: #000000;">-</span><span style="color: #800080;">8</span><span style="color: #000000;"><br />initrd (hd0,</span><span style="color: #800080;">3</span><span style="color: #000000;">)</span><span style="color: #000000;">/</span><span style="color: #000000;">initrd.lz</span></div>
</div>
<p>（hd0,3）是根据具体情况而定的。从u盘启动时可以看到</p>
<p>　<strong>　引导成功就可以进入ubuntu的liveCD系统了》》》》</strong></p>
<p><strong><span style="color: #0000ff;">（四）接下来是安装系统操作，这里不做解释，这里只是说说怎么使用u盘引导</span></strong></p>]]></description></item><item><title>完数</title><link>http://www.cnblogs.com/hanxi/archive/2011/04/03/2004881.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 03 Apr 2011 14:46:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/04/03/2004881.html</guid><description><![CDATA[<br />完数时间限制： 1秒 &nbsp; &nbsp; &nbsp;内存限制： 32768 KB的从文章的数量在1994年微软在Encarta理论：如果&ldquo;，b，c是这样，一个=年，一个被称为B的一个或多个C和B或C或因素称为除数整数答如果c是不是1/-1，B称为A的偶数，其中包括0，适当除数是2的倍数，例如，-4，0，2，10;一个奇数是一个整数，是甚至没有，例如，-5，1，3，9一个完全数是一个正整数，等于其所有积极的，正确的约数的总和;。例如，6，等于1 + 2 + 3， 28，等于1 + 2 + 4 + 7 + 14，是完美的数字。正数，它是不完善，不健全或有缺陷，按是否丰富，其积极，正确的约数之和小于或大于的数字为多。本身这样，9，适当的约数1，3，缺乏，12，适当的约数1，2，3，4，6，丰富&ldquo;。都有一个编号，确定它是否是完美的，丰富的，或不足。<br /><br />输入<br />一个正整数n（无超过60,000以上）名单，1 &lt;? &lt;100。 一个0将标志着列表的末尾。<br /><br />输出<br />输出的第一行应该读的完善输出。 接下来的N行输出应该列出每个输入整数，无论??是完美的，不足，或丰富，如下面的例子所示。 格式计数：呼应整数应在第5位的输出线由两个空白的描述之后的整数位，其次，右对齐。 最后一行的输出端的输出应该阅读。<br /><br />采样输入<br />15 28 6 56 22 496 0 60000<br /><br />输出范例<br />华浩输出&nbsp; &nbsp;15亏&nbsp; &nbsp;28完美&nbsp; &nbsp; 6完美&nbsp; &nbsp;56富足60000丰盛&nbsp; &nbsp;22亏&nbsp; 496完美会期输出来源： 中大西洋美国1996年提交 &nbsp; &nbsp;状态版权所有@ 2001-2009浙江大学ACM /独立笔会队，保留所有权利。Welcome to ZOJLogin | RegisterHome | Contests | Problems | Forum<br />Problem SetsInformationSelect ProblemRunsRanklist<br />ZOJ Problem Set - 1284PerfectionTime Limit: 1 Second &nbsp; &nbsp; &nbsp;Memory Limit: 32768 KBFrom the article Number Theory in the 1994 Microsoft Encarta: "If a, b, c are integers such that a = bc, a is called a multiple of b or of c, and b or c is called a divisor or factor of a. If c is not 1/-1, b is called a proper divisor of a. Even integers, which include 0, are multiples of 2, for example, -4, 0, 2, 10; an odd integer is an integer that is not even, for example, -5, 1, 3, 9. A perfect number is a positive integer that is equal to the sum of all its positive, proper divisors; for example, 6, which equals 1 + 2 + 3, and 28, which equals 1 + 2 + 4 + 7 + 14, are perfect numbers. A positive number that is not perfect is imperfect and is deficient or abundant according to whether the sum of its positive, proper divisors is smaller or larger than the number itself. Thus, 9, with proper divisors 1, 3, is deficient; 12, with proper divisors 1, 2, 3, 4, 6, is abundant."Given a number, determine if it is perfect, abundant, or deficient.<br /><br />Input<br />A list of N positive integers (none greater than 60,000), with 1 &lt; N &lt; 100. A 0 will mark the end of the list.<br /><br />Output<br />The first line of output should read PERFECTION OUTPUT. The next N lines of output should list for each input integer whether it is perfect, deficient, or abundant, as shown in the example below. Format counts: the echoed integers should be right justified within the first 5 spaces of the output line, followed by two blank spaces, followed by the description of the integer. The final line of output should read END OF OUTPUT.<br /><br />Sample Input<br />15 28 6 56 60000 22 496 0<br /><br />Sample Output<br />PERFECTION OUTPUT&nbsp; &nbsp;15 &nbsp;DEFICIENT&nbsp; &nbsp;28 &nbsp;PERFECT&nbsp; &nbsp; 6 &nbsp;PERFECT&nbsp; &nbsp;56 &nbsp;ABUNDANT60000 &nbsp;ABUNDANT&nbsp; &nbsp;22 &nbsp;DEFICIENT&nbsp; 496 &nbsp;PERFECTEND OF OUTPUTSource: Mid-Atlantic USA 1996Submit &nbsp; &nbsp;StatusCopyright @ 2001-2009, Zhejiang University ACM/ICPC Team, All rights reserved.<br /><br /><br />
<div class="cnblogs_code">
<pre><div><span style="font-family: 'Courier New';" face="'Courier New'"><div class="cnblogs_code"><pre><div><span style="color: #008000;">//</span><span style="color: #008000;">完数<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">Perfection，Mid-Altlantic USA 1996</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num[</span><span style="color: #800080;">100</span><span style="color: #000000;">];<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">num[i]))<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (num[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">PERFECTION OUTPUT\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />        }<br />        i</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">i; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (perfection(num[j]) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        {<br />            printf (</span><span style="color: #800000;">"</span><span style="color: #800000;">%4d\tPERFECT\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, num[j]);<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (perfection(num[j]) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%4d\tDEFCIENT\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, num[j]);<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (perfection(num[j]) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%4d\tABUNDANT\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, num[j]);<br />        }<br />    }<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">END OF OUTPUT\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />    getchar();<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">判断一个数是否为完数（perfection）、abundant或deficient</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> perfection(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j ;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> sum </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">因子之和</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> flag;</span><span style="color: #008000;">//</span><span style="color: #008000;">记录返回值是什么完数（perfection）、abundant或deficient</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> perfect </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> abundant </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> deficient </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n</span><span style="color: #000000;">%</span><span style="color: #000000;">j </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        {<br />            sum </span><span style="color: #000000;">+=</span><span style="color: #000000;"> j;<br />        }<br />    }<br />    <br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (sum </span><span style="color: #000000;">==</span><span style="color: #000000;"> n)<br />    {<br />        flag </span><span style="color: #000000;">=</span><span style="color: #000000;"> perfect;<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (sum </span><span style="color: #000000;">&gt;</span><span style="color: #000000;">n)<br />    {<br />        flag </span><span style="color: #000000;">=</span><span style="color: #000000;"> abundant;<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (sum </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">n)<br />    {<br />        flag </span><span style="color: #000000;">=</span><span style="color: #000000;"> deficient;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> flag;<br />}</span></div></pre>
</div>
<br /></span></div>
</pre>
</div>]]></description></item><item><title>ZOJ1383_二进制数(Binary Numbers)_Central Europe 2001,Practice</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/31/2001596.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 31 Mar 2011 14:41:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/31/2001596.html</guid><description><![CDATA[<p>题目描述：</p>
<p>　　给定一个正整数n，要求输出对应的二进制数中所有数码&lsquo;1&rsquo;的位置。注意最低位为第0位。例如13的二进制形式为1101，因此数码1的位置为：0,2,3.</p>
<p>输入描述：</p>
<p>　　输入文件中的第一行为一个正整数d，表示输入文件中测试数据的个数，1&lt;=d&lt;=10,接下来有d个测试数据。每个测试数据占一行整数n，1&lt;=n&lt;=10^6.</p>
<p>输出描述：</p>
<p>　　输出包括d行，即输入文件中的每个测试数据，输出一行。第i行，1&lt;=i&lt;=d，以升序的顺序输出第i个测试数据中的整数的二进制形式中所有数码1的位置，位置之间有一个空格，最后一个位置后面没有空格。</p>
<p>样例输入：</p>
<p>　　2</p>
<p>　　13</p>
<p>　　127</p>
<p>样例输出：</p>
<p>　　0 2 3</p>
<p>　　0 1 2 3 4 5 6</p>
<p>实现代码：</p>
<p>
<div onclick="cnblogs_code_show('6d9a5823-c620-4317-be40-80350eb194aa')" class="cnblogs_code"><img id="code_img_closed_6d9a5823-c620-4317-be40-80350eb194aa" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /><img style="display: none;" onclick="cnblogs_code_hide('6d9a5823-c620-4317-be40-80350eb194aa',event)" id="code_img_opened_6d9a5823-c620-4317-be40-80350eb194aa" class="code_img_opened" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" /><span class="cnblogs_code_collapse">View Code </span>
<div class="cnblogs_code_hide" id="cnblogs_code_open_6d9a5823-c620-4317-be40-80350eb194aa">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdlib.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;">  i, d;</span><span style="color: #008000;">//</span><span style="color: #008000;">d为输入文件中测试数据的个数，</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> flag;</span><span style="color: #008000;">//</span><span style="color: #008000;">判断是第一个数前不输出空格</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    scanf_s(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">d);<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">d; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, pos </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">n为输入的整数,pos为计数器</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        scanf_s(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n);<br />        flag </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (n </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n</span><span style="color: #000000;">%</span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />            {<br />                flag</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (flag </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />                {<br />                    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, pos);<br />                }<br />                </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />                {<br />                    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;"> %d</span><span style="color: #800000;">"</span><span style="color: #000000;">, pos);<br />                }<br />            }<br />            n </span><span style="color: #000000;">=</span><span style="color: #000000;"> n</span><span style="color: #000000;">/</span><span style="color: #800080;">2</span><span style="color: #000000;">;<br />            pos</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
</div>
</p>]]></description></item><item><title>API(乱七八糟)</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/31/2000978.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 31 Mar 2011 06:17:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/31/2000978.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><div><span style="color: #000000;">windows程序设计<br />API：<br />创建窗口：CreateWindow()<br />函数功能：该函数创建一个重叠式窗口、弹出式窗口或子窗口。它指定窗口类，窗口标题，窗口风格，以及窗口的初始位置及大小（可选的）。该函数也指定该窗口的父窗口或所属窗口（如果存在的话），及窗口的菜单。若要使用除CreateWindow函数支持的风格外的扩展风格，则使用CreateWindowEx函数代替CreateWindow函数。<br />函数原型：HWND CreateWindow(LPCTSTR lpClassName,LPCTSTR lpWindowName,DWORD dwStyle,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> nWidth，</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> nHeight，HWND hWndParent,HMENU hMenu，HANDLE hlnstance，LPVOID lpParam);<br />     hwnd </span><span style="color: #000000;">=</span><span style="color: #000000;"> CreateWindow (szAppName,              </span><span style="color: #008000;">//</span><span style="color: #008000;"> window class name</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">The Hello Program</span><span style="color: #800000;">"</span><span style="color: #000000;">), </span><span style="color: #008000;">//</span><span style="color: #008000;"> window caption</span><span style="color: #008000;"><br /></span><span style="color: #000000;">             WS_OVERLAPPED     </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />             WS_CAPTION        </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />             WS_SYSMENU        </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />             WS_MINIMIZEBOX,        </span><span style="color: #008000;">//</span><span style="color: #008000;"> window style</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        x_position,                 </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial x position</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        y_position,              </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial y position</span><span style="color: #008000;"><br /></span><span style="color: #000000;">          x_size,                     </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial x size</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        y_size,              </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial y size</span><span style="color: #008000;"><br /></span><span style="color: #000000;">          NULL,                       </span><span style="color: #008000;">//</span><span style="color: #008000;"> parent window handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        NULL,                       </span><span style="color: #008000;">//</span><span style="color: #008000;"> window menu handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        hInstance,                  </span><span style="color: #008000;">//</span><span style="color: #008000;"> program instance handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            NULL) ;                     </span><span style="color: #008000;">//</span><span style="color: #008000;"> creation parameters</span><span style="color: #008000;"><br /></span><span style="color: #000000;">     ShowWindow (hwnd, iCmdShow) ;<br />     UpdateWindow (hwnd) ;<br /><br />API：读取屏幕大小(不包括任务栏)<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXFULLSCREEN;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> heigh </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYFULLSCREEN);<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置窗口位置和大小</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_position_size(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXFULLSCREEN);</span><span style="color: #008000;">//</span><span style="color: #008000;">读取屏幕大小</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> heigh </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYFULLSCREEN);<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position </span><span style="color: #000000;">=</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)heigh</span><span style="color: #000000;">/</span><span style="color: #800080;">5</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />}<br />API:GetSystemMetrics()<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> frame_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXSIZEFRAME);  </span><span style="color: #008000;">//</span><span style="color: #008000;">边框宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYCAPTION); </span><span style="color: #008000;">//</span><span style="color: #008000;">标题栏宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> menu_high </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYMENU); </span><span style="color: #008000;">//</span><span style="color: #008000;">菜单高度</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />画矩形：Rectangle(hdc, x1, y1, x2, y2);<br /><br />画直线：<br />MoveToEx是用来移动当前画笔的位置，LineTo是用来画直线的函数，其实在计算机图形里的直线显示是使用光栅图形学里的原理。<br /> <br />函数MoveToEx和LineTo声明如下：<br />WINGDIAPI BOOL WINAPI MoveToEx( __in HDC hdc, __in </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, __in </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y, __out_opt LPPOINT lppt);<br />hdc是当前设备的句柄。<br />x是X轴的位置，水平方向，一般原点是在屏幕左上角的位置。<br />y是Y轴的位置，垂直方向。<br />lppt是移动前的坐标位置。<br /> <br />WINGDIAPI BOOL WINAPI LineTo( __in HDC hdc, __in </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, __in </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y);<br />hdc是当前设备的句柄。<br />x是X轴的位置，水平方向，一般原点是在屏幕左上角的位置。<br />y是Y轴的位置，垂直方向。<br /><br />WINGDIAPI HPEN     WINAPI CreatePen( __in </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> iStyle, __in </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> cWidth, __in <br />COLORREF color); <br />iStyle 是画笔的类型，比如是实线，还是虚线等等。 <br /><br />cWidth 是线的宽度。 <br /><br />color 是线的颜色。 <br /><br /><br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">备份:<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">Main.cpp</span><span style="color: #008000;"><br />/*</span><span style="color: #008000;">------------------------------------------------------------<br />   HELLOWIN.C -- Displays "Hello, Windows 98!" in client area<br />                 (c) Charles Petzold, 1998<br />  ------------------------------------------------------------</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">windows.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">NumMines.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br />LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM) ;<br />WINGDIAPI BOOL WINAPI MoveToEx(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y, LPPOINT lppt);</span><span style="color: #008000;">//</span><span style="color: #008000;">移动当前画笔的位置</span><span style="color: #008000;"><br /></span><span style="color: #000000;">WINGDIAPI BOOL WINAPI LineTo(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y);</span><span style="color: #008000;">//</span><span style="color: #008000;">用来画直线的函数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">WINGDIAPI HPEN     WINAPI CreatePen(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> iStyle, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> cWidth, COLORREF color); <br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">自定义函数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> paint_map(HWND hwnd);<br />BOOL DrawGrid(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x2, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y2);<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置窗口位置和大小</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_position_size(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size);<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> left_key(HWND hwnd);<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> DrawRec(HWND hwnd, HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j);<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">全局变量</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">char</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">10</span><span style="color: #000000;">, n </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">10</span><span style="color: #000000;">;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> Global_x[MAX_X], Global_y[MAX_Y];<br /><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,<br />                    PSTR szCmdLine, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> iCmdShow)<br />{<br />     </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x_position, y_position, x_size, y_size;<br />     set_position_size(</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_size, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_size);<br />     init();</span><span style="color: #008000;">//</span><span style="color: #008000;">画完地图，再初始化数组（地雷分布）</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />     </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> TCHAR szAppName[] </span><span style="color: #000000;">=</span><span style="color: #000000;"> TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">MainWin</span><span style="color: #800000;">"</span><span style="color: #000000;">) ;<br />     HWND         hwnd ;<br />     MSG          msg ;<br />     WNDCLASS     wndclass ;<br /><br />     wndclass.style         </span><span style="color: #000000;">=</span><span style="color: #000000;"> CS_HREDRAW </span><span style="color: #000000;">|</span><span style="color: #000000;"> CS_VREDRAW ;<br />     wndclass.lpfnWndProc   </span><span style="color: #000000;">=</span><span style="color: #000000;"> WndProc ;<br />     wndclass.cbClsExtra    </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     wndclass.cbWndExtra    </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     wndclass.hInstance     </span><span style="color: #000000;">=</span><span style="color: #000000;"> hInstance ;<br />     wndclass.hIcon         </span><span style="color: #000000;">=</span><span style="color: #000000;"> LoadIcon (NULL, IDI_APPLICATION) ;<br />     wndclass.hCursor       </span><span style="color: #000000;">=</span><span style="color: #000000;"> LoadCursor (NULL, IDC_ARROW) ;<br />     wndclass.hbrBackground </span><span style="color: #000000;">=</span><span style="color: #000000;"> (HBRUSH) GetStockObject (WHITE_BRUSH) ;<br />     wndclass.lpszMenuName  </span><span style="color: #000000;">=</span><span style="color: #000000;"> NULL ;<br />     wndclass.lpszClassName </span><span style="color: #000000;">=</span><span style="color: #000000;"> szAppName ;<br /><br />     </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">RegisterClass (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">wndclass))<br />     {<br />          MessageBox (NULL, TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">This program requires Windows NT!</span><span style="color: #800000;">"</span><span style="color: #000000;">), <br />                      szAppName, MB_ICONERROR) ;<br />          </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     }<br />     <br />     </span><span style="color: #008000;">/*</span><span style="color: #008000;">创建默认窗口<br />     hwnd = CreateWindow (szAppName,                  // window class name<br />                          TEXT ("The Hello Program"), // window caption<br />                          WS_OVERLAPPEDWINDOW,        // window style<br />                          CW_USEDEFAULT,              // initial x position<br />                          CW_USEDEFAULT,              // initial y position<br />                          CW_USEDEFAULT,              // initial x size<br />                          CW_USEDEFAULT,              // initial y size<br />                          NULL,                       // parent window handle<br />                          NULL,                       // window menu handle<br />                          hInstance,                  // program instance handle<br />                          NULL) ;                     // creation parameters<br />     </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />     hwnd </span><span style="color: #000000;">=</span><span style="color: #000000;"> CreateWindow (szAppName,                  </span><span style="color: #008000;">//</span><span style="color: #008000;"> window class name</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">扫雷游戏&mdash;&mdash;The ClearMines Game</span><span style="color: #800000;">"</span><span style="color: #000000;">), </span><span style="color: #008000;">//</span><span style="color: #008000;"> window caption</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          WS_OVERLAPPED     </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />                          WS_CAPTION        </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />                          WS_SYSMENU        </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />                          WS_MINIMIZEBOX,        </span><span style="color: #008000;">//</span><span style="color: #008000;"> window style</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                           x_position,                 </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial x position</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          y_position,              </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial y position</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          x_size,                     </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial x size</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          y_size,              </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial y size</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          NULL,                       </span><span style="color: #008000;">//</span><span style="color: #008000;"> parent window handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          NULL,                       </span><span style="color: #008000;">//</span><span style="color: #008000;"> window menu handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          hInstance,                  </span><span style="color: #008000;">//</span><span style="color: #008000;"> program instance handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          NULL) ;                     </span><span style="color: #008000;">//</span><span style="color: #008000;"> creation parameters</span><span style="color: #008000;"><br /></span><span style="color: #000000;">     ShowWindow (hwnd, iCmdShow) ;<br />     UpdateWindow (hwnd) ;<br />     </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (GetMessage (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">msg, NULL, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #800080;">0</span><span style="color: #000000;">))<br />     {<br />          TranslateMessage (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">msg) ;<br />          DispatchMessage (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">msg) ;<br />     }<br />     </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> msg.wParam ;<br />}<br /><br />LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)<br />{<br />     </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (message)<br />     {          <br />     </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_PAINT:<br />          paint_map(hwnd);<br />          </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />          <br />     </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_LBUTTONDOWN: </span><span style="color: #008000;">//</span><span style="color: #008000;">单击鼠标</span><span style="color: #008000;"><br /></span><span style="color: #000000;">          left_key(hwnd);<br />          </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br /><br />     </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_DESTROY:<br />          PostQuitMessage (</span><span style="color: #800080;">0</span><span style="color: #000000;">) ;<br />          </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     }<br />     </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> DefWindowProc (hwnd, message, wParam, lParam) ;<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置窗口位置和大小</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_position_size(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXFULLSCREEN);</span><span style="color: #008000;">//</span><span style="color: #008000;">读取屏幕大小</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> heigh </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYFULLSCREEN);<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position </span><span style="color: #000000;">=</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)heigh</span><span style="color: #000000;">/</span><span style="color: #800080;">5</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />    </span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size </span><span style="color: #000000;">=</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">)width</span><span style="color: #000000;">/</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />}<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> paint_map(HWND hwnd)<br />{<br />    HDC         hdc ;<br />    PAINTSTRUCT ps ;<br />    RECT        rect ;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1,y1,x2,y2;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x_position, y_position, x_size, y_size;<br />    set_position_size(</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_size, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_size);<br /><br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> frame_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXSIZEFRAME);  </span><span style="color: #008000;">//</span><span style="color: #008000;">边框宽度</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYCAPTION); </span><span style="color: #008000;">//</span><span style="color: #008000;">标题栏宽度</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> menu_high </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYMENU); </span><span style="color: #008000;">//</span><span style="color: #008000;">菜单高度</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    x2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x_size </span><span style="color: #000000;">-</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br />    y2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y_size </span><span style="color: #000000;">-</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br /><br />    hdc </span><span style="color: #000000;">=</span><span style="color: #000000;"> BeginPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps) ;<br />    GetClientRect (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect) ;<br />    DrawGrid(hdc, x1, y1, x2, y2);<br />    EndPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps) ;<br />}<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">画格子</span><span style="color: #008000;"><br /></span><span style="color: #000000;">BOOL DrawGrid(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x2, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y2)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    POINT ptLeftTop;<br />    BOOL tmp1, tmp2;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x1;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_y1;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x2;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_y2;<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">画横线</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    tmp_x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x1;<br />    tmp_y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y1;<br />    tmp_x2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1</span><span style="color: #000000;">+</span><span style="color: #000000;">((x2</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m)</span><span style="color: #000000;">*</span><span style="color: #000000;">m;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">!=</span><span style="color: #000000;"> m)<br />        {<br />            Global_y[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        }<br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        tmp1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> MoveToEx(hdc,ptLeftTop.x,ptLeftTop.y,NULL);            <br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x2;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        tmp2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> LineTo(hdc,ptLeftTop.x,ptLeftTop.y);<br />        tmp_y1 </span><span style="color: #000000;">+=</span><span style="color: #000000;"> (y2</span><span style="color: #000000;">-</span><span style="color: #000000;">y1)</span><span style="color: #000000;">/</span><span style="color: #000000;">n;<br />    }<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">画竖线</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    tmp_x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x1;<br />    tmp_y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y1;<br />    tmp_y2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1</span><span style="color: #000000;">+</span><span style="color: #000000;">((y2</span><span style="color: #000000;">-</span><span style="color: #000000;">y1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m)</span><span style="color: #000000;">*</span><span style="color: #000000;">m;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">!=</span><span style="color: #000000;"> n)<br />        {<br />            Global_x[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        }<br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        tmp1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> MoveToEx(hdc,ptLeftTop.x,ptLeftTop.y,NULL);            <br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y2;<br />        tmp2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> LineTo(hdc,ptLeftTop.x,ptLeftTop.y);<br />        tmp_x1 </span><span style="color: #000000;">+=</span><span style="color: #000000;"> (x2</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m;<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp1 </span><span style="color: #000000;">==</span><span style="color: #000000;"> FALSE </span><span style="color: #000000;">||</span><span style="color: #000000;"> tmp2 </span><span style="color: #000000;">==</span><span style="color: #000000;"> FALSE)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> FALSE;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> TRUE;<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">接口</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> left_key(HWND hwnd)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x,tmp_y,i,j;<br />    POINT lpPoint;<br />    LPARAM   lParam;<br /> <br />        GetCursorPos(</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">lpPoint);    <br />    <br />    PAINTSTRUCT ps ;<br />    HDC         hdc ;<br />    RECT        rect ;<br /><br />    tmp_x </span><span style="color: #000000;">=</span><span style="color: #000000;"> lpPoint.x;<br />    tmp_y </span><span style="color: #000000;">=</span><span style="color: #000000;"> lpPoint.y;<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp_x </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> Global_x[i] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> tmp_x </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> Global_x[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">])    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp_y </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> Global_y[j] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> tmp_y </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> Global_y[j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">])    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    }<br /><br />    i</span><span style="color: #000000;">--</span><span style="color: #000000;">;<br />    j</span><span style="color: #000000;">--</span><span style="color: #000000;">;<br />    hdc </span><span style="color: #000000;">=</span><span style="color: #000000;"> BeginPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps) ;<br />    GetClientRect (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect) ;<br /><br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />        DrawText (hdc, TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">GAME OVER!</span><span style="color: #800000;">"</span><span style="color: #000000;">), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />        DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER) ;<br />        EndPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps) ;<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />    {<br />        DrawRec(hwnd, hdc, i, j);<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />    {<br />        TCHAR str_tmp[</span><span style="color: #800080;">10</span><span style="color: #000000;">];<br />        sprintf(str_tmp,</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,map[i][j]);<br />        DrawText (hdc, TEXT (str_tmp), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />            DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER) ;<br />        EndPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps) ;<br />    }<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">画小矩形，表示该处为0个地雷</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> DrawRec(HWND hwnd, HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    HPEN hPen </span><span style="color: #000000;">=</span><span style="color: #000000;"> CreatePen(PS_SOLID, </span><span style="color: #800080;">10</span><span style="color: #000000;">, RGB(</span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #800080;">255</span><span style="color: #000000;">, </span><span style="color: #800080;">0</span><span style="color: #000000;">)); <br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">设置当前设备的画笔. </span><span style="color: #008000;"><br /></span><span style="color: #000000;">    HGDIOBJ hOldPen </span><span style="color: #000000;">=</span><span style="color: #000000;"> SelectObject(hdc,hPen); <br /><br />    Rectangle(hdc, Global_x[i], Global_y[j], Global_x[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">], Global_y[j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">]);<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">NumMines.h</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">windows.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">time.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">stdlib.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_X 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">行坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_Y 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">纵坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MINES -1 </span><span style="color: #008000;">//</span><span style="color: #008000;">地雷</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">extern</span><span style="color: #000000;"> </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br /></span><span style="color: #0000ff;">extern</span><span style="color: #000000;"> </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br /><br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num_mines);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j);<br />BOOL init(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">NumMines.cpp</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #800000;">"</span><span style="color: #800000;">NumMines.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">windows.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">time.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">stdlib.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">******************************************************************<br />初始化地雷分布位置和个数<br />函数功能：根据设置的地雷个数和分布地图（map，数组）给出分布好了地雷的数组<br />函数原型：void set_mines( int num_mines)<br />参数：（in）&mdash;&mdash; int num_mines<br />********************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num_mines)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br /><br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> num_mines)<br />    {<br />        srand(time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">rand()%n 取(0，n-1)的随机数    </span><span style="color: #008000;"><br /></span><span style="color: #000000;">        i </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> m;<br />        j </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> n;<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果出现相同的情况呢？，没事，再循环几次，直到有了足够的地雷为止</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">0</span><span style="color: #000000;"> </span><span style="color: #000000;">||</span><span style="color: #000000;"> i</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">m </span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">0</span><span style="color: #000000;"> </span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">n </span><span style="color: #000000;">||</span><span style="color: #000000;"> map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINES)<br />        {<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> MINES;<br />        num</span><span style="color: #000000;">++</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />}<br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">***************************************************************************<br />返回周围地雷个数的函数<br />函数原型：   int round_num_mines(int i,int j);<br /> 参 数：     int i, int j为当前的坐标<br />返回值类型： int  返回该坐标处周围的地雷数<br />返回值情况：（1）返回1-8代表周围有1-8个地雷；<br />            （2）返回0代表周围没有地雷；<br />            （3）返回*代表此坐标时地雷；<br />*****************************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINES)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> MINES;<br />    }<br /><br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dir[</span><span style="color: #800080;">8</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">] </span><span style="color: #000000;">=</span><span style="color: #000000;"> {{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">},{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">}};<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, num_mines </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; k </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">8</span><span style="color: #000000;">; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">0</span><span style="color: #000000;">]][j</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">1</span><span style="color: #000000;">]] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />        {<br />            num_mines</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> num_mines;<br />}<br /><br />BOOL init(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)<br />{<br />    memset(map, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(map));<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> flag </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    <br />    set_mines((m</span><span style="color: #000000;">*</span><span style="color: #000000;">n)</span><span style="color: #000000;">/</span><span style="color: #800080;">10</span><span style="color: #000000;">);</span><span style="color: #008000;">//</span><span style="color: #008000;">55个地雷</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    <br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;">  (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;">  (j</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;=</span><span style="color: #000000;">n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> round_num_mines(i, j);<br />            flag </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #800080;">1</span><span style="color: #000000;"> </span><span style="color: #000000;">==</span><span style="color: #000000;"> flag)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> TRUE;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> FALSE;<br />}<br /><br /></span><span style="color: #008000;">//<br /></span><span style="color: #000000;"><br /></span><span style="color: #000000;">---------------------------</span><span style="color: #000000;"><br />Microsoft Visual C</span><span style="color: #000000;">++</span><span style="color: #000000;"><br /></span><span style="color: #000000;">---------------------------</span><span style="color: #000000;"><br />Unhandled exception </span><span style="color: #0000ff;">in</span><span style="color: #000000;"> ClearMines.exe: </span><span style="color: #800080;">0xC0000094</span><span style="color: #000000;">: Integer Divide by Zero.<br /></span><span style="color: #000000;">---------------------------</span><span style="color: #000000;"><br />确定   <br /></span><span style="color: #000000;">---------------------------</span></div></pre>
</div>
<br />]]></description></item><item><title>一步一步实现扫雷游戏（C语言实现）(三)</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/31/2000616.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 31 Mar 2011 03:29:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/31/2000616.html</guid><description><![CDATA[<p style="text-align: center;"><span style="font-size: 24pt; color: #0000ff;">使用WIN32API连接窗口</span></p>
<p><span style="color: #ff0000;"><strong>此项目相关博文链接</strong></span></p>
<p style="text-align: left;"><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html">一步一步实现扫雷游戏（C语言实现）(一）</a></strong></span></p>
<p style="text-align: left;"><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/28/1997660.html">一步一步实现扫雷游戏（C语言实现）(二)</a></strong></span></p>
<p style="text-align: left;"><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/31/2000616.html">一步一步实现扫雷游戏（C语言实现）(三)</a></strong></span></p>
<p style="text-align: left;"><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/04/28/demining.html">一步一步实现扫雷游戏（C语言实现）(四)</a></strong></span></p>
<p style="text-align: left;">&nbsp;</p>
<p>　　首先，我弄个主窗口出来，没有用到MFC，直接调用API函数实现，先看看代码吧：</p>
<div class="cnblogs_code">
<div><span style="color: #808080;">///////////////////////////////////////<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">主函数：扫雷<br /></span><span style="color: #008000;">//<br /></span><span style="color: #808080;">///////////////////////////////////////<br /></span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">windows.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">DrawMap.h</span><span style="color: #800000;">"//见下文</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">def.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m </span><span style="color: #000000;">=</span><span style="color: #800080;">10</span><span style="color: #000000;">, n </span><span style="color: #000000;">=</span><span style="color: #800080;">10</span><span style="color: #000000;">;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> Global_x[MAX_X], Global_y[MAX_Y];<br /><br /><br />LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM) ;<br />WINGDIAPI BOOL WINAPI MoveToEx(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y, LPPOINT lppt);</span><span style="color: #008000;">//</span><span style="color: #008000;">移动当前画笔的位置</span><span style="color: #008000;"><br /></span><span style="color: #000000;">WINGDIAPI BOOL WINAPI LineTo(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y);</span><span style="color: #008000;">//</span><span style="color: #008000;">用来画直线的函数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">WINGDIAPI HPEN     WINAPI CreatePen(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> iStyle, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> cWidth, COLORREF color); <br /><br /><br /><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,<br />                    PSTR szCmdLine, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> iCmdShow)<br />{<br />    init();</span><span style="color: #008000;">//</span><span style="color: #008000;">初始化数组（地雷分布</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x_position, y_position, x_size, y_size;<br />     set_position_size(</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_size, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_size);<br /><br />     </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> TCHAR szAppName[] </span><span style="color: #000000;">=</span><span style="color: #000000;"> TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">MainWin</span><span style="color: #800000;">"</span><span style="color: #000000;">) ;<br />     HWND         hwnd ;<br />     MSG          msg ;<br />     WNDCLASS     wndclass ;<br /><br />     wndclass.style         </span><span style="color: #000000;">=</span><span style="color: #000000;"> CS_HREDRAW </span><span style="color: #000000;">|</span><span style="color: #000000;"> CS_VREDRAW ;<br />     wndclass.lpfnWndProc   </span><span style="color: #000000;">=</span><span style="color: #000000;"> WndProc ;<br />     wndclass.cbClsExtra    </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     wndclass.cbWndExtra    </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     wndclass.hInstance     </span><span style="color: #000000;">=</span><span style="color: #000000;"> hInstance ;<br />     wndclass.hIcon         </span><span style="color: #000000;">=</span><span style="color: #000000;"> LoadIcon (NULL, IDI_APPLICATION) ;<br />     wndclass.hCursor       </span><span style="color: #000000;">=</span><span style="color: #000000;"> LoadCursor (NULL, IDC_ARROW) ;<br />     wndclass.hbrBackground </span><span style="color: #000000;">=</span><span style="color: #000000;"> (HBRUSH) GetStockObject (WHITE_BRUSH) ;<br />     wndclass.lpszMenuName  </span><span style="color: #000000;">=</span><span style="color: #000000;"> NULL ;<br />     wndclass.lpszClassName </span><span style="color: #000000;">=</span><span style="color: #000000;"> szAppName ;<br /><br />     </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">RegisterClass (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">wndclass))<br />     {<br />          MessageBox (NULL, TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">This program requires Windows NT!</span><span style="color: #800000;">"</span><span style="color: #000000;">), <br />                      szAppName, MB_ICONERROR) ;<br />          </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     }<br />     <br />     hwnd </span><span style="color: #000000;">=</span><span style="color: #000000;"> CreateWindow (szAppName,                  </span><span style="color: #008000;">//</span><span style="color: #008000;"> window class name</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">扫雷游戏&mdash;&mdash;The ClearMines Game</span><span style="color: #800000;">"</span><span style="color: #000000;">), </span><span style="color: #008000;">//</span><span style="color: #008000;"> window caption</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          WS_OVERLAPPED     </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />                          WS_CAPTION        </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />                          WS_SYSMENU        </span><span style="color: #000000;">|</span><span style="color: #000000;"> \<br />                          WS_MINIMIZEBOX,        </span><span style="color: #008000;">//</span><span style="color: #008000;"> window style</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                           x_position,                 </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial x position</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          y_position,              </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial y position</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          x_size,                     </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial x size</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          y_size,              </span><span style="color: #008000;">//</span><span style="color: #008000;"> initial y size</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          NULL,                       </span><span style="color: #008000;">//</span><span style="color: #008000;"> parent window handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          NULL,                       </span><span style="color: #008000;">//</span><span style="color: #008000;"> window menu handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          hInstance,                  </span><span style="color: #008000;">//</span><span style="color: #008000;"> program instance handle</span><span style="color: #008000;"><br /></span><span style="color: #000000;">                          NULL) ;                     </span><span style="color: #008000;">//</span><span style="color: #008000;"> creation parameters</span><span style="color: #008000;"><br /></span><span style="color: #000000;">     ShowWindow (hwnd, iCmdShow) ;<br />     UpdateWindow (hwnd) ;<br />     </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (GetMessage (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">msg, NULL, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #800080;">0</span><span style="color: #000000;">))<br />     {<br />          TranslateMessage (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">msg) ;<br />          DispatchMessage (</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">msg) ;<br />     }<br />     </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> msg.wParam ;<br />}<br /><br />LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)<br />{<br />     </span><span style="color: #0000ff;">switch</span><span style="color: #000000;"> (message)<br />     {          <br />     </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_PAINT:<br />          paint_map(hwnd); //自定义的画图函数<br />          </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br />     </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_LBUTTONDOWN</span><span style="color: #000000;">: </span><span style="color: #008000;">//</span><span style="color: #008000;">单击鼠标</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x</span><span style="color: #000000;">=</span><span style="color: #000000;">LOWORD(lParam);</span><span style="color: #008000;">//</span><span style="color: #008000;">x，y为鼠标当前的位置坐标</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y</span><span style="color: #000000;">=</span><span style="color: #000000;">HIWORD(lParam);<br />          left_key(hwnd, x, y);//自定义的响应鼠标左键的函数<br />          </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br /><br />     </span><span style="color: #0000ff;">case</span><span style="color: #000000;"> WM_DESTROY:<br />          PostQuitMessage (</span><span style="color: #800080;">0</span><span style="color: #000000;">) ;<br />          </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;"> ;<br />     }<br />     </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> DefWindowProc (hwnd, message, wParam, lParam) ;<br />}</span></div>

</div>
<p>主窗口图：</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011033111260266.jpg" alt="" /></p>
<p>现在，看看DrawMap.h文件的一些自定义函数的声明：</p>
<div class="cnblogs_code">
<div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">windows.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">NumMines.h</span><span style="color: #800000;">"//这个文件就是前两篇随笔中的那个后台实现算法的，等下也放上来</span><span style="color: #000000;"><br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">全局变量</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">extern</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br /></span><span style="color: #0000ff;">extern</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br /></span><span style="color: #0000ff;">extern</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> Global_x[MAX_X], Global_y[MAX_Y];<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">自定义函数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> paint_map(HWND hwnd);//又看到它了，那就看代码吧<br />BOOL DrawGrid(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x2, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y2);//这个函数是实现在上面函数的<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置窗口位置和大小</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_position_size(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_position, </span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_x_size, </span><span style="color: #0000ff;">int</span><span style="color: #000000;">*</span><span style="color: #000000;"> p_y_size);<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> left_key(HWND hwnd, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y);<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> DrawRec(HWND hwnd, HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j);<br />RECT rectRec(HWND hwnd, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y);</span><span style="color: #008000;">//</span><span style="color: #008000;">x,y为小矩形左上角的坐标</span></div>

</div>
<p><span>void</span><span> paint_map(HWND hwnd);//又看到它了，那就看代码吧</span></p>
<div class="cnblogs_code">
<div><span style="color: #008000;">//</span><span style="color: #008000;">DrawMap.cpp</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br /></span><span style="color: #808080;">////////////////////////////////////////////////////////////<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">画图<br /></span><span style="color: #008000;">//<br /></span><span style="color: #808080;">////////////////////////////////////////////////////////////<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> paint_map(HWND hwnd)<br />{<br />    HDC         hdc ;<br />    PAINTSTRUCT ps ;<br />    RECT        rect ;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1,y1,x2,y2;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x_position, y_position, x_size, y_size;<br />    set_position_size(</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_size, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_size);<br /><br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> frame_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXSIZEFRAME);  </span><span style="color: #008000;">//</span><span style="color: #008000;">边框宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYCAPTION); </span><span style="color: #008000;">//</span><span style="color: #008000;">标题栏宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> menu_high </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYMENU); </span><span style="color: #008000;">//</span><span style="color: #008000;">菜单高度</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    x2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x_size </span><span style="color: #000000;">-</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br />    y2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y_size </span><span style="color: #000000;">-</span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br /><br />    hdc </span><span style="color: #000000;">=</span><span style="color: #000000;"> BeginPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps) ;<br />    GetClientRect (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect) ;<br />    DrawGrid(hdc, x1, y1, x2, y2);<br />    EndPaint (hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">ps) ;<br />}<br /><br /></span><span style="color: #808080;">//////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">画格子<br /></span><span style="color: #008000;">//<br /></span><span style="color: #808080;">//////////////////////////////<br /></span><span style="color: #000000;">BOOL DrawGrid(HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y1, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x2, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y2)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    POINT ptLeftTop;<br />    BOOL tmp1, tmp2;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x1;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_y1;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x2;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_y2;<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">画横线</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    tmp_x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x1;<br />    tmp_y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y1;<br />    tmp_x2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1</span><span style="color: #000000;">+</span><span style="color: #000000;">((x2</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m)</span><span style="color: #000000;">*</span><span style="color: #000000;">m;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">!=</span><span style="color: #000000;"> m)<br />        {<br />            Global_y[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        }<br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        tmp1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> MoveToEx(hdc,ptLeftTop.x,ptLeftTop.y,NULL);            <br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x2;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        tmp2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> LineTo(hdc,ptLeftTop.x,ptLeftTop.y);<br />        tmp_y1 </span><span style="color: #000000;">+=</span><span style="color: #000000;"> (y2</span><span style="color: #000000;">-</span><span style="color: #000000;">y1)</span><span style="color: #000000;">/</span><span style="color: #000000;">n;<br />    }<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">画竖线</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    tmp_x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x1;<br />    tmp_y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y1;<br />    tmp_y2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1</span><span style="color: #000000;">+</span><span style="color: #000000;">((y2</span><span style="color: #000000;">-</span><span style="color: #000000;">y1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m)</span><span style="color: #000000;">*</span><span style="color: #000000;">m;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">!=</span><span style="color: #000000;"> n)<br />        {<br />            Global_x[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        }<br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y1;<br />        tmp1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> MoveToEx(hdc,ptLeftTop.x,ptLeftTop.y,NULL);            <br />        ptLeftTop.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_x1;<br />        ptLeftTop.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> tmp_y2;<br />        tmp2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> LineTo(hdc,ptLeftTop.x,ptLeftTop.y);<br />        tmp_x1 </span><span style="color: #000000;">+=</span><span style="color: #000000;"> (x2</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m;<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp1 </span><span style="color: #000000;">==</span><span style="color: #000000;"> FALSE </span><span style="color: #000000;">||</span><span style="color: #000000;"> tmp2 </span><span style="color: #000000;">==</span><span style="color: #000000;"> FALSE)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> FALSE;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> TRUE;<br />}</span></div>
<div><span style="color: #000000;">&nbsp;</span></div>
<div>
<div class="cnblogs_code">
<div style="color: #000000;"><span style="color: #808080;">///////////////////////////////////////<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">响应左键事件<br /></span><span style="color: #008000;">//</span><span style="color: #0000ff; font-size: 24pt;"><strong>这里有问题啊！！</strong></span></div>
<div><span><span style="color: #0000ff; font-size: x-large;"><span style="line-height: 48px;"><strong>//单击鼠标左键不能再格子里画东西啊</strong></span></span></span></div>
<div><span><span style="color: #0000ff; font-size: x-large;"><span style="line-height: 48px;"><strong>//求帮忙解答啊<br /></strong></span></span></span><span style="color: #808080;">////////////////////////////////////</span><span style="color: #008000;">//</span><span style="color: #808080;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> left_key(HWND hwnd, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y)</span><span style="color: #008000;">//</span><span style="color: #008000;">x，y为鼠标当前的位置坐标</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp_x </span><span style="color: #000000;">=</span><span style="color: #000000;"> x, tmp_y </span><span style="color: #000000;">=</span><span style="color: #000000;"> y, i, j;<br />    POINT lpPoint;<br />    PAINTSTRUCT ps ;<br />    HDC         hdc ;<br />    RECT        rect ;<br />    <br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> m</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp_x </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> Global_x[i] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> tmp_x </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> Global_x[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">])    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (tmp_y </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> Global_y[j] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> tmp_y </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> Global_y[j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">])    </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    }<br /><br />    </span><span style="color: #008000;">/*</span><span style="color: #008000;">**************************************************<br />    left ： 指定矩形框左上角的x坐标<br />    top：   指定矩形框左上角的y坐标<br />    right： 指定矩形框右下角的x坐标<br />　　bottom：指定矩形框右下角的y坐标<br />    ***************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    rect </span><span style="color: #000000;">=</span><span style="color: #000000;"> rectRec(hwnd, tmp_x, tmp_y);    <br />    hdc </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetDC(hwnd);<br />    COLORREF Minescolor </span><span style="color: #000000;">=</span><span style="color: #000000;"> SetTextColor(hdc,RGB(</span><span style="color: #800080;">255</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">)); </span><span style="color: #008000;">//</span><span style="color: #008000;">设置地雷颜色</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINES)<br />    {<br />        DrawText (hdc, TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">*</span><span style="color: #800000;">"</span><span style="color: #000000;">), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />        DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER);<br />        GetClientRect(hwnd, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect);<br />        DrawText (hdc, TEXT (</span><span style="color: #800000;">"</span><span style="color: #800000;">GAME OVER!</span><span style="color: #800000;">"</span><span style="color: #000000;">), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />        DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER);<br />        ReleaseDC(hwnd,hdc);<br />        MessageBox(hwnd, TEXT(</span><span style="color: #800000;">"</span><span style="color: #800000;">再玩一次？</span><span style="color: #800000;">"</span><span style="color: #000000;">),TEXT(</span><span style="color: #800000;">"</span><span style="color: #800000;">退出</span><span style="color: #800000;">"</span><span style="color: #000000;">), MB_RETRYCANCEL</span><span style="color: #000000;">|</span><span style="color: #000000;">MB_ICONQUESTION);<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">ReleaseDC(hwnd,hdc);</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        DrawRec(hwnd, hdc, i, j);<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">&gt;</span><span style="color: #800080;">0</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> map[i][j] </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">9</span><span style="color: #000000;">)<br />    {<br />        TCHAR str_tmp[</span><span style="color: #800080;">10</span><span style="color: #000000;">];<br />        sprintf(str_tmp,</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,map[i][j]);<br />        DrawText (hdc, TEXT (str_tmp), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />            DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER);<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">ReleaseDC(hwnd,hdc);</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">画0，表示该处为0个地雷</span></div>
<div><span style="color: #008000;">&nbsp;</span><span style="color: #008000;">/<strong>/感觉要使用递归，可就是无法实现</strong><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> DrawRec(HWND hwnd, HDC hdc, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    TCHAR str_tmp[</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />    RECT rect </span><span style="color: #000000;">=</span><span style="color: #000000;"> rectRec(hwnd, Global_x[i], Global_y[j]);    </span><span style="color: #008000;">//</span><span style="color: #008000;">当前小矩形的坐标<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">hdc = GetDC(hwnd);</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />    {<br />        sprintf(str_tmp,</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,map[i][j]);<br />        DrawText (hdc, TEXT (str_tmp), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />            DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER) ;<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">&gt;</span><span style="color: #800080;">0</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> map[i][j] </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">9</span><span style="color: #000000;">)<br />    {<br />        sprintf(str_tmp,</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,map[i][j]);<br />        DrawText (hdc, TEXT (str_tmp), </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">rect,<br />            DT_SINGLELINE </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_CENTER </span><span style="color: #000000;">|</span><span style="color: #000000;"> DT_VCENTER) ;<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">ReleaseDC(hwnd,hdc);</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">return</span><span style="color: #000000;">;<br />    }<br />}<br /><br /></span><span style="color: #808080;">///////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">获取小矩形坐标<br /></span><span style="color: #008000;">//<br /></span><span style="color: #808080;">///////////////////////////////////////</span><span style="color: #008000;">/</span><span style="color: #808080;"><br /></span><span style="color: #000000;">RECT rectRec(HWND hwnd, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> l_x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> l_y)</span><span style="color: #008000;">//</span><span style="color: #008000;">x,y为小矩形左上角的坐标</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    RECT        rect;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x1,y1,x2,y2;</span><span style="color: #008000;">//</span><span style="color: #008000;">窗口坐标</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x_position, y_position, x_size, y_size;<br />    set_position_size(</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_position, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x_size, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y_size);<br />    <br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> frame_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CXSIZEFRAME);  </span><span style="color: #008000;">//</span><span style="color: #008000;">边框宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYCAPTION); </span><span style="color: #008000;">//</span><span style="color: #008000;">标题栏宽度</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> menu_high </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetSystemMetrics(SM_CYMENU); </span><span style="color: #008000;">//</span><span style="color: #008000;">菜单高度</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    x1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    y1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> caption_width;<br />    x2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> x_size </span><span style="color: #000000;">-</span><span style="color: #000000;"> caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br />    y2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> y_size </span><span style="color: #000000;">-</span><span style="color: #800080;">2</span><span style="color: #000000;">*</span><span style="color: #000000;">caption_width </span><span style="color: #000000;">-</span><span style="color: #000000;"> frame_width;<br />    <br />    rect.left </span><span style="color: #000000;">=</span><span style="color: #000000;"> l_x;<br />    rect.top </span><span style="color: #000000;">=</span><span style="color: #000000;"> l_y;<br />    rect.right </span><span style="color: #000000;">=</span><span style="color: #000000;"> l_x</span><span style="color: #000000;">+</span><span style="color: #000000;">((x2</span><span style="color: #000000;">-</span><span style="color: #000000;">x1)</span><span style="color: #000000;">/</span><span style="color: #000000;">m)</span><span style="color: #000000;">*</span><span style="color: #000000;">m;<br />    rect.bottom </span><span style="color: #000000;">=</span><span style="color: #000000;"> l_y</span><span style="color: #000000;">+</span><span style="color: #000000;">((y2</span><span style="color: #000000;">-</span><span style="color: #000000;">y2)</span><span style="color: #000000;">/</span><span style="color: #000000;">m)</span><span style="color: #000000;">*</span><span style="color: #000000;">m;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> rect;<br />}</span></div>

</div>

<span>
<br /></span></div>

</div>
<p>其他的代码也不上来：</p>
<div class="cnblogs_code">
<div><span style="color: #008000;">//</span><span style="color: #008000;">NumMines.h</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">windows.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">time.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">stdlib.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_X 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">行坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_Y 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">纵坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MINES -1 </span><span style="color: #008000;">//</span><span style="color: #008000;">地雷</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">extern</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br /></span><span style="color: #0000ff;">extern</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br /><br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num_mines);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j);<br />BOOL init(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);</span></div>

</div>
<p>//NumMines.cpp</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('37a706f0-3b9b-40f9-8fc5-a689a33878a8')"><img id="code_img_closed_37a706f0-3b9b-40f9-8fc5-a689a33878a8" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_37a706f0-3b9b-40f9-8fc5-a689a33878a8" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('37a706f0-3b9b-40f9-8fc5-a689a33878a8',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_37a706f0-3b9b-40f9-8fc5-a689a33878a8" class="cnblogs_code_hide">
<div><span style="color: #008000;">//</span><span style="color: #008000;">NumMines.cpp</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">NumMines.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">windows.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">time.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br />#include </span><span style="color: #800000;">"</span><span style="color: #800000;">stdlib.h</span><span style="color: #800000;">"</span><span style="color: #000000;"><br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">******************************************************************<br />初始化地雷分布位置和个数<br />函数功能：根据设置的地雷个数和分布地图（map，数组）给出分布好了地雷的数组<br />函数原型：void set_mines( int num_mines)<br />参数：（in）&mdash;&mdash; int num_mines<br />********************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num_mines)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br /><br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> num_mines)<br />    {<br />        srand(time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">rand()%n 取(0，n-1)的随机数    </span><span style="color: #008000;"><br /></span><span style="color: #000000;">        i </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> m;<br />        j </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> n;<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果出现相同的情况呢？，没事，再循环几次，直到有了足够的地雷为止</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> i</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">m </span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">n </span><span style="color: #000000;">||</span><span style="color: #000000;"> map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINES)<br />        {<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> MINES;<br />        num</span><span style="color: #000000;">++</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />}<br /><br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">***************************************************************************<br />返回周围地雷个数的函数<br />函数原型：   int round_num_mines(int i,int j);<br /> 参 数：     int i, int j为当前的坐标<br />返回值类型： int  返回该坐标处周围的地雷数<br />返回值情况：（1）返回1-8代表周围有1-8个地雷；<br />            （2）返回0代表周围没有地雷；<br />            （3）返回*代表此坐标时地雷；<br />*****************************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #000000;"> MINES)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> MINES;<br />    }<br /><br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dir[</span><span style="color: #800080;">8</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">] </span><span style="color: #000000;">=</span><span style="color: #000000;"> {{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">},{</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">0</span><span style="color: #000000;">},{</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},{</span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">}};<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">, num_mines </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; k </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">8</span><span style="color: #000000;">; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">0</span><span style="color: #000000;">]][j</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">1</span><span style="color: #000000;">]] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />        {<br />            num_mines</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> num_mines;<br />}<br /><br />BOOL init(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)<br />{<br />    memset(map, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(map));<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, j;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> flag </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    <br />    set_mines((m</span><span style="color: #000000;">*</span><span style="color: #000000;">n)</span><span style="color: #000000;">/</span><span style="color: #800080;">10</span><span style="color: #000000;">);</span><span style="color: #008000;">//</span><span style="color: #008000;">55个地雷</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    <br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;">  (i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;">  (j</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j</span><span style="color: #000000;">&lt;=</span><span style="color: #000000;">n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            map[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> round_num_mines(i, j);<br />            flag </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #800080;">1</span><span style="color: #000000;">==</span><span style="color: #000000;"> flag)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> TRUE;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> FALSE;<br />}</span></div>

</div>

</div>
<div class="cnblogs_code">
<div><span style="color: #008000;">//</span><span style="color: #008000;">DEF.H</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br /><br />#ifndef _DEF_<br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> _DEF_</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_X 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">行坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_Y 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">纵坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MINES -1 </span><span style="color: #008000;">//</span><span style="color: #008000;">地雷</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> DEF_M </span><span style="color: #008000;">//</span><span style="color: #008000;">默认行坐标</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> DEF_N </span><span style="color: #008000;">//</span><span style="color: #008000;">默认列坐标</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">#endif</span><span style="color: #000000;"> /* _DEF_ */</span></div>

</div>
<p>希望朋友们知道的帮忙解答解答，谢谢</p>
<p><span>&nbsp;</span></p>]]></description></item><item><title>一步一步实现扫雷游戏（C语言实现）(二)</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/28/1997660.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 28 Mar 2011 05:39:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/28/1997660.html</guid><description><![CDATA[<p><span style="color: #ff0000;"><strong>此项目相关博文链接</strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html">一步一步实现扫雷游戏（C语言实现）(一）</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/28/1997660.html">一步一步实现扫雷游戏（C语言实现）(二)</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/31/2000616.html">一步一步实现扫雷游戏（C语言实现）(三)</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/04/28/demining.html">一步一步实现扫雷游戏（C语言实现）(四)</a></strong></span></p>
<p>&nbsp;</p>
<p style="text-align: left;"><span style="font-size: 24pt;"><strong><span style="color: #0000ff;"><span style="font-size: 14px;">&lt;1&gt;:返回周围地雷个数的函数</span><br /><span style="font-size: 14px;">函数原型：   int round_num_mines(int i,int j);</span></span></strong></span></p>
<p style="text-align: left;"><span style="color: #0000ff;"><strong>原函数见：<a href="http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html">http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html</a></strong></span></p>
<div class="cnblogs_code">
<div><span style="color: #000000;">优化后的<br /><br />算法函数接口：<br /></span><span style="color: #800080;">1</span><span style="color: #000000;">.返回周围地雷个数的函数<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">***************************************************************************<br />返回周围地雷个数的函数<br />函数原型：   int round_num_mines(int i,int j);<br /> 参 数：     int i, int j为当前的坐标<br />返回值类型： int  返回该坐标处周围的地雷数<br />返回值情况：（1）返回1-8代表周围有1-8个地雷；<br />            （2）返回0代表周围没有地雷；<br />            （3）返回*代表此坐标时地雷；<br />*****************************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #808080;">//////////////////////////////////////////////////////<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><span style="color: #0000ff; font-size: 24pt;"><strong>就是搞不懂为什么下面两个函数不会出现数组越界情况???</strong></span><br /></span><span style="color: #008000;">//<br /></span><span style="color: #808080;">//////////////////////////////////////////////////////<br /></span><span style="color: #0000ff;">char</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />    }<br /><br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> k;<br />}<br /></span><span style="color: #000000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">改进后的（书上的）代码：</span><span style="color: #008000;"><br /></span><span style="color: #000000;">（改进算法）<br />(</span><span style="color: #800080;">1</span><span style="color: #000000;">).首先定义一个二维数组:<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dir[</span><span style="color: #800080;">8</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">] </span><span style="color: #000000;">=</span><span style="color: #000000;"> {<br />    {</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},<br />    {</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #800080;">0</span><span style="color: #000000;">},<br />    {</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #800080;">1</span><span style="color: #000000;">},<br />    { </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #800080;">1</span><span style="color: #000000;">},<br />    { </span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #800080;">1</span><span style="color: #000000;">},<br />    { </span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #800080;">0</span><span style="color: #000000;">},<br />    { </span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">},<br />    { </span><span style="color: #800080;">0</span><span style="color: #000000;">,</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">}};<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;"><br />dir二维数组所表示的8个位置顺序是按顺时针从左上角位置开始。<br />------------------------------<br />|（-1，-1）|（-1，0）|（-1，-1）|<br />------------------------------<br />|（ 0，-1）|（ 0, 0）|（ 0, 1）|<br />------------------------------<br />|（ 1，-1）|（ 1, 0）|（ 1, 1）|<br />------------------------------<br /></span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">char</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">, num_mines </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; k </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">8</span><span style="color: #000000;">; k</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">0</span><span style="color: #000000;">]][y</span><span style="color: #000000;">+</span><span style="color: #000000;">dir[k][</span><span style="color: #800080;">1</span><span style="color: #000000;">]] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />        {<br />            num_mines</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> num_mines;<br />}</span></div>
<div>
<div class="cnblogs_code">
<div><span style="color: #000000;">初始化地雷分布位置和个数<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">******************************************************************<br />函数功能：根据设置的地雷个数和分布地图（map，数组）给出分布好了地雷的数组<br />函数原型：void set_mines(nt m, int n, int num_mines)<br />参数：（in）&mdash;&mdash; int num_mines<br />********************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />（原函数）<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num_mines)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> num_mines)<br />    {<br />        rand_mines(m, n);<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">如果出现相同的情况呢？，没事，再循环几次，直到有了足够的地雷为止</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        num </span><span style="color: #000000;">=</span><span style="color: #000000;"> fun_num_mines(m, n);</span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />}<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置随机选取(i,j),设置a[i][j] = '*'</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> rand_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br />    srand(time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">rand()%n 取(0，n-1)的随机数    </span><span style="color: #008000;"><br /></span><span style="color: #000000;">    i </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> m;<br />    j </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> n;<br />    map[i][j] </span><span style="color: #000000;">=</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />}<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> fun_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j, k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />            {<br />                k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> k;<br />}<br />(优化后)<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num_mines)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> num_mines)<br />    {<br />        srand(time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">rand()%n 取(0，n-1)的随机数    </span><span style="color: #008000;"><br /></span><span style="color: #000000;">        i </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> m;<br />        j </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> n;<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">如果出现相同的情况呢？，没事，再循环几次，直到有了足够的地雷为止</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> i</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">m </span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&lt;</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> j</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">n </span><span style="color: #000000;">||</span><span style="color: #000000;"> map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        map[i][j] </span><span style="color: #000000;">=</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />        num</span><span style="color: #000000;">++</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br /><br />}</span></div>
</div>
<span style="color: #000000;">主要看来就是第二函数优化了不少，</span></div>
<div><span style="font-size: 16px; color: #0000ff;"><strong>我的第一个问题（是否越界问题）没有解决，希望各位看到的朋友们给我解释下，谢谢</strong></span></div>
</div>]]></description></item><item><title>一步一步实现扫雷游戏（C语言实现）(一)</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 27 Mar 2011 12:57:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html</guid><description><![CDATA[<p><span style="color: #ff0000;"><strong>此项目相关博文链接</strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/27/1997182.html">一步一步实现扫雷游戏（C语言实现）(一）</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/28/1997660.html">一步一步实现扫雷游戏（C语言实现）(二)</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/03/31/2000616.html">一步一步实现扫雷游戏（C语言实现）(三)</a></strong></span></p>
<p><span style="color: #0000ff;"><strong><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/hanxi/archive/2011/04/28/demining.html">一步一步实现扫雷游戏（C语言实现）(四)</a></strong></span></p>
<p style="text-align: left;">&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('b5ebdb12-69a5-4595-9b18-c65d51eb40e3')">
<div class="cnblogs_code">
<div><span style="color: #000000;"><br />预定义：<br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_X 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">行坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_Y 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">纵坐标最大值</span><span style="color: #000000;"><br />全局数组：<br />        </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">为坐标数组，存储着地雷的分布</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m,n;<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">为坐标的大小（选择等级时用的上）<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">注意：MAX_X,MAX_Y与m,n的不同之处 </span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />算法函数接口：<br /></span><span style="color: #800080;">1</span><span style="color: #000000;">.返回周围地雷个数的函数<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">***************************************************************************<br />返回周围地雷个数的函数<br />函数原型：   int round_num_mines(int i,int j);<br /> 参 数：     int i, int j为当前的坐标<br />返回值类型： int  返回该坐标处周围的地雷数<br />返回值情况：（1）返回1-8代表周围有1-8个地雷；<br />            （2）返回0代表周围没有地雷；<br />            （3）返回*代表此坐标时地雷；<br />*****************************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">char</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">记录周围地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第0行</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第0行第0列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第0行第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">第0行非第0列非第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">==</span><span style="color: #000000;"> m</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">)        </span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行第0列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行非第0列非第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行也非第m-1行</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">)        </span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行第0列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行非第0列非第m-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }                <br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> k;<br />}<br /></span><span style="color: #800080;">2</span><span style="color: #000000;">.鼠标左键（扫雷）的函数<br />函数原型：</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> left_mouse(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j</span><span style="color: #000000;">);<br />参数：</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j为当前的坐标<br /></span><span style="color: #000000;"><br />返回值类型：</span><span style="color: #0000ff;">void</span><span style="color: #000000;"><br />函数实现情况：（</span><span style="color: #800080;">1</span><span style="color: #000000;">）判断i，j；<br />        （</span><span style="color: #800080;">2</span><span style="color: #000000;">）调用函数num_mines（）；<br />        （</span><span style="color: #800080;">3</span><span style="color: #000000;">）判断函数num_mines（）的返回值：<br />            </span><span style="color: #800080;">1</span><span style="color: #000000;">）返回1</span><span style="color: #000000;">-</span><span style="color: #000000;">8则在坐标点上画出1</span><span style="color: #000000;">-</span><span style="color: #800080;">8</span><span style="color: #000000;">，此函数的功能完毕，</span><span style="color: #0000ff;">return</span><span style="color: #000000;">；<br />            </span><span style="color: #800080;">2</span><span style="color: #000000;">）返回0则继续调用函数num_mines（），再递归调用函数left_mouse（）；<br />            </span><span style="color: #800080;">3</span><span style="color: #000000;">）返回&lsquo;</span><span style="color: #000000;">*</span><span style="color: #000000;">&rsquo;说明踩到地雷，</span><span style="color: #0000ff;">return</span><span style="color: #000000;">, game over</span><span style="color: #000000;">!</span><span style="color: #000000;"><br /></span><span style="color: #800080;">3</span><span style="color: #000000;">.右键（画出旗帜）的函数<br />此函数的主要功能是限制此位置，规定该位置不会被显示出数字或&lsquo;</span><span style="color: #000000;">*</span><span style="color: #000000;">&rsquo;<br /></span><span style="color: #800080;">4</span><span style="color: #000000;">.初始化地雷分布位置和个数<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">******************************************************************<br />函数功能：根据设置的地雷个数和分布地图（map，数组）给出分布好了地雷的数组<br />函数原型：void set_mines(int num_mines)<br />参数：（in）&mdash;&mdash; int num_mines<br />********************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_mines(int num_mines)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> num_mines)<br />    {<br />        rand_mines(m, n);<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">如果出现相同的情况呢？，没事，再循环几次，直到有了足够的地雷为止</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        num </span><span style="color: #000000;">=</span><span style="color: #000000;"> fun_num_mines(m, n);</span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />}<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置随机选取(i,j),设置a[i][j] = '*'</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> rand_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br />    srand(time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">rand()%n 取(0，n-1)的随机数    </span><span style="color: #008000;"><br /></span><span style="color: #000000;">    i </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> m;<br />    j </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> n;<br />    map[i][j] </span><span style="color: #000000;">=</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />}<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> fun_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j, k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />            {<br />                k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> k;<br />}<br /></span><span style="color: #800080;">5</span><span style="color: #000000;">.主函数<br />负责选关（设置m，n的大小）、选关接口...............</span></div>
</div>
<br />
<div id="cnblogs_code_open_b5ebdb12-69a5-4595-9b18-c65d51eb40e3" class="cnblogs_code_hide">
<div><span style="color: #000000;">扫雷游戏程序文档<br />预定义：<br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_X 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">行坐标最大值</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> MAX_Y 100 </span><span style="color: #008000;">//</span><span style="color: #008000;">纵坐标最大值</span><span style="color: #000000;"><br />全局数组：<br />        </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> map[MAX_X][MAX_Y];<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">为坐标数组，存储着地雷的分布</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m,n;<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">为坐标的大小（选择等级时用的上）<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">注意：MAX_X,MAX_Y与m,n的不同之处 </span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />算法函数接口：<br /></span><span style="color: #800080;">1</span><span style="color: #000000;">.返回周围地雷个数的函数<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">***************************************************************************<br />返回周围地雷个数的函数<br />函数原型：   int round_num_mines(int i,int j);<br /> 参 数：     int i, int j为当前的坐标<br />返回值类型： int  返回该坐标处周围的地雷数<br />返回值情况：（1）返回1-8代表周围有1-8个地雷；<br />            （2）返回0代表周围没有地雷；<br />            （3）返回*代表此坐标时地雷；<br />*****************************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">char</span><span style="color: #000000;"> round_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">记录周围地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">return</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第0行</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #800080;">0</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第0行第0列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第0行第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">第0行非第0列非第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">==</span><span style="color: #000000;"> m</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">)        </span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行第0列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">第m-1行非第0列非第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行也非第m-1行</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">)        </span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行第0列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行第n-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #008000;">//</span><span style="color: #008000;">非第0行非第0列非第m-1列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">][j</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }                <br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> k;<br />}<br /></span><span style="color: #800080;">2</span><span style="color: #000000;">.鼠标左键（扫雷）的函数<br />函数原型：</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> left_mouse(</span><span style="color: #0000ff;">char</span><span style="color: #000000;"> a[max_x][max_y],</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n);<br />参数：</span><span style="color: #0000ff;">char</span><span style="color: #000000;"> a[max_x][max_y]为坐标数组，存储着地雷的分布<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j为当前的坐标<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m，</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n为坐标的大小（选择等级时用的上） <br />返回值类型：</span><span style="color: #0000ff;">void</span><span style="color: #000000;"><br />函数实现情况：（</span><span style="color: #800080;">1</span><span style="color: #000000;">）判断i，j；<br />        （</span><span style="color: #800080;">2</span><span style="color: #000000;">）调用函数num_mines（）；<br />        （</span><span style="color: #800080;">3</span><span style="color: #000000;">）判断函数num_mines（）的返回值：<br />            </span><span style="color: #800080;">1</span><span style="color: #000000;">）返回1</span><span style="color: #000000;">-</span><span style="color: #000000;">8则在坐标点上画出1</span><span style="color: #000000;">-</span><span style="color: #800080;">8</span><span style="color: #000000;">，此函数的功能完毕，</span><span style="color: #0000ff;">return</span><span style="color: #000000;">；<br />            </span><span style="color: #800080;">2</span><span style="color: #000000;">）返回0则继续调用函数num_mines（），再递归调用函数left_mouse（）；<br />            </span><span style="color: #800080;">3</span><span style="color: #000000;">）返回&lsquo;</span><span style="color: #000000;">*</span><span style="color: #000000;">&rsquo;说明踩到地雷，</span><span style="color: #0000ff;">return</span><span style="color: #000000;">, game over</span><span style="color: #000000;">!</span><span style="color: #000000;"><br /></span><span style="color: #800080;">3</span><span style="color: #000000;">.右键（画出旗帜）的函数<br />此函数的主要功能是限制此位置，规定该位置不会被显示出数字或&lsquo;</span><span style="color: #000000;">*</span><span style="color: #000000;">&rsquo;<br /></span><span style="color: #800080;">4</span><span style="color: #000000;">.初始化地雷分布位置和个数<br /></span><span style="color: #008000;">/*</span><span style="color: #008000;">******************************************************************<br />函数功能：根据设置的地雷个数和分布地图（map，数组）给出分布好了地雷的数组<br />函数原型：void set_mines(nt m, int n, int num_mines)<br />参数：（in）&mdash;&mdash; int num_mines<br />********************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> set_minesint num_mines)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> num_mines)<br />    {<br />        rand_mines(m, n);<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">如果出现相同的情况呢？，没事，再循环几次，直到有了足够的地雷为止</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        num </span><span style="color: #000000;">=</span><span style="color: #000000;"> fun_num_mines(m, n);</span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    }<br />}<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">设置随机选取(i,j),设置a[i][j] = '*'</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> rand_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j;<br />    srand(time(</span><span style="color: #800080;">0</span><span style="color: #000000;">));<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">rand()%n 取(0，n-1)的随机数    </span><span style="color: #008000;"><br /></span><span style="color: #000000;">    i </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> m;<br />    j </span><span style="color: #000000;">=</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> n;<br />    map[i][j] </span><span style="color: #000000;">=</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">;<br />}<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">判断地雷个数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> fun_num_mines(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j, k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (map[i][j] </span><span style="color: #000000;">==</span><span style="color: #800000;">'</span><span style="color: #800000;">*</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />            {<br />                k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> k;<br />}<br /></span><span style="color: #800080;">5</span><span style="color: #000000;">.主函数<br />负责选关（设置m，n的大小）、选关接口...............</span></div>
</div>
</div>
<p>游戏程序还没有完全写完，现在写完的只能在字符模式下运行，界面代码还在进行中...</p>
<p>源代码下载地址：<a href="http://u.115.com/file/f0618e7853">http://u.115.com/file/f0618e7853</a></p>]]></description></item><item><title>特殊的四位数</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/26/1996513.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 26 Mar 2011 12:41:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/26/1996513.html</guid><description><![CDATA[<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">特殊的四位数<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">输出所有四位数（十进制）中具有如下属性的数：</span></div><div><span style="color: #008000;">//四位数字之和等于其十六进制形式各位数字之和，也等于七十二进制形式的各位数字之和</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> num, tmp;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1000</span><span style="color: #000000;">; num </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> </span><span style="color: #800080;">9999</span><span style="color: #000000;">; num</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> s16 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, s12 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, s10 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;</span><span style="color: #008000;">//</span><span style="color: #008000;">num的各种进制之和</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        tmp </span><span style="color: #000000;">=</span><span style="color: #000000;">num;<br />        </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (tmp)</span><span style="color: #008000;">//</span><span style="color: #008000;">等效于while(tmp != 0)</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        {<br />            s16 </span><span style="color: #000000;">+=</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">%</span><span style="color: #800080;">16</span><span style="color: #000000;">;<br />            tmp </span><span style="color: #000000;">/=</span><span style="color: #000000;"> </span><span style="color: #800080;">16</span><span style="color: #000000;">;<br />        }<br />        tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> num;<br />        </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (tmp)<br />        {<br />            s12 </span><span style="color: #000000;">+=</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">%</span><span style="color: #000000;"> </span><span style="color: #800080;">12</span><span style="color: #000000;">;<br />            tmp </span><span style="color: #000000;">/=</span><span style="color: #000000;"> </span><span style="color: #800080;">12</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (s16 </span><span style="color: #000000;">!=</span><span style="color: #000000;"> s12)<br />        {<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        tmp </span><span style="color: #000000;">=</span><span style="color: #000000;"> num;<br />        </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (tmp)<br />        {<br />            s10 </span><span style="color: #000000;">+=</span><span style="color: #000000;"> tmp </span><span style="color: #000000;">%</span><span style="color: #000000;"> </span><span style="color: #800080;">10</span><span style="color: #000000;">;<br />            tmp </span><span style="color: #000000;">/=</span><span style="color: #000000;"> </span><span style="color: #800080;">10</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (s16 </span><span style="color: #000000;">==</span><span style="color: #000000;"> s10)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, num);<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>]]></description></item><item><title>假票问题(Fake Ticket)</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/26/1996490.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 26 Mar 2011 12:18:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/26/1996490.html</guid><description><![CDATA[<div onclick="cnblogs_code_show('3f2ccfe8-bf97-423d-969a-5f43e520654a')" class="cnblogs_code"><img id="code_img_closed_3f2ccfe8-bf97-423d-969a-5f43e520654a" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /><img style="display: none;" onclick="cnblogs_code_hide('3f2ccfe8-bf97-423d-969a-5f43e520654a',event)" id="code_img_opened_3f2ccfe8-bf97-423d-969a-5f43e520654a" class="code_img_opened" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" /><span class="cnblogs_code_collapse">View Code </span>
<div class="cnblogs_code_hide" id="cnblogs_code_open_3f2ccfe8-bf97-423d-969a-5f43e520654a">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">string</span><span style="color: #000000;">.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ticket[</span><span style="color: #800080;">10001</span><span style="color: #000000;">];<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d %d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">m, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n))<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">m </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> </span><span style="color: #000000;">!</span><span style="color: #000000;">n)<br />        {<br />            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />        }<br />        memset(ticket, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(ticket));<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> tmp;<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">tmp);<br />            ticket[tmp]</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> m; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ticket[i] </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />            {<br />                k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, k);<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
</div>
<br />]]></description></item><item><title>API</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/26/1996367.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 26 Mar 2011 08:15:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/26/1996367.html</guid><description><![CDATA[<p>&nbsp; int with= GetSystemMetrics(SM_CXFULLSCREEN);</p>
<p>&nbsp; int heigh= GetSystemMetrics(SM_CYFULLSCREEN);</p>
<p>通过上边两个函数获取的是显示屏幕的大小，及不包括任务栏等区域。</p>
<p>&nbsp; int&nbsp;&nbsp; cx&nbsp;&nbsp; =&nbsp;&nbsp; GetSystemMetrics(&nbsp;&nbsp; SM_CXSCREEN&nbsp;&nbsp; );&nbsp;&nbsp;&nbsp;<br />&nbsp; int&nbsp;&nbsp; cy&nbsp;&nbsp; =&nbsp;&nbsp; GetSystemMetrics(&nbsp;&nbsp; SM_CYSCREEN&nbsp;&nbsp; );</p>
<p>这两个函数获取的是真正屏幕的大小。</p>
<p>用前两个函数获取的大小可能是1024*687&nbsp;&nbsp;&nbsp; 而用下边两个获取的就是1024*768</p>

<p>GetWindowRect&nbsp;<br />用法：GetWindowRect(HWND,LPRECT);&nbsp;<br />其中 &nbsp; HWND是窗口句柄，LPRECT是指向RECT结构的一个指针，该结构接收返回的窗口坐标，&nbsp;<br />是以屏幕坐标为基准的！既显示器的左上角为坐标的原点！&nbsp;</p>]]></description></item><item><title>汉诺塔问题的C语言实现</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/24/1994288.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 24 Mar 2011 12:36:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/24/1994288.html</guid><description><![CDATA[<table class="htb wr" cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody>
<tr>
<td>
<div class="box2 p14">
<div class="content_h2">
<h2 class="mar-t10">汉诺塔 - 解决思路</h2>
</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><span face="SimSun" size="3" style="font-family: SimSun; font-size: small;">1.如果只有一个金片，则把该金片从源移动到目标棒，结束。</span></p>
<p><span face="SimSun" size="3" style="font-family: SimSun; font-size: small;">2.如果有n个金片，则把前n-1个金片移动到辅助的棒，然后把自己移动到目标棒，最后再把前n-1个移动到目标棒</span></p>

<p>
<div onclick="cnblogs_code_show('4238042e-27ed-4953-811f-d649c03eb102')" class="cnblogs_code">
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">Tower of Hanoi 汉诺塔</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> TOH(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> A, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> B, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> C)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">) <br />    {<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Movedisk %d from %c to %c \n</span><span style="color: #800000;">"</span><span style="color: #000000;">,n,A,C);<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;<br />    }<br />    TOH(n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, A, C, B);<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Movedisk %d from %c to %c \n</span><span style="color: #800000;">"</span><span style="color: #000000;">,n,A,C);<br />    TOH(n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, B, A, C);<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br />    printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入测试数据的次数</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">m);<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (m </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />    {<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">请输入数字n以解决n阶汉诺塔问题：\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">,</span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n);<br />        TOH(n,</span><span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">,</span><span style="color: #800000;">'</span><span style="color: #800000;">B</span><span style="color: #800000;">'</span><span style="color: #000000;">,</span><span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">);<br />        m</span><span style="color: #000000;">--</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (m </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;<br />        }<br />    }<br />}</span></div></pre>
</div>
</div>
</p>]]></description></item><item><title>产生随机的排列</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/24/1994267.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 24 Mar 2011 11:50:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/24/1994267.html</guid><description><![CDATA[<p>产生随机的排列:</p>
<p>　　permute()函数的功能是：打乱数组的顺序</p>
<p>　　Random()函数的功能是：产生一个0 &mdash;&gt; n-1的随机数</p>
<p>　　swap()函数的功能是：交换数组里第i个和第j个元素的值</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">功能：产生随机的排列</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdlib.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">声明函数</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> permute(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> array[], </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n);<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> Random(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n);<br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> swap(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> A[], </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j);<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">Randomly permute the n values of array</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> permute(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> array[], </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> n; i </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">--</span><span style="color: #000000;">)<br />    {<br />        swap(array, i </span><span style="color: #000000;">-</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">, Random(i));<br />    }<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">Return a random value in rang 0 to n-1</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> Random(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n)<br />{<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> rand() </span><span style="color: #000000;">%</span><span style="color: #000000;"> (n);<br />}<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">swap two elements in a generic array</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> swap(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> A[], </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> temp </span><span style="color: #000000;">=</span><span style="color: #000000;"> A[i];<br />    A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> A[j];<br />    A[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a[</span><span style="color: #800080;">10</span><span style="color: #000000;">];<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">10</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        a[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Random(i</span><span style="color: #000000;">+</span><span style="color: #800080;">9</span><span style="color: #000000;">);<br />    }<br />    permute(a, </span><span style="color: #800080;">10</span><span style="color: #000000;">);<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">10</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\t</span><span style="color: #800000;">"</span><span style="color: #000000;">,a[i]);<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
</p>]]></description></item><item><title>使用递归方法求阶乘</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/24/1993752.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 24 Mar 2011 05:40:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/24/1993752.html</guid><description><![CDATA[<p>[互动百科]：</p>
<div class="content_h2 bac_no">
<h2 class="mar-t10">递归算法 - 概述</h2>
</div>

<p><a class="innerlink" href="http://www.hudong.com/wiki/%E9%80%92%E5%BD%92" title="递归">递归</a>做为一种算法在程序设计语言中广泛应用.是指<a class="innerlink" href="http://www.hudong.com/wiki/%E5%87%BD%E6%95%B0" title="函数">函数</a>/<a class="innerlink" href="http://www.hudong.com/wiki/%E8%BF%87%E7%A8%8B" title="过程">过程</a>/<a class="innerlink" href="http://www.hudong.com/wiki/%E5%AD%90%E7%A8%8B%E5%BA%8F" title="子程序">子程序</a>在运行过程序中<a class="innerlink" href="http://www.hudong.com/wiki/%E7%9B%B4%E6%8E%A5" title="直接">直接</a>或<a class="innerlink" href="http://www.hudong.com/wiki/%E9%97%B4%E6%8E%A5" title="间接">间接</a>调用自身而产生的重入现像.</p>
<p>程序调用自身的<a class="innerlink" href="http://www.hudong.com/wiki/%E7%BC%96%E7%A8%8B" title="编程">编程</a>技巧称为递归（ recursion）。&nbsp;<br />一个过程或函数在其定义或说明中又直接或间接调用自身的一种方法，它通常把一个大型复杂的问题层层转化为一个与原问题相似的规模较小的问题来求解，递归策略只需少量的程序就可描述出解题过程所需要的多次重复计算，大大地减少了程序的<a class="innerlink" href="http://www.hudong.com/wiki/%E4%BB%A3%E7%A0%81" title="代码">代码</a>量。递归的能力在于用有限的语句来定义对象的无限集合。用递归思想写出的程序往往十分简洁易懂。&nbsp;<br />一般来说，递归需要有边界条件、递归前进段和递归返回段。当边界条件不满足时，递归前进；当边界条件满足时，递归返回。&nbsp;<br />注意：&nbsp;<br />(1) 递归就是在过程或函数里调用自身;&nbsp;<br />(2) 在使用递增归策略时，必须有一个明确的递归结束条件，称为递归出口，否则将无限进行下去（<a class="innerlink" href="http://www.hudong.com/wiki/%E6%AD%BB%E9%94%81" title="死锁">死锁</a>）。</p>
<p>递归算法一般用于解决三类问题：<br />(1)数据的定义是按递归定义的。(<a class="link_red" href="http://www.hudong.com/wiki/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95" title="Fibonacci函数">Fibonacci函数</a>)<br />(2)问题解法按递归算法实现。(<a class="innerlink" href="http://www.hudong.com/wiki/%E5%9B%9E%E6%BA%AF" title="回溯" target="_blank">回溯</a>)<br />(3)<a class="link_red" href="http://www.hudong.com/wiki/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95" title="数据的结构">数据的结构</a>形式是按递归定义的。(<a class="link_red" href="http://www.hudong.com/wiki/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95" title="树的遍历">树的遍历</a>，<a class="link_red" href="http://www.hudong.com/wiki/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95" title="图的搜索">图的搜索</a>)</p>
<p>递归的缺点：<br />递归算法解题的运行效率较低。在递归调用的过程当中系统为每一层的返回点、局部量等开辟了栈来存储。递归次数过多容易造成<a class="link_red" href="http://www.hudong.com/wiki/%E9%80%92%E5%BD%92%E7%AE%97%E6%B3%95" title="栈溢出">栈溢出</a>等。</p>

<p>ok：代码</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdlib.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">   </span><span style="color: #008000;">//</span><span style="color: #008000;">include the exit function :exit(-1)</span><span style="color: #008000;"><br /></span><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">Assert : If boolean expression id false ,print a message and terminate the program</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;">  Assert(</span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> val, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> </span><span style="color: #0000ff;">string</span><span style="color: #000000;">)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">val) </span><span style="color: #008000;">//</span><span style="color: #008000;">Assertion failed-close the program</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    {<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">Assertion failed : </span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />        exit (</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />    }<br />}<br /><br /></span><span style="color: #0000ff;">long</span><span style="color: #000000;"> fact(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n) </span><span style="color: #008000;">//</span><span style="color: #008000;">compute n!</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;"> To fit n! in a long variable, require n &lt;= 12</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    Assert ((n </span><span style="color: #000000;">&gt;=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">) </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> (n </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> </span><span style="color: #800080;">12</span><span style="color: #000000;">), </span><span style="color: #800000;">"</span><span style="color: #800000;">Input out of range</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (n </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">)    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; </span><span style="color: #008000;">//</span><span style="color: #008000;"> Base case :return base solusion</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> n</span><span style="color: #000000;">*</span><span style="color: #000000;">fact(n</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">); </span><span style="color: #008000;">//</span><span style="color: #008000;">Recursive call for n&gt;1</span><span style="color: #008000;"><br /></span><span style="color: #000000;">}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n;<br />    cin </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;"> n;<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> fact(n) </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
</p>]]></description></item><item><title>数字阶梯（Number Steps）</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/23/1992996.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 23 Mar 2011 11:20:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/23/1992996.html</guid><description><![CDATA[<center><span class="bigProblemTitle">Number Steps</span></center><br />
<hr />
<br /><br /><center><span color="green" style="color: green;">Time Limit: </span>1 Second&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span color="green" style="color: green;">Memory Limit: </span>32768 KB </center><br />
<hr />
<br /><br />
<div>Starting from point (0,0) on a plane, we have written all non-negative <br />integers 0, 1, 2,... as shown in the figure. For example, 1, 2, and 3 has been <br />written at points (1,1), (2,0), and (3, 1) respectively and this pattern has <br />continued.</div>
<br />
<div align="center"><img src="http://pic002.cnblogs.com/images/2011/198486/2011032319173531.jpg" /></div>
<br />
<div>You are to write a program that reads the coordinates of a point (x, y), and <br />writes the number (if any) that has been written at that point. (x, y) <br />coordinates in the input are in the range 0...5000.</div>
<br />
<div><br /><b>Input</b><br /><br />The first line of the input is N, the number of test <br />cases for this problem. In each of the N following lines, there is x, and y <br />representing the coordinates (x, y) of a point.</div>
<br />
<div><br /><b>Output</b><br /><br />For each point in the input, write the number <br />written at that point or write No Number if there is none.</div>
<br />
<div><br /><b>Sample Input</b><br /><br />3<br />4 2<br />6 6<br />3 4</div>
<br />
<div><br /><b>Sample Output</b><br /><br />6<br />12<br />No Number</div>
<div>&nbsp;</div>
<div>
<hr />
解答：</div>
<div>
<div onclick="cnblogs_code_show('9bc2863c-4e1f-4015-9305-1e359fccc1f3')" class="cnblogs_code"><img src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" class="code_img_closed" id="code_img_closed_9bc2863c-4e1f-4015-9305-1e359fccc1f3" /><img src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" onclick="cnblogs_code_hide('9bc2863c-4e1f-4015-9305-1e359fccc1f3',event)" class="code_img_opened" id="code_img_opened_9bc2863c-4e1f-4015-9305-1e359fccc1f3" style="display: none;" /><span class="cnblogs_code_collapse">View Code </span>
<div class="cnblogs_code_hide" id="cnblogs_code_open_9bc2863c-4e1f-4015-9305-1e359fccc1f3">
<pre><div><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> N, i;<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">N);   </span><span style="color: #008000;">//</span><span style="color: #008000;">N表示输入文件中测试数据的数目</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> N; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)   </span><span style="color: #008000;">//</span><span style="color: #008000;">处理输入文件中的N个测试数据</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    {<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d %d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y);   </span><span style="color: #008000;">//</span><span style="color: #008000;">每个测试数据包含两个整数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> Num;                  </span><span style="color: #008000;">//</span><span style="color: #008000;">在(x,y)坐标点上的非负整数</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (y </span><span style="color: #000000;">!=</span><span style="color: #000000;"> x </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> y </span><span style="color: #000000;">!=</span><span style="color: #000000;"> x</span><span style="color: #000000;">-</span><span style="color: #800080;">2</span><span style="color: #000000;">)<br />        {<br />            Num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (y </span><span style="color: #000000;">==</span><span style="color: #000000;"> x </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> x </span><span style="color: #000000;">%</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />            {<br />                Num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> x;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (y </span><span style="color: #000000;">==</span><span style="color: #000000;"> x </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> x </span><span style="color: #000000;">%</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />            {<br />                Num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> x </span><span style="color: #000000;">-</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (y </span><span style="color: #000000;">==</span><span style="color: #000000;"> x</span><span style="color: #000000;">-</span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> x</span><span style="color: #000000;">%</span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />            {<br />                Num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> x </span><span style="color: #000000;">-</span><span style="color: #800080;">2</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />            {<br />                Num </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #000000;"> x </span><span style="color: #000000;">-</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />            }<br />        }<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (Num </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">) printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">No Number\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, Num);<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}</span></div></pre>
</div>
</div>
&nbsp;</div>]]></description></item><item><title>ACM/ICPC题目输入情形及其处理方法</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/23/1992958.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 23 Mar 2011 10:16:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/23/1992958.html</guid><description><![CDATA[<div>情形（1）输入数据文件中，第一行数据标明了测试数据的数目；</div>
<div>处理方法：</div>
<div>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">kase表示测试数据数目</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, kase;<br />scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">kase);<br /></span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> kase; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">处理低 i 个输入</span><span style="color: #008000;"><br /></span><span style="color: #000000;">}<br />...</span></div></pre>
</div>
</div>
<div>情形（2）输入数据文件中，有标明输入结束的数据；</div>
<div>处理方法：</div>
<div>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">假定每组测试数据包含两个数据：m,n;<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">0 0表示结束</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br /></span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />{<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d %d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">m, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n);<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (m </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> n </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">处理</span><span style="color: #008000;"><br /></span><span style="color: #000000;">}<br />...</span></div></pre>
</div>
</div>
<div>情形（3）输入数据文件中，测试数据一直到文件尾；</div>
<div>处理方法：</div>
<div>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">假定每组测试数据包含两个数据：m,n</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m, n;<br /></span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d %d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">m, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n) </span><span style="color: #000000;">!=</span><span style="color: #000000;"> EOF)<br />{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">处理该测试数据</span><span style="color: #008000;"><br /></span><span style="color: #000000;">}<br />...</span></div></pre>
</div>
</div>
<div>情形（4）没有输入数据，这种情形很罕见。</div>
<div>处理方法：（略）</div>]]></description></item><item><title>Google放出C++代码风格规范</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/21/1990174.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 21 Mar 2011 05:38:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/21/1990174.html</guid><description><![CDATA[<a href="http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml">http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml</a>]]></description></item><item><title>C++ string详解</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/18/1988376.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 18 Mar 2011 11:02:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/18/1988376.html</guid><description><![CDATA[<p>C++ string详解</p>

<p>--------------------------------------------------------------------------------</p>
<p>来源：CSDN&nbsp;&nbsp;
作者：Clearsmoking&nbsp;&nbsp; 发布时间：2007-4-1&nbsp;&nbsp; 人气：42249</p>



<p>之所以抛弃char*的字符串而选用C++标准程序库中的string类，是因为他和前者比较起来，不必担心内存是否足够、字符串长度等等，而且作为一个类出现，他集成的操作函数足以完成我们大多数情况下(甚至是100%)的需要。我们可以用 = 进行赋值操作，== 进行比较，+ 做串联（是不是很简单?）。我们尽可以把它看成是C++的基本数据类型。</p>
<p>&nbsp;&nbsp; 好了，进入正题&hellip;&hellip;&hellip;</p>
<p>首先，为了在我们的程序中使用string类型，我们必须包含头文件 。如下：</p>
<p>&nbsp;&nbsp; #include //注意这里不是string.h
string.h是C字符串头文件</p>

<p>1．声明一个C++字符串</p>
<p>声明一个字符串变量很简单：</p>
<p>&nbsp;&nbsp; string Str;</p>
<p>这样我们就声明了一个字符串变量，但既然是一个类，就有构造函数和析构函数。上面的声明没有传入参数，所以就直接使用了string的默认的构造函数，这个函数所作的就是把Str初始化为一个空字符串。String类的构造函数和析构函数如下：</p>
<p>a)&nbsp;&nbsp;&nbsp; string s;&nbsp;
//生成一个空字符串s</p>
<p>b)&nbsp;&nbsp;&nbsp; string s(str) //拷贝构造函数 生成str的复制品</p>
<p>c)&nbsp;&nbsp;&nbsp; string s(str,stridx) //将字符串str内&ldquo;始于位置stridx&rdquo;的部分当作字符串的初值</p>
<p>d)&nbsp;&nbsp;&nbsp; string s(str,stridx,strlen) //将字符串str内&ldquo;始于stridx且长度顶多strlen&rdquo;的部分作为字符串的初值</p>
<p>e)&nbsp;&nbsp;&nbsp; string s(cstr) //将C字符串作为s的初值</p>
<p>f)&nbsp;&nbsp;&nbsp; string s(chars,chars_len) //将C字符串前chars_len个字符作为字符串s的初值。</p>
<p>g)&nbsp;&nbsp;&nbsp; string s(num,c) //生成一个字符串，包含num个c字符</p>
<p>h)&nbsp;&nbsp;&nbsp; string s(beg,end) //以区间beg;end(不包含end)内的字符作为字符串s的初值</p>
<p>i)&nbsp;&nbsp;&nbsp; s.~string() //销毁所有字符，释放内存</p>
<p>都很简单，我就不解释了。</p>
<p>2．字符串操作函数</p>
<p>&nbsp;&nbsp; 这里是C++字符串的重点，我先把各种操作函数罗列出来，不喜欢把所有函数都看完的人可以在这里找自己喜欢的函数，再到后面看他的详细解释。</p>
<p>a) =,assign()&nbsp;&nbsp; //赋以新值</p>
<p>b) swap()&nbsp;&nbsp; //交换两个字符串的内容</p>
<p>c)
+=,append(),push_back() //在尾部添加字符</p>
<p>d) insert() //插入字符</p>
<p>e) erase() //删除字符</p>
<p>f) clear() //删除全部字符 </p>
<p>g) replace() //替换字符</p>
<p>h) + //串联字符串</p>
<p>i)
==,!=,&lt;,&lt;=,&gt;,&gt;=,compare()&nbsp; //比较字符串</p>
<p>j)
size(),length()&nbsp; //返回字符数量</p>
<p>k) max_size() //返回字符的可能最大个数</p>
<p>l) empty()&nbsp; //判断字符串是否为空</p>
<p>m) capacity() //返回重新分配之前的字符容量</p>
<p>n) reserve() //保留一定量内存以容纳一定数量的字符</p>
<p>o) [ ], at() //存取单一字符</p>
<p>p)
&gt;&gt;,getline() //从stream读取某值</p>
<p>q) &lt;&lt;&nbsp; //将谋值写入stream</p>
<p>r) copy() //将某值赋值为一个C_string</p>
<p>s) c_str() //将内容以C_string返回</p>
<p>t) data() //将内容以字符数组形式返回</p>
<p>u) substr() //返回某个子字符串</p>
<p>v)查找函数</p>
<p>w)begin() end() //提供类似STL的迭代器支持</p>
<p>x) rbegin() rend()
//逆向迭代器</p>
<p>y) get_allocator()
//返回配置器</p>
<p>下面详细介绍：</p>
<p>2．1 C++字符串和C字符串的转换</p>
<p>&nbsp;&nbsp; C++提供的由C++字符串得到对应的C_string的方法是使用data()、c_str()和copy()，其中，data()以字符数组的形式返回字符串内容，但并不添加&rsquo;\0&rsquo;。c_str()返回一个以&lsquo;\0&rsquo;结尾的字符数组，而copy()则把字符串的内容复制或写入既有的c_string或字符数组内。C++字符串并不以&rsquo;\0&rsquo;结尾。我的建议是在程序中能使用C++字符串就使用，除非万不得已不选用c_string。由于只是简单介绍，详细介绍掠过，谁想进一步了解使用中的注意事项可以给我留言(到我的收件箱)。我详细解释。</p>
<p>2．2 大小和容量函数</p>
<p>&nbsp;&nbsp; 一个C++字符串存在三种大小：a)现有的字符数，函数是size()和length()，他们等效。Empty()用来检查字符串是否为空。b)max_size()
这个大小是指当前C++字符串最多能包含的字符数，很可能和机器本身的限制或者字符串所在位置连续内存的大小有关系。我们一般情况下不用关心他，应该大小足够我们用的。但是不够用的话，会抛出length_error异常c)capacity()重新分配内存之前 string所能包含的最大字符数。这里另一个需要指出的是reserve()函数，这个函数为string重新分配内存。重新分配的大小由其参数决定，默认参数为0，这时候会对string进行非强制性缩减。</p>

<p>还有必要再重复一下C++字符串和C字符串转换的问题，许多人会遇到这样的问题，自己做的程序要调用别人的函数、类什么的（比如数据库连接函数Connect(char*,char*)），但别人的函数参数用的是char*形式的，而我们知道，c_str()、data()返回的字符数组由该字符串拥有，所以是一种const char*,要想作为上面提及的函数的参数，还必须拷贝到一个char*,而我们的原则是能不使用C字符串就不使用。那么，这时候我们的处理方式是：如果此函数对参数(也就是char*)的内容不修改的话，我们可以这样Connect((char*)UserID.c_str(), (char*)PassWD.c_str()),但是这时候是存在危险的，因为这样转换后的字符串其实是可以修改的（有兴趣地可以自己试一试），所以我强调除非函数调用的时候不对参数进行修改，否则必须拷贝到一个char*上去。当然，更稳妥的办法是无论什么情况都拷贝到一个char*上去。同时我们也祈祷现在仍然使用C字符串进行编程的高手们（说他们是高手一点儿也不为过，也许在我们还穿开裆裤的时候他们就开始编程了，哈哈&hellip;）写的函数都比较规范，那样我们就不必进行强制转换了。</p>

<p>2．3元素存取</p>
<p>&nbsp;&nbsp; 我们可以使用下标操作符[]和函数at()对元素包含的字符进行访问。但是应该注意的是操作符[]并不检查索引是否有效（有效索引0~str.length()），如果索引失效，会引起未定义的行为。而at()会检查，如果使用at()的时候索引无效，会抛出out_of_range异常。</p>
<p>&nbsp;&nbsp; 有一个例外不得不说，const
string a;的操作符[]对索引值是a.length()仍然有效，其返回值是&rsquo;\0&rsquo;。其他的各种情况，a.length()索引都是无效的。举例如下：</p>
<p>const string
Cstr(&ldquo;const string&rdquo;);</p>
<p>string
Str(&ldquo;string&rdquo;);</p>

<p>Str[3];&nbsp;&nbsp;&nbsp; //ok</p>
<p>Str.at(3);&nbsp; //ok</p>

<p>Str[100]; //未定义的行为</p>
<p>Str.at(100);&nbsp; //throw out_of_range</p>

<p>Str[Str.length()]&nbsp; //未定义行为</p>
<p>Cstr[Cstr.length()]
//返回 &lsquo;\0&rsquo;</p>
<p>Str.at(Str.length());//throw
out_of_range</p>
<p>Cstr.at(Cstr.length())
////throw out_of_range</p>

<p>我不赞成类似于下面的引用或指针赋值：</p>
<p>char&amp; r=s[2];</p>
<p>char* p=
&amp;s[3];</p>
<p>因为一旦发生重新分配，r,p立即失效。避免的方法就是不使用。</p>

<p>2．4比较函数</p>
<p>&nbsp;&nbsp; C++字符串支持常见的比较操作符（&gt;,&gt;=,&lt;,&lt;=,==,!=），甚至支持string与C-string的比较(如 str&lt;&rdquo;hello&rdquo;)。在使用&gt;,&gt;=,&lt;,&lt;=这些操作符的时候是根据&ldquo;当前字符特性&rdquo;将字符按字典顺序进行逐一得比较。字典排序靠前的字符小，比较的顺序是从前向后比较，遇到不相等的字符就按这个位置上的两个字符的比较结果确定两个字符串的大小。同时，string(&ldquo;aaaa&rdquo;)&nbsp;&nbsp;&nbsp; 另一个功能强大的比较函数是成员函数compare()。他支持多参数处理，支持用索引值和长度定位子串来进行比较。他返回一个整数来表示比较结果，返回值意义如下：0-相等 〉0-大于 &lt;0-小于。举例如下：</p>
<p>&nbsp;&nbsp; string s(&ldquo;abcd&rdquo;);</p>

<p>&nbsp;&nbsp; s.compare(&ldquo;abcd&rdquo;); //返回0</p>
<p>&nbsp;&nbsp; s.compare(&ldquo;dcba&rdquo;); //返回一个小于0的值</p>
<p>&nbsp;&nbsp; s.compare(&ldquo;ab&rdquo;); //返回大于0的值</p>

<p>s.compare(s); //相等</p>
<p>&nbsp;&nbsp; s.compare(0,2,s,2,2); //用&rdquo;ab&rdquo;和&rdquo;cd&rdquo;进行比较 小于零</p>
<p>&nbsp;&nbsp; s.compare(1,2,&rdquo;bcx&rdquo;,2); //用&rdquo;bc&rdquo;和&rdquo;bc&rdquo;比较。</p>
<p>怎么样？功能够全的吧！什么？还不能满足你的胃口？好吧，那等着，后面有更个性化的比较算法。先给个提示，使用的是STL的比较算法。什么？对STL一窍不通？靠，你重修吧！</p>

<p>2．5 更改内容</p>
<p>这在字符串的操作中占了很大一部分。</p>
<p>首先讲赋值，第一个赋值方法当然是使用操作符=，新值可以是string(如：s=ns) 、c_string(如：s=&rdquo;gaint&rdquo;)甚至单一字符（如：s=&rsquo;j&rsquo;）。还可以使用成员函数assign()，这个成员函数可以使你更灵活的对字符串赋值。还是举例说明吧：</p>
<p>s.assign(str); //不说</p>
<p>s.assign(str,1,3);//如果str是&rdquo;iamangel&rdquo; 就是把&rdquo;ama&rdquo;赋给字符串</p>
<p>s.assign(str,2,string::npos);//把字符串str从索引值2开始到结尾赋给s</p>
<p>s.assign(&ldquo;gaint&rdquo;); //不说</p>
<p>s.assign(&ldquo;nico&rdquo;,5);//把&rsquo;n&rsquo;
&lsquo;I&rsquo; &lsquo;c&rsquo; &lsquo;o&rsquo; &lsquo;\0&rsquo;赋给字符串</p>
<p>s.assign(5,&rsquo;x&rsquo;);//把五个x赋给字符串</p>
<p>把字符串清空的方法有三个：s=&rdquo;&rdquo;;s.clear();s.erase();(我越来越觉得举例比说话让别人容易懂！)。</p>
<p>string提供了很多函数用于插入（insert）、删除（erase）、替换（replace）、增加字符。</p>
<p>先说增加字符（这里说的增加是在尾巴上），函数有 +=、append()、push_back()。举例如下：</p>
<p>s+=str;//加个字符串</p>
<p>s+=&rdquo;my name is jiayp&rdquo;;//加个C字符串</p>
<p>s+=&rsquo;a&rsquo;;//加个字符</p>

<p>s.append(str);</p>
<p>s.append(str,1,3);//不解释了 同前面的函数参数assign的解释</p>
<p>s.append(str,2,string::npos)//不解释了</p>

<p>s.append(&ldquo;my name
is jiayp&rdquo;);</p>
<p>s.append(&ldquo;nico&rdquo;,5);</p>
<p>s.append(5,&rsquo;x&rsquo;);</p>



<p>&nbsp;&nbsp;&nbsp; 字符串操作是一个不小的主题,在标准C++中,string字符串类成为一个标准,之所以抛弃char*的字符串而选用C++标准程序库中的string类，是因为他和前者比较起来，不必担心内存是否足够、字符串长度等等，而且作为一个类出现，他集成的操作函数足以完成我们大多数情况下的需要.</p>
<p>&nbsp;&nbsp;&nbsp; 下面我们首先从一些示例开始学习下string类的使用.</p>
<p>1)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s("hehe");</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>2)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; char chs[] = "hehe";</p>
<p>&nbsp;&nbsp;&nbsp; string s(chs);</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>3)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; char chs[] = "hehe";</p>
<p>&nbsp;&nbsp;&nbsp; string s(chs,1,3);&nbsp;&nbsp;&nbsp; //指定从chs的索引1开始,最后复制3个字节</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>4)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s1("hehe");</p>
<p>&nbsp;&nbsp;&nbsp; string s2(s1);&nbsp;&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s2&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>5)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s1("hehe",2,3);</p>
<p>&nbsp;&nbsp;&nbsp; string s2(s1);&nbsp;&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s2&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>6)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; char chs[] = "hehe";</p>
<p>&nbsp;&nbsp;&nbsp; string s(chs,3);&nbsp;&nbsp;&nbsp; //将chs前3个字符作为初值构造</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>7)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s(10,'k');&nbsp;&nbsp;&nbsp; //分配10个字符,初值都是'k'</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>//以上是string类实例的构造手段,都很简单.</p>

<p>9)</p>
<p>//赋新值</p>
<p>#include
&lt;string&gt;</p>
<p>#include &lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s(10,'k');&nbsp;&nbsp;&nbsp; //分配10个字符,初值都是'k'</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s = "hehehehe";</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s.assign("kdje");</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s.assign("fkdhfkdfd",5);&nbsp;&nbsp;&nbsp; //重新分配指定字符串的前5的元素内容</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>10)</p>
<p>//swap方法交换</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s1 = "hehe";</p>
<p>&nbsp;&nbsp;&nbsp; string s2 = "gagaga";</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s1 :
"&lt;&lt;s1&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s2 :
"&lt;&lt;s2&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s1.swap(s2);</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s1 :
"&lt;&lt;s1&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s2 :
"&lt;&lt;s2&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>11)</p>
<p>//+=,append(),push_back()在尾部添加字符</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "hehe";</p>
<p>&nbsp;&nbsp;&nbsp; s += "gaga";</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s.append("嘿嘿");&nbsp;&nbsp;&nbsp;
//append()方法可以添加字符串</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s.push_back('k');&nbsp;&nbsp;&nbsp; //push_back()方法只能添加一个字符...</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>12)</p>
<p>//insert() 插入字符.其实,insert运用好,与其他的插入操作是一样的.</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "hehe";</p>
<p>&nbsp;&nbsp;&nbsp; s.insert(0,"头部");&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//在头部插入</p>
<p>&nbsp;&nbsp;&nbsp; s.insert(s.size(),"尾部");&nbsp;&nbsp;&nbsp; //在尾部插入</p>
<p>&nbsp;&nbsp;&nbsp; s.insert(s.size()/2,"中间");//在中间插入</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>13)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg";</p>
<p>&nbsp;&nbsp;&nbsp; s.erase(0,1);&nbsp;&nbsp;&nbsp; //从索引0到索引1,即删除掉了'a'</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; //其实,还可以使用replace方法来执行删除操作</p>
<p>&nbsp;&nbsp;&nbsp; s.replace(2,3,"");//即将指定范围内的字符替换成"",即变相删除了</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>

<p>14)</p>
<p>//clear() 删除全部字符</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg";</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.length()&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s.clear();</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.length()&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; //使用earse方法变相全删除</p>
<p>&nbsp;&nbsp;&nbsp; s = "dkjfd";</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.length()&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; s.erase(0,s.length());</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.length()&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>15)</p>
<p>//replace() 替换字符</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg";</p>
<p>&nbsp;&nbsp;&nbsp; s.replace(2,3,"!!!!!");//从索引2开始3个字节的字符全替换成"!!!!!"</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>16)</p>
<p>//==,!=,&lt;,&lt;=,&gt;,&gt;=,compare()&nbsp; 比较字符串</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s1 = "abcdefg";</p>
<p>&nbsp;&nbsp;&nbsp; string s2 = "abcdefg";&nbsp;&nbsp;&nbsp; </p>
<p>&nbsp;&nbsp;&nbsp; if (s1==s2)cout&lt;&lt;"s1 ==
s2"&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; else cout&lt;&lt;"s1 !=
s2"&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; if (s1!=s2)cout&lt;&lt;"s1 !=
s2"&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; else cout&lt;&lt;"s1 ==
s2"&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; if (s1&gt;s2)cout&lt;&lt;"s1 &gt;
s2"&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; else cout&lt;&lt;"s1 &lt;=
s2"&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; if (s1&lt;=s2)cout&lt;&lt;"s1 &lt;=
s2"&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; else cout&lt;&lt;"s1 &gt;
s2"&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>17)</p>
<p>//size(),length()&nbsp; 返回字符数量</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg";</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.size()&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.length()&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>18)</p>
<p>//max_size() 返回字符的可能最大个数</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg";</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.max_size()&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>19)</p>
<p>//empty()&nbsp; 判断字符串是否为空</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s ;</p>
<p>&nbsp;&nbsp;&nbsp; if (s.empty())</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s 为空."&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; else</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s 不为空."&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; s = s + "abcdefg";</p>
<p>&nbsp;&nbsp;&nbsp; if (s.empty())</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s 为空."&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; else</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"s 不为空."&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>20)</p>
<p>// [ ], at() 存取单一字符</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg1111";</p>

<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"use
[]:"&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; for(int i=0; i&lt;s.length(); i++)</p>
<p>&nbsp;&nbsp;&nbsp; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;s[i]&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"use
at():"&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; for(int i=0; i&lt;s.length(); i++)</p>
<p>&nbsp; &nbsp;&nbsp;{</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;s.at(i)&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>21)</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg1111";</p>

<p>&nbsp;&nbsp;&nbsp; const char * chs1 = s.c_str();</p>
<p>&nbsp;&nbsp;&nbsp; const char * chs2 = s.data();</p>

<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"use
at():"&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; int i;</p>
<p>&nbsp;&nbsp;&nbsp; for(i=0; i&lt;s.length(); i++)</p>
<p>&nbsp;&nbsp;&nbsp; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"c_str() :
"&lt;&lt;chs1[i]&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;"data() :
"&lt;&lt;chs2[i]&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"c_str() :
"&lt;&lt;chs1&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;"data() :
"&lt;&lt;chs2&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>22)</p>
<p>// substr() 返回某个子字符串</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg1111";</p>

<p>&nbsp;&nbsp;&nbsp; string str = s.substr(5,3);//从索引5开始3个字节</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;str&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>23)</p>
<p>// find 查找函数</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg1111";</p>
<p>&nbsp;&nbsp;&nbsp; string pattern = "fg";</p>
<p>&nbsp;&nbsp;&nbsp; string::size_type pos;</p>
<p>&nbsp;&nbsp;&nbsp; pos = s.find(pattern,0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //从索引0开始,查找符合字符串"f"的头索引</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;pos&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; string str = s.substr(pos,pattern.size());</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;str&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>24)</p>
<p>// begin() end() 提供类似STL的迭代器支持</p>
<p>#include
&lt;string&gt;</p>
<p>#include
&lt;iostream&gt;</p>
<p>using namespace
std;</p>

<p>void main()</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; string s = "abcdefg1111";</p>
<p>&nbsp;&nbsp;&nbsp; for(string::iterator iter = s.begin();
iter!=s.end(); iter++)</p>
<p>&nbsp;&nbsp;&nbsp; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cout&lt;&lt;*iter&lt;&lt;endl;</p>
<p>&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp; cout&lt;&lt;endl;</p>

<p>&nbsp;&nbsp;&nbsp; cin.get();</p>
<p>}</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 一个C++字符串存在三种大小：a)现有的字符数，函数是size()和length()，他们等效。 Empty()用来检查字符串是否为空。b)max_size()
这个大小是指当前C++字符串最多能包含的字符数，很可能和机器本身的限制或者字符串所在位置连续内存的大小有关系。我们一般情况下不用关心他，应该大小足够我们用的。但是不够用的话，会抛出length_error异常c)capacity()重新分配内存之前 string所能包含的最大字符数。这里另一个需要指出的是reserve()函数，这个函数为string重新分配内存。重新分配的大小由其参数决定，默认参数为0，这时候会对string进行非强制性缩减</p>




<p>本文地址：http://read.newbooks.com.cn/info/119627.html&nbsp;&nbsp;</p>
<p><span style="font-size: x-small;" size="2"><span style="line-height: normal;"><br mce_bogus="1" /></span></span></p>]]></description></item><item><title>关系代数运算基本实现</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/10/1979792.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Thu, 10 Mar 2011 06:32:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/10/1979792.html</guid><description><![CDATA[<p>传统的集合运算：</p>
<p>（1）：并（Union）</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008080;"> 1</span> <span style="color: #008000;">//</span><span style="color: #008000;">并</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 2</span> <span style="color: #008000;">&nbsp;</span><span style="color: #000000;">relate union_relate(relate u_R, relate u_S)<br /></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    relate P;<br /></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br /></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_S.num_tuple;<br /></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_S.num_row;<br /></span><span style="color: #008080;">10</span> <span style="color: #000000;">        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">11</span> <span style="color: #000000;">        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">12</span> <span style="color: #000000;">        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">13</span> <span style="color: #000000;">        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">14</span> <span style="color: #000000;">        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">15</span> <span style="color: #000000;">        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">16</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;">17</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">18</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (u_R.num_row </span><span style="color: #000000;">!=</span><span style="color: #000000;"> u_S.num_row)<br /></span><span style="color: #008080;">19</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;">20</span> <span style="color: #000000;">        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">R、S不是同目关系</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br /></span><span style="color: #008080;">21</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br /></span><span style="color: #008080;">22</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;">23</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">24</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> u_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">25</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;">26</span> <span style="color: #000000;">        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_S.i_A[i];<br /></span><span style="color: #008080;">27</span> <span style="color: #000000;">        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_S.i_B[i];<br /></span><span style="color: #008080;">28</span> <span style="color: #000000;">        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_S.i_C[i];<br /></span><span style="color: #008080;">29</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;">30</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">31</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_R.num_tuple; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> u_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">32</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;">33</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> u_S.num_tuple; j </span><span style="color: #000000;">++</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">34</span> <span style="color: #000000;">        {<br /></span><span style="color: #008080;">35</span> <span style="color: #000000;">            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (u_R.i_A[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> u_S.i_A[j]<br /></span><span style="color: #008080;">36</span> <span style="color: #000000;">                </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> u_R.i_B[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> u_S.i_B[j]<br /></span><span style="color: #008080;">37</span> <span style="color: #000000;">             </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> u_R.i_C[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> u_S.i_C[j])<br /></span><span style="color: #008080;">38</span> <span style="color: #000000;">            {    <br /></span><span style="color: #008080;">39</span> <span style="color: #000000;">                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">40</span> <span style="color: #000000;">            }<br /></span><span style="color: #008080;">41</span> <span style="color: #000000;">            </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br /></span><span style="color: #008080;">42</span> <span style="color: #000000;">            {<br /></span><span style="color: #008080;">43</span> <span style="color: #000000;">                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> u_S.num_tuple </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">44</span> <span style="color: #000000;">                {<br /></span><span style="color: #008080;">45</span> <span style="color: #000000;">                    P.i_A[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_R.i_A[i];<br /></span><span style="color: #008080;">46</span> <span style="color: #000000;">                    P.i_B[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_R.i_B[i];<br /></span><span style="color: #008080;">47</span> <span style="color: #000000;">                    P.i_C[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> u_R.i_C[i];<br /></span><span style="color: #008080;">48</span> <span style="color: #000000;">                    (P.num_tuple)</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">49</span> <span style="color: #000000;">                    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">50</span> <span style="color: #000000;">                }<br /></span><span style="color: #008080;">51</span> <span style="color: #000000;">            }<br /></span><span style="color: #008080;">52</span> <span style="color: #000000;">        }<br /></span><span style="color: #008080;">53</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;">54</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">55</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br /></span><span style="color: #008080;">56</span> <span style="color: #000000;">}</span></div></pre>
</div>
</p>
<p>（2）差（Difference）：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">差</span><span style="color: #008000;"><br /></span><span style="color: #000000;">relate except_relate(relate e_R, relate e_S)     </span><span style="color: #008000;">//</span><span style="color: #008000;">except</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    relate P;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br />    {<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> e_R.num_row;<br />        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    }<br /><br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (e_R.num_row </span><span style="color: #000000;">!=</span><span style="color: #000000;"> e_S.num_row)<br />    {<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">R、S不是同目关系</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />    }<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> e_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> e_S.num_tuple; j </span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (e_R.i_A[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> e_S.i_A[j]<br />                </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> e_R.i_B[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> e_S.i_B[j]<br />             </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> e_R.i_C[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> e_S.i_C[j])<br />            {    <br />                </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br />            }<br />            </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j </span><span style="color: #000000;">==</span><span style="color: #000000;"> e_S.num_tuple </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />                {<br />                    P.i_A[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> e_R.i_A[i];<br />                    P.i_B[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> e_R.i_B[i];<br />                    P.i_C[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> e_R.i_C[i];<br />                    (P.num_tuple)</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                }<br />            }<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />}</span></div></pre>
</div>
</p>
<p>（3）交（Interstation）：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">/*</span><span style="color: #008000;">***************************************************************<br /><br />方法一：<br /><br />****************************************************************</span><span style="color: #008000;">*/</span><span style="color: #000000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">交</span><span style="color: #008000;"><br /></span><span style="color: #000000;">relate intersect_relate(relate i_R, relate i_S)  </span><span style="color: #008000;">//</span><span style="color: #008000;">intersection</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    relate P;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br />    {<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> i_R.num_row;<br />        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    }<br />    <br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> ( i_R.num_row </span><span style="color: #000000;">!=</span><span style="color: #000000;"> i_S.num_row)<br />    {<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">R、S不是同目关系</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />    }<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> i_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />       </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> i_S.num_tuple; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />       {<br />           </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i_R.i_A[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> i_S.i_A[j]<br />            </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> i_R.i_B[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> i_S.i_B[j]<br />            </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> i_R.i_C[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> i_S.i_C[j])<br />           {<br />               P.i_A[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> i_R.i_A[i];<br />               P.i_B[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> i_R.i_B[i];<br />               P.i_C[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> i_R.i_C[i];<br />               (P.num_tuple)</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />               k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />           }<br />       }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />}</span></div></pre>
</div>
</p>
<p>对于交还有另一种算法：R n S = R - (R - S)</p>
<p>代码如下：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">***************************************************************<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">方法二：<br /></span><span style="color: #008000;">//</span><span style="color: #008000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">***************************************************************</span><span style="color: #008000;"><br /></span><span style="color: #000000;">relate intersect_relate(relate i_R, relate i_S)  </span><span style="color: #008000;">//</span><span style="color: #008000;">intersection</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    relate P;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br />    {<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> i_R.num_row;<br />        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    }<br />    <br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i_R.num_row </span><span style="color: #000000;">!=</span><span style="color: #000000;"> i_S.num_row)<br />    {<br />        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">R、S不是同目关系</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />    }<br />    <br />    P </span><span style="color: #000000;">=</span><span style="color: #000000;"> except_relate(i_R,except_relate(i_R,i_S));<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />}</span></div></pre>
</div>
</p>
<p>（4）笛卡尔积（Cartesian Product）：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">笛卡尔积</span><span style="color: #008000;"><br /></span><span style="color: #000000;">relate car_pro_relate(relate c_R, relate c_S)    </span><span style="color: #008000;">//</span><span style="color: #008000;">cartesian product</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    relate P;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, n </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br />    {<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_R.num_tuple </span><span style="color: #000000;">*</span><span style="color: #000000;"> c_S.num_tuple;<br />        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_R.num_row </span><span style="color: #000000;">+</span><span style="color: #000000;"> c_S.num_row;<br />        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    }<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> c_R.num_tuple </span><span style="color: #000000;">*</span><span style="color: #000000;"> c_S.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> (j</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">)</span><span style="color: #000000;">*</span><span style="color: #000000;">c_S.num_tuple)<br />        {<br />            P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_R.i_A[j];<br />            P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_R.i_B[j];<br />            P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_R.i_C[j];<br />            P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_D[j];<br />            P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_E[j];<br />            P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_F[j];<br />        }<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> ((i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">) </span><span style="color: #000000;">%</span><span style="color: #000000;"> c_S.num_tuple </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        {<br />            j</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> c_R.num_tuple </span><span style="color: #000000;">*</span><span style="color: #000000;"> c_S.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {      <br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> c_S.num_tuple; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (i </span><span style="color: #000000;">%</span><span style="color: #000000;"> c_S.num_tuple </span><span style="color: #000000;">==</span><span style="color: #000000;"> j)<br />            {<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (c_R.num_row </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />                {<br />                    P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_A[j];<br />                    P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_B[j];            <br />                    P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_C[j];<br />                }<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (c_R.num_row </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">)<br />                {<br />                    P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_A[j];            <br />                    P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_B[j];<br />                    P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_C[j];<br />                }<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (c_R.num_row </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">3</span><span style="color: #000000;">)<br />                {        <br />                    P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_A[j];<br />                    P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_B[j];<br />                    P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> c_S.i_C[j];<br />                }<br />            }<br />        }<br />            }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />}</span></div></pre>
</div>
</p>
<p>专门的关系运算：</p>
<p>（1）投影（Projection）：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">投影,只提供实现在单个属性列上的投影<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">R在S上的投影<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">        R              <br /></span><span style="color: #008000;">//</span><span style="color: #008000;">   A    B    C         C<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">-------------------------------<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">   1    3    2         2<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">   5    7    2         2<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">   1    3    4         4<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">--------------------------------<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">    PAI    (R)<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">       (S)</span><span style="color: #008000;"><br /></span><span style="color: #000000;">relate project_relate(relate p_R, </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> ch)     </span><span style="color: #008000;">//</span><span style="color: #008000;">projection</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    relate P;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, n </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br />    {<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> p_R.num_tuple;<br />        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ch </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">A</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> p_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> p_R.i_A[i];<br />        }        <br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ch </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">B</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> p_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> p_R.i_B[i];<br />        }        <br />    }<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ch </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> p_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> p_R.i_C[i];<br />        }        <br />    }<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">去除相同元素</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> p_R.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (j </span><span style="color: #000000;">=</span><span style="color: #000000;"> i</span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> p_R.num_tuple; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (P.i_A[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> P.i_A[j])<br />            {<br />                P.i_A[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />            }<br />        }<br />    }<br /><br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k</span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> P.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (P.i_A[i] </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        {<br />            P.i_A[k] </span><span style="color: #000000;">=</span><span style="color: #000000;"> P.i_A[i];<br />            k</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br />    P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> k;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />}</span></div></pre>
</div>
</p>
<p>（2）自然连接（Natural join）：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;">自然连接</span><span style="color: #008000;"><br /></span><span style="color: #000000;">relate join_relate(relate j_R, relate j_S)       </span><span style="color: #008000;">//</span><span style="color: #008000;">join</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    relate P, Q;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, n </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br />    {<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">4</span><span style="color: #000000;">;    </span><span style="color: #008000;">//</span><span style="color: #008000;">R(A,B,C)和S(B,C,D)相同属性名是B、C,自然连接后剩下四个属性组<br />                          </span><span style="color: #008000;">//</span><span style="color: #008000;">R(A,B)和S(B,C,D)相同属性名是B，自然连接后4个属性组</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        Q.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> j_S.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)</span><span style="color: #008000;">//</span><span style="color: #008000;">为了能使用笛卡尔积函数，将S(B,C,D,)转为S(A,B,C)</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    {<br />        j_S.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> j_S.i_B[i];<br />        j_S.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> j_S.i_C[i];<br />        j_S.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> j_S.i_D[i];<br />        j_S.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> j_S.i_E[i];<br />        j_S.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> j_S.i_F[i];<br />    }<br />    Q </span><span style="color: #000000;">=</span><span style="color: #000000;"> car_pro_relate(j_R, j_S);<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">R有三个属性组，且B,C为相同属性名</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j_R.num_row </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">3</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">相同属性名是B、C<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">         R             S<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">     A   B   C      B  C  D<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">-&gt;   A   B   C      A  B  C<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">---------------------------<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">Q:   A   B   C      D  E  F<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">P:   A   B   C      D</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">,j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> Q.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (Q.i_B[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> Q.i_D[i] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> Q.i_C[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> Q.i_E[i])<br />            {<br />                P.i_A[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_A[i];<br />                P.i_B[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_B[i];<br />                P.i_C[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_C[i];<br />                P.i_D[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_D[i];<br />                P.i_E[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_E[i];<br />                P.i_F[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_F[i];<br />                j</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> j;<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> P.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> P.i_F[i];<br />            P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />            P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        }<br />    }<br /><br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">相同属性名是B且R只有两个属性组</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (j_R.num_row </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">2</span><span style="color: #000000;">) <br />    {<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">相同属性名是B<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">      R         S<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">--------------------------<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">    A   B  |  B    C    D<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">-&gt;  A   B  |  A    B    C<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">Q:  A   B     C    D    E<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">         \   / \  / \  /<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">          \ /   \/   \/<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;">P:  A      B    C    D</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">,j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> Q.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (Q.i_B[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> Q.i_C[i])<br />            {<br />                P.i_A[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_A[i];<br />                P.i_B[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_B[i];<br />                P.i_C[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_C[i];<br />                P.i_D[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_D[i];<br />                P.i_E[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_E[i];<br />                P.i_F[j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> Q.i_F[i];<br />                j</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />            }<br />        }<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> j;<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> P.num_tuple; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> P.i_C[i];<br />            P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> P.i_D[i];<br />            P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> P.i_E[i];<br />            P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />}</span></div></pre>
</div>
</p>

<p>(3)除法（Division）：</p>
<p>
<div class="cnblogs_code">
<pre><div><span style="color: #008000;">//</span><span style="color: #008000;"> R / S的必要条件是：<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">(1) R.num_tuple&gt;S.num_tuple<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">(2) S非空<br /></span><span style="color: #008000;">//</span><span style="color: #008000;">(3) R中存在S.num_tuple个属性与S的S.num_tuple个属性定义在相同的域中</span><span style="color: #008000;"><br /></span><span style="color: #000000;">relate div_relate(relate d_R ,relate d_S)        </span><span style="color: #008000;">//</span><span style="color: #008000;">division</span><span style="color: #008000;"><br /></span><span style="color: #000000;">{<br />    relate P;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, n </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> </span><span style="color: #800080;">25</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">) <br />    {<br />        P.num_tuple </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.num_row </span><span style="color: #000000;">=</span><span style="color: #000000;"> d_R.num_row </span><span style="color: #000000;">-</span><span style="color: #000000;"> d_S.num_row;    <br />        P.i_A[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_B[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_C[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_D[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_E[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        P.i_F[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">R(A,B,C)    S(A,B)<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">X的属性组：C<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">Y的属性组：A,B</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br />    P </span><span style="color: #000000;">=</span><span style="color: #000000;"> project_relate(d_R, </span><span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">);<br />    P </span><span style="color: #000000;">=</span><span style="color: #000000;"> car_pro_relate(d_S,P);<br />    P </span><span style="color: #000000;">=</span><span style="color: #000000;"> except_relate(P, d_R);<br />    P </span><span style="color: #000000;">=</span><span style="color: #000000;"> project_relate(P,</span><span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">);<br />    P </span><span style="color: #000000;">=</span><span style="color: #000000;"> except_relate(project_relate(d_R,</span><span style="color: #800000;">'</span><span style="color: #800000;">C</span><span style="color: #800000;">'</span><span style="color: #000000;">),P);    <br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> P;<br />}</span></div></pre>
</div>
</p>

<p>好了，写个主函数测试下：</p>
<p>
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;collapse:true;;gutter:true;">//main.cpp

#include "common.h"

#include &lt;iostream&gt;

using namespace std;

//并、交、差
void UIE(void)
{
	relate R, S, U, I, E;
	int i = 0;
	for (i = 0; i &lt; 25; i++) 
    {
		R.num_tuple = 3;    //记录元组个数
		R.num_row = 3;      //记录列数
		S.num_tuple = 3;    //记录元组个数
		S.num_row = 3;      //记录列数
        R.i_A[i] = 0;
        R.i_B[i] = 0;
        R.i_C[i] = 0;
        R.i_D[i] = 0;
        R.i_E[i] = 0;
        R.i_F[i] = 0;
		S.i_A[i] = 0;
        S.i_B[i] = 0;
        S.i_C[i] = 0;
        S.i_D[i] = 0;
        S.i_E[i] = 0;
        S.i_F[i] = 0;
    }
    //          R        |        S
    //----------------------------------------
    //    A  |  B  |  C  |   A  |  B  |  C
    //    1  |  1  |  2  |   1  |  2  |  1
    //    1  |  2  |  1  |   1  |  1  |  1
    //    2  |  2  |  3  |   2  |  2  |  3
    //----------------------------------------
    //
	
    R.i_A[0] = 1;
    R.i_A[1] = 1;
    R.i_A[2] = 2;
    R.i_B[0] = 1;
    R.i_B[1] = 2;
    R.i_B[2] = 2;
    R.i_C[0] = 2;
    R.i_C[1] = 1;
    R.i_C[2] = 3;
    S.i_A[0] = 1;
    S.i_A[1] = 1;
    S.i_A[2] = 2;
    S.i_B[0] = 2;
    S.i_B[1] = 1;
    S.i_B[2] = 2;
    S.i_C[0] = 1;
    S.i_C[1] = 1;
    S.i_C[2] = 3;
	
	cout &lt;&lt; "R:" &lt;&lt; endl;
	for (i = 0; i &lt; R.num_tuple; i++)
	{
        cout &lt;&lt; R.i_A[i] &lt;&lt; "\t" &lt;&lt; R.i_B[i] &lt;&lt; "\t" &lt;&lt; R.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
	}
	cout &lt;&lt; "S:" &lt;&lt; endl;
	for (i = 0; i &lt; S.num_tuple; i++)
	{
        cout &lt;&lt; S.i_A[i] &lt;&lt; "\t" &lt;&lt; S.i_B[i] &lt;&lt; "\t" &lt;&lt; S.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
	}
    U = union_relate(R, S);
    cout &lt;&lt; "\n" &lt;&lt; "并：" &lt;&lt; endl;
	for (i = 0; i &lt; U.num_tuple; i++)
    {
        cout &lt;&lt; U.i_A[i] &lt;&lt; "\t" &lt;&lt; U.i_B[i] &lt;&lt; "\t" &lt;&lt; U.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
    }
	I = intersect_relate(R,S);
	cout &lt;&lt; "交：" &lt;&lt; endl;
    for (i = 0; i &lt; I.num_tuple; i++)
    {
        cout &lt;&lt; I.i_A[i] &lt;&lt; "\t" &lt;&lt; I.i_B[i] &lt;&lt; "\t" &lt;&lt; I.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
    }
	E =except_relate(R,S);
	cout &lt;&lt; "差：" &lt;&lt; endl;
	for (i = 0; i &lt; E.num_tuple; i++)
    {
        cout &lt;&lt; E.i_A[i] &lt;&lt; "\t" &lt;&lt; E.i_B[i] &lt;&lt; "\t" &lt;&lt; E.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
    }

	return;
}

//笛卡尔积
void Car_pro(void)
{
	relate R, S, C;
	int i = 0;
	for (i = 0; i &lt; 25; i++) 
    {
		R.num_tuple = 2;    //记录元组个数
		R.num_row = 3;      //记录列数
		S.num_tuple = 3;    //记录元组个数
		S.num_row = 3;      //记录列数
        R.i_A[i] = 0;
        R.i_B[i] = 0;
        R.i_C[i] = 0;
        R.i_D[i] = 0;
        R.i_E[i] = 0;
        R.i_F[i] = 0;
		S.i_A[i] = 0;
        S.i_B[i] = 0;
        S.i_C[i] = 0;
        S.i_D[i] = 0;
        S.i_E[i] = 0;
        S.i_F[i] = 0;
    }
	//          R        |        S
    //----------------------------------------
    //    A  |  B  |  C  |   A  |  B  |  C
    //    1  |  1  |  2  |   1  |  2  |  1
    //    1  |  2  |  1  |   1  |  1  |  1
    //    2  |  2  |  3  |   2  |  2  |  3
    //----------------------------------------
    //
	
    R.i_A[0] = 1;
    R.i_A[1] = 1;
   // R.i_A[2] = 2;
    R.i_B[0] = 1;
    R.i_B[1] = 2;
   // R.i_B[2] = 2;
    R.i_C[0] = 2;
    R.i_C[1] = 1;
    //R.i_C[2] = 3;
    S.i_A[0] = 1;
    S.i_A[1] = 1;
    S.i_A[2] = 2;
    S.i_B[0] = 2;
    S.i_B[1] = 1;
    S.i_B[2] = 2;
    S.i_C[0] = 1;
    S.i_C[1] = 1;
    S.i_C[2] = 3;
	cout &lt;&lt; "\n" &lt;&lt;"R:" &lt;&lt; endl;
	for (i = 0; i &lt; R.num_tuple; i++)
	{
        cout &lt;&lt; R.i_A[i] &lt;&lt; "\t" &lt;&lt; R.i_B[i] &lt;&lt; "\t" &lt;&lt; R.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
	}
	cout &lt;&lt; "S:" &lt;&lt; endl;
	for (i = 0; i &lt; S.num_tuple; i++)
	{
        cout &lt;&lt; S.i_A[i] &lt;&lt; "\t" &lt;&lt; S.i_B[i] &lt;&lt; "\t" &lt;&lt; S.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
	}
	C =car_pro_relate(R,S);
	cout &lt;&lt; "\n" &lt;&lt; "笛卡尔积：" &lt;&lt; endl;
	for (i = 0; i &lt; C.num_tuple; i++)
	{
		cout &lt;&lt; C.i_A[i] &lt;&lt; "\t" &lt;&lt; C.i_B[i] &lt;&lt; "\t" &lt;&lt; C.i_C[i] &lt;&lt; "\t" &lt;&lt; C.i_D[i] &lt;&lt; "\t" &lt;&lt; C.i_E[i] &lt;&lt; "\t" &lt;&lt; C.i_F[i] &lt;&lt;endl;
		cout &lt;&lt; "---------------------------------------------" &lt;&lt; endl;
	}
}

//自然连接
void natural(void)
{
	relate R, S, N;
	int i = 0;
	for (i = 0; i &lt; 25; i++) 
    {
		R.num_tuple = 4;    //记录元组个数
		R.num_row = 3;      //记录列数
		S.num_tuple = 3;    //记录元组个数
		S.num_row = 3;      //记录列数
        R.i_A[i] = 0;
        R.i_B[i] = 0;
        R.i_C[i] = 0;
        R.i_D[i] = 0;
        R.i_E[i] = 0;
        R.i_F[i] = 0;
		S.i_A[i] = 0;
        S.i_B[i] = 0;
        S.i_C[i] = 0;
        S.i_D[i] = 0;
        S.i_E[i] = 0;
        S.i_F[i] = 0;
    }
	//            R              |              S
	//-----------------------------------------------------
	//    A   |   B    |   C     |      B   |   C   |   D
	//-----------------------------------------------------
	//    2   |   4    |   6     |      5   |   7   |   3
	//    3   |   5    |   7     |      4   |   6   |   2   
	//    7   |   4    |   6     |      5   |   7   |   9
	//    5   |   4    |   7     |
	//----------------------------------------------------
	R.i_A[0] = 2;
    R.i_A[1] = 3;
    R.i_A[2] = 7;
    R.i_A[3] = 5;
    R.i_B[0] = 4;
    R.i_B[1] = 5;
    R.i_B[2] = 4;
    R.i_B[3] = 4;
    R.i_C[0] = 6;
    R.i_C[1] = 7;
    R.i_C[2] = 6;
    R.i_C[3] = 7;

    S.i_B[0] = 5;
    S.i_B[1] = 4;
    S.i_B[2] = 5;
    S.i_C[0] = 7;
    S.i_C[1] = 6;
    S.i_C[2] = 7;
    S.i_D[0] = 3;
    S.i_D[1] = 2;
    S.i_D[2] = 9;
	cout &lt;&lt; "\n" &lt;&lt; "R:" &lt;&lt; endl;
	cout &lt;&lt; "R.A" &lt;&lt; "\t" &lt;&lt; "R.B" &lt;&lt; "\t" &lt;&lt; "R.C" &lt;&lt;endl;
	cout &lt;&lt; "--------------------" &lt;&lt; endl;
	for (i = 0; i &lt; R.num_tuple; i++)
	{
        cout &lt;&lt; R.i_A[i] &lt;&lt; "\t" &lt;&lt; R.i_B[i] &lt;&lt; "\t" &lt;&lt; R.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
	}
	cout &lt;&lt; "S:" &lt;&lt; endl;
	cout &lt;&lt; "S.B" &lt;&lt; "\t" &lt;&lt; "S.C" &lt;&lt; "\t" &lt;&lt; "S.D" &lt;&lt;endl;
	for (i = 0; i &lt; S.num_tuple; i++)
	{
        cout &lt;&lt; S.i_B[i] &lt;&lt; "\t" &lt;&lt; S.i_C[i] &lt;&lt; "\t" &lt;&lt; S.i_D[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
	}
	N = join_relate(R, S);
	cout &lt;&lt; "\n" &lt;&lt; "自然连接：" &lt;&lt; endl;
	cout &lt;&lt; "A" &lt;&lt; "\t" &lt;&lt; "B" &lt;&lt; "\t" &lt;&lt; "C" &lt;&lt; "\t" &lt;&lt; "D" &lt;&lt;endl;
	cout &lt;&lt; "-----------------------------" &lt;&lt; endl;
	for (i = 0; i &lt; N.num_tuple; i++)
	{
		cout &lt;&lt; N.i_A[i] &lt;&lt; "\t" &lt;&lt; N.i_B[i] &lt;&lt; "\t" &lt;&lt; N.i_C[i] &lt;&lt; "\t" &lt;&lt; N.i_D[i] &lt;&lt;endl;
		cout &lt;&lt; "-----------------------------" &lt;&lt; endl;
	}
	return;
}

//除法
void div(void)
{
	relate R, S, D;
	int i = 0;
	for (i = 0; i &lt; 25; i++) 
    {
		R.num_tuple = 5;    //记录元组个数
		R.num_row = 3;      //记录列数
		S.num_tuple = 2;    //记录元组个数
		S.num_row = 2;      //记录列数
        R.i_A[i] = 0;
        R.i_B[i] = 0;
        R.i_C[i] = 0;
        R.i_D[i] = 0;
        R.i_E[i] = 0;
        R.i_F[i] = 0;
		S.i_A[i] = 0;
        S.i_B[i] = 0;
        S.i_C[i] = 0;
        S.i_D[i] = 0;
        S.i_E[i] = 0;
        S.i_F[i] = 0;
    }
	//            R              |          S
	//----------------------------------------------
	//    A   |   B    |   C     |      A   |   B   
	//----------------------------------------------
	//    1   |   3    |   2     |      1   |   3   
	//    5   |   7    |   2     |      5   |   7    
	//    1   |   3    |   4     |     
	//    1   |   3    |   6     |
	//    5   |   7    |   6     | 
	//-----------------------------------------------
	R.i_A[0] = 1;
    R.i_A[1] = 5;
    R.i_A[2] = 1;
    R.i_A[3] = 1;
    R.i_A[4] = 5;
    R.i_B[0] = 3;
    R.i_B[1] = 7;
    R.i_B[2] = 3;
    R.i_B[3] = 3;
    R.i_B[4] = 7;
	R.i_C[0] = 2;
    R.i_C[1] = 2;
    R.i_C[2] = 4;
    R.i_C[3] = 6;
    R.i_C[4] = 6;
	
    S.i_A[0] = 1;
    S.i_A[1] = 5;
    S.i_B[0] = 3;
    S.i_B[1] = 7;
	cout &lt;&lt; "\n" &lt;&lt; "R:" &lt;&lt; endl;
	cout &lt;&lt; "R.A" &lt;&lt; "\t" &lt;&lt; "R.B" &lt;&lt; "\t" &lt;&lt; "R.C" &lt;&lt;endl;
	cout &lt;&lt; "--------------------" &lt;&lt; endl;
	for (i = 0; i &lt; R.num_tuple; i++)
	{
        cout &lt;&lt; R.i_A[i] &lt;&lt; "\t" &lt;&lt; R.i_B[i] &lt;&lt; "\t" &lt;&lt; R.i_C[i] &lt;&lt;endl;
		cout &lt;&lt; "--------------------" &lt;&lt; endl;
	}
	cout &lt;&lt; "S:" &lt;&lt; endl;
	cout &lt;&lt; "S.A" &lt;&lt; "\t" &lt;&lt; "S.B" &lt;&lt;endl;
	for (i = 0; i &lt; S.num_tuple; i++)
	{
        cout &lt;&lt; S.i_A[i] &lt;&lt; "\t" &lt;&lt; S.i_B[i] &lt;&lt;endl;
		cout &lt;&lt; "-------------" &lt;&lt; endl;
	}
	D = div_relate(R, S);
	cout &lt;&lt; "\n" &lt;&lt; "除法：" &lt;&lt; endl;
	cout &lt;&lt; "\t" &lt;&lt; "C" &lt;&lt;endl;
	cout &lt;&lt; "----------------" &lt;&lt; endl;
	for (i = 0; i &lt; D.num_tuple; i++)
	{
		cout  &lt;&lt; "\t" &lt;&lt; D.i_A[i] &lt;&lt;endl;
		cout &lt;&lt; "----------------" &lt;&lt; endl;
	}

	cout &lt;&lt; "\t\t\tOK! \n\t功能基本上实现了，但还是有多处不能推广（比如说有些属性组被限制）！\n " &lt;&lt; endl;
	return;
}
int main()
{

	UIE();
	Car_pro();
	natural();
    div();
    return 0;
}
</pre>
</div>
</p>
<pre class="brush:cpp;collapse:true;;gutter:true;">好，commom.h里的内容只是声明函数和定义结构体：</pre>
<p>
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;collapse:true;;gutter:true;">//commom.h

#ifndef COMMON_H_INCLUDED
#define COMMON_H_INCLUDED


typedef struct
{
    int num_tuple;    //记录元组个数
    int num_row;      //记录列数,即：目
    int i_A[25];
    int i_B[25];
    int i_C[25];
    int i_D[25];
    int i_E[25];
    int i_F[25];
}relate;

relate union_relate(relate u_R, relate u_S);      //union
relate except_relate(relate e_R, relate e_S);     //except
relate intersect_relate(relate i_R, relate i_S);  //intersection
relate car_pro_relate(relate c_R, relate c_S);    //cartesian product


relate project_relate(relate p_R, char ch);     //projection
relate join_relate(relate j_R, relate j_S);        //join
relate div_relate(relate d_R ,relate d_S);         //division

#endif // COMMON_H_INCLUDED
</pre>
<pre class="brush:cpp;collapse:true;;gutter:true;"><br /></pre>
</div>
</p>
<p>看看效果：</p>
<p><img src="http://pic002.cnblogs.com/images/2011/198486/2011031014302931.jpg" /><img src="http://pic002.cnblogs.com/images/2011/198486/2011031014310910.jpg" /><img src="http://pic002.cnblogs.com/images/2011/198486/2011031014311770.jpg" /><img src="http://pic002.cnblogs.com/images/2011/198486/2011031014312737.jpg" /><img src="http://pic002.cnblogs.com/images/2011/198486/2011031014313955.jpg" /></p>]]></description></item><item><title>分数四则运算器</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/08/1977610.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 08 Mar 2011 12:29:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/08/1977610.html</guid><description><![CDATA[<div>好的，先弄出个类来，代码如下:</div>
<div><b>
<div onclick="cnblogs_code_show('9dedb255-a844-4bd2-bc36-48729a1d31a0')" class="cnblogs_code"><img id="code_img_closed_9dedb255-a844-4bd2-bc36-48729a1d31a0" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /><img style="display: none;" onclick="cnblogs_code_hide('9dedb255-a844-4bd2-bc36-48729a1d31a0',event)" id="code_img_opened_9dedb255-a844-4bd2-bc36-48729a1d31a0" class="code_img_opened" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" /><span class="cnblogs_code_collapse">View Code </span>
<div class="cnblogs_code_hide" id="cnblogs_code_open_9dedb255-a844-4bd2-bc36-48729a1d31a0">
<pre><div><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> fraction<br /></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">&nbsp;</span><span style="color: #0000ff;">private</span><span style="color: #000000;">:<br /></span><span style="color: #008080;"> 4</span> <span style="color: #000000;"> </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> numerator;         </span><span style="color: #008000;">//</span><span style="color: #008000;">分子</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 5</span> <span style="color: #008000;"></span><span style="color: #000000;"> </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> denominator;       </span><span style="color: #008000;">//</span><span style="color: #008000;">分母</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 6</span> <span style="color: #008000;"></span><span style="color: #0000ff;">public</span><span style="color: #000000;">:<br /></span><span style="color: #008080;"> 7</span> <span style="color: #000000;"> fraction(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">);<br /></span><span style="color: #008080;"> 8</span> <span style="color: #000000;"> </span><span style="color: #000000;">~</span><span style="color: #000000;">fraction();<br /></span><span style="color: #008080;"> 9</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">10</span> <span style="color: #000000;"> </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction add(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w);<br /></span><span style="color: #008080;">11</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction add(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k);    </span><span style="color: #008000;">//</span><span style="color: #008000;"> " + "</span><span style="color: #008000;"><br /></span><span style="color: #008080;">12</span> <span style="color: #008000;"></span><span style="color: #000000;"><br /></span><span style="color: #008080;">13</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction sub(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w);   </span><span style="color: #008000;">//</span><span style="color: #008000;"> " - "</span><span style="color: #008000;"><br /></span><span style="color: #008080;">14</span> <span style="color: #008000;"></span><span style="color: #000000;">        </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction sub(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k);<br /></span><span style="color: #008080;">15</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">16</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction mul(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w);   </span><span style="color: #008000;">//</span><span style="color: #008000;"> " * "</span><span style="color: #008000;"><br /></span><span style="color: #008080;">17</span> <span style="color: #008000;"></span><span style="color: #000000;">        </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction mul(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k);<br /></span><span style="color: #008080;">18</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">19</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction div(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w);   </span><span style="color: #008000;">//</span><span style="color: #008000;"> " / "</span><span style="color: #008000;"><br /></span><span style="color: #008080;">20</span> <span style="color: #008000;"></span><span style="color: #000000;">        </span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction div(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k);<br /></span><span style="color: #008080;">21</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">22</span> <span style="color: #000000;">          </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> commonden(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">23</span> <span style="color: #000000;">          </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> show(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">24</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">25</span> <span style="color: #000000;">          </span><span style="color: #008000;">//</span><span style="color: #008000;">增加的成员函数</span><span style="color: #008000;"><br /></span><span style="color: #008080;">26</span> <span style="color: #008000;"></span><span style="color: #000000;">          </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setn(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x);      </span><span style="color: #008000;">//</span><span style="color: #008000;">设定分子</span><span style="color: #008000;"><br /></span><span style="color: #008080;">27</span> <span style="color: #008000;"></span><span style="color: #000000;">          </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setd(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y);      </span><span style="color: #008000;">//</span><span style="color: #008000;">设定分母</span><span style="color: #008000;"><br /></span><span style="color: #008080;">28</span> <span style="color: #008000;"></span><span style="color: #000000;">          </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getn(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)</span><span style="color: #0000ff;">const</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">29</span> <span style="color: #000000;">          </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getd(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)</span><span style="color: #0000ff;">const</span><span style="color: #000000;">;<br /></span><span style="color: #008080;">30</span> <span style="color: #000000;">};</span></div></pre>
</div>
</div>
<br /></b></div>
<div>各成员实现如下：</div>
<div>
<div>
<div onclick="cnblogs_code_show('dac6768e-2312-4594-8aca-ac88e583b2d5')" class="cnblogs_code"><img id="code_img_closed_dac6768e-2312-4594-8aca-ac88e583b2d5" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /><img style="display: none;" onclick="cnblogs_code_hide('dac6768e-2312-4594-8aca-ac88e583b2d5',event)" id="code_img_opened_dac6768e-2312-4594-8aca-ac88e583b2d5" class="code_img_opened" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" /><span class="cnblogs_code_collapse">View Code </span>
<div class="cnblogs_code_hide" id="cnblogs_code_open_dac6768e-2312-4594-8aca-ac88e583b2d5">
<pre><div><span style="color: #008080;">  1</span> <span style="color: #008000;">//</span><span style="color: #008000;">构造函数</span><span style="color: #008000;"><br /></span><span style="color: #008080;">  2</span> <span style="color: #008000;"></span><span style="color: #000000;">fraction::fraction(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y)<br /></span><span style="color: #008080;">  3</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;">  4</span> <span style="color: #000000;"> 　　numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> x;<br /></span><span style="color: #008080;">  5</span> <span style="color: #000000;"> 　　</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (y </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">  6</span> <span style="color: #000000;"> 　　{<br /></span><span style="color: #008080;">  7</span> <span style="color: #000000;"> 　　　　cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">分母为0</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br /></span><span style="color: #008080;">  8</span> <span style="color: #000000;"> 　　　　exit(</span><span style="color: #800080;">0</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">  9</span> <span style="color: #000000;"> 　　}<br /></span><span style="color: #008080;"> 10</span> <span style="color: #000000;"> 　　denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> y;<br /></span><span style="color: #008080;"> 11</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 12</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 13</span> <span style="color: #000000;">fraction::</span><span style="color: #000000;">~</span><span style="color: #000000;">fraction()<br /></span><span style="color: #008080;"> 14</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 15</span> <span style="color: #000000;"> 　　</span><span style="color: #008000;">//</span><span style="color: #008000;">虚构函数</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 16</span> <span style="color: #008000;"></span><span style="color: #000000;">}<br /></span><span style="color: #008080;"> 17</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">加法</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 18</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::add(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w)<br /></span><span style="color: #008080;"> 19</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 20</span> <span style="color: #000000;">    fraction z;<br /></span><span style="color: #008080;"> 21</span> <span style="color: #000000;">    z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.denominator </span><span style="color: #000000;">+</span><span style="color: #000000;"> w.numerator </span><span style="color: #000000;">*</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;"> 22</span> <span style="color: #000000;">    z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.numerator;<br /></span><span style="color: #008080;"> 23</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;"> 24</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 25</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 26</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">成员函数的重载<br /></span><span style="color: #008080;"> 27</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">分数 + 整数</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 28</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::add(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k)<br /></span><span style="color: #008080;"> 29</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 30</span> <span style="color: #000000;">fraction z;<br /></span><span style="color: #008080;"> 31</span> <span style="color: #000000;">z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator </span><span style="color: #000000;">+</span><span style="color: #000000;"> k</span><span style="color: #000000;">*</span><span style="color: #000000;">denominator;<br /></span><span style="color: #008080;"> 32</span> <span style="color: #000000;">z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;"> 33</span> <span style="color: #000000;"></span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;"> 34</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 35</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 36</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">减法</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 37</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::sub(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w)<br /></span><span style="color: #008080;"> 38</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 39</span> <span style="color: #000000;">    fraction z;<br /></span><span style="color: #008080;"> 40</span> <span style="color: #000000;">    z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.denominator </span><span style="color: #000000;">-</span><span style="color: #000000;"> w.numerator </span><span style="color: #000000;">*</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;"> 41</span> <span style="color: #000000;">    z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.numerator;<br /></span><span style="color: #008080;"> 42</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;"> 43</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 44</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 45</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">成员函数的重载<br /></span><span style="color: #008080;"> 46</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">分数 - 整数</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 47</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::sub(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k)<br /></span><span style="color: #008080;"> 48</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 49</span> <span style="color: #000000;">fraction z;<br /></span><span style="color: #008080;"> 50</span> <span style="color: #000000;">z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator </span><span style="color: #000000;">-</span><span style="color: #000000;"> k</span><span style="color: #000000;">*</span><span style="color: #000000;">denominator;<br /></span><span style="color: #008080;"> 51</span> <span style="color: #000000;">z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;"> 52</span> <span style="color: #000000;"></span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;"> 53</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 54</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 55</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">乘法</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 56</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::mul(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w)<br /></span><span style="color: #008080;"> 57</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 58</span> <span style="color: #000000;">    fraction z;<br /></span><span style="color: #008080;"> 59</span> <span style="color: #000000;">    z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.numerator;<br /></span><span style="color: #008080;"> 60</span> <span style="color: #000000;">    z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.denominator;<br /></span><span style="color: #008080;"> 61</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;"> 62</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 63</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 64</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">成员函数的重载<br /></span><span style="color: #008080;"> 65</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">分数 * 整数</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 66</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::mul(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k)<br /></span><span style="color: #008080;"> 67</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 68</span> <span style="color: #000000;">fraction z;<br /></span><span style="color: #008080;"> 69</span> <span style="color: #000000;">z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> k </span><span style="color: #000000;">*</span><span style="color: #000000;"> numerator;<br /></span><span style="color: #008080;"> 70</span> <span style="color: #000000;">z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;"> 71</span> <span style="color: #000000;"></span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;"> 72</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 73</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 74</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">除法</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 75</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::div(</span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction w)<br /></span><span style="color: #008080;"> 76</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 77</span> <span style="color: #000000;">    fraction z;<br /></span><span style="color: #008080;"> 78</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (numerator </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> </span><span style="color: #000000;">||</span><span style="color: #000000;"> w.numerator </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br /></span><span style="color: #008080;"> 79</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;"> 80</span> <span style="color: #000000;">        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">两个分子为零的分数相除没有意义</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br /></span><span style="color: #008080;"> 81</span> <span style="color: #000000;">        exit(</span><span style="color: #800080;">0</span><span style="color: #000000;">);<br /></span><span style="color: #008080;"> 82</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;"> 83</span> <span style="color: #000000;">    z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.denominator;<br /></span><span style="color: #008080;"> 84</span> <span style="color: #000000;">    z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator </span><span style="color: #000000;">*</span><span style="color: #000000;"> w.numerator;<br /></span><span style="color: #008080;"> 85</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;"> 86</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;"> 87</span> <span style="color: #000000;"><br /></span><span style="color: #008080;"> 88</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">成员函数的重载<br /></span><span style="color: #008080;"> 89</span> <span style="color: #008000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">分数 / 整数</span><span style="color: #008000;"><br /></span><span style="color: #008080;"> 90</span> <span style="color: #008000;"></span><span style="color: #0000ff;">const</span><span style="color: #000000;"> fraction fraction::div(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> k)<br /></span><span style="color: #008080;"> 91</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;"> 92</span> <span style="color: #000000;">　 fraction z;<br /></span><span style="color: #008080;"> 93</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (numerator </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;"> </span><span style="color: #000000;">||</span><span style="color: #000000;"> k </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br /></span><span style="color: #008080;"> 94</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;"> 95</span> <span style="color: #000000;">        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">两个分子为零的分数相除没有意义</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br /></span><span style="color: #008080;"> 96</span> <span style="color: #000000;">        exit(</span><span style="color: #800080;">0</span><span style="color: #000000;">);<br /></span><span style="color: #008080;"> 97</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;"> 98</span> <span style="color: #000000;">z.numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator;<br /></span><span style="color: #008080;"> 99</span> <span style="color: #000000;">z.denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> k </span><span style="color: #000000;">*</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;">100</span> <span style="color: #000000;"></span><span style="color: #0000ff;">return</span><span style="color: #000000;"> z;<br /></span><span style="color: #008080;">101</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;">102</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">103</span> <span style="color: #000000;"></span><span style="color: #008000;">//</span><span style="color: #008000;">函数功能：使输出的分数为真分数</span><span style="color: #008000;"><br /></span><span style="color: #008080;">104</span> <span style="color: #008000;"></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> fraction::commonden(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">105</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;">106</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> m,n,p;<br /></span><span style="color: #008080;">107</span> <span style="color: #000000;">    m </span><span style="color: #000000;">=</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;">108</span> <span style="color: #000000;">    n </span><span style="color: #000000;">=</span><span style="color: #000000;"> numerator;<br /></span><span style="color: #008080;">109</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">do</span><span style="color: #000000;"><br /></span><span style="color: #008080;">110</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;">111</span> <span style="color: #000000;">        p </span><span style="color: #000000;">=</span><span style="color: #000000;"> m </span><span style="color: #000000;">%</span><span style="color: #000000;"> n;<br /></span><span style="color: #008080;">112</span> <span style="color: #000000;">        m </span><span style="color: #000000;">=</span><span style="color: #000000;"> n;<br /></span><span style="color: #008080;">113</span> <span style="color: #000000;">        n </span><span style="color: #000000;">=</span><span style="color: #000000;"> p;<br /></span><span style="color: #008080;">114</span> <span style="color: #000000;">    }</span><span style="color: #0000ff;">while</span><span style="color: #000000;">(p </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">);<br /></span><span style="color: #008080;">115</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> m;<br /></span><span style="color: #008080;">116</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;">117</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">118</span> <span style="color: #000000;"></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> fraction::show(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">119</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;">120</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (numerator </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br /></span><span style="color: #008080;">121</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;">122</span> <span style="color: #000000;">        cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;"> = 0</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br /></span><span style="color: #008080;">123</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;">124</span> <span style="color: #000000;">    </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br /></span><span style="color: #008080;">125</span> <span style="color: #000000;">    {<br /></span><span style="color: #008080;">126</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (numerator </span><span style="color: #000000;">==</span><span style="color: #000000;"> denominator)<br /></span><span style="color: #008080;">127</span> <span style="color: #000000;">        {<br /></span><span style="color: #008080;">128</span> <span style="color: #000000;">            cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;"> = 1</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br /></span><span style="color: #008080;">129</span> <span style="color: #000000;">        }<br /></span><span style="color: #008080;">130</span> <span style="color: #000000;">        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br /></span><span style="color: #008080;">131</span> <span style="color: #000000;">        {<br /></span><span style="color: #008080;">132</span> <span style="color: #000000;">            cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;"> = </span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> numerator</span><span style="color: #000000;">/</span><span style="color: #000000;">commonden() </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">/</span><span style="color: #800000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> denominator</span><span style="color: #000000;">/</span><span style="color: #000000;">commonden() </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> endl;<br /></span><span style="color: #008080;">133</span> <span style="color: #000000;">        }<br /></span><span style="color: #008080;">134</span> <span style="color: #000000;">    }<br /></span><span style="color: #008080;">135</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;">136</span> <span style="color: #000000;"><br /></span><span style="color: #008080;">137</span> <span style="color: #000000;"></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> fraction::setn(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x)      </span><span style="color: #008000;">//</span><span style="color: #008000;">设定分子</span><span style="color: #008000;"><br /></span><span style="color: #008080;">138</span> <span style="color: #008000;"></span><span style="color: #000000;">{<br /></span><span style="color: #008080;">139</span> <span style="color: #000000;">numerator </span><span style="color: #000000;">=</span><span style="color: #000000;"> x;<br /></span><span style="color: #008080;">140</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;">141</span> <span style="color: #000000;"></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> fraction::setd(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> y)      </span><span style="color: #008000;">//</span><span style="color: #008000;">设定分母</span><span style="color: #008000;"><br /></span><span style="color: #008080;">142</span> <span style="color: #008000;"></span><span style="color: #000000;">{<br /></span><span style="color: #008080;">143</span> <span style="color: #000000;">denominator </span><span style="color: #000000;">=</span><span style="color: #000000;"> y;<br /></span><span style="color: #008080;">144</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;">145</span> <span style="color: #000000;"></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> fraction::getn(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)</span><span style="color: #0000ff;">const</span><span style="color: #000000;"><br /></span><span style="color: #008080;">146</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;">147</span> <span style="color: #000000;"></span><span style="color: #0000ff;">return</span><span style="color: #000000;"> numerator;<br /></span><span style="color: #008080;">148</span> <span style="color: #000000;">}<br /></span><span style="color: #008080;">149</span> <span style="color: #000000;"></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> fraction::getd(</span><span style="color: #0000ff;">void</span><span style="color: #000000;">)</span><span style="color: #0000ff;">const</span><span style="color: #000000;"><br /></span><span style="color: #008080;">150</span> <span style="color: #000000;">{<br /></span><span style="color: #008080;">151</span> <span style="color: #000000;"></span><span style="color: #0000ff;">return</span><span style="color: #000000;"> denominator;<br /></span><span style="color: #008080;">152</span> <span style="color: #000000;">}</span></div></pre>
</div>
</div>
</div>
</div>
<div>
</div>
<div>好了，写个主函数来测试下</div>
<div><b>
<div onclick="cnblogs_code_show('0edc7d17-51ae-43c1-ba66-ee788f083d61')" class="cnblogs_code"><img id="code_img_closed_0edc7d17-51ae-43c1-ba66-ee788f083d61" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /><img style="display: none;" onclick="cnblogs_code_hide('0edc7d17-51ae-43c1-ba66-ee788f083d61',event)" id="code_img_opened_0edc7d17-51ae-43c1-ba66-ee788f083d61" class="code_img_opened" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" /><span class="cnblogs_code_collapse">View Code </span>
<div class="cnblogs_code_hide" id="cnblogs_code_open_0edc7d17-51ae-43c1-ba66-ee788f083d61">
<pre><div><span style="color: #0000ff;">void</span><span style="color: #000000;"> main()<br />{<br />　　fraction w(</span><span style="color: #800080;">6</span><span style="color: #000000;">,</span><span style="color: #800080;">7</span><span style="color: #000000;">),t(</span><span style="color: #800080;">9</span><span style="color: #000000;">,</span><span style="color: #800080;">5</span><span style="color: #000000;">),d;<br /><br />      cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) + (9/5)</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />      d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.add(t);<br />      d.show();<br />      cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br /><br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) + 1</span><span style="color: #800000;">"</span><span style="color: #000000;">;  </span><span style="color: #008000;">//</span><span style="color: #008000;">       6                  13</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.add(</span><span style="color: #800080;">1</span><span style="color: #000000;">);           </span><span style="color: #008000;">//</span><span style="color: #008000;">       -    +   1   =    -</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    d.show();                 </span><span style="color: #008000;">//</span><span style="color: #008000;">       7                   7</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br /><br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) - (9/5)</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.sub(t);<br />    d.show();<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br /><br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) - 1</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.sub(</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />    d.show();<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br /><br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) * (9/5)</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.mul(t);<br />    d.show();<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br /><br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) * 2</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.mul(</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br />    d.show();<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br /><br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) / (9/5)</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.div(t);<br />    d.show();<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br /><br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> </span><span style="color: #800000;">"</span><span style="color: #800000;">(6/7) / 2</span><span style="color: #800000;">"</span><span style="color: #000000;">;<br />    d </span><span style="color: #000000;">=</span><span style="color: #000000;"> w.div(</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br />    d.show();<br />    cout </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">endl;<br />　</span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ;<br />}</span></div></pre>
</div>
</div>
<br /></b></div>
<div>来看看测试结果吧！</div>
<div><br /><a target="_blank" appendurl="1" href="http://b60.photo.store.qq.com/http_imgload.cgi?/rurl4_b=46545c4dd2a2aec3736f8dad3aff948e7dbe90500c332bf614d4ff836bc44dc30b4fed6ee37c2841f783162ac87e106768628656acf17b759cbd8799e5c080de0178c4f6c4e9bdb875398506d88f797b024dd482&amp;a=60&amp;b=60"><img width="670" src="http://b60.photo.store.qq.com/http_imgload.cgi?/rurl4_b=46545c4dd2a2aec3736f8dad3aff948e7dbe90500c332bf614d4ff836bc44dc30b4fed6ee37c2841f783162ac87e106768628656acf17b759cbd8799e5c080de0178c4f6c4e9bdb875398506d88f797b024dd482&amp;a=60&amp;b=60" orgsrc="http://b60.photo.store.qq.com/http_imgload.cgi?/rurl4_b=46545c4dd2a2aec3736f8dad3aff948e7dbe90500c332bf614d4ff836bc44dc30b4fed6ee37c2841f783162ac87e106768628656acf17b759cbd8799e5c080de0178c4f6c4e9bdb875398506d88f797b024dd482&amp;a=60&amp;b=60" height="435" appendurl="1" alt="图片" /></a></div>]]></description></item><item><title>我的c++命名规范</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/08/1977101.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 08 Mar 2011 05:11:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/08/1977101.html</guid><description><![CDATA[<p align="left"><strong><span style="color: #0000ff;">作用域前缀:</span></strong></p>
<p align="left">作用域前缀标明一个变量的可见范围。作用域可以有如下几种：</p>
<p align="left"><strong><span style="color: #0000ff;">前缀&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 说明</span></strong></p>
<p align="left"><strong><span style="color: #0000ff;">无 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 局部变量</span></strong></p>
<p align="left"><strong><span style="color: #0000ff;">m_ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 类的成员变量（member）</span></strong></p>
<p align="left"><strong><span style="color: #0000ff;">sm_&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 类的静态成员变量（static member）</span></strong></p>
<p align="left"><strong><span style="color: #0000ff;">s_ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 静态变量（static）</span></strong></p>
<p align="left"><strong><span style="color: #0000ff;">g_ &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;外部全局变量（global）</span></strong></p>
<p align="left"><strong><span style="color: #0000ff;">sg_&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 静态全局变量（static global）</span></strong></p>
<p align="left"><strong><span style="color: #0000ff;">gg_&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进程间共享的共享数据段全局变量（global global）</span></strong></p>
<p align="left">&nbsp;</p>
<p align="left"><strong>类型前缀:</strong></p>
<p align="left">类型前缀标明一个变量的类型，可以有如下几种：</p>
<p align="left"><span style="color: #0000ff;"><strong>前　缀&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
类　　型&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;布尔值
(Boolean)&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;数组
(Array)&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
ch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
有符号字符 (Char)&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;字符串型&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
sz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;以null做结尾的字符串型 (String with
Zero End)&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
w&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;Word&nbsp;</strong></span></p>
<p align="left"><span style="color: #0000ff;"><strong>dw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;Double Word&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
fn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;函数&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;Handle（句柄）&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; 短整型 (Short
Int)&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; 整型&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; 长整型 (Long
Int)&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
p&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;Pointer&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
lp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; Long Pointer&nbsp;&nbsp;</strong></span><br /><span style="color: #0000ff;"><strong>
np&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp; Near Pointer&nbsp;&nbsp;</strong></span><b><br />
<br />
</b><b></b></p>
<p align="left"><b>变量的命名:</b></p>
<p align="left">变量名由<span style="color: #0000ff;"><b>作用域前缀_类型前缀_一个或多个单词</b></span>组成, 单词间通过下划线来界定。 </p>
<p align="left">对于某些用途简单明了的局部变量，也可以使用简化的方式，如：i, j, k, x, y, z ....</p>
<p align="left">&nbsp;</p>
<p align="left"><b>常量的命名:</b></p>
<p align="left">常量名由<span style="color: #0000ff;"><b>类型前缀_全大写字母</b></span>组成，单词间通过下划线来界定，如：<b>c_DELIMITER</b>,<b> n_MAX_BUFFER</b> ....</p>
<p>类型前缀的定义与变量命名规则中的相同。</p>]]></description></item><item><title>匈牙利命名法</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/07/1976473.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 07 Mar 2011 14:26:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/07/1976473.html</guid><description><![CDATA[<p>匈牙利命名法是一种<a class="innerlink" href="http://www.hudong.com/wiki/%E7%BC%96%E7%A8%8B" title="编程">编程</a>时的命名规范。基本<a class="innerlink" href="http://www.hudong.com/wiki/%E5%8E%9F%E5%88%99" title="原则">原则</a>是：<a class="link_red" href="http://www.hudong.com/wiki/%E5%8C%88%E7%89%99%E5%88%A9%E5%91%BD%E5%90%8D%E6%B3%95" title="变量名">变量名</a>＝<a class="innerlink" href="http://www.hudong.com/wiki/%E5%B1%9E%E6%80%A7" title="属性" target="_blank">属性</a>＋<a class="innerlink" href="http://www.hudong.com/wiki/%E7%B1%BB%E5%9E%8B" title="类型" target="_blank">类型</a>＋<a class="innerlink" href="http://www.hudong.com/wiki/%E5%AF%B9%E8%B1%A1" title="对象" target="_blank">对象</a>描述，其中每一对象的名称都要求有明确含义，可以取对象名字全称或名字的一部分。命名要基于容易记忆容易理解的原则。保证名字的连贯性是非常重要的。&nbsp;<br /><br />据说这种命名法是一位叫 Charles Simonyi 的匈牙利程序员发明的，后来他在微软呆了几年，于是这种命名法就通过微软的各种产品和文档资料向世界传播开了。现在，大部分程序员不管自己使用什么软件进行开发，或多或少都使用了这种命名法。这种命名法的出发点是把量名变按：属性+类型+对象描述的顺序组合起来，以使程序员作变量时对变量的类型和其它属性有直观的了解，下面是HN变量命名规范，其中也有一些是我个人的偏向：&nbsp;</p>
<p>全局变量&nbsp;<br />g_&nbsp;<br />常量&nbsp;<br />c_&nbsp;<br />c++类成员变量&nbsp;<br />m_&nbsp;<br />静态变量&nbsp;<br />s_&nbsp;<br /><br />类型部分&nbsp;<br />指针&nbsp;<br />p&nbsp;<br />函数&nbsp;<br />fn&nbsp;<br />无效&nbsp;<br />v&nbsp;<br />句柄&nbsp;<br />h&nbsp;<br />长整型&nbsp;<br />l&nbsp;<br />布尔&nbsp;<br />b&nbsp;<br />浮点型（有时也指文件）&nbsp;<br />f&nbsp;<br />双字&nbsp;<br />dw&nbsp;<br />字符串&nbsp;<br />sz&nbsp;<br />短整型&nbsp;<br />n&nbsp;<br />双精度浮点&nbsp;<br />d&nbsp;<br />计数&nbsp;<br />c（通常用cnt）&nbsp;<br />字符&nbsp;<br />ch（通常用c）&nbsp;<br />整型&nbsp;<br />i（通常用n）&nbsp;<br />字节&nbsp;<br />by&nbsp;<br />字&nbsp;<br />w&nbsp;<br />实型&nbsp;<br />r&nbsp;<br />无符号&nbsp;<br />u&nbsp;<br /><br />描述部分&nbsp;<br />最大&nbsp;<br />Max&nbsp;<br />最小&nbsp;<br />Min&nbsp;<br />初始化&nbsp;<br />Init&nbsp;<br />临时变量&nbsp;<br />T（或Temp）&nbsp;<br />源对象&nbsp;<br />Src&nbsp;<br />目的对象&nbsp;<br />Dest&nbsp;<br /><br /><br />这里顺便写几个例子：&nbsp;<br />hwnd ： h 是类型描述，表示句柄， wnd 是变量对象描述，表示窗口，所以 hwnd 表示窗口句柄；&nbsp;<br />pfnEatApple ： pfn 是类型描述，表示指向函数的指针， EatApple 是变量对象描述，所以它表示&nbsp;<br />指向 EatApple 函数的函数指针变量。&nbsp;<br />g_cch ： g_ 是属性描述，表示全局变量，c 和 ch 分别是计数类型和字符类型，一起表示变量类&nbsp;<br />型，这里忽略了对象描述，所以它表示一个对字符进行计数的全局变量。&nbsp;<br />上面就是HN命名法的一般规则。&nbsp;<br /><br /><br />小结:匈牙利命名法&nbsp;<br /><br />匈牙利命名法&nbsp;<br /><br /><br />MFC、句柄、控件及结构的命名规范 Windows类型 样本变量 MFC类 样本变量&nbsp;<br />HWND hWnd； CWnd* pWnd；&nbsp;<br />HDLG hDlg； CDialog* pDlg；&nbsp;<br />HDC hDC； CDC* pDC；&nbsp;<br />HGDIOBJ hGdiObj； CGdiObject* pGdiObj；&nbsp;<br />HPEN hPen； CPen* pPen；&nbsp;<br />HBRUSH hBrush； CBrush* pBrush；&nbsp;<br />HFONT hFont； CFont* pFont；&nbsp;<br />HBITMAP hBitmap； CBitmap* pBitmap；&nbsp;<br />HPALETTE hPaltte； CPalette* pPalette；&nbsp;<br />HRGN hRgn； CRgn* pRgn；&nbsp;<br />HMENU hMenu； CMenu* pMenu；&nbsp;<br />HWND hCtl； CState* pState；&nbsp;<br />HWND hCtl； CButton* pButton；&nbsp;<br />HWND hCtl； CEdit* pEdit；&nbsp;<br />HWND hCtl； CListBox* pListBox；&nbsp;<br />HWND hCtl； CComboBox* pComboBox；&nbsp;<br />HWND hCtl； CScrollBar* pScrollBar；&nbsp;<br />HSZ hszStr； CString pStr；&nbsp;<br />POINT pt； CPoint pt；&nbsp;<br />SIZE size； CSize size；&nbsp;<br />RECT rect； CRect rect；&nbsp;<br /><br /><br />一般前缀命名规范 前缀 类型 实例&nbsp;<br />C 类或结构 CDocument，CPrintInfo&nbsp;<br />m_ 成员变量 m_pDoc，m_nCustomers&nbsp;<br /><br /><br />变量命名规范 前缀 类型 描述 实例&nbsp;<br />ch char 8位字符 chGrade&nbsp;<br />ch TCHAR 如果_UNICODE定义，则为16位字符 chName&nbsp;<br />b BOOL 布尔值 bEnable&nbsp;<br />n int 整型（其大小依赖于操作系统） nLength&nbsp;<br />n UINT 无符号值（其大小依赖于操作系统） nHeight&nbsp;<br />w WORD 16位无符号值 wPos&nbsp;<br />l LONG 32位有符号整型 lOffset&nbsp;<br />dw DWORD 32位无符号整型 dwRange&nbsp;<br />p * 指针 pDoc&nbsp;<br />lp FAR* 远指针 lpszName&nbsp;<br />lpsz LPSTR 32位字符串指针 lpszName&nbsp;<br />lpsz LPCSTR 32位常量字符串指针 lpszName&nbsp;<br />lpsz LPCTSTR 如果_UNICODE定义，则为32位常量字符串指针 lpszName&nbsp;<br />h handle Windows对象句柄 hWnd&nbsp;<br />lpfn callback 指向CALLBACK函数的远指针&nbsp;<br /><br /><br />前缀 符号类型 实例 范围&nbsp;<br />IDR_ 不同类型的多个资源共享标识 IDR_MAIINFRAME 1～0x6FFF&nbsp;<br />IDD_ 对话框资源 IDD_SPELL_CHECK 1～0x6FFF&nbsp;<br />HIDD_ 对话框资源的Help上下文 HIDD_SPELL_CHECK 0x20001～0x26FF&nbsp;<br />IDB_ 位图资源 IDB_COMPANY_LOGO 1～0x6FFF&nbsp;<br />IDC_ 光标资源 IDC_PENCIL 1～0x6FFF&nbsp;<br />IDI_ 图标资源 IDI_NOTEPAD 1～0x6FFF&nbsp;<br />ID_ 来自菜单项或工具栏的命令 ID_TOOLS_SPELLING 0x8000～0xDFFF&nbsp;<br />HID_ 命令Help上下文 HID_TOOLS_SPELLING 0x18000～0x1DFFF&nbsp;<br />IDP_ 消息框提示 IDP_INVALID_PARTNO 8～0xDEEF&nbsp;<br />HIDP_ 消息框Help上下文 HIDP_INVALID_PARTNO 0x30008～0x3DEFF&nbsp;<br />IDS_ 串资源 IDS_COPYRIGHT 1～0x7EEF&nbsp;<br />IDC_ 对话框内的控件 IDC_RECALC 8～0xDEEF&nbsp;<br /><br /><br />Microsoft MFC宏命名规范 名称 类型&nbsp;<br />_AFXDLL 唯一的动态连接库（Dynamic Link Library，DLL）版本&nbsp;<br />_ALPHA 仅编译DEC Alpha处理器&nbsp;<br />_DEBUG 包括诊断的调试版本&nbsp;<br />_MBCS 编译多字节字符集&nbsp;<br />_UNICODE 在一个应用程序中打开Unicode&nbsp;<br />AFXAPI MFC提供的函数&nbsp;<br />CALLBACK 通过指针回调的函数&nbsp;<br /><br /><br />库标识符命名法 标识符 值和含义&nbsp;<br />u ANSI（N）或Unicode（U）&nbsp;<br />d 调试或发行：D = 调试；忽略标识符为发行。&nbsp;<br /><br /><br />静态库版本命名规范 库 描述&nbsp;<br />NAFXCWD.LIB 调试版本：MFC静态连接库&nbsp;<br />NAFXCW.LIB 发行版本：MFC静态连接库&nbsp;<br />UAFXCWD.LIB 调试版本：具有Unicode支持的MFC静态连接库&nbsp;<br />UAFXCW.LIB 发行版本：具有Unicode支持的MFC静态连接库&nbsp;<br /><br /><br />动态连接库命名规范 名称 类型&nbsp;<br />_AFXDLL 唯一的动态连接库（DLL）版本&nbsp;<br />WINAPI Windows所提供的函数&nbsp;<br /><br /><br />Windows.h中新的命名规范 类型 定义描述&nbsp;<br />WINAPI 使用在API声明中的FAR PASCAL位置，如果正在编写一个具有导出API人口点的DLL，则可以在自己的API中使用该类型&nbsp;<br />CALLBACK 使用在应用程序回叫例程，如窗口和对话框过程中的FAR PASCAL的位置&nbsp;<br />LPCSTR 与LPSTR相同，只是LPCSTR用于只读串指针，其定义类似（const char FAR*）&nbsp;<br />UINT 可移植的无符号整型类型，其大小由主机环境决定（对于Windows NT和Windows 9x为32位）；它是unsigned int的同义词&nbsp;<br />LRESULT 窗口程序返回值的类型&nbsp;<br />LPARAM 声明lParam所使用的类型，lParam是窗口程序的第四个参数&nbsp;<br />WPARAM 声明wParam所使用的类型，wParam是窗口程序的第三个参数&nbsp;<br />LPVOID 一般指针类型，与（void *）相同，可以用来代替LPSTR</p>]]></description></item><item><title>在终端模式下可以使用curses函数库。 在图形界面下Gnome系统可以使用Gtk,   KDE系统可是使用Qt.  最保险的是用Java,   跨平台</title><link>http://www.cnblogs.com/hanxi/archive/2011/03/06/1972437.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 06 Mar 2011 11:31:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/03/06/1972437.html</guid><description><![CDATA[编辑器加载中...在终端模式下可以使用curses函数库。
在图形界面下Gnome系统可以使用Gtk,   KDE系统可是使用Qt.

最保险的是用Java,   跨平台]]></description></item><item><title>没有找到MSVCR80D.dll的解决方案【转载】</title><link>http://www.cnblogs.com/hanxi/archive/2011/02/27/1966461.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sun, 27 Feb 2011 12:24:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2011/02/27/1966461.html</guid><description><![CDATA[【转载】：<a href="http://hi.baidu.com/silyt/blog/item/9f8479add4a2f50c4b36d6a7.html">http://hi.baidu.com/silyt/blog/item/9f8479add4a2f50c4b36d6a7.html</a>
在VS 2005中建立Win32工程时（以VS 2005中文版为例），你可能会遇到这样的运行错误：&ldquo;没有找到MSVCP80D.dll，因此这个应用程序未能启动。重新安装应用程序可能会修复此问题。&rdquo;（还可能是其它几个类似的文件：MSVCR80D.dll、MSVCM80D.dll）。对于VS2005新手，可能遇到的第一个问题便是此问题。
     出现这个问题是因为，VS 2005在生成可执行文件时使用了一种新的技术，该技术生成的可执行文件会伴随生成一个清单文件（manifest file）（.manifest后缀文件）（其本质上是XML文档，你可以用文本编辑器打开看看），并在链接完成后将该清单文件嵌入到exe文件中（默认情况下）。这是个新功能，微软弄了个新工具（mt.exe），而在FAT32文件系统中，在处理清单文件阶段，当增量链接时不能完成清单文件的更新（默认情况下），于是造成清单文件嵌入失败，从而使该exe文件运行时没有相应的清单文件而运行失败并提示如上错误。
    解决方案很多，列举如下：
    1．     微软官方：在项目的&ldquo;属性｜配置属性｜清单工具｜常规&rdquo;中的&ldquo;使用FAT32解决办法&rdquo;选择&ldquo;是&rdquo;（默认为&ldquo;否&rdquo;），重新生成项目即可解决问题。该方法是唯一真正针对问题所在而提出的解决方法，使清单工具可以正确更新。（此方法是官方解决方法，也比较方便，推荐，注意：一定要先配置这个选项，然后再编译工程，要不然还是不好用：）
    2．     找到你的工程的文件夹，如（myproject），找到其下的myproject\myproject\Debug\ myproject.rec，把它删掉（删掉整个Debug目录也可以），重新编译！
    3. 由于这是在链接动态运行库出现的问题，所以你可以选择代码生成的连接方式为/MTd而非/MDd，不用这些DLL文件从而避免问题的出现。该方法有一个很显然的缺点：适用范围有限，并且也不是我等提倡的解决问题的方式，不推荐该方法。
    4. 既然跟FAT32系统有关，那么我们可以选择在NTFS文件系统中开发从而避免该问题，此方法同上，也是采用的回避问题的方式，不为我等提倡。
    5. 既然问题是在更新嵌入的清单文件时发生的，由于FAT32的原因而未能更新嵌入的清单文件，于是我们有如下两种解决方法：
    （1）不启用增量链接。在项目的&ldquo;属性｜配置属性｜链接器｜常规&rdquo;中的&ldquo;启用增量链接&rdquo;选择&ldquo;否&rdquo;。此方法阻断了问题产生的源头，其每次生成exe文件时都直接嵌入清单文件，而不是默认的根据时戳而决定是否更新清单文件。
    （2）不嵌入清单文件。在项目的&ldquo;属性｜配置属性｜清单工具｜输入和输出&rdquo;中的&ldquo;嵌入清单&rdquo;选择&ldquo;否&rdquo;，从而在生成exe文件时附随生成一个清单文件（默认情况下，其文件名为exe文件的全名加上&ldquo;.manifest&rdquo;），避免了嵌入清单文件可能失败的问题。在程序运行时，会用到该清单文件。显然，这种方式使可执行程序产生了更多的外部依赖，不推荐。
      6.还有一个非常好的、一劳永逸的方法，不过使用起来要小心谨慎。这个方案可以直接在应用向导中配置，符合高级人机界面要求：
       1）     首先找到你的vs.net安装目录（如我的是E:\Program Files\Microsoft Visual Studio 8），定位到Microsoft Visual Studio 8\VC\VCWizards\AppWiz\Generic\Application文件夹，备份这个Application文件夹，不然一会你自己改咂了我可不管啊：）。
       2）     打开html\2052，看到两个文件了吧，就那个AppSettings.htm了，这个管着你的那个配置向导的界面，用UE等编辑工具打开，在266行&ldquo;                 &rdquo;后回车，然后插入一下内容：
<!-- this (hua)section is added by HUA. -->
                     <br /><br /><br /><br /><br />
                    
                 <span class="itemTextTop" id="FILE_SYSTEM_SPAN">选择你所使用的文件系统:
<p class="Spacer">&nbsp;</p>
<input type="radio" class="Radio" checked="checked" name="filesystem" id="FAT32" accesskey="F" title="FAT32" />
<div class="itemTextRadioB" id="FAT32_DIV" title="FAT32">
                         <label for="FAT32" id="FAT32_LABEL">FAT32(<span style="text-decoration: underline;">F</span>)</label>
                         </div>
<br />
                         <input type="radio" class="Radio" name="filesystem" id="NTFS" accesskey="N" title="NTFS" />
<div class="itemTextRadioB" id="NTFS_DIV" title="NTFS">
                         <label for="NTFS" id="NTFS_LABEL">NTFS(<span style="text-decoration: underline;">N</span>)</label>
                         </div>
</span>
<!-- end of (hua)section -->
好，保存关闭，这个改完了，准备下一个。
       3）     打开scripts\2052，这里就一个文件，ue打开它，找到138行&ldquo;         var bATL = wizard.FindSymbol("SUPPORT_ATL");&rdquo;其后回车，插入如下内容：
// this (hua)section is added by HUA.
         var MFTool = config.Tools("VCManifestTool");
         MFTool.UseFAT32Workaround = true;
// end of (hua)section    
         好，继续找到210行(源文件的210，你加了上边的语句就不是210了：)&ldquo;         config = proj.Object.Configurations.Item("Release");&rdquo;注意这次要在这行&ldquo;前边&rdquo;加如下内容：
// this (hua)section is added by HUA.
         if(bFAT32)
         {
             var MFTool = config.Tools("VCManifestTool");
             MFTool.UseFAT32Workaround = true;
         }
// end of (hua)section    
       好了，终于都改完了，打开你的vs.net 2005新建一个win32应用程序看看吧，效果还不错吧：）
       另外附个国外的bbs：http://forums.microsoft.com/MSDN/default.aspx?SiteID=1
Msdn的，上边有vs.net的开发人员活动，都是很官方的东西，大家可以看看。
    另外，还有一个不能称为方法的土办法：每次Build前手动删除*.ilk文件（增量链接文件）（当然可以在项目属性中写入删除命令，使其自动执行），不推荐该土办法。
    最后，总结一下：
     1. 此问题只在特定条件下才会出现：在FAT32文件系统中编译、默认设置（增量模式、不启用FAT32解决方案、嵌入清单文件）、非第一次生成可执行文件文件（即在增量连接、更新清单文件时）。
    2. 解决方案1和4.1方便实用，推荐使用。]]></description></item><item><title>我的桌面，酷毙了！</title><link>http://www.cnblogs.com/hanxi/archive/2010/12/22/1913915.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 22 Dec 2010 07:30:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/12/22/1913915.html</guid><description><![CDATA[<p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/201012/201012221532517053.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/201012/201012221532558576.png" width="616" height="494"></a></p>]]></description></item><item><title>这是我参加c语言比赛的机考试题，与大家分享下</title><link>http://www.cnblogs.com/hanxi/archive/2010/12/22/1913330.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 21 Dec 2010 23:09:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/12/22/1913330.html</guid><description><![CDATA[<p>第一题：</p><pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#define N 30

/***********************************************
*函数名称： fun
*创建时间： 2010.12.5
*作    者： huangliangming
*描    述： 对一个字符串重新排列，字母排在前面，数字排在后面，并不改变原来字母之间以及数字之间的字符顺序。
*参    数： char * s,int *m
*返 回 值： chLetter(数组chLetter[]的首元素地址)
*局部变量： char chLetter[N];
*			char chNumber[N];
*			int i,j,k;
************************************************/
char * fun(char * s,int *m)				//参数m是通过调试才想到的
{
	char chLetter[N];	//用来存放字母
	char chNumber[N];	//用来存放数字
	int i,j,k;

	i=0;	//初始化
	j=0;	//j用来记录字母的个数
	k=0;	//k用来记录数字的个数

	for (i=0; i&lt;N; i++)
	{
		if (s[i] &gt;= 'A' &amp;&amp; s[i] &lt;= 'Z'			//将字母存入chLetter[]
			|| s[i] &gt;= 'a' &amp;&amp; s[i] &lt;= 'z')
		{
			chLetter[j]=s[i];
			j++;
		}
		if (s[i] &gt;= '0' &amp;&amp; s[i] &lt;='9')			//将数字存入chNumber[]
		{
			chNumber[k]=s[i];
			k++;
		}
	}
	chLetter[j]='\0';
	chNumber[k]='\0';
	*m=j+k;										//用来返回最后输入和输出时字符的个数
	strcat(chLetter,chNumber);
	return chLetter;
}

//主函数
void main()
{
	char s[N];
	int i;
	int m;	
	char *p;
	p=NULL;
	printf("请输入字符串(30字符以内):\n");
	scanf("%s",s);
	p=fun(s,&amp;m);					//刚开始没定义出这个m来现限制指针p所指数组的长度就出现了后面两个字符乱码
	for (i=0; i&lt;m; i++)				//将返回的值复制给数组以待输出
	{
		s[i]=p[i];
	}
	
	printf("结果为：");
	for (i=0; i&lt;m; i++)				//输出结果
	{
		printf("%c",s[i]);
	}
	printf("\n");
}</pre>
<p>&nbsp;</p>
<p>第二题：</p><pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: true; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#define N 30	//s所指字符串的最大长度
#define T 2		//t1和t2所指字符串的长度

/***********************************************
*函数名称： fun
*创建时间： 2010.12.5
*作    者： huangliangming
*描    述： 将s所指字符串中最后一次出现的与t1所指字符串相同的子串替换为t2所指字符串
*参    数： char * s,char * t1, char * t2,int *m
*返 回 值： w(数组w[]的首元素地址)
*局部变量： char w[N];
*			char temp[T];
*			char t1temp[T];
*			int i,j,k,l;
************************************************/
char * fun(char * s,char * t1, char * t2,int *m)	//m的作用和第一题一样，没m最后两个字符会乱码（想寻求其他方法）		
{
	char w[N];				//用来存放处理后的字符串
	char temp[T];		//用来存放从s所指字符串中截取的子串
	char t1temp[T];		//用来存放t1所指字符串
	int i,j,k,l;
	//向t1temp中存入t1所指字符串
	for (i=0; i&lt;T;i++)
	{
		t1temp[i]=t1[i];
	}
	t1temp[T]='\0';
	
	//求m所指的值
	for (i=0;i&lt;N;i++)
	{
		if (s[i]=='\0')
		{
			*m=i;
		}
	}

	//寻找相同时的最后一个字符的下标
	for (i=0; i&lt;N; i++)
	{
		l=0;
		for (j=i; j&lt;(i+T); j++,l++)	//截取长度为T的子串存到temp[]中
		{
			temp[l]=s[j];
		}
		temp[T]='\0';

		if (strcmp(t1temp,temp) == 0)
		{
			k=i;		//k记录相同时的最后一个字符的下标
		}
	}

	for (i=0; i&lt;N; i++)	//赋值给w[]
	{
		j=0;
		if (i&gt;=k &amp;&amp; i&lt;(k+T))		//在找到的k点处开始换值
		{
			w[i]=t2[j];				//换值
			j++;
		}
		else
		{
			w[i]=s[i];
		}
	}
	
	return w;
}

//主函数
void main()
{
	char s[N];
	char t1[T];
	char t2[T];
	int i;
	int m;
	char *p;

	p=NULL;
	printf("请输入字符串(20字符以内):");
	scanf("%s",s);
	printf("请输入将要被替换的子字符串(仅限两个字符):");
	scanf("%s",t1);
	printf("请输入将要用来替换的字字符串(仅限两个字符):");
	scanf("%s",t2);
	p=fun(s,t1,t2,&amp;m);					
	for (i=0; i&lt;m; i++)				//将返回的值复制给数组以待输出
	{
		s[i]=p[i];
	}
	
	printf("结果为：");
	for (i=0; i&lt;m; i++)				//输出结果
	{
		printf("%c",s[i]);
	}
	printf("\n");
}</pre>
<p>&nbsp;</p>
<p>第三题：</p><pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: true; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

#define N 30
/***********************************************
*函数名称： fun
*创建时间： 2010.12.6
*作    者： huangliangming
*描    述： 将s所指的字符串中ASCII值为奇数的字符删除，串中剩余字符形成一个新串放在t所指的数组中。
*参    数： char * s,int * m
*返 回 值： return t,(t为指向数组的指针)
*局部变量： char * t;
*			char temp[N];
*			int i,j=0;
************************************************/

char * fun(char * s,int * m)
{
	char * t;
	char temp[N];					//临时的数组，用来存放t所指的数组
	int i,j=0;
	
	t=temp;
	for (i=0; i&lt;N; i++)
	{
		if (s[i]%2==0 )	
		{
			temp[j]=s[i];			//如果是偶数，赋值给t所指的数组
			j++;	
			if (s[i]=='\0')			//找到m的值先要找出输入了多少个字符
			{
				break;
			}
		}
	}
	*m=j;							//找到m的值即输出结果的长度
	t[j]='\0';
	return t;
}

//主函数
void main()
{
	char s[N];
	int i;
	int m;	
	char *p;

	p=NULL;
	printf("请输入字符串(30字符以内):\n");
	scanf("%s",s);
	p=fun(s,&amp;m);					//刚开始没定义出这个m来现限制指针p所指数组的长度就出现了后面两个字符乱码
	for (i=0; i&lt;m; i++)				//将返回的值复制给数组以待输出
	{
		s[i]=p[i];
	}
	
	printf("结果为：");
	for (i=0; i&lt;m; i++)				//输出结果
	{
		printf("%c",s[i]);
	}
	printf("\n");
}</pre>
<p>&nbsp;</p>
<p>如果有什么问题的话就讨论下吧</p>]]></description></item><item><title>指针函数</title><link>http://www.cnblogs.com/hanxi/archive/2010/12/08/1900748.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Wed, 08 Dec 2010 14:50:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/12/08/1900748.html</guid><description><![CDATA[<p>题目：编写一个函数fun ，其功能是：将s所指字符串中最后一次出现的与t1所指字符串相同的子串替换成t2所指字符串,所形成的新串放在w所指的数组中。在此处，要求t1和t2所指字符串的长度相同。并在主函数中设计s、t1、t2所指字符串输入并输出w所指的数组。将程序保存在TEST2.C文件中。（30分）</p>
<p>例如，当s所指字符串中的内容为："abcdabfabc"，t1所指子串中的内容为：</p>
<p>"ab"，t2所指子串中的内容为："99"时， 结果，在w所指的数组中的内容应为：</p>
<p>"abcdabf99c"。</p>
<p>代码：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:cpp">#include &lt;stdio.h&gt;  

#include &lt;string.h&gt;  

#include &lt;stdlib.h&gt;  

#define N 30    //s所指字符串的最大长度  

#define T 2     //t1和t2所指字符串的长度  

   

/***********************************************  

*函数名称： fun  

*创建时间： 2010.12.5  

*作    者： huangliangming  

*描    述： 将s所指字符串中最后一次出现的与t1所指字符串相同的子串替换为t2所指字符串  

*参    数： char * s,char * t1, char * t2,int *m  

*返 回 值： w(数组w[]的首元素地址)  

*局部变量： char w[N];  

*           char temp[T];  

*           char t1temp[T];  

*           int i,j,k,l;  

************************************************/ 

char * fun(char * s,char * t1, char * t2,int *m)    //m的作用和第一题一样，没m最后两个字符会乱码（想寻求其他方法）         

{  

    char w[N];              //用来存放处理后的字符串  

    char temp[T];       //用来存放从s所指字符串中截取的子串  

    char t1temp[T];     //用来存放t1所指字符串  

    int i,j,k,l;  

    //向t1temp中存入t1所指字符串  

    for (i=0; i&lt;T;i++)  

    {  

        t1temp[i]=t1[i];  

    }  

    t1temp[T]='\0';  

       

    //求m所指的值  

    for (i=0;i&lt;N;i++)  

    {  

        if (s[i]=='\0')  

        {  

            *m=i;  

        }  

    }  

   

    //寻找相同时的最后一个字符的下标  

    for (i=0; i&lt;N; i++)  

    {  

        l=0;  

        for (j=i; j&lt;(i+T); j++,l++)  //截取长度为T的子串存到temp[]中  

        {  

            temp[l]=s[j];  

        }  

        temp[T]='\0';  

   

        if (strcmp(t1temp,temp) == 0)  

        {  

            k=i;        //k记录相同时的最后一个字符的下标  

        }  

    }  

   

    for (i=0; i&lt;N; i++)  //赋值给w[]  

    {  

        j=0;  

        if (i&gt;=k &amp;&amp; i&lt;(k+T))      //在找到的k点处开始换值  

        {  

            w[i]=t2[j];             //换值  

            j++;  

        }  

        else 

        {  

            w[i]=s[i];  

        }  

    }  

       

    return w;  

}  

   

//主函数  

void main()  

{  

    char s[N];  

    char t1[T];  

    char t2[T];  

    int i;  

    int m;  

    char *p;  

   

    p=NULL;  

    printf("请输入字符串(20字符以内):");  

    scanf("%s",s);  

    printf("请输入将要被替换的子字符串(仅限两个字符):");  

    scanf("%s",t1);  

    printf("请输入将要用来替换的字字符串(仅限两个字符):");  

    scanf("%s",t2);  

    p=fun(s,t1,t2,&amp;m);                    

    for (i=0; i&lt;m; i++)              //将返回的值复制给数组以待输出  

    {  

        s[i]=p[i];  

    }  

       

    printf("结果为：");  

    for (i=0; i&lt;m; i++)              //输出结果  

    {  

        printf("%c",s[i]);  

    }  

    printf("\n");  

} 

</pre>
</div>
<p>经过调试了的，但想寻求更简单的方法。</p>]]></description></item><item><title>c库函数之   bcmp</title><link>http://www.cnblogs.com/hanxi/archive/2010/11/30/1892008.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 30 Nov 2010 06:14:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/11/30/1892008.html</guid><description><![CDATA[<p>原型：extern int bcmp(const void *s1, const void *s2, int n);&nbsp;</p>
<p>&nbsp;用法：#include &lt;string.h&gt;&nbsp;</p>
<p>&nbsp;功能：比较字符串s1和s2的前n个字节是否相等&nbsp;</p>
<p>&nbsp;说明：如果s1=s2或n=0则返回零，否则返回非零值。bcmp不检查NULL。&nbsp;</p>
<p>&nbsp;举例：&nbsp;</p>
<p>&nbsp;// bcmp.c&nbsp;</p>
<p>&nbsp;#include &lt;syslib.h&gt;</p>
<p>&nbsp;#include &lt;string.h&gt;&nbsp;</p>
<p>&nbsp;main()&nbsp;</p>
<p>&nbsp;{&nbsp;</p>
<p>&nbsp;　　char *s1="Golden Global View";</p>
<p>　　&nbsp;char *s2="Golden global view";</p>
<p>　　&nbsp;clrscr();&nbsp;&nbsp;// clear screen&nbsp;</p>
<p>　　&nbsp;if (!bcmp(s1,s2,7))&nbsp;</p>
<p>　　&nbsp;　　printf("s1 equal to s2 in first 7 bytes");</p>
<p>　　&nbsp;else&nbsp;</p>
<p>　　　　&nbsp;printf("s1 not equal to s2 in first 7 bytes");&nbsp;</p>
<p>　　&nbsp;getchar();&nbsp;</p>
<p>　　clrscr();&nbsp;</p>
<p>　　&nbsp;if(!bcmp(s1,s2,12))&nbsp;</p>
<p>　　　　&nbsp;printf("s1 equal to s2 in first 12 bytes");&nbsp;</p>
<p>　　&nbsp;else&nbsp;</p>
<p>　　　　&nbsp;printf("s1 not equal to s2 in first 12 bytes");&nbsp;</p>
<p>　　&nbsp;getchar();&nbsp;</p>
<p>　　&nbsp;return 0;&nbsp;</p>
<p>&nbsp;}</p>]]></description></item><item><title>自己做的一个常用定积分计算器，与大家分享下，欢迎各位提点建议，谢谢</title><link>http://www.cnblogs.com/hanxi/archive/2010/11/20/1882720.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Sat, 20 Nov 2010 12:53:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/11/20/1882720.html</guid><description><![CDATA[<p>先看下界面：</p> <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/Windows-Live-Writer/5ad3a4ce563e_1225D/image_2.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/Windows-Live-Writer/5ad3a4ce563e_1225D/image_thumb.png" width="463" height="281"></a></p> <p>菜单设置如下：</p> <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/Windows-Live-Writer/5ad3a4ce563e_1225D/image_4.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/Windows-Live-Writer/5ad3a4ce563e_1225D/image_thumb_1.png" width="359" height="289"></a></p> <p>ComboBox控件list属性设置：</p> <p><a href="http://images.cnblogs.com/cnblogs_com/hanxi/Windows-Live-Writer/5ad3a4ce563e_1225D/image_10.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/hanxi/Windows-Live-Writer/5ad3a4ce563e_1225D/image_thumb_4.png" width="305" height="110"></a></p> <blockquote><pre>Dim a#, b#                           'a为下限，b为上限

Private Sub About_Click()
MsgBox "<span style="color: #8b0000">涵曦制作</span>" + Chr(13) + Chr(10) + "<span style="color: #8b0000">有误敬请指正，谢谢使用！</span>", vbInformation, "<span style="color: #8b0000">关于</span>"
End Sub
<font color="#5e5e5e"></font>
Private Function f(x#) As Single     '计算函数表达式函数
Select Case RandFunCombo.Text        '判断随机函数列表框中的函数
Case "<span style="color: #8b0000">1+x</span>"
    f = 1 + x
Case "<span style="color: #8b0000">2x+3</span>"
    f = 2 * x + 3
Case "<span style="color: #8b0000">e^x+1</span>"
    f = Exp(x) + 1                  'Exp为自然指数函数
Case "<span style="color: #8b0000">(1+x)^2</span>"
    f = (1 + x) ^ 2
Case "<span style="color: #8b0000">x^3</span>"
    f = x ^ 3
End Select
End Function

Private Sub Evalu_Click()   '算积分按钮
IntValText.Text = Trapez
End Sub

Private Sub Quit_Click()    '退出按钮
End
End Sub

Private Sub Reset_Click()   '重置按钮
RandFunCombo.Text = "<span style="color: #8b0000"></span>"      '随机函数列表框
LowerText.Text = "<span style="color: #8b0000"></span>"         '下限输入框
CapText.Text = "<span style="color: #8b0000"></span>"           '上限输入框
IntValText.Text = "<span style="color: #8b0000"></span>"        '积分值输出框
End Sub

Private Sub Select_Click(Index As Integer)   '选择按钮函数
a = Val(LowerText.Text)     '下限的值赋给a
b = Val(CapText.Text)       '上限的值赋给b
Select Case Index
Case 0
    Call Evalu_Click        '算积分按钮
Case 1
    Call Reset_Click        '重置按钮
Case 2
    Call Quit_Click         '退出按钮
End Select
End Sub

Public Function Trapez() As Single          '用梯形法求积分函数，主要算法的函数
Dim sum#, h#, x#, i&amp;, f1#, f2#, n&amp;
'sum为黎曼和结果的变量,h为每个小梯形高度，
'x为自变量,i用来计数,f1和f2分别为梯形的上
'底和下底,n为等分数
n = 10000                                    'n为等分数为1000
'（根据计算机的性能调整精确度,n取大了会影响运行速度）
h = (b - a) / n
f1 = f(a)
sum = 0
For i = 1 To n Step 1
      x = a + i * h                          'xi
      f2 = f(x)                              'f(xi)
      sum = sum + (f1 + f2) / 2 * h
      f1 = f2
Next i
Trapez = sum                                 '应该注意留心的一条语句
End Function</pre></blockquote>
<p>个人感想：这个程序真的让我走了点弯路，首先在将事件什么分化是搞错了点，所以我觉得结构话程序设计时一定要注意将程序模块化，这方面我存在很多欠缺之处。</p>
<p>这个程序可能我这样讲的不是很清楚，如果要源文件的发Email至<a href="mailto:Minghanxi@gmail.com">Minghanxi@gmail.com</a></p>]]></description></item><item><title>C语言之最名不符实的关键字----static</title><link>http://www.cnblogs.com/hanxi/archive/2010/11/19/1882117.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Fri, 19 Nov 2010 10:34:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/11/19/1882117.html</guid><description><![CDATA[<p>昨天看了下c语言的书，感觉关键字static蛮重要的，所以就总结出来下，它有两个作用：</p> <p><strong><font size="4">第一个作用：修饰变量。</font></strong></p> <p><strong>静态全局变量</strong>，作用域仅限于变量被定义的文件中，其他文件即使用extern 声明也没法 <br>使用他。</p> <p><strong>静态局部变量，</strong>在函数体里面定义的，就只能在这个函数里用了，同一个文档中的其他 <br>函数也用不了。</p> <p>下面是书上的例子，我加了点注释：</p> <blockquote><pre><span style="color: #0000ff">static</span> <span style="color: #0000ff">int</span> j;                //j为静态全局变量。 
<span style="color: #0000ff">void</span> fun1 （<span style="color: #0000ff">void</span> ） 
{ 
	<span style="color: #0000ff">static</span> <span style="color: #0000ff">int</span> i = 0;     //i为静态局部变量。</pre><pre>       	i++;                //第二次调用这个函数时，i的值还是上次的值。
} 
<span style="color: #0000ff">void</span> fun2 （<span style="color: #0000ff">void</span> ） 
{ 
       j = 0;                 //记住j是静态全局变量。
       j++; 
} 
<span style="color: #0000ff">int</span> main() 
{ 
       <span style="color: #0000ff">for</span>(k=0; k&lt;10; k++)     //k没定义？  //k=0-&gt;9,十次循环调用。
       { 
           fun1(); 
           fun2(); 
        } 
	<span style="color: #0000ff">return</span> 0;
}</pre></blockquote>
<p>问题：最后i，j的值为多少？</p>
<p>我的答案是：i=10，j=1。因为每调用一次fun1()，就使i+1，而每次调用fun1(),j都先赋于值0再加1。<br>最后我把程序补全后在电脑上运行答案是对的。（<strong><font size="3">如果有错误，请帮忙指点下哈！！！</font></strong>）</p>
<p>补全代码为：</p>
<div><pre>#include &lt;stdio.h&gt;
<span style="color: #0000ff">static</span> <span style="color: #0000ff">int</span> j; 
<span style="color: #0000ff">int</span> fun1 (<span style="color: #0000ff">void</span>) 
{ 
	<span style="color: #0000ff">static</span> <span style="color: #0000ff">int</span> i = 0; 
	i++;
	<span style="color: #0000ff">return</span> i;
} 

<span style="color: #0000ff">int</span> fun2 (<span style="color: #0000ff">void</span>) 
{ 
	j = 0; 
	j++; 
	<span style="color: #0000ff">return</span> j;
} 
<span style="color: #0000ff">void</span> main() 
{
	<span style="color: #0000ff">int</span> m,n,k;
	<span style="color: #0000ff">for</span>(k=0; k&lt;10; k++) 
	{ 
		m=fun1(); 
		n=fun2(); 
	} 
	<span style="color: #0000ff">printf</span>("<span style="color: #8b0000">%d,%d</span>",m,n); 
}</pre></div><br><pre class="brush: cpp; auto-links: true; collapse: false; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;"><div><strong><font size="4">第二个作用：修饰函数。</font></strong></div></pre>
<p>这个功能比较简单常用，我就把原文粘贴在下面：</p>
<p>“函数前加static 使得函数成为静态函数。但此处“static”的含义 <br>不是指存储方式，而是指对函数的作用域仅局限于本文件(所以又称内部函数)。使用内部函 <br>数的好处是：不同的人编写不同的函数时，不用担心自己定义的函数，是否会与其它文件 <br>中的函数同名。 <br>&nbsp;&nbsp;&nbsp; 关键字static 有着不寻常的历史。起初，在C 中引入关键字static 是为了表示退出一个 <br>块后仍然存在的局部变量。随后，static&nbsp; 在C 中有了第二种含义：用来表示不能被其它文件 <br>访问的全局变量和函数。为了避免引入新的关键字，所以仍使用static 关键字来表示这第二 <br>种含义。 </p>
<p>&nbsp;&nbsp;&nbsp; 当然，C++里对static 赋予了第三个作用，这里先不讨论，有兴趣的可以找相关资料研 <br>究。 ”</p>
<p>其实好多问题要自己把代码补全，让计算机来验证你的答案是不是正确的。</p>]]></description></item><item><title>vb中界面设计之Frame控件和TextBox的部分使用方法</title><link>http://www.cnblogs.com/hanxi/archive/2010/11/16/vb_FrameAndTextBox.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Tue, 16 Nov 2010 08:04:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/11/16/vb_FrameAndTextBox.html</guid><description><![CDATA[<p><img src="http://pic002.cnblogs.com/images/2010/198486/2010111615421466.png" alt="" />程序要求：设计一个运行界面如上图所示，当用户在&ldquo;操作选项&rdquo;框架中选定操作后，文本框发生相应的变化，同时在&ldquo;操作说明&rdquo;框架中的标签上显示有关的操作说明<br />&nbsp;<br />现在开始：<br />&nbsp;1.设置属性值:</p>
<p><span style="color: #0000ff; text-decoration: underline;">　　Private Sub Form_Load()</span><br /><span style="color: #0000ff; text-decoration: underline;"><span style="text-decoration: underline;">　</span>　Option1.ToolTipText = "光标在文本的开始"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Option2.ToolTipText = "光标在文本的结尾"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Option3.ToolTipText = "光标在第三行的开始"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Option4.ToolTipText = "选定第三行"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Option5.ToolTipText = "选定所有文本"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　End Sub</span><br />ToolTipText只是个起着帮助或提醒一样的作用，就是鼠标停在控件上时会显示一段文字的功能。<br />当点击Option控件时，激发Label控件显示相关的操作说明，代码如下（只列出一个，其他的类似）：<br /><span style="color: #0000ff; text-decoration: underline;">　　Private Sub Option1_Click() '光标在文本的开始</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Label1.Caption = "选定了光标在文本的开始"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Label1.ToolTipText = "选定了光标在文本的开始"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　'此处还要写其他的代码，先空着</span><br /><span style="color: #0000ff; text-decoration: underline;">　　End Sub</span><br />&nbsp;2.根据程序的要求，可以利用 TextBox 的 SelStart和SelLength 属性，可以控制 TextBox 的插入点和选择行为（这些属性仅能在运行时使用）。首先，为了在 TextBox 控件中显示多行文本，要将 MultiLine 属性设置为 True。<br />获得焦点，即显示光标在文本框中用<span style="text-decoration: underline;">Text1.SetFocus</span><br />再选择光标位置，<span style="text-decoration: underline;">Text1.SelStart = 0</span>，表示光标在文本框开头；<span style="text-decoration: underline;">Text1.SelStart = Len(Text1.Text)</span>，表示光标在文本框末尾。<br />那么如何让光标跳到第三行呢？那就得知道一行能输入多少个字节，我找了好久不知道用什么函数或方法求出一行能输入的字节数，所以我就用了一个愚笨的方法求出来了，代码如下（<span style="font-size: 12pt;"><strong>如果你们知道有什么其他的方法请告诉我下哈，先谢谢啦！</strong></span>）：<br /><span style="color: #0000ff; text-decoration: underline;">　　Private Sub Option3_Click()</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Dim x As Integer</span><br /><span style="color: #0000ff; text-decoration: underline;">　　x = Len(Text1.Text)</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Text1.Text = x&rsquo;我求出来的是57</span><br /><span style="color: #0000ff; text-decoration: underline;">　　End Sub</span><br />然后就把代码修改好如下（把刚才多余的代码注释掉）：<br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　Private Sub Option3_Click()</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　'Dim x As Integer</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　Label1.Caption = "选定了光标在第三行的开始"</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　Label1.ToolTipText = "选定了光标在第三行的开始"</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　Text1.SetFocus</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　'x = Len(Text1.Text)</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　'Text1.Text = x</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　Text1.SelStart = 57 * 2</span></span><br /><span style="text-decoration: underline;"><span style="color: #0000ff;">　　End Sub</span></span><br />算出了一行所能输入的字节数，下面的步骤也就好做了，代码如下：<br /><span style="color: #0000ff; text-decoration: underline;">　　Private Sub Option4_Click()</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Label1.Caption = "选定了第三行的所有字符"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Label1.ToolTipText = "选定了第三行的所有字符"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Text1.SetFocus</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Text1.SelStart = 57 * 2</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Text1.SelLength = 57</span><br /><span style="color: #0000ff; text-decoration: underline;">　　End Sub</span></p>
<p><span style="color: #0000ff; text-decoration: underline;">　　Private Sub Option5_Click()</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Label1.Caption = "选定了所有文本"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Label1.ToolTipText = "选定了所有文本"</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Text1.SetFocus</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Text1.SelStart = 0</span><br /><span style="color: #0000ff; text-decoration: underline;">　　Text1.SelLength = Len(Text1.Text)</span><br /><span style="color: #0000ff; text-decoration: underline;">　　End Sub</span></p>
<p>　　<img src="http://pic002.cnblogs.com/images/2010/198486/2010111615551530.jpg" alt="" /></p>
<p>那个windows live write还没弄好，代码就没那么好加亮。好了，就这样吧。<br />奇了怪了，下面没有vb这类编程语言。就放在&lsquo;面向对象&rsquo;区吧！</p>]]></description></item><item><title>关于需要学习什么编程语言和要学多少种编程语言的一点点看法</title><link>http://www.cnblogs.com/hanxi/archive/2010/11/15/hanxi_firstnote.html</link><dc:creator>涵曦</dc:creator><author>涵曦</author><pubDate>Mon, 15 Nov 2010 07:18:00 GMT</pubDate><guid>http://www.cnblogs.com/hanxi/archive/2010/11/15/hanxi_firstnote.html</guid><description><![CDATA[<p>　　我们要学多少种编程语言好呢？编程语言太多了，比如说：c,c++,vb,java等等。在选择上就出现了个大问题，不可能每门语言都学，都学的话肯定学的不深。那我们改选择哪几种呢，该怎么去学呢？在这里我不能告诉大家怎么去学，怎么去选。我在这里只是说一下我以前是怎么去学的和以后怎么继续去学。</p>
<p>　　我是<span style="text-decoration: underline;">信息与计算科学专业</span>的，大一的时候，就开了一门编程语言《<span style="text-decoration: underline;">c语言程序设计</span>》，这是一门很基础很重要的编程语言，我也认认真真的去学了。通过学习c语言学到了很多重要的算法，比如说：排序的三种经典算法（冒泡法，选择法，快速法），递归算法，迭代算法等等。在大一期间，对我最受影响的是我看了一本小说《<span style="text-decoration: underline;">疯狂的程序员</span>》&mdash;绝影。这本小说对我激发很大，虽然我只是计算机相关专业而非计算机专业的，就像绝影一样。跟着我也就喜欢上了<span style="text-decoration: underline;">汇编语言</span>，大一下学期我就在旧书店买了一本汇编语言的书，汇编确实很难，没看懂多少。到了大二，不知学校怎么搞的，竟然学起VB来了，这让我很纳闷，因为我觉得c比vb难，怎么先学难的再学简单的呢？听到我的计算机老师解释了之后才知道，在这个学期结束之后还有个<span style="text-decoration: underline;">c/c++程序语言课程设计</span>，学习vb是为了学到<span style="text-decoration: underline;">面向对象的程序设计方法</span>，然后再很好的用<span style="text-decoration: underline;">c语言（C++）</span>。听说下学期会有<span style="text-decoration: underline;">c++程序设计</span>这门课程。现在，我还在学汇编语言，汇编语言确实是一门挺难的程序设计语言，但是通过对汇编的学习可以让自己摸清程序运行的过程。当然c++我也在学（赶在老师前面也不错哦，大一时老师讲c语言第一章我就看到第六章了）。</p>
<p>　　以后我还会在汇编和c上下苦功夫的，其他的也会学一点的。我会好好学的。</p>
<p>　　学这方面的东西只要学会一种，再去学习其他的就容易了，他们之间都是相通的。我认为并不要每一种语言都学得怎么的好，只要略懂一二就行了，但是要学好就得把一门语言学精来。</p>
<p>　　这是我在<strong>博客园</strong>写的第一篇文章，以后我会在这记录我学习过程中的点点滴滴的。</p>]]></description></item></channel></rss>